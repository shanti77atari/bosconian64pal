mads 2.0.4 build 13 (8 May 16)
Source: b.asm
     1 				;poprawiona szybkość formacji, wybuchy wszystkich przeciwników i rakiet po zaliczeniu levelu
     2 				;nowa procedura rysuje przezroczyste napisy przy punktach za formację i spy
     3 				;enemy nie znikaja po trafieniu, po zderzeniu z enemy statek enemy wybucha
     4
     5 = 0001			TITLESCREEN	= 1
     6 = 0001			UC=1		;undocumented
     7
     8 				.IF .DEF TITLESCREEN
     9 							opt h-
    10  FF FF 00 20 82 24 F0 +  			ins "titlePALfix.xex"
    11  FF FF 00 20 48 2C A0 +  			ins "logoPAL.xex"
    12 							opt h+
    13 				 .ENDIF
    14 							
    15 							
    16 							
    17
    18 = D01F			CONSOL		equ $D01F
    19 = D40B			VCOUNT		equ $D40B
    20 = D40A			WSYNC		equ $D40A
    21 = 02C4			COLPF0S		equ 708
    22 = 02C5			COLPF1S		equ 709
    23 = 02C6			COLPF2S		equ 710
    24 = 02C7			COLPF3S		equ 711
    25 = 02C8			COLBAKS		equ 712
    26 = D01A			COLBAK		equ $D01A
    27 = D016			COLPF0		equ $D016
    28 = D017			COLPF1		equ $D017
    29 = D018			COLPF2		equ $D018
    30 = D019			COLPF3		equ $D019
    31 = D20A			RANDOM		equ $D20A
    32 = 0230			DLPTRS		equ $0230
    33 = D402			DLPTR		equ $D402
    34 = 02F4			CHBAS		equ $02F4
    35 = D409			CHBASE		equ $D409
    36 = D01B			GTIACTL		equ $D01B  ;priorytet wyswietlania kolorow i duszkow +piaty duszek
    37 = 026F			GTIACTLS	equ $26F
    38 = D01D			PMCTL		equ $D01D
    39 = 022F			DMACTLS		equ $022F
    40 = D400			DMACTL		equ $D400
    41 = D407			PMBASE		equ $D407
    42 = D000			HPOSP		equ $D000
    43 = D004			HPOSM		equ $D004
    44 = D012			COLPM		equ $D012
    45 = 02C0			COLPMS		equ $02C0
    46 = D00C			SIZEM		equ $D00C
    47 = D008			SIZEP		equ $D008
    48 = D405			VSCROL		equ $D405
    49 = D404			HSCROL		equ $D404
    50 = D208			AUDCTL		equ $D208
    51 = D200			AUDF1		equ $D200
    52 = D202			AUDF2		equ $D202
    53 = D204			AUDF3		equ $D204
    54 = D206			AUDF4		equ $D206
    55 = D20E			IRQEN		equ $D20E
    56 = 0216			VTIMER1		equ $0216
    57 = 0214			VTIMER4		equ $0214
    58 = D209			STIMER		equ $D209
    59 = D201			AUDC1		equ $D201
    60 = D203			AUDC2		equ $D203
    61 = D205			AUDC3		equ $D205
    62 = D207			AUDC4		equ $D207
    63 = 0200			DLIV		equ $0200
    64 = D40E			NMIEN		equ $D40E
    65 = D300			JOY			equ $D300
    66 = D010			FIRE		equ $D010
    67 = 0222			VBLKI		equ $222
    68 = 0224			VBLKD		equ $224	
    69 = D20F			SKCTL		equ $d20f
    70 = D00D			GRAFP0		equ $d00d
    71 = D00E			GRAFP1		equ $d00e
    72 = D00F			GRAFP2		equ $d00f
    73 = D010			GRAFP3		equ $d010
    74 = D011			GRAFM		equ $d011
    75 = D301			PORTB		equ $d301
    76
    77
    78
    79 				;zmienne
    80
    81
    82 = 0000			sfx_effect		equ 0
    83 = 0001			sfx_extra		equ 1
    84 = 0002			sfx_wybuch		equ 2
    85 = 0003			sfx_dzialko 	equ 3
    86 = 0004			sfx_asteroid	equ 4
    87 = 0005			sfx_bomba		equ 5
    88 = 0006			sfx_dead		equ 6
    89 = 0007			sfx_antyair		equ 7
    90 = 0008			sfx_enemyHit	equ 8
    91 = 0009			sfx_rakieta		equ 9
    92 = 000A			pociski			equ 10 ;11,12,13,14
    93
    94 = 000F			formacja_stan	equ 15
    95 = 0010			extraLicznik	equ 16
    96 = 0011			licznikStrzal	equ	17
    97 = 0012			sfxLicznik1		equ 18
    98 = 0013			liczbaPociskow	equ 19
    99 = 0014			newPoziom		equ 20
   100 = 0015			formacja_radar	equ 21
   101 = 0016			trafienie		equ 22
   102 = 0017			strzal			equ 23	;24,25,26
   103 = 001B			max_Enemy		equ 27
   104 = 001C			ile_Enemy		equ 28
   105 = 001D			jestSpy			equ 29
   106 = 001E			nobanner		equ 30
   107 = 001F			movY			equ 31
   108
   109 = 0020			score			equ 32 ;33,34
   110
   111
   112 = 00E3			posx 	equ 227	
   113 = 00E4			posY	equ 228	
   114 = 00E5			movX	equ 229	
   115 = 00E6			mryganieRadarX equ 230	
   116 = 00E7			movX0	equ 231	
   117 = 00E8			movY0	equ 232	
   118 = 00E9			movYs	equ 233	
   119 = 00EA			sirq	equ 234	
   120 = 00EB			ramka	equ 235	
   121 = 00EC			vblFlaga	equ 236	
   122 = 00ED			pauza	equ 237	
   123 = 00EE			stan_gry	equ 238	
   124 = 00EF			speedEnemy	equ 239	
   125 = 00F0			startMapy	equ 240	
   126 = 00F1			lastEnemy	equ 241	
   127
   128
   129 = 00F2			vblX	equ 242	
   130 = 00F3			vblY	equ 243	
   131 = 00F4			vblA	equ 244	
   132 = 00F5			znacznik	equ 245	
   133 = 00F6			bazyIle	equ 246			;ile baz
   134
   135
   136 = 00F7			pom0	equ 247	
   137 = 00F8			pom0a	equ 248	
   138 = 00F9			pom0b	equ 249	
   139 = 00FA			pom0c	equ 250	
   140 = 00FB			pom0d	equ 251	
   141 = 00FC			pom0e	equ 252	
   142 = 00FD			pom0f	equ 253	
   143 = 00FE			kolpom0	equ 254
   144 = 00FF			zegar	equ 255	; wcześniej 20
   145
   146 = 0024			rodzajSpeech	equ 36
   147 = 0025			kolorPanel		equ 37
   148 = 0060			poz0			equ strz0a		;wykorzystane w title
   149 = 0061			kol0			equ strz0b
   150 = 0026			ile_rpt		equ 38
   151 				;komunikat	equ 36
   152 				;komunikatL1	equ 37
   153 				;komunikatS	equ 38
   154 = 0027			scoreZmiana	equ 39
   155
   156 = 0028			licznikPokey	equ 40
   157 = 0029			rejX	equ 41
   158 = 002A			rejA	equ 42
   159 = 002B			kat1	equ 43
   160 = 002C			kat2	equ 44
   161 = 002D			znakDX	equ 45
   162 = 002E			znakDY	equ 46
   163 = 002F			znakX	equ 47 ;18
   164 = 0041			znakY	equ znakX+18	;18
   165 = 0053			muzyka	equ 83
   166 = 0054			rejY	equ 84
   167 = 0055			pom0g	equ 85
   168 = 0056			flaga	equ 86
   169 = 0057			maxPociskow equ 87
   170 = 0058			spySpeed	equ 88
   171
   172 = 0059			ramka4	equ 89
   173 = 005A			bombIle	equ 90
   174 = 005B			czyRakiety	equ 91
   175 = 005C			rads	equ 92
   176 = 005D			powtorz	equ 93
   177 = 005E			sJoy	equ 94
   178
   179 = 005F			strz0	equ 95
   180 = 0060			strz0a	equ 96
   181 = 0061			strz0b	equ 97
   182 = 0062			strz0c	equ 98
   183 = 0063			strz0d	equ 99
   184 = 0064			strz0e	equ 100
   185 = 0065			strz0f	equ 101
   186 = 0066			strz	equ 102
   187 = 0068			strz1	equ 104
   188
   189 = 007E			sam		equ 126
   190 = 0080			pom		equ 128
   191 = 0082			pom1	equ 130
   192 = 0084			pom2	equ 132
   193 = 0086			pom3	equ 134
   194 				;od 136 do ~ 186 gwiazdy
   195 = 0088			screenL	equ 136 ;137
   196 = 008A			screenH	equ 138	;139
   197
   198
   199 = 00BC			enemyColor	equ 188	;i 187
   200
   201 = 00BD			kondycja	equ 189
   202 = 00BE			pociskiTlo	equ 190	;191,192,193,194
   203 = 00C3			pociskiZnakX equ 195	;196,197,198,199
   204
   205
   206
   207 = 00B1			pozWyniki	equ 177  ;pozycja tabeli wynikow
   208 = 0004			OPTION		equ 4
   209 = 0002			SELECT		equ 2
   210 = 0001			START		equ 1
   211
   212 = 0180			bufore3	equ $180
   213
   214
   215 = D800			znaki1	equ $D800		;2 bit w starszym bajcie skasowany
   216 = DC00			znaki2	equ znaki1+$400	;drugi zestaw znakow
   217 = 0200			obraz1a	equ $200
   218 = 0388			obraz1	equ obraz1a+8+8*48
   219 = 08F8			obraz2a	equ obraz1+28*48+48
   220 = 0A80			obraz2	equ obraz2a+8+8*48
   221
   222 = 0003			b					equ 3	;11		;nr pierwszego zanku bazy
   223 = 001F			firstBombaChar		equ b+28		;pierwszy znak bomby
   224 = 0023			firstMeteorChar		equ firstBombaChar+4		;meteoru
   225 = 0027			firstRakietaChar	equ firstMeteorChar+4
   226 = 002F			firstWybuchChar		equ firstRakietaChar+8	;47
   227 = 003F			firstMalyWybuchChar	equ firstWybuchChar+16	;+20	;63
   228 = 0041			firstStrzalChar		equ firstMalyWybuchChar+2 ;63+2=65	
   229 = 0045			firstPociskChar		equ firstStrzalChar+4	;65+4=69
   230 															;69+5=74 duszki
   231 = 0010			startWyniki equ 16
   232 = 001D			lenDlist	equ 29	;ilosc linii ekranu w dlist
   233
   234 = 0000			EKOLOR0		equ 0		;duszek przyjmuje kolor tła, oprócz gwiazd
   235 = 0080			EKOLOR1		equ 128		;duszek wymusza negatyw
   236
   237
   238
   239 				;kolory
   240 = 0036			kolorCzerwony	equ $36		;PAL
   241 = 0036			kolorHiscore	equ $36  ;czerwony
   242 = 0050			kolorMapa		equ $50  ;fioletowy	
   243 = 004A			kolorRound		equ $4a
   244 = 008A			kolor1ups		equ $8a
   245 = 00BA			kolorLevel		equ $ba
   246 = 0034			kolorLogo		equ $34
   247 = 00EA			kolorYellow		equ $ea
   248 = 00B8			kolorGreen		equ $b8
   249 = 0034			kolorRed		equ $34
   250
   251 = 005A			ColorShip=$5a
   252
   253 = 0028			KOLOR1			equ $28
   254 = 0034			KOLOR3			equ $34
   255
   256
   257 = 000C			kolorLiczby		equ $0c  ;bialy
   258 = 00B4			pozliczby		equ 180
   259
   260
   261 				;zmienne
   262 = 1934			rads1			equ strzalY+52		;co zmazac 0->statek, 1->formacje <0 nic nie zmazuj
   263 = 1935			enlicznik		equ rads1+1		;6 bajtow
   264 = 193B			enRotate		equ rads1+7		;6 bajtow
   265
   266 = 1941			formacja_typ	equ rads1+13
   267 = 1942			formacja_maska	equ rads1+14
   268 = 1943			formacja_speed	equ rads1+15
   269 = 1944			czy_6enemy		equ rads1+16
   270 = 1945			opoz_denemy		equ rads1+17 ;jak często pojawia się nowy enemy
   271 = 1946			opoz_dlosuj		equ rads1+18 ;jak czesto pojawiaja sie spy i formacja
   272 = 1947			flaghscore		equ rads1+19		
   273 = 1948			rotate_speed1	equ rads1+20
   274 = 1949			rotate_speed1d	equ rads1+21
   275 = 194A			rotate_speed2	equ rads1+22
   276 = 194B			rotate_speed2d	equ rads1+23
   277
   278 = 194C			zbiteBazy	 	equ rads1+24
   279 = 194D			czasOtwarcia	equ rads1+25
   280 = 194E			czasZamkniecia	equ rads1+26
   281 = 194F			startX			equ rads1+27
   282 = 1950			startY			equ rads1+28
   283 = 1951			poziom			equ rads1+29
   284 = 1952			waitWybuch		equ rads1+30
   285 = 1953			plusScore		equ rads1+31	;2 bajty
   286
   287 = 1955			spyScore		equ rads1+33
   288 = 1956			spyscoreX		equ rads1+34
   289 = 1957			spyscoreY		equ rads1+35
   290 = 1958			lives			equ rads1+36
   291 = 1959			kondycja_stan	equ rads1+37
   292 = 195A			antyairOpoznienie equ rads1+38
   293
   294 = 195B			licznikBazyEkran  equ rads1+39	;liczba baz rysowanych na ekranie
   295 = 195C			licznikBombyEkran equ rads1+40
   296 = 195D			gwiazdyLicznik	  equ rads1+41
   297 = 195E			opoz_potrafieniu  equ rads1+42
   298
   299 = 195F			czyJadroA		equ rads1+43
   300 = 1960			czyJadroB		equ rads1+44
   301 = 1961			licznikJadroA	equ rads1+45
   302 = 1962			licznikJadroB	equ rads1+46
   303 = 1963			openA			equ rads1+47
   304 = 1964			openB			equ rads1+48
   305 = 1965			opozCoreA		equ rads1+49
   306 = 1966			opozCoreB		equ rads1+50
   307 = 1967			liczCoreA		equ rads1+51
   308 = 1968			liczCoreB		equ rads1+52
   309
   310 = 1969			opoznienieFire 	equ rads1+53
   311 = 196A			sFire			equ rads1+54
   312
   313
   314
   315 = 196B			dlicz1			equ rads1+55
   316
   317 = 196C			formacjaX		equ rads1+56
   318 = 196D			forLicznik		equ rads1+57
   319 = 196E			formacja_zbite	equ rads1+58
   320 = 196F			dowodca			equ rads1+59
   321
   322 = 1970			fazaWybuch		equ rads1+60
   323 = 1971			przecinek		equ rads1+61
   324 = 1972			enemyPosX		equ rads1+62	;6b
   325 = 1978			enemyPosY		equ rads1+68	;6b	
   326
   327 = 197E			rak_flag		equ rads1+74
   328 = 197F			timeLevel		equ rads1+75
   329
   330 = 0171			enemyNegatyw	equ $171		;8b
   331 = 0179			enemyEkran		equ $179		;8b		
   332 = 0181			enemyLastFaza	equ $181		;8b
   333 = 0189			enemyWybuch		equ $189		;8b
   334 = 0191			enemyOraTab		equ $191		;8b 	
   335
   336 = 0199			wybuchyStart	equ $199
   337 = 019A			wybuchyStop		equ $19a
   338 = 019B			mwybuchyStart	equ $19b
   339 = 019C			mwybuchyStop	equ $19c
   340
   341 = 18FC			spylicznik		equ zmazTab+8
   342 = 18FD			spylicznik1		equ spylicznik+1
   343 = 18FE			licznikSpyScore	equ spylicznik+2
   344 = 18FF			losuj1 			equ spylicznik+3
   345
   346 							org $9000
   347 FFFF> 9000-9116> 70 70 + dli_graph	dta b(112),b(112),b(112)
   348 9003 4A 34 90					dta b($4a),a(bosco_graph)
   349 9006 4A 34 90					dta b($4a),a(bosco_graph)
   350 9009 0A						dta b($a)
   351 900A 4A 44 90					dta b($4a),a(bosco_graph+$10)
   352 900D 0A						dta b($a)
   353 900E 4A 54 90					dta b($4a),a(bosco_graph+$20)
   354 9011 0A						dta b($a)
   355 9012 4A 64 90					dta b($4a),a(bosco_graph+$30)
   356 9015 0A						dta b($a)
   357 9016 4A 74 90					dta b($4a),a(bosco_graph+$40)
   358 9019 0A						dta b($a)
   359 901A 4A 84 90					dta b($4a),a(bosco_graph+$50)
   360 901D 0A						dta b($a)
   361 901E 4A 94 90					dta b($4a),a(bosco_graph+$60)
   362 9021 0A						dta b($a)
   363 9022 4A A4 90					dta b($4a),a(bosco_graph+$70)
   364 9025 0A						dta b($a)
   365 9026 4A B4 90					dta b($4a),a(bosco_graph+$80)
   366 9029 0A						dta b($a)
   367 902A 4A C4 90					dta b($4a),a(bosco_graph+$90)
   368 902D 0A						dta b($a)
   369 902E 4A D4 90					dta b($4a),a(bosco_graph+$a0)
   370 9031 41 00 90					dta b($41),a(dli_graph)
   371 							
   372 9034 00			bosco_graph	dta b(0)
   373 9035 55 40					dta b(%01010101,%01000000)
   374 9037 00 00 00 00 00 00 + 			:14 dta b(0)
   375 9045 50 50					dta b(%01010000,%01010000)
   376 9047 00 00 00 00 00 00 + 			:14 dta b(0)
   377 9055 90 10					dta b(%10010000,%00010000)
   378 9057 00 00 00 00 00 00 + 			:14 dta b(0)
   379 9065 A0 A0					dta b(%10100000,%10100000)
   380 9067 00 00 00 00 00 00 + 			:14 dta b(0)
   381 9075 AA 80					dta b(%10101010,%10000000)
   382 9077 00 00 00 00 00 00 + 			:14 dta b(0)
   383 9085 A0 A0 15 01 50 15 + 			dta b(%10100000,%10100000,%00010101,%00000001,%01010000,%00010101,%01000001,%01010000,%01000000,%01000100,%00010101,%00000100,%00000100)
   384 9092 00 00 00					:3 dta b(0)
   385 9095 A0 28 A2 46 00 60 + 			dta b(%10100000,%00101000,%10100010,%01000110,%00000000,%01100000,%01001010,%00100100,%10010000,%10001000,%10100010,%01001001,%00001000)
   386 90A2 00 00 00					:3 dta b(0)
   387 90A5 A0 28 80 8A A0 80 + 			dta b(%10100000,%00101000,%10000000,%10001010,%10100000,%10000000,%00001000,%00001000,%10101000,%10001000,%10000000,%10001010,%10001000)
   388 90B2 00 00 00					:3 dta b(0)
   389 90B5 A0 28 80 80 28 80 + 			dta b(%10100000,%00101000,%10000000,%10000000,%00101000,%10000000,%00001000,%00001000,%10001010,%10001000,%10101010,%10001000,%10101000)
   390 90C2 00 00 00					:3 dta b(0)
   391 90C5 EA AC E2 8C 28 E0 + 			dta b(%11101010,%10101100,%11100010,%10001100,%00101000,%11100000,%10001110,%00101000,%10000010,%10001000,%10000000,%10001000,%00101000)
   392 90D2 00 00 00					:3 dta b(0)
   393 90D5 FF F0 3F 0F F0 3F + 			dta b(%11111111,%11110000,%00111111,%00001111,%11110000,%00111111,%11000011,%11110000,%11000000,%11001100,%11000000,%11001100,%00001100)
   394 90E2 00 00					:2 dta b(0)					
   395 							
   396 = 90E4			iniscr		equ *
   397 90E4 A5 14					lda 20
   398 90E6 C5 14		@			cmp 20
   399 90E8 F0 FC					beq @-
   400
   401 90EA A9 00 8D C8 02				mva #0 712
   402 90EF 8D 1A D0					sta COLBAK
   403
   404
   405 90F2 A9 86					lda #$86	;PAL
   406 90F4 A2 34					ldx #$34
   407 90F6 A0 FA					ldy #$fa
   408 							
   409 90F8 8D C4 02					sta colpf0s
   410 90FB 8E C5 02					stx COLPF1s
   411 90FE 8C C6 02					sty COLPF2s	
   412 						
   413 9101 A9 00 8D 30 02 A9 + 			mwa #dli_graph DLPTRs
   414 						
   415 910B A9 39 8D 2F 02				mva #57 DMACTLs		;pokaz ekran
   416 							
   417 9110 A5 14					lda 20
   418 9112 C5 14		@			cmp 20
   419 9114 F0 FC					beq @-
   420 										
   421 9116 60						rts
   422
   423 02E2-02E3> E4 90					ini (iniscr)
   424
   425
   426 9117						icl 'banki.asm'
Source: banki.asm
     1 = 00FF			ROM_on	equ %11111111
     2 = 00FE			BANK0	equ %11111110
     3
     4
     5 = 00CB			bom0	equ 203
     6 = 00CC			bom0a	equ 204
     7 = 00CD			bom		equ 205
     8 = 00CF			bom1	equ 207
     9 = 00CB			bom2	equ 203
    10
    11 = FB10			ad_Jadra		equ $fb10
    12 = FB18			ksztaltJadroA0	equ ad_Jadra+8 
    13 = FB28			ksztaltJadroA1	equ ksztaltJadroA0+16
    14 = FB38			ksztaltJadroA2	equ ksztaltJadroA1+16
    15 = FB48			ksztaltJadroA3	equ ksztaltJadroA2+16
    16 = FB58			ksztaltJadroA4	equ ksztaltJadroA3+16	
    17 = FB68			ksztaltJadroA5	equ ksztaltJadroA4+16
    18 = FB78			ksztaltJadroA6	equ ksztaltJadroA5+16
    19 = FB88			ksztaltJadroB0	equ ksztaltJadroA6+16
    20 = FB98			ksztaltJadroB1	equ ksztaltJadroB0+16
    21 = FBA8			ksztaltJadroB2	equ ksztaltJadroB1+16
    22 = FBB8			ksztaltJadroB3	equ ksztaltJadroB2+16
    23 = FBC8			ksztaltJadroB4	equ ksztaltJadroB3+16
    24 = FBD8			ksztaltJadroB5	equ ksztaltJadroB4+16
    25 = FBE8			ksztaltJadroB6	equ ksztaltJadroB5+16
    26 = F500			statek		equ $f500	;$2000
    27 = 1A00			tabX		equ $1a00
    28 					
    29 = F600			adresZnakL	equ $f600
    30 = F700			adresZnakH	equ $f700	
    31
    32 = E000			enemy1adr	equ $E000	;, ksztalty
    33 = E200			enemy3adr	equ enemy1adr+$200	; ksztalty	+512
    34 = E400			enemy5adr	equ enemy3adr+$200	; SPY
    35 = E600			explo_adr	equ enemy5adr+$200
    36
    37
    38 = E660			tLShif		equ explo_adr+96
    39 = E664			tHShif		equ tLShif+4
    40
    41 = E800			mask			equ shpBuf+$100		;$e800
    42 = E900			scolor0		equ mask+$100			;enemy1	;e900
    43 = EA00			scolor1		equ scolor0+$100		;enemy2
    44 = EB00			scolor2		equ scolor1+$100		;spy
    45 = EC00			scolor3		equ scolor2+$100		;explo	;ec00
    46 = ED00			ShifRight2H	equ scolor3+$100		;ed00
    47 = EE00			ShifRight2L	equ ShifRight2H+$100
    48 = EF00			ShifRight4H	equ ShifRight2L+$100
    49 = F000			ShifRight4L	equ ShifRight4H+$100	;f000
    50 = F100			ShifRight6H	equ ShifRight4L+$100
    51 = F200			ShifRight6L	equ ShifRight6H+$100	;f200
    52
    53 = F808			znakiBosc	equ $F808		;38*8=304 bajty
    54 = F8E8			cyfryBosc	equ znakiBosc+28*8
    55
    56
    57 = 1800			enemyTab1	equ $1800
    58 = 1830			fazaTab1	equ enemyTab1+48
    59 = 1834			tab5		equ fazaTab1+4
    60 = 1837			tablives	equ tab5+3
    61 = 183D			SpyScoreTab	equ tablives+6
    62 = 1840			conditionC	equ SpyScoreTab+3
    63 = 1843			fazaTab		equ conditionC+3
    64
    65 = 1880			obraz1L		equ $1880			;4*29=116 		
    66 = 189D			obraz1H		equ obraz1L+29
    67 = 18BA			obraz2L		equ obraz1H+29
    68 = 18D7			obraz2H		equ obraz2L+29
    69 = 18F4			zmazTab		equ obraz2H+29		;8b	(4b wolne), reszta w b.asm
    70
    71
    72 = 1900			strzalY		equ $1900
    73 = 1904			strzalX		equ strzalY+4
    74 = 1908			strzalX1	equ strzalY+8
    75 = 190C			strzalX2	equ strzalY+12
    76 = 1910			strzalX3	equ strzalY+16
    77
    78 = 1914			strzalY1	equ strzalY+20
    79 = 1918			strzalY2	equ strzalY+24
    80 = 191C			strzalY3	equ strzalY+28
    81 = 1920			strzalYbit	equ strzalY+32
    82 = 1924			strzalKierunek	equ strzalY+36
    83 = 1928			strzalTlo	equ strzalY+40
    84 = 192C			strzalTlo1	equ strzalY+44
    85 = 1930			strzalXbit	equ strzalY+48		;(52b zajete), reszta w b.asm
    86
    87 				;enemyTab2	equ $1600	;$fe00		;można przenieść do $1600, zwolni się 2 duszek.
    88
    89 = CE00			enemyTabX=$ce00
    90 = CF00			enemyTabY=$cf00
    91
    92 9117						org $2600	;$7600
    93 							
    94 = 2600			znaki_ad	equ *	
    95 2600-3876> 00 00 00 00 + 	dta b(0,0,0,0,0,0,0,0)
    96 					
    97 2608 00 00 00 00 00 00 + 	dta b(0,0,0,0,0,0,0,0)	;znak #1 gwiazda
    98 2610 00 00 00 00 00 00 + 	dta b(0,0,0,0,0,0,0,0)	;2 gwiazda
    99 					
   100 				;bazy
   101 2618 03				dta b(%00000011)		;1 znak  stacji
   102 2619 0F				dta b(%00001111)
   103 261A 3F				dta b(%00111111)
   104 261B 3F				dta b(%00111111)
   105 261C 0C				dta b(%00001100)
   106 261D FF				dta b(%11111111)
   107 261E FD				dta b(%11111101)
   108 261F F6				dta b(%11110110)
   109 					
   110 2620 56				dta b(%01010110)		;znak3
   111 2621 FD				dta b(%11111101)
   112 2622 FF				dta b(%11111111)
   113 2623 0C				dta b(%00001100)
   114 2624 3F				dta b(%00111111)
   115 2625 3F				dta b(%00111111)
   116 2626 0F				dta b(%00001111)
   117 2627 03				dta b(%00000011)
   118 					
   119 2628 C0				dta b(%11000000)		;znak4
   120 2629 30				dta b(%00110000)
   121 262A CC				dta b(%11001100)
   122 262B FC				dta b(%11111100)
   123 262C 30				dta b(%00110000)
   124 262D FF				dta b(%11111111)
   125 262E 7F				dta b(%01111111)
   126 262F 95				dta b(%10010101)
   127 					
   128 2630 9F				dta b(%10011111)		;znak5
   129 2631 7F				dta b(%01111111)
   130 2632 FF				dta b(%11111111)
   131 2633 30				dta b(%00110000)
   132 2634 FC				dta b(%11111100)
   133 2635 CC				dta b(%11001100)
   134 2636 30				dta b(%00110000)
   135 2637 C0				dta b(%11000000)
   136 					
   137 2638 00				dta b(%00000000)		;znak6
   138 2639 00				dta b(%00000000)
   139 263A 00				dta b(%00000000)
   140 263B 00				dta b(%00000000)
   141 263C 00				dta b(%00000000)
   142 263D 00				dta b(%00000000)
   143 263E 3F				dta b(%00111111)
   144 263F 00				dta b(0)
   145 					
   146 2640 3F				dta b(%00111111)		;znak7
   147 2641 3F				dta b(%00111111)
   148 2642 00				dta b(%00000000)
   149 2643 00				dta b(%00000000)
   150 2644 00				dta b(%00000000)
   151 2645 00				dta b(%00000000)
   152 2646 00				dta b(%00000000)
   153 2647 00				dta b(%00000000)
   154 					
   155 2648 03				dta b(%00000011)		;znak8
   156 2649 0F				dta b(%00001111)
   157 264A 0C				dta b(%00001100)
   158 264B 03				dta b(%00000011)
   159 264C 03				dta b(%00000011)
   160 264D 00				dta b(%00000000)
   161 264E 00				dta b(%00000000)
   162 264F 00				dta b(%00000000)
   163 					
   164 2650 00				dta b(%00000000)		;znak9
   165 2651 C0				dta b(%11000000)
   166 2652 C0				dta b(%11000000)
   167 2653 F0				dta b(%11110000)
   168 2654 30				dta b(%00110000)
   169 2655 FC				dta b(%11111100)
   170 2656 CC				dta b(%11001100)
   171 2657 30				dta b(%00110000)
   172 					
   173 2658 C0				dta b(%11000000)		;znak10
   174 2659 F0				dta b(%11110000)
   175 265A 30				dta b(%00110000)
   176 265B C0				dta b(%11000000)
   177 265C C0				dta b(%11000000)
   178 265D 00				dta b(%00000000)
   179 265E 00				dta b(%00000000)
   180 265F 00				dta b(%00000000)
   181 					
   182 2660 00				dta b(%00000000)		;znak11
   183 2661 03				dta b(%00000011)
   184 2662 03				dta b(%00000011)
   185 2663 0F				dta b(%00001111)
   186 2664 0C				dta b(%00001100)
   187 2665 3F				dta b(%00111111)
   188 2666 33				dta b(%00110011)
   189 2667 0C				dta b(%00001100)
   190 					
   191 2668 30				dta b(%00110000)		;znak12
   192 2669 F0				dta b(%11110000)
   193 266A F0				dta b(%11110000)
   194 266B F0				dta b(%11110000)
   195 266C 3C				dta b(%00111100)
   196 266D 3C				dta b(%00111100)
   197 266E 3C				dta b(%00111100)
   198 266F 30				dta b(%00110000)
   199 					
   200 2670 0C				dta b(%00001100)		;znak13
   201 2671 0F				dta b(%00001111)
   202 2672 0F				dta b(%00001111)
   203 2673 0F				dta b(%00001111)
   204 2674 3C				dta b(%00111100)
   205 2675 3C				dta b(%00111100)
   206 2676 3C				dta b(%00111100)
   207 2677 0C				dta b(%00001100)
   208 					
   209 2678 00				dta b(%00000000)		;znak 14 I
   210 2679 03				dta b(%00000011)
   211 267A 03				dta b(%00000011)
   212 267B 03				dta b(%00000011)
   213 267C 03				dta b(%00000011)
   214 267D 03				dta b(%00000011)
   215 267E 03				dta b(%00000011)
   216 267F 00				dta b(%00000000)
   217 					
   218 2680 00				dta b(%00000000)		;znak 15 I
   219 2681 C0				dta b(%11000000)
   220 2682 80				dta b(%10000000)
   221 2683 C0				dta b(%11000000)
   222 2684 C0				dta b(%11000000)
   223 2685 80				dta b(%10000000)
   224 2686 C0				dta b(%11000000)
   225 2687 00				dta b(%00000000)
   226 					
   227 2688 00				dta b(0)				;znak 16  schoda wdol
   228 2689 30				dta b(%00110000)
   229 268A 0C				dta b(%00001100)
   230 268B 30				dta b(%00110000)
   231 268C 3C				dta b(%00111100)
   232 268D 0C				dta b(%00001100)
   233 268E 00 00			dta b(0,0)
   234 					
   235 2690 00				dta b(0)				;znak 17 schoda w gore
   236 2691 0C				dta b(%00001100)
   237 2692 30				dta b(%00110000)
   238 2693 0C				dta b(%00001100)
   239 2694 3C				dta b(%00111100)
   240 2695 30				dta b(%00110000)
   241 2696 00 00			dta b(0,0)
   242 					
   243 2698 00				dta b(%00000000)		;znak 18 jadro gwiazda A
   244 2699 30				dta b(%00110000)
   245 269A 30				dta b(%00110000)
   246 269B 3C				dta b(%00111100)
   247 269C 3C				dta b(%00111100)
   248 269D FF				dta b(%11111111)
   249 269E FB				dta b(%11111011)
   250 269F EB				dta b(%11101011)
   251 					
   252 26A0 EB				dta b(%11101011)		;znak 19 jadro gwiazda A
   253 26A1 EF				dta b(%11101111)
   254 26A2 FF				dta b(%11111111)
   255 26A3 3C				dta b(%00111100)
   256 26A4 3C				dta b(%00111100)
   257 26A5 0C				dta b(%00001100)
   258 26A6 0C				dta b(%00001100)
   259 26A7 00				dta b(%00000000)
   260 					
   261 26A8 00				dta b(%00000000)		;znak 20 jadro gwiazda B
   262 26A9 03				dta b(%00000011)
   263 26AA 0F				dta b(%00001111)
   264 26AB FA				dta b(%11111010)
   265 26AC 3E				dta b(%00111110)
   266 26AD 0F				dta b(%00001111)
   267 26AE 03				dta b(%00000011)
   268 26AF 00				dta b(%00000000)
   269 					
   270 26B0 00				dta b(%00000000)		;znak 21 jadro gwiazda B
   271 26B1 C0				dta b(%11000000)
   272 26B2 F0				dta b(%11110000)
   273 26B3 BC				dta b(%10111100)
   274 26B4 AF				dta b(%10101111)
   275 26B5 F0				dta b(%11110000)
   276 26B6 C0				dta b(%11000000)
   277 26B7 00				dta b(%00000000)
   278 					
   279 26B8 03				dta b(%00000011)		;trafione dzialko (b+20)
   280 26B9 0F				dta b(%00001111)
   281 26BA 3E				dta b(%00111110)
   282 26BB 32				dta b(%00110010)
   283 26BC E8				dta b(%11101000)
   284 26BD E8				dta b(%11101000)
   285 26BE AA				dta b(%10101010)
   286 26BF 22				dta b(%00100010)
   287 					
   288 26C0 28				dta b(%00101000)		;b+21
   289 26C1 E8				dta b(%11101000)
   290 26C2 E0				dta b(%11100000)
   291 26C3 E0				dta b(%11100000)
   292 26C4 30				dta b(%00110000)
   293 26C5 30				dta b(%00110000)
   294 26C6 0F				dta b(%00001111)
   295 26C7 03				dta b(%00000011)
   296 					
   297 26C8 C0				dta b(%11000000)		;b+22
   298 26C9 30				dta b(%00110000)
   299 26CA 3C				dta b(%00111100)
   300 26CB BC				dta b(%10111100)
   301 26CC 33				dta b(%00110011)
   302 26CD AF				dta b(%10101111)
   303 26CE AB				dta b(%10101011)
   304 26CF 28				dta b(%00101000)
   305 					
   306 26D0 88				dta b(%10001000)		;b+23
   307 26D1 AB				dta b(%10101011)
   308 26D2 2B				dta b(%00101011)
   309 26D3 2B				dta b(%00101011)
   310 26D4 AC				dta b(%10101100)
   311 26D5 AC				dta b(%10101100)
   312 26D6 30				dta b(%00110000)
   313 26D7 C0				dta b(%11000000)
   314 					
   315 26D8 3C				dta b(%00111100)		;/ baza B
   316 26D9 CC				dta b(%11001100)
   317 26DA FC				dta b(%11111100)
   318 26DB 30				dta b(%00110000)
   319 26DC 00 00 00 00			dta b(0,0,0,0)
   320 					
   321 26E0 00 00 00 00			dta b(0,0,0,0)
   322 26E4 0C				dta b(%00001100)
   323 26E5 0F				dta b(%00001111)
   324 26E6 33				dta b(%00110011)
   325 26E7 3F				dta b(%00111111)
   326 					
   327 26E8 3C				dta b(%00111100)		;\ baza B
   328 26E9 33				dta b(%00110011)
   329 26EA 3F				dta b(%00111111)
   330 26EB 0C				dta b(%00001100)
   331 26EC 00 00 00 00			dta b(0,0,0,0)
   332 					
   333 26F0 00 00 00 00			dta b(0,0,0,0)
   334 26F4 30				dta b(%00110000)
   335 26F5 F0				dta b(%11110000)
   336 26F6 CC				dta b(%11001100)
   337 26F7 FC				dta b(%11111100)
   338 					
   339 					
   340 26F8 00				dta b(%00000000)		;bomba
   341 26F9 00				dta b(%00000000)
   342 26FA 00				dta b(%00000000)
   343 26FB 20				dta b(%00100000)
   344 26FC 08				dta b(%00001000)
   345 26FD 01				dta b(%00000001)
   346 26FE 01				dta b(%00000001)
   347 26FF 21				dta b(%00100001)
   348 					
   349 2700 01				dta b(%00000001)
   350 2701 01				dta b(%00000001)
   351 2702 08				dta b(%00001000)
   352 2703 20				dta b(%00100000)
   353 2704 00				dta b(%00000000)
   354 2705 00				dta b(%00000000)
   355 2706 00				dta b(%00000000)
   356 2707 00				dta b(%00000000)
   357 					
   358 2708 80				dta b(%10000000)
   359 2709 80				dta b(%10000000)
   360 270A 00				dta b(%00000000)
   361 270B 02				dta b(%00000010)
   362 270C 48				dta b(%01001000)
   363 270D 50				dta b(%01010000)
   364 270E 50				dta b(%01010000)
   365 270F 52				dta b(%01010010)
   366 					
   367 2710 40				dta b(%01000000)
   368 2711 10				dta b(%00010000)
   369 2712 48				dta b(%01001000)
   370 2713 02				dta b(%00000010)
   371 2714 00				dta b(%00000000)
   372 2715 80				dta b(%10000000)
   373 2716 80				dta b(%10000000)
   374 2717 00				dta b(%00000000)
   375 					
   376 				;meteor	
   377 					
   378 2718 02				dta b(%00000010)		
   379 2719 0A				dta b(%00001010)
   380 271A 2A				dta b(%00101010)
   381 271B 2A				dta b(%00101010)
   382 271C 2A				dta b(%00101010)
   383 271D 2A				dta b(%00101010)
   384 271E AA				dta b(%10101010)
   385 271F AA				dta b(%10101010)
   386 					
   387 2720 AB				dta b(%10101011)
   388 2721 AE				dta b(%10101110)
   389 2722 AE				dta b(%10101110)
   390 2723 AF				dta b(%10101111)
   391 2724 FF				dta b(%11111111)
   392 2725 3F				dta b(%00111111)
   393 2726 3F				dta b(%00111111)
   394 2727 0F				dta b(%00001111)
   395 					
   396 2728 80				dta b(%10000000)
   397 2729 BA				dta b(%10111010)
   398 272A BA				dta b(%10111010)
   399 272B AB				dta b(%10101011)
   400 272C AA				dta b(%10101010)
   401 272D AA				dta b(%10101010)
   402 272E AB				dta b(%10101011)
   403 272F AB				dta b(%10101011)
   404 					
   405 2730 AC				dta b(%10101100)
   406 2731 AC				dta b(%10101100)
   407 2732 AC				dta b(%10101100)
   408 2733 FC				dta b(%11111100)
   409 2734 FC				dta b(%11111100)
   410 2735 30				dta b(%00110000)
   411 2736 00				dta b(%00000000)
   412 2737 00				dta b(%00000000)    
   413 					
   414 				;rakiety
   415 2738 20				dta b(%00100000)
   416 2739 20				dta b(%00100000)		;w gore
   417 273A FC				dta b(%11111100)
   418 273B 7C				dta b(%01111100)
   419 273C FC				dta b(%11111100)
   420 273D 20				dta b(%00100000)
   421 273E A8				dta b(%10101000)
   422 273F FC				dta b(%11111100)
   423 					
   424 2740 74				dta b(%01110100)		;pasek pionowy
   425 2741 74				dta b(%01110100)
   426 2742 74				dta b(%01110100)
   427 2743 74				dta b(%01110100)
   428 2744 74				dta b(%01110100)
   429 2745 FC				dta b(%11111100)
   430 2746 A8				dta b(%10101000)
   431 2747 20				dta b(%00100000)
   432 					
   433 2748 20				dta b(%00100000)		;|  pasek pionowy odwrotny
   434 2749 A8				dta b(%10101000)
   435 274A FC				dta b(%11111100)
   436 274B 74				dta b(%01110100)
   437 274C 74				dta b(%01110100)
   438 274D 74				dta b(%01110100)
   439 274E 74				dta b(%01110100)
   440 274F 74				dta b(%01110100)
   441 					
   442 2750 FC				dta b(%11111100)		;w dol
   443 2751 A8				dta b(%10101000)
   444 2752 20				dta b(%00100000)
   445 2753 FC				dta b(%11111100)
   446 2754 7C				dta b(%01111100)
   447 2755 FC				dta b(%11111100)
   448 2756 20				dta b(%00100000)
   449 2757 20				dta b(%00100000)
   450 									
   451 2758 0C				dta b(%00001100)		;w lewo
   452 2759 34				dta b(%00110100)
   453 275A BE				dta b(%10111110)
   454 275B BE				dta b(%10111110)
   455 275C 3C				dta b(%00111100)
   456 275D 0C				dta b(%00001100)
   457 275E 00 00			dta b(0,0)
   458 								
   459 2760 D4				dta b(%11010100)		;tyl rakiety -
   460 2761 97				dta b(%10010111)
   461 2762 BE				dta b(%10111110)
   462 2763 BE				dta b(%10111110)
   463 2764 97				dta b(%10010111)
   464 2765 D4				dta b(%11010100)
   465 2766 00 00			dta b(0,0)
   466 							
   467 2768 17				dta b(%00010111)		;tyl rakiety w prawo
   468 2769 D6				dta b(%11010110)
   469 276A BE				dta b(%10111110)
   470 276B BE				dta b(%10111110)
   471 276C D6				dta b(%11010110)
   472 276D 17				dta b(%00010111)
   473 276E 00 00			dta b(0,0)
   474 							
   475 2770 30				dta b(%00110000)		;w prawo
   476 2771 1C				dta b(%00011100)
   477 2772 BE				dta b(%10111110)
   478 2773 BE				dta b(%10111110)
   479 2774 3C				dta b(%00111100)
   480 2775 30				dta b(%00110000)
   481 2776 00 00			dta b(0,0)	
   482 					
   483 					;wybuchy
   484 2778 00 00 00 00			dta b(0,0,0,0)
   485 277C 02				dta b(%00000010)
   486 277D 09				dta b(%00001001)
   487 277E 39				dta b(%00111001)
   488 277F 25				dta b(%00100101)
   489 2780 25				dta b(%00100101)
   490 					
   491 2781 25				dta b(%00100101)
   492 2782 39				dta b(%00111001)
   493 2783 09				dta b(%00001001)
   494 2784 02				dta b(%00000010)
   495 2785 00 00 00			dta b(0,0,0)
   496 					
   497 2788 00 00 00 00			dta b(0,0,0,0)
   498 278C 80				dta b(%10000000)
   499 278D 60				dta b(%01100000)
   500 278E 6C				dta b(%01101100)
   501 278F 58				dta b(%01011000)
   502 2790 58				dta b(%01011000)
   503 					
   504 2791 58				dta b(%01011000)
   505 2792 6C				dta b(%01101100)
   506 2793 60				dta b(%01100000)
   507 2794 80				dta b(%10000000)
   508 2795 00 00 00			dta b(0,0,0)
   509 					
   510 					;2
   511 2798 00 02			dta b(0),b(%00000010)
   512 279A 09				dta b(%00001001)
   513 279B 25				dta b(%00100101)
   514 279C 25				dta b(%00100101)
   515 279D E5				dta b(%11100101)
   516 279E 95				dta b(%10010101)
   517 279F 96				dta b(%10010110)
   518 27A0 96				dta b(%10010110)
   519 					
   520 27A1 96				dta b(%10010110)
   521 27A2 95				dta b(%10010101)
   522 27A3 E5				dta b(%11100101)
   523 27A4 25				dta b(%00100101)
   524 27A5 25				dta b(%00100101)
   525 27A6 09				dta b(%00001001)
   526 27A7 02				dta b(%00000010)
   527 					
   528 27A8 00 80			dta b(0),b(%10000000)
   529 27AA 60				dta b(%01100000)
   530 27AB 58				dta b(%01011000)
   531 27AC 58				dta b(%01011000)
   532 27AD 5B				dta b(%01011011)
   533 27AE 56				dta b(%01010110)
   534 27AF 96				dta b(%10010110)
   535 27B0 96				dta b(%10010110)
   536 					
   537 27B1 96				dta b(%10010110)
   538 27B2 56				dta b(%01010110)
   539 27B3 5B				dta b(%01011011)
   540 27B4 58				dta b(%01011000)
   541 27B5 58				dta b(%01011000)
   542 27B6 60				dta b(%01100000)
   543 27B7 80				dta b(%10000000)	
   544 					;3
   545 27B8 00 02			dta b(0),b(%00000010)
   546 27BA 0A				dta b(%00001010)
   547 27BB 2B				dta b(%00101011)
   548 27BC 28				dta b(%00101000)
   549 27BD E8				dta b(%11101000)
   550 27BE AC				dta b(%10101100)
   551 27BF A0				dta b(%10100000)
   552 27C0 A0				dta b(%10100000)
   553 					
   554 27C1 A0				dta b(%10100000)
   555 27C2 AC				dta b(%10101100)
   556 27C3 E8				dta b(%11101000)
   557 27C4 28				dta b(%00101000)
   558 27C5 2B				dta b(%00101011)
   559 27C6 0A				dta b(%00001010)
   560 27C7 02				dta b(%00000010)
   561 					
   562 27C8 00 80			dta b(0),b(%10000000)
   563 27CA A0				dta b(%10100000)
   564 27CB E8				dta b(%11101000)
   565 27CC 28				dta b(%00101000)
   566 27CD 2B				dta b(%00101011)
   567 27CE 3A				dta b(%00111010)
   568 27CF 0A				dta b(%00001010)
   569 27D0 0A				dta b(%00001010)
   570 					
   571 27D1 0A				dta b(%00001010)
   572 27D2 3A				dta b(%00111010)
   573 27D3 2B				dta b(%00101011)
   574 27D4 28				dta b(%00101000)
   575 27D5 E8				dta b(%11101000)
   576 27D6 A0				dta b(%10100000)
   577 27D7 80				dta b(%10000000)
   578 					
   579 					;4
   580 27D8 00 02			dta b(0),b(%00000010)
   581 27DA 0B				dta b(%00001011)
   582 27DB 2C				dta b(%00101100)
   583 27DC 20				dta b(%00100000)
   584 27DD 20				dta b(%00100000)
   585 27DE B0				dta b(%10110000)
   586 27DF 80				dta b(%10000000)
   587 27E0 80				dta b(%10000000)
   588 					
   589 27E1 80				dta b(%10000000)
   590 27E2 B0				dta b(%10110000)
   591 27E3 20				dta b(%00100000)
   592 27E4 20				dta b(%00100000)
   593 27E5 2C				dta b(%00101100)
   594 27E6 0B				dta b(%00001011)
   595 27E7 02				dta b(%00000010)
   596 					
   597 27E8 00 80			dta b(0),b(%10000000)
   598 27EA E0				dta b(%11100000)
   599 27EB 38				dta b(%00111000)
   600 27EC 08				dta b(%00001000)
   601 27ED 08				dta b(%00001000)
   602 27EE 0E				dta b(%00001110)
   603 27EF 02				dta b(%00000010)
   604 27F0 02				dta b(%00000010)
   605 					
   606 27F1 02				dta b(%00000010)
   607 27F2 0E				dta b(%00001110)
   608 27F3 08				dta b(%00001000)
   609 27F4 08				dta b(%00001000)
   610 27F5 38				dta b(%00111000)
   611 27F6 E0				dta b(%11100000)
   612 27F7 80				dta b(%10000000)
   613 					
   614 					;maly wybuch
   615 27F8 20				dta b(%00100000)
   616 27F9 20				dta b(%00100000)
   617 27FA 88				dta b(%10001000)
   618 27FB 88				dta b(%10001000)
   619 27FC 20				dta b(%00100000)
   620 27FD 20				dta b(%00100000)
   621 27FE 88				dta b(%10001000)
   622 27FF 88				dta b(%10001000)
   623 					
   624 2800 22				dta b(%00100010)
   625 2801 22				dta b(%00100010)
   626 2802 88				dta b(%10001000)
   627 2803 88				dta b(%10001000)
   628 2804 22				dta b(%00100010)
   629 2805 22				dta b(%00100010)
   630 2806 88				dta b(%10001000)
   631 2807 88				dta b(%10001000)
   632 					
   633 = 2808			mwybuch2	equ *
   634 2808 88				dta b(%10001000)
   635 2809 88				dta b(%10001000)
   636 280A 20				dta b(%00100000)
   637 280B 20				dta b(%00100000)
   638 280C 88				dta b(%10001000)
   639 280D 88				dta b(%10001000)
   640 280E 20				dta b(%00100000)
   641 280F 20				dta b(%00100000)
   642 					
   643 2810 88				dta b(%10001000)
   644 2811 88				dta b(%10001000)
   645 2812 22				dta b(%00100010)
   646 2813 22				dta b(%00100010)
   647 2814 88				dta b(%10001000)
   648 2815 88				dta b(%10001000)
   649 2816 22				dta b(%00100010)
   650 2817 22				dta b(%00100010)
   651 					
   652 				;ksztalt wroga ^ kolor1
   653 = 2818			enemy1kszt	equ *
   654 				;faza 0
   655 2818 0D				dta b(%00001101)
   656 2819 35				dta b(%00110101)
   657 281A 36				dta b(%00110110)
   658 281B D6				dta b(%11010110)
   659 281C D5				dta b(%11010101)
   660 281D D6				dta b(%11010110)
   661 281E 5B				dta b(%01011011)
   662 281F 5C				dta b(%01011100)
   663 2820 6C				dta b(%01101100)
   664 2821 70 70 70 70			:4 dta b(%01110000)
   665 2825 C0				dta b(%11000000)
   666 2826 00 00			dta b(0,0)
   667 					
   668 2828 C0				dta b(%11000000)
   669 2829 B0				dta b(%10110000)
   670 282A 70				dta b(%01110000)
   671 282B 6C				dta b(%01101100)
   672 282C 5C				dta b(%01011100)
   673 282D 5C				dta b(%01011100)
   674 282E 5B				dta b(%01011011)
   675 282F D7				dta b(%11010111)
   676 2830 D7				dta b(%11010111)
   677 2831 37 37 37 37			:4 dta b(%00110111)
   678 2835 0C				dta b(%00001100)
   679 2836 00 00			dta b(0,0)
   680 							
   681 				;faza1
   682 2838 00				dta b(0)
   683 2839 03				dta b(%00000011)
   684 283A 0D				dta b(%00001101)
   685 283B 35				dta b(%00110101)
   686 283C 35				dta b(%00110101)
   687 283D D6				dta b(%11010110)
   688 283E DB				dta b(%11011011)
   689 283F 6C				dta b(%01101100)
   690 2840 B0				dta b(%10110000)
   691 2841 C0				dta b(%11000000)
   692 2842 00 00 00			dta b(0,0,0)
   693 2845 03 03			:2 dta b(%00000011)
   694 2847 00				dta b(0)
   695 					
   696 2848 F0				dta b(%11110000)
   697 2849 5C				dta b(%01011100)
   698 284A 57				dta b(%01010111)
   699 284B 67				dta b(%01100111)
   700 284C 67				dta b(%01100111)
   701 284D 57				dta b(%01010111)
   702 284E 97				dta b(%10010111)
   703 284F D7 D7 D7			:3 dta b(%11010111)
   704 2852 DB				dta b(%11011011)
   705 2853 DC				dta b(%11011100)
   706 2854 DC				dta b(%11011100)
   707 2855 6C				dta b(%01101100)
   708 2856 70				dta b(%01110000)
   709 2857 C0				dta b(%11000000)
   710 							
   711 				;faza2	
   712 2858 03				dta b(%00000011)
   713 2859 0D				dta b(%00001101)
   714 285A 35				dta b(%00110101)
   715 285B D5				dta b(%11010101)
   716 285C 6A				dta b(%01101010)
   717 285D BF				dta b(%10111111)
   718 285E C3				dta b(%11000011)
   719 285F 00 00 00 00 00		dta b(0,0,0,0,0)
   720 2864 03				dta b(%00000011)
   721 2865 0D				dta b(%00001101)
   722 2866 0E				dta b(%00001110)
   723 2867 03				dta b(%00000011)
   724 					
   725 2868 FC				dta b(%11111100)
   726 2869 57				dta b(%01010111)
   727 286A 57				dta b(%01010111)
   728 286B 67				dta b(%01100111)
   729 286C 67				dta b(%01100111)
   730 286D 57				dta b(%01010111)
   731 286E 97				dta b(%10010111)
   732 286F D7				dta b(%11010111)
   733 2870 D7				dta b(%11010111)
   734 2871 DB				dta b(%11011011)
   735 2872 DC				dta b(%11011100)
   736 2873 6C				dta b(%01101100)
   737 2874 70				dta b(%01110000)
   738 2875 B0				dta b(%10110000)
   739 2876 C0				dta b(%11000000)
   740 2877 00				dta b(0)
   741 							
   742 				;faza3
   743 2878 00				dta b(0)
   744 2879 0F				dta b(%00001111)
   745 287A 35				dta b(%00110101)
   746 287B D5				dta b(%11010101)
   747 287C 3E				dta b(%00111110)
   748 287D 03				dta b(%00000011)
   749 287E 00 00 00 00 00 00		dta b(0,0,0,0,0,0)
   750 2884 03				dta b(%00000011)
   751 2885 0D				dta b(%00001101)
   752 2886 36				dta b(%00110110)
   753 2887 0F				dta b(%00001111)
   754 					
   755 2888 00				dta b(0)
   756 2889 C0				dta b(%11000000)
   757 288A 70				dta b(%01110000)
   758 288B 5C				dta b(%01011100)
   759 288C 57				dta b(%01010111)
   760 288D 55				dta b(%01010101)
   761 288E 99				dta b(%10011001)
   762 288F D9				dta b(%11011001)
   763 2890 D6				dta b(%11010110)
   764 2891 D7				dta b(%11010111)
   765 2892 DB				dta b(%11011011)
   766 2893 5C				dta b(%01011100)
   767 2894 6C				dta b(%01101100)
   768 2895 B0				dta b(%10110000)
   769 2896 C0				dta b(%11000000)
   770 2897 00				dta b(0)
   771
   772 				;faza4
   773 2898 3C				dta b(%00111100)
   774 2899 D7				dta b(%11010111)
   775 289A 39				dta b(%00111001)
   776 289B 0E				dta b(%00001110)
   777 289C 03				dta b(%00000011)
   778 289D 03				dta b(%00000011)
   779 289E 00 00 00 00			dta b(0,0,0,0)
   780 28A2 03				dta b(%00000011)
   781 28A3 03				dta b(%00000011)
   782 28A4 0D				dta b(%00001101)
   783 28A5 35				dta b(%00110101)
   784 28A6 DB				dta b(%11011011)
   785 28A7 3C				dta b(%00111100)
   786 					
   787 28A8 00				dta b(0)
   788 28A9 C0				dta b(%11000000)
   789 28AA 70				dta b(%01110000)
   790 28AB 50				dta b(%01010000)
   791 28AC 57				dta b(%01010111)
   792 28AD 97				dta b(%10010111)
   793 28AE D5				dta b(%11010101)
   794 28AF D9				dta b(%11011001)
   795 28B0 D9				dta b(%11011001)
   796 28B1 D6				dta b(%11010110)
   797 28B2 57				dta b(%01010111)
   798 28B3 5B				dta b(%01011011)
   799 28B4 6C				dta b(%01101100)
   800 28B5 B0				dta b(%10110000)
   801 28B6 C0				dta b(%11000000)
   802 28B7 00				dta b(0)
   803 							
   804 				;faza5		
   805 28B8 0F				dta b(%00001111)
   806 28B9 35				dta b(%00110101)
   807 28BA 0D				dta b(%00001101)
   808 28BB 0E				dta b(%00001110)
   809 28BC 03				dta b(%00000011)
   810 28BD 03				dta b(%00000011)
   811 28BE 00 00 00			dta b(0,0,0)
   812 28C1 03				dta b(%00000011)
   813 28C2 03				dta b(%00000011)
   814 28C3 0D				dta b(%00001101)
   815 28C4 D5				dta b(%11010101)
   816 28C5 39				dta b(%00111001)
   817 28C6 0F				dta b(%00001111)
   818 28C7 00				dta b(0)
   819 					
   820 28C8 00				dta b(0)
   821 28C9 C0				dta b(%11000000)
   822 28CA 70				dta b(%01110000)
   823 28CB 5C				dta b(%01011100)
   824 28CC 5C				dta b(%01011100)
   825 28CD 97				dta b(%10010111)
   826 28CE D7				dta b(%11010111)
   827 28CF D5				dta b(%11010101)
   828 28D0 D9				dta b(%11011001)
   829 28D1 59				dta b(%01011001)
   830 28D2 56				dta b(%01010110)
   831 28D3 58				dta b(%01011000)
   832 28D4 6C				dta b(%01101100)
   833 28D5 B0				dta b(%10110000)
   834 28D6 C0				dta b(%11000000)
   835 28D7 00				dta b(0)
   836 							
   837 				;faza6		
   838 28D8 0D				dta b(%00001101)
   839 28D9 0D				dta b(%00001101)
   840 28DA 0E				dta b(%00001110)
   841 28DB 03				dta b(%00000011)
   842 28DC 03				dta b(%00000011)
   843 28DD 00 00 00			dta b(0,0,0)
   844 28E0 C0				dta b(%11000000)
   845 28E1 7F				dta b(%01111111)
   846 28E2 95				dta b(%10010101)
   847 28E3 E5				dta b(%11100101)
   848 28E4 39				dta b(%00111001)
   849 28E5 0E				dta b(%00001110)
   850 28E6 03				dta b(%00000011)
   851 28E7 00				dta b(0)
   852 					
   853 28E8 C0				dta b(%11000000)
   854 28E9 70				dta b(%01110000)
   855 28EA 70				dta b(%01110000)
   856 28EB 5C				dta b(%01011100)
   857 28EC 9C				dta b(%10011100)
   858 28ED D7				dta b(%11010111)
   859 28EE E7				dta b(%11100111)
   860 28EF D7				dta b(%11010111)
   861 28F0 D7				dta b(%11010111)
   862 28F1 57				dta b(%01010111)
   863 28F2 67				dta b(%01100111)
   864 28F3 67				dta b(%01100111)
   865 28F4 57				dta b(%01010111)
   866 28F5 57				dta b(%01010111)
   867 28F6 FC				dta b(%11111100)
   868 28F7 00				dta b(0)
   869 							
   870 				;faza7
   871 28F8 00				dta b(0)
   872 28F9 03				dta b(%00000011)
   873 28FA 03				dta b(%00000011)
   874 28FB 00 00 00			dta b(0,0,0)
   875 28FE C0				dta b(%11000000)
   876 28FF 70				dta b(%01110000)
   877 2900 9C				dta b(%10011100)
   878 2901 D7				dta b(%11010111)
   879 2902 E5				dta b(%11100101)
   880 2903 35				dta b(%00110101)
   881 2904 39				dta b(%00111001)
   882 2905 0E				dta b(%00001110)
   883 2906 03				dta b(%00000011)
   884 2907 00				dta b(0)
   885 					
   886 2908 C0				dta b(%11000000)
   887 2909 70				dta b(%01110000)
   888 290A 9C				dta b(%10011100)
   889 290B DC				dta b(%11011100)
   890 290C DC				dta b(%11011100)
   891 290D D7				dta b(%11010111)
   892 290E E7				dta b(%11100111)
   893 290F D7				dta b(%11010111)
   894 2910 D7				dta b(%11010111)
   895 2911 57				dta b(%01010111)
   896 2912 57				dta b(%01010111)
   897 2913 67				dta b(%01100111)
   898 2914 67				dta b(%01100111)
   899 2915 57				dta b(%01010111)
   900 2916 9C				dta b(%10011100)
   901 2917 F0				dta b(%11110000)
   902 							
   903 				;faza8
   904 2918 00 00			dta b(0,0)
   905 291A C0				dta b(%11000000)
   906 291B 70 70 70 70			:4 dta b(%01110000)
   907 291F 5C				dta b(%01011100)
   908 2920 5C				dta b(%01011100)
   909 2921 97				dta b(%10010111)
   910 2922 D6				dta b(%11010110)
   911 2923 D5				dta b(%11010101)
   912 2924 E6				dta b(%11100110)
   913 2925 36				dta b(%00110110)
   914 2926 39				dta b(%00111001)
   915 2927 0D				dta b(%00001101)
   916 					
   917 2928 00 00			dta b(0,0)
   918 292A 0C				dta b(%00001100)
   919 292B 37 37 37 37			:4 dta b(%00110111)
   920 292F E7				dta b(%11100111)
   921 2930 D7				dta b(%11010111)
   922 2931 97				dta b(%10010111)
   923 2932 5C 5C 5C			:3 dta b(%01011100)
   924 2935 70				dta b(%01110000)
   925 2936 70				dta b(%01110000)
   926 2937 C0				dta b(%11000000)
   927 							
   928 				;faza9
   929 2938 03				dta b(%00000011)
   930 2939 0D				dta b(%00001101)
   931 293A 35				dta b(%00110101)
   932 293B 36				dta b(%00110110)
   933 293C 37				dta b(%00110111)
   934 293D D7				dta b(%11010111)
   935 293E D7				dta b(%11010111)
   936 293F DB				dta b(%11011011)
   937 2940 D7				dta b(%11010111)
   938 2941 D5				dta b(%11010101)
   939 2942 D5				dta b(%11010101)
   940 2943 D9				dta b(%11011001)
   941 2944 D9				dta b(%11011001)
   942 2945 D5				dta b(%11010101)
   943 2946 36				dta b(%00110110)
   944 2947 0F				dta b(%00001111)
   945 					
   946 2948 00				dta b(0)
   947 2949 C0				dta b(%11000000)
   948 294A C0				dta b(%11000000)
   949 294B C0				dta b(%11000000)
   950 294C 00 00			dta b(0,0)
   951 294E 03				dta b(%00000011)
   952 294F 0D				dta b(%00001101)
   953 2950 36				dta b(%00110110)
   954 2951 D7				dta b(%11010111)
   955 2952 5B				dta b(%01011011)
   956 2953 5C				dta b(%01011100)
   957 2954 6C				dta b(%01101100)
   958 2955 B0				dta b(%10110000)
   959 2956 C0				dta b(%11000000)
   960 2957 00				dta b(0)
   961 							
   962 				;faza10
   963 2958 03				dta b(%00000011)
   964 2959 0D				dta b(%00001101)
   965 295A 0D				dta b(%00001101)
   966 295B 36				dta b(%00110110)
   967 295C 37				dta b(%00110111)
   968 295D DB				dta b(%11011011)
   969 295E D7 D7 D7			:3 dta b(%11010111)
   970 2961 D5				dta b(%11010101)
   971 2962 D9				dta b(%11011001)
   972 2963 D9				dta b(%11011001)
   973 2964 D5				dta b(%11010101)
   974 2965 D5				dta b(%11010101)
   975 2966 3F				dta b(%00111111)
   976 2967 00				dta b(0)
   977 					
   978 2968 70				dta b(%01110000)
   979 2969 B0				dta b(%10110000)
   980 296A C0				dta b(%11000000)
   981 296B C0				dta b(%11000000)
   982 296C 00 00 00 00			dta b(0,0,0,0)
   983 2970 03				dta b(%00000011)
   984 2971 0D				dta b(%00001101)
   985 2972 56				dta b(%01010110)
   986 2973 5B				dta b(%01011011)
   987 2974 6C				dta b(%01101100)
   988 2975 B0				dta b(%10110000)
   989 2976 C0				dta b(%11000000)
   990 2977 00				dta b(0)
   991 							
   992 				;faza11
   993 2978 00				dta b(0)
   994 2979 03				dta b(%00000011)
   995 297A 0D				dta b(%00001101)
   996 297B 35				dta b(%00110101)
   997 297C 36				dta b(%00110110)
   998 297D D7				dta b(%11010111)
   999 297E DB				dta b(%11011011)
  1000 297F 57				dta b(%01010111)
  1001 2980 67				dta b(%01100111)
  1002 2981 65				dta b(%01100101)
  1003 2982 55				dta b(%01010101)
  1004 2983 D5				dta b(%11010101)
  1005 2984 35				dta b(%00110101)
  1006 2985 0E				dta b(%00001110)
  1007 2986 03				dta b(%00000011)
  1008 2987 00				dta b(0)
  1009 					
  1010 2988 F0				dta b(%11110000)
  1011 2989 5C				dta b(%01011100)
  1012 298A B0				dta b(%10110000)
  1013 298B C0				dta b(%11000000)
  1014 298C C0				dta b(%11000000)
  1015 298D 00 00 00 00			dta b(0,0,0,0)
  1016 2991 C0				dta b(%11000000)
  1017 2992 C0				dta b(%11000000)
  1018 2993 7C				dta b(%01111100)
  1019 2994 57				dta b(%01010111)
  1020 2995 6C				dta b(%01101100)
  1021 2996 F0				dta b(%11110000)
  1022 2997 00				dta b(0)
  1023 							
  1024 				;faza12
  1025 2998 00				dta b(0)
  1026 2999 03				dta b(%00000011)
  1027 299A 0D				dta b(%00001101)
  1028 299B 35				dta b(%00110101)
  1029 299C D5				dta b(%11010101)
  1030 299D D6				dta b(%11010110)
  1031 299E 57				dta b(%01010111)
  1032 299F 67				dta b(%01100111)
  1033 29A0 67				dta b(%01100111)
  1034 29A1 57				dta b(%01010111)
  1035 29A2 D5				dta b(%11010101)
  1036 29A3 E5				dta b(%11100101)
  1037 29A4 39				dta b(%00111001)
  1038 29A5 0E				dta b(%00001110)
  1039 29A6 03				dta b(%00000011)
  1040 29A7 00				dta b(0)
  1041 					
  1042 29A8 3C				dta b(%00111100)
  1043 29A9 D7				dta b(%11010111)
  1044 29AA 6C				dta b(%01101100)
  1045 29AB B0				dta b(%10110000)
  1046 29AC C0				dta b(%11000000)
  1047 29AD C0				dta b(%11000000)
  1048 29AE 00 00 00 00			dta b(0,0,0,0)
  1049 29B2 C0				dta b(%11000000)
  1050 29B3 C0				dta b(%11000000)
  1051 29B4 70				dta b(%01110000)
  1052 29B5 5C				dta b(%01011100)
  1053 29B6 D7				dta b(%11010111)
  1054 29B7 3C				dta b(%00111100)
  1055 							
  1056 				;faza13
  1057 29B8 00				dta b(0)
  1058 29B9 03				dta b(%00000011)
  1059 29BA 0D				dta b(%00001101)
  1060 29BB 35				dta b(%00110101)
  1061 29BC D5				dta b(%11010101)
  1062 29BD 55				dta b(%01010101)
  1063 29BE 66				dta b(%01100110)
  1064 29BF 67				dta b(%01100111)
  1065 29C0 57				dta b(%01010111)
  1066 29C1 D7				dta b(%11010111)
  1067 29C2 E7				dta b(%11100111)
  1068 29C3 35				dta b(%00110101)
  1069 29C4 39				dta b(%00111001)
  1070 29C5 0E				dta b(%00001110)
  1071 29C6 03				dta b(%00000011)
  1072 29C7 00				dta b(0)
  1073 					
  1074 29C8 00				dta b(0)
  1075 29C9 F0				dta b(%11110000)
  1076 29CA 5C				dta b(%01011100)
  1077 29CB 57				dta b(%01010111)
  1078 29CC BC				dta b(%10111100)
  1079 29CD C0				dta b(%11000000)
  1080 29CE C0				dta b(%11000000)
  1081 29CF 00 00 00 00			dta b(0,0,0,0)
  1082 29D3 C0				dta b(%11000000)
  1083 29D4 C0				dta b(%11000000)
  1084 29D5 70				dta b(%01110000)
  1085 29D6 5C				dta b(%01011100)
  1086 29D7 F0				dta b(%11110000)
  1087 							
  1088 				;faza14
  1089 29D8 00				dta b(0)
  1090 29D9 3F				dta b(%00111111)
  1091 29DA D5				dta b(%11010101)
  1092 29DB D5				dta b(%11010101)
  1093 29DC D9				dta b(%11011001)
  1094 29DD D9				dta b(%11011001)
  1095 29DE D6				dta b(%11010110)
  1096 29DF D7 D7 D7			:3 dta b(%11010111)
  1097 29E2 E7				dta b(%11100111)
  1098 29E3 37				dta b(%00110111)
  1099 29E4 39				dta b(%00111001)
  1100 29E5 0D				dta b(%00001101)
  1101 29E6 0E				dta b(%00001110)
  1102 29E7 03				dta b(%00000011)
  1103 					
  1104 29E8 00				dta b(0)
  1105 29E9 C0				dta b(%11000000)
  1106 29EA 70				dta b(%01110000)
  1107 29EB 5C				dta b(%01011100)
  1108 29EC 57				dta b(%01010111)
  1109 29ED A5				dta b(%10100101)
  1110 29EE FF				dta b(%11111111)
  1111 29EF 00 00 00 00 00		dta b(0,0,0,0,0)
  1112 29F4 C0				dta b(%11000000)
  1113 29F5 C0				dta b(%11000000)
  1114 29F6 70				dta b(%01110000)
  1115 29F7 70				dta b(%01110000)
  1116 							
  1117 				;faza15
  1118 29F8 0F				dta b(%00001111)
  1119 29F9 35				dta b(%00110101)
  1120 29FA D5				dta b(%11010101)
  1121 29FB D9				dta b(%11011001)
  1122 29FC D9				dta b(%11011001)
  1123 29FD D5				dta b(%11010101)
  1124 29FE D6				dta b(%11010110)
  1125 29FF D7 D7 D7			:3 dta b(%11010111)
  1126 2A02 E7				dta b(%11100111)
  1127 2A03 37				dta b(%00110111)
  1128 2A04 37				dta b(%00110111)
  1129 2A05 39				dta b(%00111001)
  1130 2A06 0E				dta b(%00001110)
  1131 2A07 03				dta b(%00000011)
  1132 					
  1133 2A08 00				dta b(0)
  1134 2A09 C0				dta b(%11000000)
  1135 2A0A 70				dta b(%01110000)
  1136 2A0B 5C				dta b(%01011100)
  1137 2A0C 5C				dta b(%01011100)
  1138 2A0D 97				dta b(%10010111)
  1139 2A0E E7				dta b(%11100111)
  1140 2A0F 39				dta b(%00111001)
  1141 2A10 0F				dta b(%00001111)
  1142 2A11 00 00 00 00			dta b(0,0,0,0)
  1143 2A15 C0				dta b(%11000000)
  1144 2A16 C0				dta b(%11000000)
  1145 2A17 00				dta b(0)
  1146 						
  1147 = 2A18			enemy3kszt	equ *
  1148 				;faza0
  1149 2A18 0D 0D 0D 0D			:4 dta b(%00001101)
  1150 2A1C 35				dta b(%00110101)
  1151 2A1D 36 36 36			:3 dta b(%00110110)
  1152 2A20 D5				dta b(%11010101)
  1153 2A21 D5				dta b(%11010101)
  1154 2A22 55				dta b(%01010101)
  1155 2A23 55				dta b(%01010101)
  1156 2A24 D5				dta b(%11010101)
  1157 2A25 35				dta b(%00110101)
  1158 2A26 37				dta b(%00110111)
  1159 2A27 37				dta b(%00110111)
  1160 					
  1161 2A28 C0 C0 C0 C0			:4 dta b(%11000000)
  1162 2A2C 70 70 70 70			:4 dta b(%01110000)
  1163 2A30 5C				dta b(%01011100)
  1164 2A31 5C				dta b(%01011100)
  1165 2A32 57				dta b(%01010111)
  1166 2A33 5B				dta b(%01011011)
  1167 2A34 6C				dta b(%01101100)
  1168 2A35 70				dta b(%01110000)
  1169 2A36 70				dta b(%01110000)
  1170 2A37 B0				dta b(%10110000)
  1171 							
  1172 				;faza1
  1173 2A38 00 00			dta b(0,0)
  1174 2A3A 03				dta b(%00000011)
  1175 2A3B 03				dta b(%00000011)
  1176 2A3C 0D				dta b(%00001101)
  1177 2A3D 35				dta b(%00110101)
  1178 2A3E D5				dta b(%11010101)
  1179 2A3F 55				dta b(%01010101)
  1180 2A40 55				dta b(%01010101)
  1181 2A41 35				dta b(%00110101)
  1182 2A42 D5				dta b(%11010101)
  1183 2A43 D9				dta b(%11011001)
  1184 2A44 ED				dta b(%11101101)
  1185 2A45 3D				dta b(%00111101)
  1186 2A46 0E				dta b(%00001110)
  1187 2A47 03				dta b(%00000011)
  1188 					
  1189 2A48 DC				dta b(%11011100)
  1190 2A49 DC				dta b(%11011100)
  1191 2A4A 5C 5C 5C			:3 dta b(%01011100)
  1192 2A4D 9C 9C 9C			:3 dta b(%10011100)
  1193 2A50 5C 5C 5C			:3 dta b(%01011100)
  1194 2A53 57				dta b(%01010111)
  1195 2A54 AB				dta b(%10101011)
  1196 2A55 FC				dta b(%11111100)
  1197 2A56 C0				dta b(%11000000)
  1198 2A57 00				dta b(0)
  1199 							
  1200 				;faza2
  1201 2A58 00 00 00			dta b(0,0,0)
  1202 2A5B F3				dta b(%11110011)
  1203 2A5C 5D				dta b(%01011101)
  1204 2A5D 55				dta b(%01010101)
  1205 2A5E D6				dta b(%11010110)
  1206 2A5F D6				dta b(%11010110)
  1207 2A60 D5				dta b(%11010101)
  1208 2A61 65				dta b(%01100101)
  1209 2A62 B5				dta b(%10110101)
  1210 2A63 F5				dta b(%11110101)
  1211 2A64 0D				dta b(%00001101)
  1212 2A65 37				dta b(%00110111)
  1213 2A66 3B				dta b(%00111011)
  1214 2A67 0C				dta b(%00001100)
  1215 					
  1216 2A68 0C				dta b(%00001100)
  1217 2A69 37				dta b(%00110111)
  1218 2A6A D7				dta b(%11010111)
  1219 2A6B 57				dta b(%01010111)
  1220 2A6C 5B				dta b(%01011011)
  1221 2A6D 9C				dta b(%10011100)
  1222 2A6E 9C				dta b(%10011100)
  1223 2A6F 5C				dta b(%01011100)
  1224 2A70 5C				dta b(%01011100)
  1225 2A71 6C				dta b(%01101100)
  1226 2A72 70				dta b(%01110000)
  1227 2A73 70				dta b(%01110000)
  1228 2A74 5C				dta b(%01011100)
  1229 2A75 AC				dta b(%10101100)
  1230 2A76 F0				dta b(%11110000)
  1231 2A77 00				dta b(0)
  1232 							
  1233 				;faza3
  1234 2A78 00				dta b(0)
  1235 2A79 30				dta b(%00110000)
  1236 2A7A DC				dta b(%11011100)
  1237 2A7B D7				dta b(%11010111)
  1238 2A7C D5				dta b(%11010101)
  1239 2A7D 35				dta b(%00110101)
  1240 2A7E 35				dta b(%00110101)
  1241 2A7F 56				dta b(%01010110)
  1242 2A80 96				dta b(%10010110)
  1243 2A81 D5				dta b(%11010101)
  1244 2A82 E5				dta b(%11100101)
  1245 2A83 35				dta b(%00110101)
  1246 2A84 36				dta b(%00110110)
  1247 2A85 DB				dta b(%11011011)
  1248 2A86 EF				dta b(%11101111)
  1249 2A87 30				dta b(%00110000)
  1250 					
  1251 2A88 00 00 00			dta b(0,0,0)
  1252 2A8B FF				dta b(%11111111)
  1253 2A8C 55				dta b(%01010101)
  1254 2A8D 56				dta b(%01010110)
  1255 2A8E 97				dta b(%10010111)
  1256 2A8F 9B				dta b(%10011011)
  1257 2A90 5C				dta b(%01011100)
  1258 2A91 6C				dta b(%01101100)
  1259 2A92 70 70 70 70 70		:5 dta b(%01110000)
  1260 2A97 C0				dta b(%11000000)
  1261 							
  1262 				;faza4
  1263 2A98 0C				dta b(%00001100)
  1264 2A99 37				dta b(%00110111)
  1265 2A9A D7				dta b(%11010111)
  1266 2A9B D7				dta b(%11010111)
  1267 2A9C D5				dta b(%11010101)
  1268 2A9D 55				dta b(%01010101)
  1269 2A9E 55				dta b(%01010101)
  1270 2A9F D6				dta b(%11010110)
  1271 2AA0 D6				dta b(%11010110)
  1272 2AA1 55				dta b(%01010101)
  1273 2AA2 55				dta b(%01010101)
  1274 2AA3 D6				dta b(%11010110)
  1275 2AA4 D7				dta b(%11010111)
  1276 2AA5 E7				dta b(%11100111)
  1277 2AA6 37				dta b(%00110111)
  1278 2AA7 0C				dta b(%00001100)
  1279 					
  1280 2AA8 00 00 00 00			dta b(0,0,0,0)
  1281 2AAC C0				dta b(%11000000)
  1282 2AAD 70				dta b(%01110000)
  1283 2AAE 5C				dta b(%01011100)
  1284 2AAF 95				dta b(%10010101)
  1285 2AB0 9A				dta b(%10011010)
  1286 2AB1 6C				dta b(%01101100)
  1287 2AB2 B0				dta b(%10110000)
  1288 2AB3 C0				dta b(%11000000)
  1289 2AB4 00 00 00 00			dta b(0,0,0,0)
  1290 							
  1291 				;faza5
  1292 2AB8 30				dta b(%00110000)
  1293 2AB9 DF				dta b(%11011111)
  1294 2ABA D7				dta b(%11010111)
  1295 2ABB 35				dta b(%00110101)
  1296 2ABC 35				dta b(%00110101)
  1297 2ABD D5				dta b(%11010101)
  1298 2ABE D5				dta b(%11010101)
  1299 2ABF 56				dta b(%01010110)
  1300 2AC0 56				dta b(%01010110)
  1301 2AC1 F5				dta b(%11110101)
  1302 2AC2 35				dta b(%00110101)
  1303 2AC3 D6				dta b(%11010110)
  1304 2AC4 DB				dta b(%11011011)
  1305 2AC5 EC				dta b(%11101100)
  1306 2AC6 30				dta b(%00110000)
  1307 2AC7 00				dta b(0)
  1308 					
  1309 2AC8 C0				dta b(%11000000)
  1310 2AC9 70 70 70 70 70		:5 dta b(%01110000)
  1311 2ACE 5C				dta b(%01011100)
  1312 2ACF 5C				dta b(%01011100)
  1313 2AD0 97				dta b(%10010111)
  1314 2AD1 97				dta b(%10010111)
  1315 2AD2 55				dta b(%01010101)
  1316 2AD3 AA				dta b(%10101010)
  1317 2AD4 FF				dta b(%11111111)
  1318 2AD5 00 00 00			dta b(0,0,0)
  1319 							
  1320 				;faza6
  1321 2AD8 0C				dta b(%00001100)
  1322 2AD9 37				dta b(%00110111)
  1323 2ADA 37				dta b(%00110111)
  1324 2ADB 0D				dta b(%00001101)
  1325 2ADC 35				dta b(%00110101)
  1326 2ADD 75				dta b(%01110101)
  1327 2ADE 55				dta b(%01010101)
  1328 2ADF D6				dta b(%11010110)
  1329 2AE0 D6				dta b(%11010110)
  1330 2AE1 D5				dta b(%11010101)
  1331 2AE2 55				dta b(%01010101)
  1332 2AE3 5E				dta b(%01011110)
  1333 2AE4 F3				dta b(%11110011)
  1334 2AE5 00 00 00			dta b(0,0,0)
  1335 					
  1336 2AE8 00				dta b(0)
  1337 2AE9 F0				dta b(%11110000)
  1338 2AEA 5C				dta b(%01011100)
  1339 2AEB 5C				dta b(%01011100)
  1340 2AEC 70				dta b(%01110000)
  1341 2AED 70				dta b(%01110000)
  1342 2AEE 5C				dta b(%01011100)
  1343 2AEF 5C				dta b(%01011100)
  1344 2AF0 9C				dta b(%10011100)
  1345 2AF1 9C				dta b(%10011100)
  1346 2AF2 5C				dta b(%01011100)
  1347 2AF3 57				dta b(%01010111)
  1348 2AF4 D7				dta b(%11010111)
  1349 2AF5 37				dta b(%00110111)
  1350 2AF6 3B				dta b(%00111011)
  1351 2AF7 0C				dta b(%00001100)
  1352 							
  1353 				;faza7
  1354 2AF8 03				dta b(%00000011)
  1355 2AF9 0D				dta b(%00001101)
  1356 2AFA 0D				dta b(%00001101)
  1357 2AFB DD				dta b(%11011101)
  1358 2AFC D5				dta b(%11010101)
  1359 2AFD D5				dta b(%11010101)
  1360 2AFE 35				dta b(%00110101)
  1361 2AFF 55				dta b(%01010101)
  1362 2B00 55				dta b(%01010101)
  1363 2B01 E5				dta b(%11100101)
  1364 2B02 3D				dta b(%00111101)
  1365 2B03 0E				dta b(%00001110)
  1366 2B04 03 03			:2 dta b(%00000011)
  1367 2B06 00 00			dta b(0,0)
  1368 					
  1369 2B08 00				dta b(0)
  1370 2B09 C0				dta b(%11000000)
  1371 2B0A FC				dta b(%11111100)
  1372 2B0B 57				dta b(%01010111)
  1373 2B0C 57				dta b(%01010111)
  1374 2B0D 5C 5C 5C			:3 dta b(%01011100)
  1375 2B10 9C 9C 9C			:3 dta b(%10011100)
  1376 2B13 5C				dta b(%01011100)
  1377 2B14 5C				dta b(%01011100)
  1378 2B15 9C				dta b(%10011100)
  1379 2B16 DC				dta b(%11011100)
  1380 2B17 EC				dta b(%11101100)
  1381 							
  1382 				;faza8		
  1383 2B18 0D 0D 0D			:3 dta b(%00001101)
  1384 2B1B 35				dta b(%00110101)
  1385 2B1C D5				dta b(%11010101)
  1386 2B1D E5				dta b(%11100101)
  1387 2B1E 35				dta b(%00110101)
  1388 2B1F 39				dta b(%00111001)
  1389 2B20 0D 0D 0D			:3 dta b(%00001101)
  1390 2B23 0E				dta b(%00001110)
  1391 2B24 03 03 03 03			:4 dta b(%00000011)
  1392 					
  1393 2B28 DC				dta b(%11011100)
  1394 2B29 DC				dta b(%11011100)
  1395 2B2A 5C				dta b(%01011100)
  1396 2B2B 57				dta b(%01010111)
  1397 2B2C 55				dta b(%01010101)
  1398 2B2D 55				dta b(%01010101)
  1399 2B2E 57				dta b(%01010111)
  1400 2B2F 57				dta b(%01010111)
  1401 2B30 9C 9C 9C			:3 dta b(%10011100)
  1402 2B33 5C				dta b(%01011100)
  1403 2B34 70 70 70 70			:4 dta b(%01110000)
  1404 							
  1405 				;faza9
  1406 2B38 00				dta b(0)
  1407 2B39 03				dta b(%00000011)
  1408 2B3A 3F				dta b(%00111111)
  1409 2B3B D5				dta b(%11010101)
  1410 2B3C D5				dta b(%11010101)
  1411 2B3D 35 35 35			:3 dta b(%00110101)
  1412 2B40 36 36 36			:3 dta b(%00110110)
  1413 2B43 35				dta b(%00110101)
  1414 2B44 35				dta b(%00110101)
  1415 2B45 36				dta b(%00110110)
  1416 2B46 37				dta b(%00110111)
  1417 2B47 3B				dta b(%00111011)
  1418 					
  1419 2B48 C0				dta b(%11000000)
  1420 2B49 70				dta b(%01110000)
  1421 2B4A 7C				dta b(%01111100)
  1422 2B4B 77				dta b(%01110111)
  1423 2B4C 57				dta b(%01010111)
  1424 2B4D 57				dta b(%01010111)
  1425 2B4E 5C				dta b(%01011100)
  1426 2B4F 55				dta b(%01010101)
  1427 2B50 56				dta b(%01010110)
  1428 2B51 5B				dta b(%01011011)
  1429 2B52 6C				dta b(%01101100)
  1430 2B53 B0				dta b(%10110000)
  1431 2B54 C0				dta b(%11000000)
  1432 2B55 C0				dta b(%11000000)
  1433 2B56 00 00			dta b(0,0)
  1434 							
  1435 				;faza10
  1436 2B58 00				dta b(0)
  1437 2B59 0F				dta b(%00001111)
  1438 2B5A 35				dta b(%00110101)
  1439 2B5B 35				dta b(%00110101)
  1440 2B5C 0D				dta b(%00001101)
  1441 2B5D 0D				dta b(%00001101)
  1442 2B5E 35				dta b(%00110101)
  1443 2B5F 35				dta b(%00110101)
  1444 2B60 36				dta b(%00110110)
  1445 2B61 36				dta b(%00110110)
  1446 2B62 35				dta b(%00110101)
  1447 2B63 D5				dta b(%11010101)
  1448 2B64 D6				dta b(%11010110)
  1449 2B65 DB				dta b(%11011011)
  1450 2B66 EC				dta b(%11101100)
  1451 2B67 30				dta b(%00110000)
  1452 					
  1453 2B68 30				dta b(%00110000)
  1454 2B69 DC				dta b(%11011100)
  1455 2B6A DC				dta b(%11011100)
  1456 2B6B 70				dta b(%01110000)
  1457 2B6C 5C				dta b(%01011100)
  1458 2B6D 5D				dta b(%01011101)
  1459 2B6E 56				dta b(%01010110)
  1460 2B6F 97				dta b(%10010111)
  1461 2B70 97				dta b(%10010111)
  1462 2B71 57				dta b(%01010111)
  1463 2B72 65				dta b(%01100101)
  1464 2B73 B6				dta b(%10110110)
  1465 2B74 CF				dta b(%11001111)
  1466 2B75 00 00 00			dta b(0,0,0)
  1467 							
  1468 				;faza11
  1469 2B78 03				dta b(%00000011)
  1470 2B79 0D 0D 0D 0D 0D		:5 dta b(%00001101)
  1471 2B7E 35				dta b(%00110101)
  1472 2B7F 35				dta b(%00110101)
  1473 2B80 D6				dta b(%11010110)
  1474 2B81 D6				dta b(%11010110)
  1475 2B82 55				dta b(%01010101)
  1476 2B83 66				dta b(%01100110)
  1477 2B84 FF				dta b(%11111111)
  1478 2B85 00 00 00			dta b(0,0,0)
  1479 					
  1480 2B88 0C				dta b(%00001100)
  1481 2B89 F7				dta b(%11110111)
  1482 2B8A DB				dta b(%11011011)
  1483 2B8B 5C				dta b(%01011100)
  1484 2B8C 5C				dta b(%01011100)
  1485 2B8D 57				dta b(%01010111)
  1486 2B8E 57				dta b(%01010111)
  1487 2B8F 95				dta b(%10010101)
  1488 2B90 9A				dta b(%10011010)
  1489 2B91 5F				dta b(%01011111)
  1490 2B92 5C				dta b(%01011100)
  1491 2B93 57				dta b(%01010111)
  1492 2B94 D7				dta b(%11010111)
  1493 2B95 3B				dta b(%00111011)
  1494 2B96 0C				dta b(%00001100)
  1495 2B97 00				dta b(0)
  1496 							
  1497 				;faza12
  1498 2B98 00 00 00 00			dta b(0,0,0,0)
  1499 2B9C 03				dta b(%00000011)
  1500 2B9D 0D				dta b(%00001101)
  1501 2B9E 35				dta b(%00110101)
  1502 2B9F 56				dta b(%01010110)
  1503 2BA0 56				dta b(%01010110)
  1504 2BA1 35				dta b(%00110101)
  1505 2BA2 0D				dta b(%00001101)
  1506 2BA3 03				dta b(%00000011)
  1507 2BA4 00 00 00 00			dta b(0,0,0,0)
  1508 					
  1509 2BA8 30				dta b(%00110000)
  1510 2BA9 DC				dta b(%11011100)
  1511 2BAA D7				dta b(%11010111)
  1512 2BAB D7				dta b(%11010111)
  1513 2BAC 57				dta b(%01010111)
  1514 2BAD 55				dta b(%01010101)
  1515 2BAE 56				dta b(%01010110)
  1516 2BAF 97				dta b(%10010111)
  1517 2BB0 97				dta b(%10010111)
  1518 2BB1 55				dta b(%01010101)
  1519 2BB2 56				dta b(%01010110)
  1520 2BB3 57				dta b(%01010111)
  1521 2BB4 D7				dta b(%11010111)
  1522 2BB5 DB				dta b(%11011011)
  1523 2BB6 EC				dta b(%11101100)
  1524 2BB7 30				dta b(%00110000)
  1525 							
  1526 				;faza13
  1527 2BB8 00 00 00			dta b(0,0,0)
  1528 2BBB FF				dta b(%11111111)
  1529 2BBC 55				dta b(%01010101)
  1530 2BBD 55				dta b(%01010101)
  1531 2BBE D6				dta b(%11010110)
  1532 2BBF D6				dta b(%11010110)
  1533 2BC0 35				dta b(%00110101)
  1534 2BC1 35				dta b(%00110101)
  1535 2BC2 0D 0D 0D 0D 0D		:5 dta b(%00001101)
  1536 2BC7 03				dta b(%00000011)
  1537 					
  1538 2BC8 00				dta b(0)
  1539 2BC9 0C				dta b(%00001100)
  1540 2BCA 37				dta b(%00110111)
  1541 2BCB D7				dta b(%11010111)
  1542 2BCC 57				dta b(%01010111)
  1543 2BCD 5C				dta b(%01011100)
  1544 2BCE 5C				dta b(%01011100)
  1545 2BCF 95				dta b(%10010101)
  1546 2BD0 96				dta b(%10010110)
  1547 2BD1 57				dta b(%01010111)
  1548 2BD2 5B				dta b(%01011011)
  1549 2BD3 5C				dta b(%01011100)
  1550 2BD4 9C				dta b(%10011100)
  1551 2BD5 D7				dta b(%11010111)
  1552 2BD6 FB				dta b(%11111011)
  1553 2BD7 0C				dta b(%00001100)
  1554 							
  1555 				;faza14
  1556 2BD8 30				dta b(%00110000)
  1557 2BD9 DC				dta b(%11011100)
  1558 2BDA D7				dta b(%11010111)
  1559 2BDB D5				dta b(%11010101)
  1560 2BDC D5				dta b(%11010101)
  1561 2BDD 36				dta b(%00110110)
  1562 2BDE 36				dta b(%00110110)
  1563 2BDF 35 35 35			:3 dta b(%00110101)
  1564 2BE2 0D				dta b(%00001101)
  1565 2BE3 0D				dta b(%00001101)
  1566 2BE4 35				dta b(%00110101)
  1567 2BE5 35				dta b(%00110101)
  1568 2BE6 0F				dta b(%00001111)
  1569 2BE7 00				dta b(0)
  1570 					
  1571 2BE8 00 00 00			dta b(0,0,0)
  1572 2BEB CF				dta b(%11001111)
  1573 2BEC 75				dta b(%01110101)
  1574 2BED 56				dta b(%01010110)
  1575 2BEE 97				dta b(%10010111)
  1576 2BEF 97				dta b(%10010111)
  1577 2BF0 57				dta b(%01010111)
  1578 2BF1 55				dta b(%01010101)
  1579 2BF2 5E				dta b(%01011110)
  1580 2BF3 6C				dta b(%01101100)
  1581 2BF4 B0				dta b(%10110000)
  1582 2BF5 DC				dta b(%11011100)
  1583 2BF6 EC				dta b(%11101100)
  1584 2BF7 30				dta b(%00110000)
  1585 							
  1586 				;faza15
  1587 2BF8 37				dta b(%00110111)
  1588 2BF9 37				dta b(%00110111)
  1589 2BFA 35 35 35			:3 dta b(%00110101)
  1590 2BFD 36 36 36			:3 dta b(%00110110)
  1591 2C00 35 35 35			:3 dta b(%00110101)
  1592 2C03 D5				dta b(%11010101)
  1593 2C04 DA				dta b(%11011010)
  1594 2C05 3F				dta b(%00111111)
  1595 2C06 03				dta b(%00000011)
  1596 2C07 00				dta b(0)
  1597 					
  1598 2C08 00 00			dta b(0,0)
  1599 2C0A C0				dta b(%11000000)
  1600 2C0B C0				dta b(%11000000)
  1601 2C0C 70				dta b(%01110000)
  1602 2C0D 5C				dta b(%01011100)
  1603 2C0E 57				dta b(%01010111)
  1604 2C0F 55				dta b(%01010101)
  1605 2C10 5A				dta b(%01011010)
  1606 2C11 5C				dta b(%01011100)
  1607 2C12 57				dta b(%01010111)
  1608 2C13 67				dta b(%01100111)
  1609 2C14 4B				dta b(%01001011)
  1610 2C15 70				dta b(%01110000)
  1611 2C16 B0				dta b(%10110000)
  1612 2C17 C0				dta b(%11000000)		
  1613 							
  1614 = 2C18			enemy5kszt	equ *
  1615 				;faza0
  1616 2C18 00						dta b(0)
  1617 2C19 03 03					:2 dta b(%00000011)
  1618 2C1B 0F 0F					:2 dta b(%00001111)
  1619 2C1D 2D						dta b(%00101101)
  1620 2C1E 3D						dta b(%00111101)
  1621 2C1F 2F						dta b(%00101111)
  1622 2C20 3F						dta b(%00111111)
  1623 2C21 2B						dta b(%00101011)
  1624 2C22 22						dta b(%00100010)
  1625 2C23 20 20 20 20					:4 dta b(%00100000)
  1626 2C27 00						dta b(0)
  1627 							
  1628 2C28 80						dta b(%10000000)
  1629 2C29 F0 F0					:2 dta b(%11110000)
  1630 2C2B FC FC					:2 dta b(%11111100)
  1631 2C2D DE						dta b(%11011110)
  1632 2C2E DF						dta b(%11011111)
  1633 2C2F FE						dta b(%11111110)
  1634 2C30 FF						dta b(%11111111)
  1635 2C31 FA						dta b(%11111010)
  1636 2C32 E2						dta b(%11100010)
  1637 2C33 82 82 82 82					:4 dta b(%10000010)
  1638 2C37 80						dta b(%10000000)
  1639 							
  1640 				;faza1
  1641 2C38 00 00					dta b(0,0)
  1642 2C3A 03						dta b(%00000011)
  1643 2C3B 0F						dta b(%00001111)
  1644 2C3C 0D						dta b(%00001101)
  1645 2C3D 2D						dta b(%00101101)
  1646 2C3E 3F						dta b(%00111111)
  1647 2C3F 3B						dta b(%00111011)
  1648 2C40 22						dta b(%00100010)
  1649 2C41 E3						dta b(%11100011)
  1650 2C42 82						dta b(%10000010)
  1651 2C43 82						dta b(%10000010)
  1652 2C44 0E						dta b(%00001110)
  1653 2C45 08 08					:2 dta b(%00001000)
  1654 2C47 00						dta b(0)
  1655 							
  1656 2C48 20						dta b(%00100000)
  1657 2C49 F0						dta b(%11110000)
  1658 2C4A FC FC FC					:3 dta b(%11111100)
  1659 2C4D DC DC					:2 dta b(%11011100)
  1660 2C4F FC						dta b(%11111100)
  1661 2C50 F8						dta b(%11111000)
  1662 2C51 BC						dta b(%10111100)
  1663 2C52 38 38					:2 dta b(%00111000)
  1664 2C54 20 20 20					:3 dta b(%00100000)
  1665 2C57 80						dta b(%10000000)
  1666 							
  1667 				;faza2
  1668 2C58 00 00 00					dta b(0,0,0)
  1669 2C5B 0B						dta b(%00001011)
  1670 2C5C 2F						dta b(%00101111)
  1671 2C5D 2B						dta b(%00101011)
  1672 2C5E A3						dta b(%10100011)
  1673 2C5F 82						dta b(%10000010)
  1674 2C60 03						dta b(%00000011)
  1675 2C61 02						dta b(%00000010)
  1676 2C62 0A						dta b(%00001010)
  1677 2C63 08						dta b(%00001000)
  1678 2C64 28						dta b(%00101000)
  1679 2C65 20						dta b(%00100000)
  1680 2C66 00 00					dta b(0,0)
  1681 							
  1682 2C68 00 00					dta b(0,0)
  1683 2C6A FE						dta b(%11111110)
  1684 2C6B FF						dta b(%11111111)
  1685 2C6C 7F 7F					:2 dta b(%01111111)
  1686 2C6E F7 F7					:2 dta b(%11110111)
  1687 2C70 FF FF					:2 dta b(%11111111)
  1688 2C72 B8						dta b(%10111000)
  1689 2C73 3C						dta b(%00111100)
  1690 2C74 28						dta b(%00101000)
  1691 2C75 20						dta b(%00100000)
  1692 2C76 A0						dta b(%10100000)
  1693 2C77 80						dta b(%10000000)
  1694 							
  1695 				;faza3
  1696 2C78 00 00					dta b(0,0)
  1697 2C7A 02						dta b(%00000010)
  1698 2C7B 2B						dta b(%00101011)
  1699 2C7C AF						dta b(%10101111)
  1700 2C7D 03 03					:2 dta b(%00000011)
  1701 2C7F 0B						dta b(%00001011)
  1702 2C80 0E						dta b(%00001110)
  1703 2C81 2B						dta b(%00101011)
  1704 2C82 A2						dta b(%10100010)
  1705 2C83 00 00					dta b(0,0)
  1706 2C85 02 02					:2 dta b(%00000010)
  1707 2C87 08						dta b(%00001000)
  1708 							
  1709 2C88 00 00					dta b(0,0)
  1710 2C8A C0						dta b(%11000000)
  1711 2C8B F0						dta b(%11110000)
  1712 2C8C FE						dta b(%11111110)
  1713 2C8D 7F 7F					:2 dta b(%01111111)
  1714 2C8F FF						dta b(%11111111)
  1715 2C90 DF						dta b(%11011111)
  1716 2C91 DC						dta b(%11011100)
  1717 2C92 FC						dta b(%11111100)
  1718 2C93 B0						dta b(%10110000)
  1719 2C94 F0						dta b(%11110000)
  1720 2C95 80						dta b(%10000000)
  1721 2C96 00 00					dta b(0,0)
  1722 							
  1723 				;faza4
  1724 2C98 00						dta b(0)
  1725 2C99 A8						dta b(%10101000)
  1726 2C9A 0A						dta b(%00001010)
  1727 2C9B 0E						dta b(%00001110)
  1728 2C9C 03						dta b(%00000011)
  1729 2C9D 0F						dta b(%00001111)
  1730 2C9E 0B						dta b(%00001011)
  1731 2C9F AB AB					:2 dta b(%10101011)
  1732 2CA1 0B						dta b(%00001011)
  1733 2CA2 0F						dta b(%00001111)
  1734 2CA3 03						dta b(%00000011)
  1735 2CA4 0E						dta b(%00001110)
  1736 2CA5 0A						dta b(%00001010)
  1737 2CA6 A8						dta b(%10101000)
  1738 2CA7 00						dta b(0)
  1739 							
  1740 2CA8 00 00 00					dta b(0,0,0)
  1741 2CAB F0 F0					:2 dta b(%11110000)
  1742 2CAD 7C						dta b(%01111100)
  1743 2CAE 7F						dta b(%01111111)
  1744 2CAF FE FE					:2 dta b(%11111110)
  1745 2CB1 7F						dta b(%01111111)
  1746 2CB2 7C						dta b(%01111100)
  1747 2CB3 F0 F0					:2 dta b(%11110000)
  1748 2CB5 00 00 00					dta b(0,0,0)
  1749 							
  1750 				;faza5
  1751 2CB8 08						dta b(%00001000)
  1752 2CB9 02 02					:2 dta b(%00000010)
  1753 2CBB 00 00					dta b(0,0)
  1754 2CBD A2						dta b(%10100010)
  1755 2CBE 2B						dta b(%00101011)
  1756 2CBF 0E						dta b(%00001110)
  1757 2CC0 0B						dta b(%00001011)
  1758 2CC1 03						dta b(%00000011)
  1759 2CC2 0B						dta b(%00001011)
  1760 2CC3 AF						dta b(%10101111)
  1761 2CC4 2B						dta b(%00101011)
  1762 2CC5 02						dta b(%00000010)
  1763 2CC6 00 00					dta b(0,0)
  1764 							
  1765 2CC8 00 00					dta b(0,0)
  1766 2CCA 80						dta b(%10000000)
  1767 2CCB F0						dta b(%11110000)
  1768 2CCC B0						dta b(%10110000)
  1769 2CCD FC						dta b(%11111100)
  1770 2CCE DC						dta b(%11011100)
  1771 2CCF DF						dta b(%11011111)
  1772 2CD0 FF						dta b(%11111111)
  1773 2CD1 7F						dta b(%01111111)
  1774 2CD2 7E						dta b(%01111110)
  1775 2CD3 FC						dta b(%11111100)
  1776 2CD4 F0						dta b(%11110000)
  1777 2CD5 C0						dta b(%11000000)
  1778 2CD6 00 00					dta b(0,0)
  1779 							
  1780 				;faza6
  1781 2CD8 00 00					dta b(0,0)
  1782 2CDA 20						dta b(%00100000)
  1783 2CDB 28						dta b(%00101000)
  1784 2CDC 08						dta b(%00001000)
  1785 2CDD 0A						dta b(%00001010)
  1786 2CDE 02						dta b(%00000010)
  1787 2CDF 03						dta b(%00000011)
  1788 2CE0 82						dta b(%10000010)
  1789 2CE1 A3						dta b(%10100011)
  1790 2CE2 2B						dta b(%00101011)
  1791 2CE3 2F						dta b(%00101111)
  1792 2CE4 0B						dta b(%00001011)
  1793 2CE5 00 00 00					dta b(0,0,0)
  1794 							
  1795 2CE8 80						dta b(%10000000)
  1796 2CE9 A0						dta b(%10100000)
  1797 2CEA 20						dta b(%00100000)
  1798 2CEB 28						dta b(%00101000)
  1799 2CEC 3C						dta b(%00111100)
  1800 2CED B8						dta b(%10111000)
  1801 2CEE FF FF					:2 dta b(%11111111)
  1802 2CF0 F7 F7					:2 dta b(%11110111)
  1803 2CF2 7F 7F					:2 dta b(%01111111)
  1804 2CF4 FF						dta b(%11111111)
  1805 2CF5 FE						dta b(%11111110)
  1806 2CF6 00 00					dta b(0,0)
  1807 							
  1808 				;faza7
  1809 2CF8 00						dta b(0)
  1810 2CF9 08 08					:2 dta b(%00001000)
  1811 2CFB 0E						dta b(%00001110)
  1812 2CFC 82 82					:2 dta b(%10000010)
  1813 2CFE E3						dta b(%11100011)
  1814 2CFF 22						dta b(%00100010)
  1815 2D00 3B						dta b(%00111011)
  1816 2D01 3F						dta b(%00111111)
  1817 2D02 2D						dta b(%00101101)
  1818 2D03 0D						dta b(%00001101)
  1819 2D04 0F						dta b(%00001111)
  1820 2D05 03						dta b(%00000011)
  1821 2D06 00 00					dta b(0,0)
  1822 							
  1823 2D08 80						dta b(%10000000)
  1824 2D09 20 20 20					:3 dta b(%00100000)
  1825 2D0C 38 38					:2 dta b(%00111000)
  1826 2D0E BC						dta b(%10111100)
  1827 2D0F FC FC					:2 dta b(%11111100)
  1828 2D11 DC DC					:2 dta b(%11011100)
  1829 2D13 FC FC FC					:3 dta b(%11111100)
  1830 2D16 F0						dta b(%11110000)
  1831 2D17 20						dta b(%00100000)
  1832 							
  1833 							
  1834 				;faza8
  1835 2D18 02						dta b(%00000010)
  1836 2D19 82 82 82 82					:4 dta b(%10000010)
  1837 2D1D 8B						dta b(%10001011)
  1838 2D1E AF						dta b(%10101111)
  1839 2D1F FF						dta b(%11111111)
  1840 2D20 BF						dta b(%10111111)
  1841 2D21 F7						dta b(%11110111)
  1842 2D22 B7						dta b(%10110111)
  1843 2D23 3F 3F					:2 dta b(%00111111)
  1844 2D25 0F 0F					:2 dta b(%00001111)
  1845 2D27 02						dta b(%00000010)
  1846 							
  1847 2D28 00						dta b(0)
  1848 2D29 08 08 08 08					:4 dta b(%00001000)
  1849 2D2D 88						dta b(%10001000)
  1850 2D2E E8						dta b(%11101000)
  1851 2D2F FC						dta b(%11111100)
  1852 2D30 F8						dta b(%11111000)
  1853 2D31 7C						dta b(%01111100)
  1854 2D32 78						dta b(%01111000)
  1855 2D33 F0 F0					:2 dta b(%11110000)
  1856 2D35 C0 C0					:2 dta b(%11000000)
  1857 2D37 00						dta b(0)
  1858 							
  1859 				;faza9
  1860 2D38 02						dta b(%00000010)
  1861 2D39 08 08 08					:3 dta b(%00001000)
  1862 2D3C 2C 2C					:2 dta b(%00101100)
  1863 2D3E 3E						dta b(%00111110)
  1864 2D3F 3F 3F					:2 dta b(%00111111)
  1865 2D41 37 37					:2 dta b(%00110111)
  1866 2D43 3F 3F 3F					:3 dta b(%00111111)
  1867 2D46 0F						dta b(%00001111)
  1868 2D47 08						dta b(%00001000)
  1869 							
  1870 2D48 00						dta b(0)
  1871 2D49 20 20					:2 dta b(%00100000)
  1872 2D4B B0						dta b(%10110000)
  1873 2D4C 82 82					:2 dta b(%10000010)
  1874 2D4E CB						dta b(%11001011)
  1875 2D4F 88						dta b(%10001000)
  1876 2D50 EC						dta b(%11101100)
  1877 2D51 FC						dta b(%11111100)
  1878 2D52 78						dta b(%01111000)
  1879 2D53 70						dta b(%01110000)
  1880 2D54 F0						dta b(%11110000)
  1881 2D55 C0						dta b(%11000000)
  1882 2D56 00 00					dta b(0,0)
  1883 							
  1884 				;faza10
  1885 2D58 02						dta b(%00000010)
  1886 2D59 0A						dta b(%00001010)
  1887 2D5A 08						dta b(%00001000)
  1888 2D5B 28						dta b(%00101000)
  1889 2D5C 3C						dta b(%00111100)
  1890 2D5D 2E						dta b(%00101110)
  1891 2D5E FF FF					:2 dta b(%11111111)
  1892 2D60 DF DF					:2 dta b(%11011111)
  1893 2D62 FD FD					:2 dta b(%11111101)
  1894 2D64 FF						dta b(%11111111)
  1895 2D65 BF						dta b(%10111111)
  1896 2D66 00 00					dta b(0,0)
  1897 							
  1898 2D68 00 00					dta b(0,0)
  1899 2D6A 08						dta b(%001000)
  1900 2D6B 28						dta b(%00101000)
  1901 2D6C 20						dta b(%00100000)
  1902 2D6D A0						dta b(%10100000)
  1903 2D6E 80						dta b(%10000000)
  1904 2D6F C0						dta b(%11000000)
  1905 2D70 82						dta b(%10000010)
  1906 2D71 CA						dta b(%11001010)
  1907 2D72 E8						dta b(%11101000)
  1908 2D73 F8						dta b(%11111000)
  1909 2D74 E0						dta b(%11100000)
  1910 2D75 00 00 00					dta b(0,0,0)
  1911 							
  1912 				;faza11
  1913 2D78 00 00					dta b(0,0)
  1914 2D7A 02						dta b(%00000010)
  1915 2D7B 0F						dta b(%00001111)
  1916 2D7C 0E						dta b(%00001110)
  1917 2D7D 3F						dta b(%00111111)
  1918 2D7E 37						dta b(%00110111)
  1919 2D7F F7						dta b(%11110111)
  1920 2D80 FF						dta b(%11111111)
  1921 2D81 FD						dta b(%11111101)
  1922 2D82 BD						dta b(%10111101)
  1923 2D83 3F						dta b(%00111111)
  1924 2D84 0F						dta b(%00001111)
  1925 2D85 03						dta b(%00000011)
  1926 2D86 00 00					dta b(0,0)
  1927 							
  1928 2D88 20						dta b(%00100000)
  1929 2D89 80 80					:2 dta b(%10000000)
  1930 2D8B 00 00					dta b(0,0)
  1931 2D8D 8A						dta b(%10001010)
  1932 2D8E E8						dta b(%11101000)
  1933 2D8F B0						dta b(%10110000)
  1934 2D90 E0						dta b(%11100000)
  1935 2D91 C0						dta b(%11000000)
  1936 2D92 E0						dta b(%11100000)
  1937 2D93 FA						dta b(%11111010)
  1938 2D94 E8						dta b(%11101000)
  1939 2D95 80						dta b(%10000000)
  1940 2D96 00 00					dta b(0,0)
  1941 							
  1942 				;faza12
  1943 2D98 00 00					dta b(0,0)
  1944 2D9A 03						dta b(%00000011)
  1945 2D9B 0F 0F					:2 dta b(%00001111)
  1946 2D9D 3D						dta b(%00111101)
  1947 2D9E FD						dta b(%11111101)
  1948 2D9F BF BF					:2 dta b(%10111111)
  1949 2DA1 FD						dta b(%11111101)
  1950 2DA2 3D						dta b(%00111101)
  1951 2DA3 0F 0F					:2 dta b(%00001111)
  1952 2DA5 03						dta b(%00000011)
  1953 2DA6 00 00					dta b(0,0)
  1954 							
  1955 2DA8 00						dta b(0)
  1956 2DA9 2A						dta b(%00101010)
  1957 2DAA A0						dta b(%10100000)
  1958 2DAB B0						dta b(%10110000)
  1959 2DAC C0						dta b(%11000000)
  1960 2DAD F0						dta b(%11110000)
  1961 2DAE E0						dta b(%11100000)
  1962 2DAF EA EA					:2 dta b(%11101010)
  1963 2DB1 E0						dta b(%11100000)
  1964 2DB2 F0						dta b(%11110000)
  1965 2DB3 C0						dta b(%11000000)
  1966 2DB4 B0						dta b(%10110000)
  1967 2DB5 A0						dta b(%10100000)
  1968 2DB6 2A						dta b(%00101010)
  1969 2DB7 00						dta b(0)
  1970 							
  1971 				;faza13
  1972 2DB8 00 00					dta b(0,0)
  1973 2DBA 03						dta b(%00000011)
  1974 2DBB 0F						dta b(%00001111)
  1975 2DBC 3F						dta b(%00111111)
  1976 2DBD BD						dta b(%10111101)
  1977 2DBE FD						dta b(%11111101)
  1978 2DBF FF						dta b(%11111111)
  1979 2DC0 F7						dta b(%11110111)
  1980 2DC1 37						dta b(%00110111)
  1981 2DC2 3F						dta b(%00111111)
  1982 2DC3 0E						dta b(%00001110)
  1983 2DC4 0F						dta b(%00001111)
  1984 2DC5 02						dta b(%00000010)
  1985 2DC6 00 00					dta b(0,0)
  1986 							
  1987 2DC8 00 00					dta b(0,0)
  1988 2DCA 80						dta b(%10000000)
  1989 2DCB E8						dta b(%11101000)
  1990 2DCC FA						dta b(%11111010)
  1991 2DCD E0						dta b(%11100000)
  1992 2DCE C0						dta b(%11000000)
  1993 2DCF E0						dta b(%11100000)
  1994 2DD0 B0						dta b(%10110000)
  1995 2DD1 E8						dta b(%11101000)
  1996 2DD2 8A						dta b(%10001010)
  1997 2DD3 00 00					dta b(0,0)
  1998 2DD5 80 80					:2 dta b(%10000000)
  1999 2DD7 20						dta b(%00100000)
  2000 							
  2001 				;faza14
  2002 2DD8 00 00					dta b(0,0)
  2003 2DDA BF						dta b(%10111111)
  2004 2DDB FF						dta b(%11111111)
  2005 2DDC FD FD					:2 dta b(%11111101)
  2006 2DDE DF DF					:2 dta b(%11011111)
  2007 2DE0 FF FF					:2 dta b(%11111111)
  2008 2DE2 2E						dta b(%00101110)
  2009 2DE3 3C						dta b(%00111100)
  2010 2DE4 28						dta b(%00101000)
  2011 2DE5 08						dta b(%00001000)
  2012 2DE6 0A						dta b(%00001010)
  2013 2DE7 02						dta b(%00000010)
  2014 							
  2015 2DE8 00 00 00					dta b(0,0,0)
  2016 2DEB E0						dta b(%11100000)
  2017 2DEC F8						dta b(%11111000)
  2018 2DED E8						dta b(%11101000)
  2019 2DEE CA						dta b(%11001010)
  2020 2DEF 82						dta b(%10000010)
  2021 2DF0 C0						dta b(%11000000)
  2022 2DF1 80						dta b(%10000000)
  2023 2DF2 A0						dta b(%10100000)
  2024 2DF3 20						dta b(%00100000)
  2025 2DF4 28						dta b(%00101000)
  2026 2DF5 08						dta b(%00001000)
  2027 2DF6 00 00					dta b(0,0)
  2028 							
  2029 				;faza15
  2030 2DF8 08						dta b(%00001000)
  2031 2DF9 0F						dta b(%00001111)
  2032 2DFA 3F 3F 3F					:3 dta b(%00111111)
  2033 2DFD 37 37					:2 dta b(%00110111)
  2034 2DFF 3F 3F					:2 dta b(%00111111)
  2035 2E01 3E						dta b(%00111110)
  2036 2E02 2C 2C					:2 dta b(%00101100)
  2037 2E04 08 08 08					:3 dta b(%00001000)
  2038 2E07 02						dta b(%00000010)
  2039 							
  2040 2E08 00 00					dta b(0,0)
  2041 2E0A C0						dta b(%11000000)
  2042 2E0B F0						dta b(%11110000)
  2043 2E0C 70						dta b(%01110000)
  2044 2E0D 78						dta b(%01111000)
  2045 2E0E FC						dta b(%11111100)
  2046 2E0F EC						dta b(%11101100)
  2047 2E10 88						dta b(%10001000)
  2048 2E11 CB						dta b(%11001011)
  2049 2E12 82 82					:2 dta b(%10000010)
  2050 2E14 B0						dta b(%10110000)
  2051 2E15 20 20					:2 dta b(%00100000)
  2052 2E17 00						dta b(0)
  2053 							
  2054 				;wybuch
  2055 = 2E18			explo_kszt	equ *
  2056
  2057 2E18 80				dta b(%10000000)		;3faza
  2058 2E19 2C				dta b(%00101100)
  2059 2E1A 2E				dta b(%00101110)		
  2060 2E1B 0B				dta b(%00001011)
  2061 2E1C 34				dta b(%00110100)		
  2062 2E1D 25				dta b(%00100101)
  2063 2E1E 2C				dta b(%00101100)		
  2064 2E1F 37				dta b(%00110111)
  2065 					
  2066 2E20 A4				dta b(%10100100)		
  2067 2E21 15				dta b(%00010101)
  2068 2E22 04				dta b(%00000100)		
  2069 2E23 08				dta b(%00001000)
  2070 2E24 2D				dta b(%00101101)		
  2071 2E25 2F				dta b(%00101111)
  2072 2E26 80				dta b(%10000000)		
  2073 2E27 80				dta b(%10000000)
  2074 					
  2075 2E28 82				dta b(%10000010)		
  2076 2E29 8B				dta b(%10001011)
  2077 2E2A C8				dta b(%11001000)		
  2078 2E2B 2C				dta b(%00101100)
  2079 2E2C 7C				dta b(%01111100)		
  2080 2E2D 14				dta b(%00010100)
  2081 2E2E CB				dta b(%11001011)		
  2082 2E2F 5A				dta b(%01011010)
  2083 					
  2084 2E30 10				dta b(%00010000)		
  2085 2E31 14				dta b(%00010100)
  2086 2E32 35				dta b(%00110101)		
  2087 2E33 6A				dta b(%01101010)
  2088 2E34 B8				dta b(%10111000)		
  2089 2E35 88				dta b(%10001000)
  2090 2E36 8E				dta b(%10001110)		
  2091 2E37 82				dta b(%10000010)
  2092 					
  2093 2E38 00				dta b(%00000000)		;2faza
  2094 2E39 C0				dta b(%11000000)
  2095 2E3A 70				dta b(%01110000)
  2096 2E3B 1F				dta b(%00011111)
  2097 2E3C 14				dta b(%00010100)
  2098 2E3D 06				dta b(%00000110)
  2099 2E3E 0A				dta b(%00001010)
  2100 2E3F 58				dta b(%01011000)
  2101 					
  2102 2E40 08				dta b(%00001000)
  2103 2E41 01				dta b(%00000001)
  2104 2E42 0E				dta b(%00001110)
  2105 2E43 09				dta b(%00001001)
  2106 2E44 16				dta b(%00010110)
  2107 2E45 10				dta b(%00010000)
  2108 2E46 70				dta b(%01110000)
  2109 2E47 00				dta b(%00000000)
  2110 					
  2111 2E48 00				dta b(%00000000)
  2112 2E49 00				dta b(%00000000)
  2113 2E4A 71				dta b(%01110001)
  2114 2E4B 75				dta b(%01110101)
  2115 2E4C 94				dta b(%10010100)
  2116 2E4D A4				dta b(%10100100)
  2117 2E4E 2B				dta b(%00101011)
  2118 2E4F 18				dta b(%00011000)
  2119 					
  2120 2E50 A0				dta b(%10100000)
  2121 2E51 28				dta b(%00101000)
  2122 2E52 9C				dta b(%10011100)
  2123 2E53 DC				dta b(%11011100)
  2124 2E54 34				dta b(%00110100)
  2125 2E55 34				dta b(%00110100)
  2126 2E56 71				dta b(%01110001)
  2127 2E57 00				dta b(%00000000)
  2128
  2129 2E58 00				dta b(%00000000)		;1faza
  2130 2E59 30				dta b(%00110000)
  2131 2E5A 1C				dta b(%00011100)
  2132 2E5B 37				dta b(%00110111)
  2133 2E5C 04				dta b(%00000100)
  2134 2E5D 0D				dta b(%00001101)
  2135 2E5E 06				dta b(%00000110)
  2136 2E5F 06				dta b(%00000110)
  2137 					
  2138 2E60 3C				dta b(%00111100)
  2139 2E61 02				dta b(%00000010)
  2140 2E62 03				dta b(%00000011)
  2141 2E63 07				dta b(%00000111)
  2142 2E64 34				dta b(%00110100)
  2143 2E65 1C				dta b(%00011100)
  2144 2E66 00				dta b(%00000000)
  2145 2E67 00				dta b(%00000000)
  2146 					
  2147 2E68 00				dta b(%00000000)
  2148 2E69 0C				dta b(%00001100)
  2149 2E6A 30				dta b(%00110000)
  2150 2E6B 70				dta b(%01110000)
  2151 2E6C 50				dta b(%01010000)
  2152 2E6D D0				dta b(%11010000)
  2153 2E6E 2C				dta b(%00101100)
  2154 2E6F 30				dta b(%00110000)
  2155 					
  2156 2E70 20				dta b(%00100000)
  2157 2E71 80				dta b(%10000000)
  2158 2E72 70				dta b(%01110000)
  2159 2E73 7C				dta b(%01111100)
  2160 2E74 44				dta b(%01000100)
  2161 2E75 C3				dta b(%11000011)
  2162 2E76 00				dta b(%00000000)
  2163 2E77 00				dta b(%00000000)
  2164
  2165 				;migajaca bomba i rakieta	
  2166 = 2E78			bomba1	equ *
  2167 2E78 00				dta b(%00000000)		;bomba
  2168 2E79 00				dta b(%00000000)
  2169 2E7A 00				dta b(%00000000)
  2170 2E7B 20				dta b(%00100000)
  2171 2E7C 08				dta b(%00001000)
  2172 2E7D 03				dta b(%00000011)
  2173 2E7E 03				dta b(%00000011)
  2174 2E7F 23				dta b(%00100011)
  2175 					
  2176 2E80 03				dta b(%00000011)
  2177 2E81 03				dta b(%00000011)
  2178 2E82 08				dta b(%00001000)
  2179 2E83 20				dta b(%00100000)
  2180 2E84 00				dta b(%00000000)
  2181 2E85 00				dta b(%00000000)
  2182 2E86 00				dta b(%00000000)
  2183 2E87 00				dta b(%00000000)
  2184 					
  2185 2E88 80				dta b(%10000000)
  2186 2E89 80				dta b(%10000000)
  2187 2E8A 00				dta b(%00000000)
  2188 2E8B 02				dta b(%00000010)
  2189 2E8C C8				dta b(%11001000)
  2190 2E8D F0				dta b(%11110000)
  2191 2E8E F0				dta b(%11110000)
  2192 2E8F F2				dta b(%11110010)
  2193 					
  2194 2E90 C0				dta b(%11000000)
  2195 2E91 30				dta b(%00110000)
  2196 2E92 C8				dta b(%11001000)
  2197 2E93 02				dta b(%00000010)
  2198 2E94 00				dta b(%00000000)
  2199 2E95 80				dta b(%10000000)
  2200 2E96 80				dta b(%10000000)
  2201 2E97 00				dta b(%00000000)
  2202 					
  2203 = 2E98			rakieta1	equ *
  2204 2E98 20				dta b(%00100000)
  2205 2E99 20				dta b(%00100000)		;w gore
  2206 2E9A FC				dta b(%11111100)
  2207 2E9B F4				dta b(%11110100)
  2208 2E9C FC				dta b(%11111100)
  2209 2E9D 20				dta b(%00100000)
  2210 2E9E A8				dta b(%10101000)
  2211 2E9F FC				dta b(%11111100)
  2212 					
  2213 2EA0 FC				dta b(%11111100)		;w dol
  2214 2EA1 A8				dta b(%10101000)
  2215 2EA2 20				dta b(%00100000)
  2216 2EA3 FC				dta b(%11111100)
  2217 2EA4 F4				dta b(%11110100)
  2218 2EA5 FC				dta b(%11111100)
  2219 2EA6 20				dta b(%00100000)
  2220 2EA7 20				dta b(%00100000)
  2221 				;pozioma rakieta
  2222 2EA8 0C				dta b(%00001100)		;w lewo
  2223 2EA9 3C				dta b(%00111100)
  2224 2EAA BE				dta b(%10111110)
  2225 2EAB BE				dta b(%10111110)
  2226 2EAC 34				dta b(%00110100)
  2227 2EAD 0C				dta b(%00001100)
  2228 2EAE 00 00			dta b(0,0)
  2229 							
  2230 2EB0 30				dta b(%00110000)		;w prawo
  2231 2EB1 3C				dta b(%00111100)
  2232 2EB2 BE				dta b(%10111110)
  2233 2EB3 BE				dta b(%10111110)
  2234 2EB4 1C				dta b(%00011100)
  2235 2EB5 30				dta b(%00110000)
  2236 2EB6 00 00			dta b(0,0)
  2237 					
  2238 2EB8 00			ksztaltJadro	dta b(%00000000)
  2239 2EB9 00							dta b(%00000000)
  2240 2EBA 7D							dta b(%01111101)
  2241 2EBB 7D							dta b(%01111101)
  2242 2EBC 7D							dta b(%01111101)
  2243 2EBD 7D							dta b(%01111101)
  2244 2EBE 7D							dta b(%01111101)
  2245 2EBF 7D							dta b(%01111101)
  2246 								
  2247 2EC0 7D							dta b(%01111101)
  2248 2EC1 7D							dta b(%01111101)
  2249 2EC2 7D							dta b(%01111101)
  2250 2EC3 7D							dta b(%01111101)
  2251 2EC4 7D							dta b(%01111101)
  2252 2EC5 7D							dta b(%01111101)
  2253 2EC6 00							dta b(%00000000)
  2254 2EC7 00							dta b(%00000000)
  2255 						
  2256 2EC8 00							dta b(%00000000)
  2257 2EC9 00							dta b(%00000000)
  2258 2ECA 3D							dta b(%00111101)
  2259 2ECB 3D							dta b(%00111101)
  2260 2ECC 3D							dta b(%00111101)
  2261 2ECD 3D							dta b(%00111101)
  2262 2ECE 3D							dta b(%00111101)
  2263 2ECF 3D							dta b(%00111101)
  2264 								
  2265 2ED0 3D							dta b(%00111101)
  2266 2ED1 3D							dta b(%00111101)
  2267 2ED2 3D							dta b(%00111101)
  2268 2ED3 3D							dta b(%00111101)
  2269 2ED4 3D							dta b(%00111101)
  2270 2ED5 3D							dta b(%00111101)
  2271 2ED6 00							dta b(%00000000)
  2272 2ED7 00							dta b(%00000000)
  2273 								
  2274 2ED8 00							dta b(%00000000)
  2275 2ED9 00							dta b(%00000000)
  2276 2EDA 0D							dta b(%00001101)
  2277 2EDB 0D							dta b(%00001101)
  2278 2EDC 0D							dta b(%00001101)
  2279 2EDD 0D							dta b(%00001101)
  2280 2EDE 0D							dta b(%00001101)
  2281 2EDF 0D							dta b(%00001101)
  2282 								
  2283 2EE0 0D							dta b(%00001101)
  2284 2EE1 0D							dta b(%00001101)
  2285 2EE2 0D							dta b(%00001101)
  2286 2EE3 0D							dta b(%00001101)
  2287 2EE4 0D							dta b(%00001101)
  2288 2EE5 0D							dta b(%00001101)
  2289 2EE6 00							dta b(%00000000)
  2290 2EE7 00							dta b(%00000000)
  2291 								
  2292 2EE8 00							dta b(%00000000)
  2293 2EE9 00							dta b(%00000000)
  2294 2EEA 01							dta b(%00000001)
  2295 2EEB 01							dta b(%00000001)
  2296 2EEC 01							dta b(%00000001)
  2297 2EED 01							dta b(%00000001)
  2298 2EEE 01							dta b(%00000001)
  2299 2EEF 01							dta b(%00000001)
  2300
  2301 2EF0 01							dta b(%00000001)
  2302 2EF1 01							dta b(%00000001)
  2303 2EF2 01							dta b(%00000001)
  2304 2EF3 01							dta b(%00000001)
  2305 2EF4 01							dta b(%00000001)
  2306 2EF5 01							dta b(%00000001)
  2307 2EF6 00							dta b(%00000000)
  2308 2EF7 00							dta b(%00000000)
  2309 								
  2310 2EF8 00							dta b(%00000000)		
  2311 2EF9 30							dta b(%00110000)
  2312 2EFA 30							dta b(%00110000)
  2313 2EFB 3C							dta b(%00111100)
  2314 2EFC 3C							dta b(%00111100)
  2315 2EFD FF							dta b(%11111111)
  2316 2EFE FB							dta b(%11111011)
  2317 2EFF EB							dta b(%11101011)
  2318 					
  2319 2F00 EB							dta b(%11101011)		
  2320 2F01 EF							dta b(%11101111)
  2321 2F02 FF							dta b(%11111111)
  2322 2F03 3C							dta b(%00111100)
  2323 2F04 3C							dta b(%00111100)
  2324 2F05 0C							dta b(%00001100)
  2325 2F06 0C							dta b(%00001100)
  2326 2F07 00							dta b(%00000000)	
  2327
  2328 2F08 00							dta b(%00000000)
  2329 2F09 00							dta b(%00000000)
  2330 2F0A 2D							dta b(%00101101)
  2331 2F0B 2D							dta b(%00101101)
  2332 2F0C 2D							dta b(%00101101)
  2333 2F0D AD							dta b(%10101101)
  2334 2F0E AD							dta b(%10101101)
  2335 2F0F AD							dta b(%10101101)
  2336 								
  2337 2F10 AD							dta b(%10101101)
  2338 2F11 AD							dta b(%10101101)
  2339 2F12 AD							dta b(%10101101)
  2340 2F13 2D							dta b(%00101101)
  2341 2F14 2D							dta b(%00101101)
  2342 2F15 2D							dta b(%00101101)
  2343 2F16 00							dta b(%00000000)
  2344 2F17 00							dta b(%00000000)
  2345
  2346 2F18 00							dta b(%00000000)
  2347 2F19 00							dta b(%00000000)
  2348 2F1A 3D							dta b(%00111101)
  2349 2F1B 3D							dta b(%00111101)
  2350 2F1C 3D							dta b(%00111101)
  2351 2F1D BD							dta b(%10111101)
  2352 2F1E BD							dta b(%10111101)
  2353 2F1F BD							dta b(%10111101)
  2354 								
  2355 2F20 BD							dta b(%10111101)
  2356 2F21 BD							dta b(%10111101)
  2357 2F22 BD							dta b(%10111101)
  2358 2F23 3D							dta b(%00111101)
  2359 2F24 3D							dta b(%00111101)
  2360 2F25 3D							dta b(%00111101)
  2361 2F26 00							dta b(%00000000)
  2362 2F27 00							dta b(%00000000)
  2363 								
  2364 2F28 00							dta b(%00000000)
  2365 2F29 3F							dta b(%00111111)
  2366 2F2A 3F							dta b(%00111111)
  2367 2F2B 3F							dta b(%00111111)
  2368 2F2C 3F							dta b(%00111111)
  2369 2F2D 3F							dta b(%00111111)
  2370 2F2E 3F							dta b(%00111111)
  2371 2F2F 00							dta b(%00000000)
  2372 								
  2373 2F30 00							dta b(%00000000)
  2374 2F31 DC							dta b(%11011100)
  2375 2F32 DC							dta b(%11011100)
  2376 2F33 DC							dta b(%11011100)
  2377 2F34 DC							dta b(%11011100)
  2378 2F35 DC							dta b(%11011100)
  2379 2F36 DC							dta b(%11011100)
  2380 2F37 00							dta b(%00000000)
  2381 							
  2382 2F38 00							dta b(%00000000)
  2383 2F39 3F							dta b(%00111111)
  2384 2F3A 3F							dta b(%00111111)
  2385 2F3B 3F							dta b(%00111111)
  2386 2F3C 3F							dta b(%00111111)
  2387 2F3D 00							dta b(%00000000)
  2388 2F3E 00							dta b(%00000000)
  2389 2F3F 00							dta b(%00000000)
  2390 								
  2391 2F40 00							dta b(%00000000)
  2392 2F41 DC							dta b(%11011100)
  2393 2F42 DC							dta b(%11011100)
  2394 2F43 DC							dta b(%11011100)
  2395 2F44 DC							dta b(%11011100)
  2396 2F45 00							dta b(%00000000)
  2397 2F46 00							dta b(%00000000)
  2398 2F47 00							dta b(%00000000)
  2399 								
  2400 2F48 00							dta b(%00000000)
  2401 2F49 3F							dta b(%00111111)
  2402 2F4A 3F							dta b(%00111111)
  2403 2F4B 00							dta b(%00000000)
  2404 2F4C 00							dta b(%00000000)
  2405 2F4D 00							dta b(%00000000)
  2406 2F4E 00							dta b(%00000000)
  2407 2F4F 00							dta b(%00000000)
  2408 								
  2409 2F50 00							dta b(%00000000)
  2410 2F51 DC							dta b(%11011100)
  2411 2F52 DC							dta b(%11011100)
  2412 2F53 00							dta b(%00000000)
  2413 2F54 00							dta b(%00000000)
  2414 2F55 00							dta b(%00000000)
  2415 2F56 00							dta b(%00000000)
  2416 2F57 00							dta b(%00000000)
  2417 								
  2418 2F58 00							dta b(%00000000)
  2419 2F59 3F							dta b(%00111111)
  2420 2F5A 00							dta b(%00000000)
  2421 2F5B 00							dta b(%00000000)
  2422 2F5C 00							dta b(%00000000)
  2423 2F5D 00							dta b(%00000000)
  2424 2F5E 00							dta b(%00000000)
  2425 2F5F 00							dta b(%00000000)
  2426 								
  2427 2F60 00							dta b(%00000000)
  2428 2F61 DC							dta b(%11011100)
  2429 2F62 00							dta b(%00000000)
  2430 2F63 00							dta b(%00000000)
  2431 2F64 00							dta b(%00000000)
  2432 2F65 00							dta b(%00000000)
  2433 2F66 00							dta b(%00000000)
  2434 2F67 00							dta b(%00000000)
  2435 								
  2436 2F68 00							dta b(%00000000)		
  2437 2F69 03							dta b(%00000011)
  2438 2F6A 0F							dta b(%00001111)
  2439 2F6B FA							dta b(%11111010)
  2440 2F6C 3E							dta b(%00111110)
  2441 2F6D 0F							dta b(%00001111)
  2442 2F6E 03							dta b(%00000011)
  2443 2F6F 00							dta b(%00000000)
  2444 					
  2445 2F70 00							dta b(%00000000)			
  2446 2F71 C0							dta b(%11000000)
  2447 2F72 F0							dta b(%11110000)
  2448 2F73 BC							dta b(%10111100)
  2449 2F74 AF							dta b(%10101111)
  2450 2F75 F0							dta b(%11110000)
  2451 2F76 C0							dta b(%11000000)
  2452 2F77 00							dta b(%00000000)
  2453 								
  2454 2F78 00							dta b(%00000000)
  2455 2F79 3F							dta b(%00111111)
  2456 2F7A 3F							dta b(%00111111)
  2457 2F7B 3F							dta b(%00111111)
  2458 2F7C 0A							dta b(%00001010)
  2459 2F7D 0A							dta b(%00001010)
  2460 2F7E 02							dta b(%00000010)
  2461 2F7F 00							dta b(%00000000)
  2462 								
  2463 2F80 00							dta b(%00000000)
  2464 2F81 DC							dta b(%11011100)
  2465 2F82 DC							dta b(%11011100)
  2466 2F83 DC							dta b(%11011100)
  2467 2F84 A0							dta b(%10100000)
  2468 2F85 A0							dta b(%10100000)
  2469 2F86 80							dta b(%10000000)
  2470 2F87 00							dta b(%00000000)
  2471
  2472 2F88 00							dta b(%00000000)
  2473 2F89 3F							dta b(%00111111)
  2474 2F8A 3F							dta b(%00111111)
  2475 2F8B 3F							dta b(%00111111)
  2476 2F8C 3F							dta b(%00111111)
  2477 2F8D 0A							dta b(%00001010)
  2478 2F8E 0A							dta b(%00001010)
  2479 2F8F 00							dta b(%00000000)
  2480 								
  2481 2F90 00							dta b(%00000000)
  2482 2F91 DC							dta b(%11011100)
  2483 2F92 DC							dta b(%11011100)
  2484 2F93 DC							dta b(%11011100)
  2485 2F94 DC							dta b(%11011100)
  2486 2F95 A0							dta b(%10100000)
  2487 2F96 A0							dta b(%10100000)
  2488 2F97 00							dta b(%00000000)	
  2489 								
  2490 = 2F98			statek_ksztalt	equ	*			;gora
  2491 2F98			SPR_1_FRM_0
  2492 2F98 10 10 10 10 38 28 +   .he 10 10 10 10 38 28 28 aa a8 fa 7c d2 90 28 28 00
  2493 2FA8			SPR_0_FRM_0
  2494 2FA8 10 00 10 00 10 38 +   .he 10 00 10 00 10 38 30 30 b2 a4 d2 e4 12 30 10 00
  2495
  2496 2FB8			SPR_1_FRM_4
  2497 2FB8 00 28 28 90 D2 7C +   .he 00 28 28 90 d2 7c fa a8 aa 28 28 38 10 10 10 10 			
  2498 2FC8			SPR_0_FRM_4
  2499 2FC8 00 10 30 12 E4 D2 +   .he 00 10 30 12 e4 d2 a4 ba 30 30 38 10 00 10 00 00
  2500 				 
  2501 2FD8			SPR_1_FRM_6
  2502 2FD8 00 0A 0E 04 0C 39 +   .he 00 0a 0e 04 0c 39 3d ee ce 3d 19 04 04 0a 04 00
  2503 2FE8			SPR_0_FRM_6
  2504 2FE8 00 0E 04 04 04 1D +   .he 00 0e 04 04 04 1d 3d 5f 3b 15 24 08 00 04 0a 00
  2505
  2506 2FF8			SPR_1_FRM_2
  2507 2FF8 00 50 70 20 30 9C +   .he 00 50 70 20 30 9c bc 77 73 bc 98 20 20 50 20 00 
  2508 3008			SPR_0_FRM_2
  2509 3008 00 70 20 20 20 B8 +   .he 00 70 20 20 20 b8 bc fa dc a8 24 10 00 20 50 00
  2510
  2511 3018			SPR_1_FRM_7
  2512 3018 00 00 80 44 64 52 +   .he 00 00 80 44 64 52 5e 2c 28 18 28 3c 16 46 24 00
  2513 3028			SPR_0_FRM_7
  2514 3028 00 80 00 40 66 26 +   .he 00 80 00 40 66 26 3e 5c 3c 28 14 0e 3a 22 46 24
  2515
  2516 3038			SPR_1_FRM_1
  2517 3038 00 00 02 44 4C 94 +   .he 00 00 02 44 4c 94 f4 68 28 30 28 78 d0 c4 48 00
  2518 3048			SPR_0_FRM_1
  2519 3048 00 02 00 04 CC C8 +   .he 00 02 00 04 cc c8 f8 74 78 28 50 e0 b8 88 c4 48
  2520
  2521 3058			SPR_1_FRM_3
  2522 3058 00 00 48 C4 D0 78 +   .he 00 00 48 c4 d0 78 28 30 28 68 f4 94 4c 44 02 00
  2523 3068			SPR_0_FRM_3
  2524 3068 00 48 C4 88 B8 E0 +   .he 00 48 c4 88 b8 e0 50 28 78 74 f8 c8 cc 04 00 02
  2525
  2526 3078			SPR_1_FRM_5
  2527 3078 00 00 24 46 16 3C +   .he 00 00 24 46 16 3c 28 18 28 2c 5e 52 64 44 80 00
  2528 3088			SPR_0_FRM_5
  2529 3088 00 24 46 22 3A 0E +   .he 00 24 46 22 3a 0e 14 28 3c 5c 3e 26 66 40 00 80
  2530
  2531 				  
  2532 				/*			dta b(%00000000)
  2533 							dta b(%00010000)
  2534 							dta b(%00010000)
  2535 							dta b(%00010000)
  2536 							dta b(%00010000)
  2537 							dta b(%00111000)
  2538 							dta b(%00101000)
  2539 							dta b(%00101000)
  2540 							dta b(%10101010)
  2541 							dta b(%10101010)
  2542 							dta b(%11111110)
  2543 							dta b(%11111110)
  2544 							dta b(%11010110)
  2545 							dta b(%10010010)
  2546 							dta b(%00101000)
  2547 							dta b(%00101000)
  2548 							
  2549 							dta b(%00000000)
  2550 							dta b(%00000000)
  2551 							dta b(%00000000)
  2552 							dta b(%00000000)
  2553 							dta b(%00000000)
  2554 							dta b(%00000000)
  2555 							dta b(%00010000)
  2556 							dta b(%00010000)
  2557 							dta b(%00010000)
  2558 							dta b(%00010000)
  2559 							dta b(%00000000)
  2560 							dta b(%00000000)
  2561 							dta b(%00101000)
  2562 							dta b(%00000000)
  2563 							dta b(%10010010)
  2564 							dta b(%10010010)
  2565 							
  2566 							dta b(%00101000)		;dol
  2567 							dta b(%00101000)
  2568 							dta b(%10010010)
  2569 							dta b(%11010110)
  2570 							dta b(%11111110)
  2571 							dta b(%11111110)
  2572 							dta b(%10101010)
  2573 							dta b(%10101010)
  2574 							dta b(%00101000)
  2575 							dta b(%00101000)
  2576 							dta b(%00111000)
  2577 							dta b(%00010000)
  2578 							dta b(%00010000)
  2579 							dta b(%00010000)
  2580 							dta b(%00010000)
  2581 							dta b(%00000000)
  2582 							
  2583 							dta b(%10010010)
  2584 							dta b(%10010010)
  2585 							dta b(%00000000)
  2586 							dta b(%00101000)
  2587 							dta b(%00000000)
  2588 							dta b(%01000100)
  2589 							dta b(%00010000)
  2590 							dta b(%00010000)
  2591 							dta b(%00010000)
  2592 							dta b(%00010000)
  2593 							dta b(%00101000)
  2594 							dta b(%00000000)
  2595 							dta b(%00000000)
  2596 							dta b(%00000000)
  2597 							dta b(%00010000)
  2598 							dta b(%00000000)
  2599 							
  2600 							dta b(%00000000)		;lewo
  2601 							dta b(%00011100)
  2602 							dta b(%00011100)
  2603 							dta b(%00001000)
  2604 							dta b(%00001000)
  2605 							dta b(%00111001)
  2606 							dta b(%00111101)
  2607 							dta b(%11001110)
  2608 							dta b(%11001110)
  2609 							dta b(%00111101)
  2610 							dta b(%00111001)
  2611 							dta b(%00001000)
  2612 							dta b(%00001000)
  2613 							dta b(%00011100)
  2614 							dta b(%00011100)
  2615 							dta b(%00000000)
  2616 							
  2617 							dta b(%00000000)
  2618 							dta b(%00000010)
  2619 							dta b(%00000010)
  2620 							dta b(%00000000)
  2621 							dta b(%00000000)
  2622 							dta b(%00000100)
  2623 							dta b(%00000000)
  2624 							dta b(%00110001)
  2625 							dta b(%00110001)
  2626 							dta b(%00000000)
  2627 							dta b(%00000100)
  2628 							dta b(%00000000)
  2629 							dta b(%00000000)
  2630 							dta b(%00000010)
  2631 							dta b(%00000010)
  2632 							dta b(%00000000)
  2633 							
  2634 							dta b(%00000000)	;prawo
  2635 							dta b(%00111000)
  2636 							dta b(%00111000)
  2637 							dta b(%00010000)
  2638 							dta b(%00010000)
  2639 							dta b(%10011100)
  2640 							dta b(%10111100)
  2641 							dta b(%01110011)
  2642 							dta b(%01110011)
  2643 							dta b(%10111100)
  2644 							dta b(%10011100)
  2645 							dta b(%00010000)
  2646 							dta b(%00010000)
  2647 							dta b(%00111000)
  2648 							dta b(%00111000)
  2649 							dta b(%00000000)
  2650 							
  2651 							 dta b(%00000000)	
  2652 							dta b(%01000000)
  2653 							dta b(%01000000)
  2654 							dta b(%00000000)
  2655 							dta b(%00000000)
  2656 							dta b(%00100000)
  2657 							dta b(%00000000)
  2658 							dta b(%10001100)
  2659 							dta b(%10001100)
  2660 							dta b(%00000000)
  2661 							dta b(%00100000)
  2662 							dta b(%00000000)
  2663 							dta b(%00000000)
  2664 							dta b(%01000000)
  2665 							dta b(%01000000)
  2666 							dta b(%00000000)
  2667 							
  2668 							dta b(%10000100)		;lewo-gora
  2669 							dta b(%10000100)
  2670 							dta b(%01100010)
  2671 							dta b(%01100010)
  2672 							dta b(%01010111)
  2673 							dta b(%01011100)
  2674 							dta b(%00101100)
  2675 							dta b(%00101000)
  2676 							dta b(%00111000)
  2677 							dta b(%10111100)
  2678 							dta b(%11101100)
  2679 							dta b(%01101000)
  2680 							dta b(%01001000)
  2681 							dta b(%01000000)
  2682 							dta b(%01000000)
  2683 							dta b(%00000000)
  2684 							
  2685 							dta b(%00000000)
  2686 							dta b(%00000000)
  2687 							dta b(%00000000)
  2688 							dta b(%00000000)
  2689 							dta b(%00100000)
  2690 							dta b(%00100001)
  2691 							dta b(%00010001)
  2692 							dta b(%00010100)
  2693 							dta b(%00000000)
  2694 							dta b(%00000000)
  2695 							dta b(%00010000)
  2696 							dta b(%00000100)
  2697 							dta b(%00000100)
  2698 							dta b(%00000000)
  2699 							dta b(%00100000)
  2700 							dta b(%00100000)
  2701 							
  2702 							dta b(%00100001)		;prawo-gora
  2703 							dta b(%00100001)
  2704 							dta b(%01000110)
  2705 							dta b(%01000110)
  2706 							dta b(%11101010)
  2707 							dta b(%00111010)
  2708 							dta b(%00110100)
  2709 							dta b(%00010100)
  2710 							dta b(%00011100)
  2711 							dta b(%00111101)
  2712 							dta b(%00110111)
  2713 							dta b(%00010110)
  2714 							dta b(%00010010)
  2715 							dta b(%00000010)
  2716 							dta b(%00000010)
  2717 							dta b(%00000000)
  2718 							
  2719 							dta b(%00000000)
  2720 							dta b(%00000000)
  2721 							dta b(%00000000)
  2722 							dta b(%00000000)
  2723 							dta b(%00000100)
  2724 							dta b(%10000100)
  2725 							dta b(%10001000)
  2726 							dta b(%00101000)
  2727 							dta b(%00000000)
  2728 							dta b(%00000000)
  2729 							dta b(%00001000)
  2730 							dta b(%00100000)
  2731 							dta b(%00100000)
  2732 							dta b(%00000000)
  2733 							dta b(%00000100)
  2734 							dta b(%00000100)
  2735 							
  2736 							dta b(%00000000)		
  2737 							dta b(%00000010)		;prawo-dol
  2738 							dta b(%00000010)
  2739 							dta b(%00010010)
  2740 							dta b(%00010110)
  2741 							dta b(%00110111)
  2742 							dta b(%00111101)
  2743 							dta b(%00011100)
  2744 							dta b(%00010100)
  2745 							dta b(%00110100)
  2746 							dta b(%00111010)
  2747 							dta b(%11101010)
  2748 							dta b(%01000110)
  2749 							dta b(%01000110)
  2750 							dta b(%00100001)
  2751 							dta b(%00100001)
  2752 							
  2753 							
  2754 							dta b(%00000100)
  2755 							dta b(%00000100)
  2756 							dta b(%00000000)
  2757 							dta b(%00100000)
  2758 							dta b(%00100000)
  2759 							dta b(%00001000)
  2760 							dta b(%00000000)
  2761 							dta b(%00000000)
  2762 							dta b(%00101000)
  2763 							dta b(%10001000)
  2764 							dta b(%10000100)
  2765 							dta b(%00000100)
  2766 							dta b(%00000000)
  2767 							dta b(%00000000)
  2768 							dta b(%00000000)
  2769 							dta b(%00000000)
  2770 							
  2771 							dta b(%00000000)		;lewo-dol
  2772 							dta b(%01000000)
  2773 							dta b(%01000000)
  2774 							dta b(%01001000)
  2775 							dta b(%11101000)
  2776 							dta b(%10101100)
  2777 							dta b(%00111100)
  2778 							dta b(%00111000)
  2779 							dta b(%00101000)
  2780 							dta b(%00101100)
  2781 							dta b(%01011100)
  2782 							dta b(%01010111)
  2783 							dta b(%01100010)
  2784 							dta b(%01100010)
  2785 							dta b(%10000100)
  2786 							dta b(%10000100)
  2787 							
  2788 							dta b(%00100000)
  2789 							dta b(%00100000)
  2790 							dta b(%00000000)
  2791 							dta b(%00000100)
  2792 							dta b(%00000100)
  2793 							dta b(%00010000)
  2794 							dta b(%00000000)
  2795 							dta b(%00000000)
  2796 							dta b(%00010100)
  2797 							dta b(%00010001)
  2798 							dta b(%00100001)
  2799 							dta b(%00100000)
  2800 							dta b(%00000000)
  2801 							dta b(%00000000)
  2802 							dta b(%00000000)
  2803 							dta b(%00000000)  */
  2803
  2804
  2805
  2806 							
  2807 							
  2808 							
  2809 = 3098			znakiBosc1	equ *
  2810 3098 00 00 00 00 00 00 + 		:8 dta b(0)
  2811
  2812 					
  2813 30A0 00					dta b(0)
  2814 30A1 38					dta b(%00111000)
  2815 30A2 6C					dta b(%01101100)		;a
  2816 30A3 C6					dta b(%11000110)
  2817 30A4 C6					dta b(%11000110)
  2818 30A5 FE					dta b(%11111110)
  2819 30A6 C6					dta b(%11000110)
  2820 30A7 C6					dta b(%11000110)
  2821 						
  2822 30A8 00					dta b(0)
  2823 30A9 FC					dta b(%11111100)		;b
  2824 30AA C6 C6				:2 dta b(%11000110)
  2825 30AC FC					dta b(%11111100)
  2826 30AD C6 C6				:2 dta b(%11000110)
  2827 30AF FE					dta b(%11111110)
  2828 						
  2829 30B0 00					dta b(0)
  2830 30B1 3C					dta b(%00111100)		;c
  2831 30B2 66					dta b(%01100110)
  2832 30B3 C0 C0 C0				:3 dta b(%11000000)
  2833 30B6 66					dta b(%01100110)
  2834 30B7 3C					dta b(%00111100)
  2835 						
  2836 30B8 00					dta b(0)
  2837 30B9 F8					dta b(%11111000)
  2838 30BA CC					dta b(%11001100)
  2839 30BB C6					dta b(%11000110)		;d
  2840 30BC C6					dta b(%11000110)
  2841 30BD C6					dta b(%11000110)
  2842 30BE CC					dta b(%11001100)
  2843 30BF F8					dta b(%11111000)
  2844 						
  2845 30C0 00					dta b(0)
  2846 30C1 7E					dta b(%01111110)
  2847 30C2 60					dta b(%01100000)		;e
  2848 30C3 60					dta b(%01100000)
  2849 30C4 7C					dta b(%01111100)
  2850 30C5 60					dta b(%01100000)
  2851 30C6 60					dta b(%01100000)
  2852 30C7 7E					dta b(%01111110)
  2853 						
  2854 30C8 00					dta b(0)
  2855 30C9 FE					dta b(%11111110)		;f
  2856 30CA C0 C0				:2 dta b(%11000000)
  2857 30CC FC					dta b(%11111100)
  2858 30CD C0 C0 C0				:3 dta b(%11000000)
  2859 30D0 00					dta b(0)
  2860 						
  2861 30D1 3E					dta b(%00111110)		;g
  2862 30D2 60					dta b(%01100000)
  2863 30D3 C0					dta b(%11000000)
  2864 30D4 CE					dta b(%11001110)
  2865 30D5 C6					dta b(%11000110)
  2866 30D6 66					dta b(%01100110)
  2867 30D7 3E					dta b(%00111110)
  2868 						
  2869 30D8 00					dta b(0)
  2870 30D9 C6 C6 C6				:3 dta b(%11000110)	;h
  2871 30DC FE					dta b(%11111110)
  2872 30DD C6 C6 C6				:3 dta b(%11000110)
  2873 						
  2874 30E0 00					dta b(0)
  2875 30E1 7E					dta b(%01111110)		;i
  2876 30E2 18 18 18 18 18			:5 dta b(%00011000)
  2877 30E7 7E					dta b(%01111110)
  2878 30E8 00					dta b(0)
  2879 						
  2880 30E9 06 06 06 06 06			:5 dta b(%00000110)	;j
  2881 30EE C6					dta b(%11000110)
  2882 30EF 7C					dta b(%01111100)
  2883 						
  2884 30F0 00					dta b(0)
  2885 30F1 C6					dta b(%11000110)		;k
  2886 30F2 CC					dta b(%11001100)
  2887 30F3 D8					dta b(%11011000)
  2888 30F4 F0					dta b(%11110000)
  2889 30F5 F8					dta b(%11111000)
  2890 30F6 DC					dta b(%11011100)
  2891 30F7 CE					dta b(%11001110)
  2892 						
  2893 30F8 00					dta b(0)
  2894 30F9 C0 C0 C0 C0 C0 C0			:6 dta b(%11000000)	;l
  2895 30FF FC					dta b(%11111100)
  2896 						
  2897 3100 00					dta b(0)
  2898 3101 C6					dta b(%11000110)		;m
  2899 3102 EE					dta b(%11101110)
  2900 3103 FE FE				:2 dta b(%11111110)
  2901 3105 D6					dta b(%11010110)
  2902 3106 C6 C6				:2 dta b(%11000110)
  2903 						
  2904 3108 00					dta b(0)
  2905 3109 C6					dta b(%11000110)
  2906 310A E6					dta b(%11100110)		;n
  2907 310B F6					dta b(%11110110)
  2908 310C FE					dta b(%11111110)
  2909 310D DE					dta b(%11011110)
  2910 310E CE					dta b(%11001110)
  2911 310F C6					dta b(%11000110)
  2912 						
  2913 3110 00					dta b(0)	
  2914 3111 7C					dta b(%01111100)
  2915 3112 C6 C6 C6 C6 C6			:5 dta b(%11000110)		;o
  2916 3117 7C					dta b(%01111100)
  2917 						
  2918 3118 00					dta b(0)
  2919 3119 FC					dta b(%11111100)		;p
  2920 311A C6 C6 C6				:3 dta b(%11000110)
  2921 311D FC					dta b(%11111100)
  2922 311E C0 C0				:2 dta b(%11000000)
  2923 						
  2924 3120 00					dta b(0)
  2925 3121 7C					dta b(%01111100)		;q
  2926 3122 C6 C6 C6				:3 dta b(%11000110)
  2927 3125 DE					dta b(%11011110)
  2928 3126 CC					dta b(%11001100)
  2929 3127 7A					dta b(%01111010)
  2930 						
  2931 3128 00					dta b(0)
  2932 3129 FC					dta b(%11111100)
  2933 312A C6					dta b(%11000110)
  2934 312B C6					dta b(%11000110)		;r
  2935 312C CE					dta b(%11001110)
  2936 312D F8					dta b(%11111000)
  2937 312E CC					dta b(%11001100)
  2938 312F C6					dta b(%11000110)
  2939 						
  2940 3130 00					dta b(0)
  2941 3131 78					dta b(%01111000)
  2942 3132 CC					dta b(%11001100)
  2943 3133 C0					dta b(%11000000)		;s
  2944 3134 7C					dta b(%01111100)
  2945 3135 06					dta b(%00000110)
  2946 3136 C6					dta b(%11000110)
  2947 3137 7C					dta b(%01111100)
  2948 						
  2949 3138 00					dta b(0)
  2950 3139 7E					dta b(%01111110)
  2951 313A 18 18 18 18 18 18			:6 dta b(%00011000)	;t
  2952 						
  2953 3140 00					dta b(0)
  2954 3141 C6 C6 C6 C6 C6 C6			:6 dta b(%11000110)	;u
  2955 3147 7C					dta b(%01111100)
  2956 						
  2957 3148 00					dta b(0)
  2958 3149 C6					dta b(%11000110)
  2959 314A C6					dta b(%11000110)		;v
  2960 314B C6					dta b(%11000110)
  2961 314C EE					dta b(%11101110)
  2962 314D 7C					dta b(%01111100)
  2963 314E 38					dta b(%00111000)
  2964 314F 10					dta b(%00010000)
  2965 						
  2966 3150 00					dta b(0)
  2967 3151 C6 C6				:2 dta b(%11000110)		;w
  2968 3153 D6					dta b(%11010110)
  2969 3154 FE FE				:2 dta b(%11111110)
  2970 3156 EE					dta b(%11101110)
  2971 3157 C6					dta b(%11000110)
  2972 						
  2973 3158 00					dta b(0)
  2974 3159 C6					dta b(%11000110)		;x
  2975 315A EE					dta b(%11101110)
  2976 315B 7C					dta b(%01111100)
  2977 315C 38					dta b(%00111000)
  2978 315D 7C					dta b(%01111100)
  2979 315E EE					dta b(%11101110)
  2980 315F C6					dta b(%11000110)
  2981 						
  2982 3160 00					dta b(0)
  2983 3161 66					dta b(%01100110)			;y
  2984 3162 66					dta b(%01100110)
  2985 3163 66					dta b(%01100110)
  2986 3164 3C					dta b(%00111100)
  2987 3165 18					dta b(%00011000)
  2988 3166 18					dta b(%00011000)
  2989 3167 18					dta b(%00011000)
  2990 						
  2991 3168 00					dta b(0)
  2992 3169 FE					dta b(%11111110)		;z
  2993 316A 0E					dta b(%00001110)
  2994 316B 1C					dta b(%00011100)
  2995 316C 38					dta b(%00111000)
  2996 316D 70					dta b(%01110000)
  2997 316E E0					dta b(%11100000)
  2998 316F FE					dta b(%11111110)
  2999 						
  3000 3170 00					dta b(0)
  3001 3171 00 00 00 00 00			:5 dta b(0)			;.65+26=91
  3002 3176 30 30				:2 dta b(%00110000)
  3003 						
  3004 3178 00					dta b(0)
  3005 3179 08					dta b(%00001000)		;!	92
  3006 317A 38 38				:2 dta b(%00111000)
  3007 317C 30					dta b(%00110000)
  3008 317D 00					dta b(0)
  3009 317E 30 30				:2 dta b(%00110000)
  3010
  3011 = 3180			cyfryBosc1	equ *		
  3012 3180 00					dta b(0)
  3013 3181 38					dta b(%00111000)		;0	93
  3014 3182 4C					dta b(%01001100)
  3015 3183 C6 C6 C6				:3 dta b(%11000110)
  3016 3186 64					dta b(%01100100)
  3017 3187 38					dta b(%00111000)
  3018 						
  3019 3188 00					dta b(0)
  3020 3189 18					dta b(%00011000)		;1
  3021 318A 38					dta b(%00111000)
  3022 318B 18 18 18 18				:4 dta b(%00011000)
  3023 318F 7E					dta b(%01111110)
  3024 						
  3025 3190 00					dta b(0)
  3026 3191 7C					dta b(%01111100)		;2
  3027 3192 C6					dta b(%11000110)
  3028 3193 0E					dta b(%00001110)
  3029 3194 3C					dta b(%00111100)
  3030 3195 78					dta b(%01111000)
  3031 3196 E0					dta b(%11100000)
  3032 3197 FE					dta b(%11111110)
  3033 						
  3034 3198 00					dta b(0)
  3035 3199 7E					dta b(%01111110)		;3
  3036 319A 0C					dta b(%00001100)
  3037 319B 18					dta b(%00011000)
  3038 319C 3C					dta b(%00111100)
  3039 319D 06					dta b(%00000110)
  3040 319E C6					dta b(%11000110)
  3041 319F 7C					dta b(%01111100)
  3042 						
  3043 31A0 00					dta b(0)
  3044 31A1 1C					dta b(%00011100)		;4
  3045 31A2 3C					dta b(%00111100)
  3046 31A3 6C					dta b(%01101100)
  3047 31A4 CC					dta b(%11001100)
  3048 31A5 FE					dta b(%11111110)
  3049 31A6 0C 0C				:2 dta b(%00001100)
  3050 						
  3051 31A8 00					dta b(0)
  3052 31A9 FC					dta b(%11111100)		;5
  3053 31AA C0					dta b(%11000000)
  3054 31AB FC					dta b(%11111100)
  3055 31AC 06 06				:2 dta b(%00000110)
  3056 31AE C6					dta b(%11000110)
  3057 31AF 7C					dta b(%01111100)
  3058 						
  3059 31B0 00					dta b(0)
  3060 31B1 3C					dta b(%00111100)		;6
  3061 31B2 60					dta b(%01100000)
  3062 31B3 C0					dta b(%11000000)
  3063 31B4 FC					dta b(%11111100)
  3064 31B5 C6 C6				:2 dta b(%11000110)
  3065 31B7 7C					dta b(%01111100)
  3066 						
  3067 31B8 00					dta b(0)
  3068 31B9 FE					dta b(%11111110)		;7
  3069 31BA C6					dta b(%11000110)
  3070 31BB 0C					dta b(%00001100)
  3071 31BC 18					dta b(%00011000)
  3072 31BD 30 30 30				:3 dta b(%00110000)
  3073 						
  3074 31C0 00					dta b(0)
  3075 31C1 78					dta b(%01111000)		;8
  3076 31C2 C4					dta b(%11000100)
  3077 31C3 E4					dta b(%11100100)
  3078 31C4 78					dta b(%01111000)
  3079 31C5 9E					dta b(%10011110)
  3080 31C6 86					dta b(%10000110)
  3081 31C7 7C					dta b(%01111100)
  3082 						
  3083 31C8 00					dta b(0)
  3084 31C9 7C					dta b(%01111100)		;9		;102
  3085 31CA C6 C6				:2 dta b(%11000110)
  3086 31CC 7E					dta b(%01111110)
  3087 31CD 06					dta b(%00000110)
  3088 31CE 0C					dta b(%00001100)
  3089 31CF 78					dta b(%01111000)			
  3090 							
  3091 				.macro	@shif
  3092 						:+256 dta :1([#<<8]>>:2)
  3093 				.endm
  3094
  3095 31D0			_Shif			@shif h 2
Macro: @SHIF [Source: banki.asm]
     1 31D0 00 00 00 00 01 01 + 		:+256 dta H([#<<8]>>2)
Source: banki.asm
  3096 32D0							@shif l 2
Macro: @SHIF [Source: banki.asm]
     1 32D0 00 40 80 C0 00 40 + 		:+256 dta L([#<<8]>>2)
Source: banki.asm
  3097
  3098 33D0							@shif h 4
Macro: @SHIF [Source: banki.asm]
     1 33D0 00 00 00 00 00 00 + 		:+256 dta H([#<<8]>>4)
Source: banki.asm
  3099 34D0							@shif l 4
Macro: @SHIF [Source: banki.asm]
     1 34D0 00 10 20 30 40 50 + 		:+256 dta L([#<<8]>>4)
Source: banki.asm
  3100 					
  3101 35D0							@shif h 6
Macro: @SHIF [Source: banki.asm]
     1 35D0 00 00 00 00 00 00 + 		:+256 dta H([#<<8]>>6)
Source: banki.asm
  3102 36D0							@shif l 6			
Macro: @SHIF [Source: banki.asm]
     1 36D0 00 04 08 0C 10 14 + 		:+256 dta L([#<<8]>>6)
Source: banki.asm
  3103 							
  3104 							
  3105 37D0 EE EE F0 F2		tLShif1		dta h(ShifRight2L, ShifRight2L, ShifRight4L, ShifRight6L)
  3106 37D4 ED ED EF F1						dta h(ShifRight2H, ShifRight2H, ShifRight4H, ShifRight6H)			
  3107
  3108
  3109 				;1 paczka 			124b
  3110 37D8 FE 04 1B 21 21 1B + enemyTab1_	dta b(-2,4,27,33,33,27,4,-2)		;48b
  3111 37E0 0D 12 21 21 12 0D + 			dta b(13,18,33,33,18,13,-2,-2)
  3112 							
  3113 37E8 04 FE FE 04 18 1E + 			dta b(4,-2,-2,4,24,30,30,24)
  3114 37F0 FE FE 0C 11 1E 1E + 			dta b(-2,-2,12,17,30,30,12,17)
  3115 							
  3116 37F8 05 07 09 0B 0D 0E + 			dta b(5,7,9,11,13,14,2,1)
  3117 3800 08 08 0C 0C 00 00 + 			dta b(8,8,12,12,0,0,4,4)	
  3118 								
  3119 3808 0E 02 0A 06		fazaTab1_	dta b(14,2,10,6)				;4b
  3120 380C 0A 05 00		tab5_		dta b(10,5,0)					;3b
  3121 380F B3 BD C7		tablives_	dta b(179,189,199)				;6b
  3122 3812 AA BF C9					dta b(170,191,201)
  3123 							
  3124 3815 20 30 40		spyScoreTab_ dta b($20,$30,$40)				;4b
  3125 = 3818			conditionC_	equ *
  3126 3818 B8 EA 34					dta b(kolorGreen,kolorYellow,kolorRed)	;3b
  3127 381B 06 08 08 08 08 08 + fazaTab_	dta b(6,8,8,8,8,8,8,8)			;56b
  3128 3823 04 06 07 07 07 07 + 			dta b(4,6,7,7,7,7,8,7)
  3129 382B 04 06 06 07 07 07 + 			dta b(4,6,6,7,7,7,8,7)
  3130 3833 04 06 06 06 07 07 + 			dta b(4,6,6,6,7,7,8,7)
  3131 383B 04 05 05 06 06 07 + 			dta b(4,5,5,6,6,7,7,7)
  3132 3843 04 05 05 05 05 05 + 			dta b(4,5,5,5,5,5,6,7)
  3133 384B 04 06 05 05 05 05 + 			dta b(4,6,5,5,5,5,5,6)
  3134
  3135 = 3853			pos_gwiazd	equ *			
  3136 3853 1F 14 12 01 0C 0A + 			dta b(31),b(20),b(18),b(1),b(12),b(10),b(7),b(21),b(23),b(3),b(14),b(25),b(15,0,13,28,4,27)
  3137 3865 0A 14 05 19 1B 0C + 			dta b(10),b(20),b(5),b(25),b(27),b(12),b(7),b(14),b(24),b(19),b(22),b(2),b(10,13,17,18,3,7)
  3138 							
  3139 3877						.align
  3140 3900-3DCF> 00 01 03 00	scolorTab		dta b(%00,%01,%11,%00)	;scolor0
  3141 3904 00 02 03 00						dta b(%00,%10,%11,%00)	;scolor1
  3142 3908 00 01 02 03						dta b(%00,%01,%10,%11)	;scolor2
  3143 390C 00 01 03 00						dta b(%00,%01,%11,%00)	;scolor3
  3144
  3145
  3146 3910			_enemyTabX
  3147 3910			.local speed0
  3148 = 007E			d0=126
  3149 = 0084			d1=132
  3150 = 008C			d2=140
  3151 = 0094			d3=148
  3152 = 009A			d4=154
  3153 = 00A0			d5=160
  3154 = 00A6			d6=166
  3155 = 00B2			d7=178
  3156
  3157 = 0030			?w2=d0*382/1000
  3158 = 0059			?w1=d0*707/1000
  3159 = 0074			?w3=d0*923/1000
  3160 3910 00 00 30 00 59 00 + 			dta a(0,?w2,?w1,?w3,d0,?w3,?w1,?w2,0,-?w2,-?w1,-?w3,-d0,-?w3,-?w1,-?w2)
  3161 = 0032			?w2=d1*382/1000
  3162 = 005D			?w1=d1*707/1000
  3163 = 0079			?w3=d1*923/1000
  3164 3930 00 00 32 00 5D 00 + 			dta a(0,?w2,?w1,?w3,d1,?w3,?w1,?w2,0,-?w2,-?w1,-?w3,-d1,-?w3,-?w1,-?w2)			
  3165 = 0035			?w2=d2*382/1000
  3166 = 0062			?w1=d2*707/1000
  3167 = 0081			?w3=d2*923/1000
  3168 3950 00 00 35 00 62 00 + 			dta a(0,?w2,?w1,?w3,d2,?w3,?w1,?w2,0,-?w2,-?w1,-?w3,-d2,-?w3,-?w1,-?w2)
  3169 = 0038			?w2=d3*382/1000
  3170 = 0068			?w1=d3*707/1000
  3171 = 0088			?w3=d3*923/1000
  3172 3970 00 00 38 00 68 00 + 			dta a(0,?w2,?w1,?w3,d3,?w3,?w1,?w2,0,-?w2,-?w1,-?w3,-d3,-?w3,-?w1,-?w2)
  3173 = 003A			?w2=d4*382/1000
  3174 = 006C			?w1=d4*707/1000
  3175 = 008E			?w3=d4*923/1000
  3176 3990 00 00 3A 00 6C 00 + 			dta a(0,?w2,?w1,?w3,d4,?w3,?w1,?w2,0,-?w2,-?w1,-?w3,-d4,-?w3,-?w1,-?w2)			
  3177 = 003D			?w2=d5*382/1000
  3178 = 0071			?w1=d5*707/1000
  3179 = 0093			?w3=d5*923/1000
  3180 39B0 00 00 3D 00 71 00 + 			dta a(0,?w2,?w1,?w3,d5,?w3,?w1,?w2,0,-?w2,-?w1,-?w3,-d5,-?w3,-?w1,-?w2)		
  3181 = 003F			?w2=d6*382/1000
  3182 = 0075			?w1=d6*707/1000
  3183 = 0099			?w3=d6*923/1000
  3184 39D0 00 00 3F 00 75 00 + 			dta a(0,?w2,?w1,?w3,d6,?w3,?w1,?w2,0,-?w2,-?w1,-?w3,-d6,-?w3,-?w1,-?w2)	
  3185 = 0043			?w2=d7*382/1000
  3186 = 007D			?w1=d7*707/1000
  3187 = 00A4			?w3=d7*923/1000
  3188 39F0 00 00 43 00 7D 00 + 			dta a(0,?w2,?w1,?w3,d7,?w3,?w1,?w2,0,-?w2,-?w1,-?w3,-d7,-?w3,-?w1,-?w2)	
  3189 							
  3190 = 0030			?w2=d0*382/1000
  3191 = 0059			?w1=d0*707/1000
  3192 = 0074			?w3=d0*923/1000
  3193 3A10 82 FF 8C FF A7 FF + 			dta a(-d0,-?w3,-?w1,-?w2,0,?w2,?w1,?w3,d0,?w3,?w1,?w2,0,-?w2,-?w1,-?w3)
  3194 = 0032			?w2=d1*382/1000
  3195 = 005D			?w1=d1*707/1000
  3196 = 0079			?w3=d1*923/1000
  3197 3A30 7C FF 87 FF A3 FF + 			dta a(-d1,-?w3,-?w1,-?w2,0,?w2,?w1,?w3,d1,?w3,?w1,?w2,0,-?w2,-?w1,-?w3)
  3198 = 0035			?w2=d2*382/1000
  3199 = 0062			?w1=d2*707/1000
  3200 = 0081			?w3=d2*923/1000
  3201 3A50 74 FF 7F FF 9E FF + 			dta a(-d2,-?w3,-?w1,-?w2,0,?w2,?w1,?w3,d2,?w3,?w1,?w2,0,-?w2,-?w1,-?w3)
  3202 = 0038			?w2=d3*382/1000
  3203 = 0068			?w1=d3*707/1000
  3204 = 0088			?w3=d3*923/1000
  3205 3A70 6C FF 78 FF 98 FF + 			dta a(-d3,-?w3,-?w1,-?w2,0,?w2,?w1,?w3,d3,?w3,?w1,?w2,0,-?w2,-?w1,-?w3)
  3206 = 003A			?w2=d4*382/1000
  3207 = 006C			?w1=d4*707/1000
  3208 = 008E			?w3=d4*923/1000
  3209 3A90 66 FF 72 FF 94 FF + 			dta a(-d4,-?w3,-?w1,-?w2,0,?w2,?w1,?w3,d4,?w3,?w1,?w2,0,-?w2,-?w1,-?w3)
  3210 = 003D			?w2=d5*382/1000
  3211 = 0071			?w1=d5*707/1000
  3212 = 0093			?w3=d5*923/1000
  3213 3AB0 60 FF 6D FF 8F FF + 			dta a(-d5,-?w3,-?w1,-?w2,0,?w2,?w1,?w3,d5,?w3,?w1,?w2,0,-?w2,-?w1,-?w3)
  3214 = 003F			?w2=d6*382/1000
  3215 = 0075			?w1=d6*707/1000
  3216 = 0099			?w3=d6*923/1000
  3217 3AD0 5A FF 67 FF 8B FF + 			dta a(-d6,-?w3,-?w1,-?w2,0,?w2,?w1,?w3,d6,?w3,?w1,?w2,0,-?w2,-?w1,-?w3)
  3218 = 0043			?w2=d7*382/1000
  3219 = 007D			?w1=d7*707/1000
  3220 = 00A4			?w3=d7*923/1000
  3221 3AF0 4E FF 5C FF 83 FF + 			dta a(-d7,-?w3,-?w1,-?w2,0,?w2,?w1,?w3,d7,?w3,?w1,?w2,0,-?w2,-?w1,-?w3)			
  3222 				.endl
  3223
  3224
  3225 							
  3226
  3227 							
  3228
  3229 				//tworzy tabele maski 00->11, reszta 00
  3230 = 3B10			mmask		equ *	
  3231 3B10			.local			
  3232 3B10 8A						txa
  3233 3B11 29 03					and #%11
  3234 3B13 D0 04					bne @+
  3235 3B15 A9 03					lda #%11
  3236 3B17 D0 02					bne @+1
  3237 3B19 A9 00		@			lda #0
  3238 3B1B 85 CB		@			sta bom0
  3239
  3240 3B1D 8A						txa
  3241 3B1E 29 0C					and #%1100
  3242 3B20 D0 04					bne @+
  3243 3B22 A9 0C					lda #%1100
  3244 3B24 D0 02					bne @+1
  3245 3B26 A9 00		@			lda #0
  3246 3B28 05 CB		@			ora bom0
  3247 3B2A 85 CB					sta bom0
  3248 							
  3249 3B2C 8A						txa
  3250 3B2D 29 30					and #%110000
  3251 3B2F D0 04					bne @+
  3252 3B31 A9 30					lda #%110000
  3253 3B33 D0 02					bne @+1
  3254 3B35 A9 00		@			lda #0
  3255 3B37 05 CB		@			ora bom0
  3256 3B39 85 CB					sta bom0
  3257 							
  3258 3B3B 8A						txa
  3259 3B3C 29 C0					and #%11000000
  3260 3B3E D0 04					bne @+
  3261 3B40 A9 C0					lda #%11000000
  3262 3B42 D0 02					bne @+1
  3263 3B44 A9 00		@			lda #0
  3264 3B46 05 CB		@			ora bom0
  3265 							
  3266 3B48 60						rts
  3267 				.endl
  3268 					
  3269 				//tworzy tabelę kolorów, w Y nr tabeli*4	
  3270 = 3B49			mcolor	equ *	
  3271 3B49			.local
  3272 3B49 A9 39					lda #>scolorTab
  3273 3B4B 85 CE					sta bom+1
  3274 3B4D 84 CD					sty bom
  3275 							
  3276 3B4F 8A						txa
  3277 3B50 29 03					and #%11
  3278 3B52 A8						tay
  3279 3B53 B1 CD					lda (bom),y
  3280 3B55 85 CB					sta bom0
  3281 							
  3282 3B57 8A						txa
  3283 				.if .def UC
  3284 3B58 4B 0C					alr	#%1100
  3285 				.else			
  3286 							and #%1100
  3287 							lsr
  3288 				.endif			
  3289 3B5A 4A						lsr
  3290 3B5B A8						tay
  3291 3B5C B1 CD					lda (bom),y
  3292 3B5E 0A 0A					:2 asl
  3293 3B60 05 CB					ora bom0
  3294 3B62 85 CB					sta bom0
  3295 							
  3296 3B64 8A						txa
  3297 				.if .def UC
  3298 3B65 4B 30					alr	#%110000
  3299 				.else			
  3300 							and #%110000
  3301 							lsr
  3302 				.endif			
  3303 3B67 4A 4A 4A					:3 lsr
  3304 3B6A A8						tay
  3305 3B6B B1 CD					lda (bom),y
  3306 3B6D 0A 0A 0A 0A					:4 asl
  3307 3B71 05 CB					ora bom0
  3308 3B73 85 CB					sta bom0
  3309 							
  3310 3B75 8A						txa
  3311 				.if .def UC
  3312 3B76 4B C0					alr	#%11000000
  3313 				.else			
  3314 							and #%11000000
  3315 							lsr
  3316 				.endif			
  3317 3B78 4A 4A 4A 4A 4A				:5 lsr
  3318 3B7D A8						tay
  3319 3B7E B1 CD					lda (bom),y
  3320 3B80 0A 0A 0A 0A 0A 0A				:6 asl
  3321 3B86 05 CB					ora bom0
  3322 							
  3323 3B88 60						rts
  3324 				.endl
  3325 							
  3326 				;kopiowanie danych do bankow pamieci
  3327 = 3B89			init_banki	equ *
  3328 3B89 78						sei
  3329 3B8A A9 00 8D 0E D4				mva #0 NMIEN
  3330 3B8F A9 FE 8D 01 D3				mva #BANK0 PORTB
  3331 							
  3332 				;przepisuje ksztalty duszkow pod ROM
  3333 3B94 A9 FE 8D 01 D3				mva #BANK0 PORTB		;wyłączamy ROM
  3334 								
  3335 3B99 A0 00					ldy #0						;ksztalt0
  3336 3B9B B9 18 28		@			lda enemy1kszt,y
  3337 3B9E 99 00 E0					sta enemy1adr,y
  3338 3BA1 B9 18 29					lda enemy1kszt+$100,y
  3339 3BA4 99 00 E1					sta enemy1adr+$100,y
  3340 							
  3341 3BA7 B9 18 2A					lda enemy3kszt,y			;ksztalt2
  3342 3BAA 99 00 E2					sta enemy3adr,y
  3343 3BAD B9 18 2B					lda enemy3kszt+$100,y
  3344 3BB0 99 00 E3					sta enemy3adr+$100,y
  3345 							
  3346 3BB3 B9 18 2C					lda enemy5kszt,y			;spy
  3347 3BB6 99 00 E4					sta enemy5adr,y
  3348 3BB9 B9 18 2D					lda enemy5kszt+$100,y
  3349 3BBC 99 00 E5					sta enemy5adr+$100,y
  3350 							
  3351 3BBF 88						dey
  3352 3BC0 D0 D9					bne @-	
  3353 							
  3354 3BC2 A0 5F					ldy #95					;wybuch	(3 fazy 1x2)
  3355 3BC4 B9 18 2E		@			lda explo_kszt,y
  3356 3BC7 99 00 E6					sta explo_adr,y
  3357 3BCA 88						dey
  3358 3BCB 10 F7					bpl @-
  3359 								
  3360 				;maski , kolory
  3361 3BCD A2 00					ldx #0
  3362 = 3BCF			@			equ *
  3363 3BCF 20 10 3B					jsr mmask
  3364 3BD2 9D 00 E8					sta mask,x
  3365 							
  3366 3BD5 A0 00					ldy #0
  3367 3BD7 20 49 3B					jsr mcolor
  3368 3BDA 9D 00 E9					sta scolor0,x
  3369 							
  3370 3BDD A0 04					ldy #4
  3371 3BDF 20 49 3B					jsr mcolor
  3372 3BE2 9D 00 EA					sta scolor1,x
  3373 							
  3374 3BE5 A0 08					ldy #8
  3375 3BE7 20 49 3B					jsr mcolor
  3376 3BEA 9D 00 EB					sta scolor2,x
  3377 							
  3378 3BED A0 0C					ldy #12
  3379 3BEF 20 49 3B					jsr mcolor
  3380 3BF2 9D 00 EC					sta scolor3,x
  3381 							
  3382 3BF5 CA						dex
  3383 3BF6 D0 D7					bne @-
  3384
  3385 				//przepisz tabelę przesunięć			
  3386 3BF8 A2 07					ldx #7
  3387 3BFA BD D0 37		@			lda tLShif1,x
  3388 3BFD 9D 60 E6					sta tLShif,x
  3389 3C00 CA						dex
  3390 3C01 10 F7					bpl @-
  3391 							
  3392 3C03 A2 00					ldx #0
  3393 3C05 BD D0 31		@			lda _shif,x
  3394 3C08 9D 00 ED					sta ShifRight2H,x
  3395 3C0B BD D0 32					lda _shif+$100,x
  3396 3C0E 9D 00 EE					sta ShifRight2H+$100,x
  3397 3C11 BD D0 33					lda _shif+$200,x
  3398 3C14 9D 00 EF					sta ShifRight2H+$200,x
  3399 3C17 BD D0 34					lda _shif+$300,x
  3400 3C1A 9D 00 F0					sta ShifRight2H+$300,x
  3401 3C1D BD D0 35					lda _shif+$400,x
  3402 3C20 9D 00 F1					sta ShifRight2H+$400,x
  3403 3C23 BD D0 36					lda _shif+$500,x
  3404 3C26 9D 00 F2					sta ShifRight2H+$500,x
  3405 3C29 CA						dex
  3406 3C2A D0 D9					bne @-
  3407 								
  3408 				;znaki	
  3409 							
  3410 3C2C A2 00					ldx #0
  3411 3C2E BD 00 26		@			lda znaki_ad,x
  3412 3C31 9D 00 D8					sta znaki1,x
  3413 3C34 9D 00 DC					sta znaki2,x
  3414 3C37 BD 00 27					lda znaki_ad+$100,x
  3415 3C3A 9D 00 D9					sta znaki1+$100,x
  3416 3C3D 9D 00 DD					sta znaki2+$100,x
  3417 3C40 BD 00 28					lda znaki_ad+$200,x
  3418 3C43 CA						dex
  3419 3C44 D0 E8					bne @-
  3420 							
  3421 3C46 A2 1F					ldx #31
  3422 3C48 BD 78 2E		@			lda bomba1,x
  3423 3C4B 9D F8 DC					sta znaki2+firstBombaChar*8,x
  3424 3C4E CA						dex
  3425 3C4F 10 F7					bpl @-
  3426 						
  3427 3C51 A2 07					ldx #7
  3428 3C53 BD 98 2E		@			lda rakieta1,x
  3429 3C56 9D 38 DD					sta znaki2+firstRakietaChar*8,x
  3430 3C59 BD A0 2E					lda rakieta1+8,x
  3431 3C5C 9D 50 DD					sta znaki2+(firstRakietaChar+3)*8,x
  3432 3C5F BD A8 2E					lda rakieta1+16,x
  3433 3C62 9D 58 DD					sta znaki2+(firstRakietaChar+4)*8,x
  3434 3C65 BD B0 2E					lda rakieta1+24,x
  3435 3C68 9D 70 DD					sta znaki2+(firstRakietaChar+7)*8,x
  3436 3C6B BD 08 28					lda mwybuch2,x
  3437 3C6E 9D F8 DD					sta znaki2+firstMalyWybuchChar*8,x
  3438 3C71 BD 10 28					lda mwybuch2+8,x
  3439 3C74 9D 00 DE					sta znaki2+firstMalyWybuchChar*8+8,x
  3440 3C77 BD 00 28					lda mwybuch2-8,x
  3441 3C7A 9D 00 DA					sta znaki1+firstMalyWybuchChar*8+8,x
  3442 3C7D CA						dex
  3443 3C7E 10 D3					bpl @-
  3444
  3445
  3446 				;animacja jadra			
  3447 3C80 A2 E0					ldx #14*16
  3448 3C82 BD B7 2E		@			lda ksztaltJadro-1,x
  3449 3C85 9D 17 FB					sta ksztaltJadroA0-1,x
  3450 3C88 CA						dex
  3451 3C89 D0 F7					bne @-
  3452 							
  3453 3C8B A2 06					ldx #6
  3454 3C8D A9 60					lda #96
  3455 3C8F 38						sec
  3456 							
  3457 3C90 9D 10 FB		@			sta ad_jadra,x
  3458 3C93 E9 10					sbc #16
  3459 3C95 CA						dex
  3460 3C96 10 F8					bpl @-
  3461 							
  3462 				;ksztalt statku
  3463 3C98 A2 00					ldx #0
  3464 3C9A BD 98 2F		@			lda statek_ksztalt,x
  3465 3C9D 9D 00 F5					sta statek,x
  3466 3CA0 CA						dex
  3467 3CA1 D0 F7					bne @-
  3468 							
  3469 							
  3470 				;przepisywanie tabel			
  3471 3CA3 A2 7B					ldx #123
  3472 3CA5 BD D8 37		@			lda enemyTab1_,x
  3473 3CA8 9D 00 FF					sta sprites1+$700,x
  3474 3CAB CA						dex
  3475 3CAC 10 F7					bpl @-
  3476 							
  3477 				;adresy linii obraz1LH
  3478 3CAE A9 88 85 CD A9 03 + 			mwa #obraz1 bom
  3479 3CB6 A9 80 85 CF A9 0A + 			mwa #obraz2 bom1
  3480 3CBE A0 00					ldy #0
  3481 3CC0 A5 CD		@			lda bom
  3482 3CC2 99 80 FF					sta sprites1+$780,y
  3483 3CC5 A5 CE					lda bom+1
  3484 3CC7 99 9D FF					sta sprites1+$79d,y
  3485 3CCA A5 CF					lda bom1
  3486 3CCC 99 BA FF					sta sprites1+$7ba,y
  3487 3CCF A5 D0					lda bom1+1
  3488 3CD1 99 D7 FF					sta sprites1+$7d7,y
  3489 3CD4 18						clc
  3490 3CD5 A5 CD					lda bom
  3491 3CD7 69 30					adc #48
  3492 3CD9 85 CD					sta bom
  3493 3CDB 90 02					bcc @+
  3494 3CDD E6 CE					inc bom+1
  3495 3CDF 18			@			clc
  3496 3CE0 A5 CF					lda bom1
  3497 3CE2 69 30					adc #48
  3498 3CE4 85 CF					sta bom1
  3499 3CE6 90 02					bcc @+
  3500 3CE8 E6 D0					inc bom1+1
  3501 3CEA C8			@			iny
  3502 3CEB C0 1D					cpy #29
  3503 3CED D0 D1					bne @-2
  3504 						
  3505
  3506 							
  3507 				;adresy znaków
  3508 3CEF A9 00 85 CD A9 D8 + 			mwa #znaki1	bom
  3509 3CF7 A0 00					ldy #0
  3510 3CF9 A5 CD		@			lda bom
  3511 3CFB 99 00 F6					sta adresZnakL,y
  3512 3CFE 99 80 F6					sta adresZnakL+128,y
  3513 3D01 A5 CE					lda bom+1
  3514 3D03 99 00 F7					sta adresZnakH,y
  3515 3D06 99 80 F7					sta adresZnakH+128,y
  3516 3D09 18						clc
  3517 3D0A A5 CD					lda bom
  3518 3D0C 69 08					adc #8
  3519 3D0E 85 CD					sta bom
  3520 3D10 90 02					bcc @+
  3521 3D12 E6 CE					inc bom+1
  3522 3D14 C8			@			iny
  3523 3D15 C0 80					cpy #128
  3524 3D17 D0 E0					bne @-1			
  3525 							
  3526 3D19 A2 23					ldx #35
  3527 3D1B BD 53 38		@			lda pos_gwiazd,x
  3528 3D1E 9D 20 DF					sta znakXa,x
  3529 3D21 CA						dex
  3530 3D22 10 F7					bpl @-
  3531 						
  3532 							
  3533 							
  3534 3D24 A2 00					ldx #0
  3535 3D26 BD 00 3E		@			lda $3E00,x
  3536 3D29 9D 00 F3					sta $f300,x
  3537 3D2C BD 00 3F					lda $3F00,x
  3538 3D2F 9D 00 F4					sta $f400,x
  3539 3D32 BD 98 30					lda znakiBosc1,x
  3540 3D35 9D 00 F8					sta znakiBosc-8,x
  3541 							;lda _enemyTab2,x
  3542 							;sta enemyTab2,x
  3543 3D38 CA						dex
  3544 3D39 D0 EB					bne @-
  3545 							
  3546 3D3B A9 00 85 80 A9 CE + 			mwa #enemyTabX pom
  3547 3D43 A9 10 85 82 A9 CE + 			mwa #(enemyTabX+16) pom1
  3548 							
  3549 3D4B A9 10 85 F7					mva #16 pom0
  3550 3D4F A2 00					ldx #0
  3551 3D51 A0 00		@			ldy #0
  3552 3D53			_des0			
  3553 3D53 BD 10 39		@			lda _enemyTabX,x
  3554 3D56 91 80					sta (pom),y
  3555 3D58 E8						inx
  3556 3D59			_des1			
  3557 3D59 BD 10 39					lda _enemyTabX,x
  3558 3D5C 91 82					sta (pom1),y
  3559 3D5E E8						inx
  3560 3D5F D0 06					bne *+8
  3561 3D61 EE 55 3D					inc _des0+2
  3562 3D64 EE 5B 3D					inc _des1+2
  3563 3D67 C8						iny
  3564 3D68 C0 10					cpy #16
  3565 3D6A 90 E7					bcc @-
  3566 3D6C 18						clc
  3567 3D6D A5 80					lda pom
  3568 3D6F 69 20					adc #$20
  3569 3D71 85 80					sta pom
  3570 3D73 90 02					bcc *+4
  3571 3D75 E6 81					inc pom+1
  3572 3D77 18						clc
  3573 3D78 A5 82					lda pom1
  3574 3D7A 69 20					adc #$20
  3575 3D7C 85 82					sta pom1
  3576 3D7E 90 02					bcc *+4
  3577 3D80 E6 83					inc pom1+1
  3578 3D82 C6 F7					dec pom0
  3579 3D84 D0 CB					bne @-1
  3580 							
  3581 							
  3582 3D86 A2 4F					ldx #79
  3583 3D88 BD 00 F3		@			lda cyfra1,x
  3584 3D8B 0A 0A 0A 0A					:4 asl
  3585 3D8F 9D 00 F4					sta cyfra2,x
  3586 3D92 CA						dex
  3587 3D93 10 F3					bpl @- 
  3588 							
  3589 3D95 A2 37					ldx #$37
  3590 3D97 BD 98 31		@			lda znakiBosc1+$100,x
  3591 3D9A 9D 00 F9					sta znakiBosc-8+$100,x
  3592 3D9D CA						dex
  3593 3D9E 10 F7					bpl @-
  3594 							
  3595 3DA0 A0 17					ldy #25-2
  3596 3DA2 A2 00					ldx #0
  3597 3DA4			_ad			
  3598 3DA4 BD 00 40		@			lda $4000,x
  3599 3DA7 9D 00 B7					sta $b700,x
  3600 3DAA CA						dex
  3601 3DAB D0 F7					bne @-
  3602 3DAD EE A6 3D					inc _ad+2
  3603 3DB0 EE A9 3D					inc _ad+2+3
  3604 3DB3 88						dey
  3605 3DB4 D0 EE					bne @-
  3606 							
  3607
  3608 							
  3609 							
  3610 3DB6 A2 00					ldx #0
  3611 3DB8 8A						txa
  3612 3DB9 9D 00 FC		@			sta sprites1+$400,x
  3613 3DBC 9D 00 FD					sta sprites1+$500,x
  3614 3DBF E8						inx
  3615 3DC0 E0 FA					cpx #$fa
  3616 3DC2 90 F5					bcc @-
  3617 							
  3618 				;konczymy przygotowania	
  3619 3DC4 A9 FF 8D 01 D3				mva #ROM_on PORTB
  3620 3DC9 A9 40 8D 0E D4				mva #%01000000 NMIEN ;wlacz VBLK
  3621 3DCE 58						cli
  3622 							
  3623 3DCF 60						rts
  3624 							
  3625 							
  3626 3DD0						org $F300,$3e00	;$8E00
  3627 				;poczatek strony
  3628 3E00-3FFD> 02		cyfra1	dta b(%0010)
  3629 F301 05 05 05 05 05			:5 dta b(%0101)
  3630 F306 02					dta b(%0010)
  3631 F307 00					dta b(0)
  3632 						
  3633 F308 02					dta b(%0010)
  3634 F309 06					dta b(%0110)
  3635 F30A 02 02 02 02				:4 dta b(%0010)
  3636 F30E 07					dta b(%0111)
  3637 F30F 00					dta b(0)
  3638 						
  3639 F310 02					dta b(%0010)
  3640 F311 05					dta b(%0101)
  3641 F312 01					dta b(%0001)
  3642 F313 02					dta b(%0010)
  3643 F314 04 04				:2 dta b(%0100)
  3644 F316 07					dta b(%0111)
  3645 F317 00					dta b(0)
  3646 						
  3647 F318 02					dta b(%0010)
  3648 F319 05					dta b(%0101)
  3649 F31A 01					dta b(%0001)
  3650 F31B 02					dta b(%0010)
  3651 F31C 01					dta b(%0001)
  3652 F31D 05					dta b(%0101)
  3653 F31E 02					dta b(%0010)
  3654 F31F 00					dta b(0)
  3655 						
  3656 F320 04					dta b(%0100)
  3657 F321 05 05				:2 dta b(%0101)
  3658 F323 03					dta b(%0011)
  3659 F324 01 01 01				:3 dta b(%0001)
  3660 F327 00					dta b(0)
  3661 						
  3662 F328 07					dta b(%0111)
  3663 F329 04					dta b(%0100)
  3664 F32A 06					dta b(%0110)
  3665 F32B 01 01				:2 dta b(%0001)
  3666 F32D 05					dta b(%0101)
  3667 F32E 02					dta b(%0010)
  3668 F32F 00					dta b(0)
  3669 						
  3670 F330 02					dta b(%0010)
  3671 F331 05					dta b(%0101)
  3672 F332 04					dta b(%0100)
  3673 F333 06					dta b(%0110)
  3674 F334 05 05				:2 dta b(%0101)
  3675 F336 02					dta b(%0010)
  3676 F337 00					dta b(0)
  3677 						
  3678 F338 07					dta b(%0111)
  3679 F339 01 01				:2 dta b(%0001)
  3680 F33B 02 02 02 02				:4 dta b(%0010)
  3681 F33F 00					dta b(0)
  3682 						
  3683 F340 02					dta b(%0010)
  3684 F341 05 05				:2 dta b(%0101)
  3685 F343 02					dta b(%0010)
  3686 F344 05 05				:2 dta b(%0101)
  3687 F346 02					dta b(%0010)
  3688 F347 00					dta b(0)
  3689 						
  3690 F348 02					dta b(%0010)
  3691 F349 05 05				:2 dta b(%0101)
  3692 F34B 03					dta b(%0011)
  3693 F34C 01					dta b(%0001)
  3694 F34D 05					dta b(%0101)
  3695 F34E 02					dta b(%0010)
  3696 F34F 00					dta b(0)
  3697 						
  3698 F350 00 00 00 00 00 00 + 		dta b(0,0,0,0,0,0,0,0)
  3699
  3700 				;1 duszek
  3701 = F358			condition1	equ * ;24b
  3702 F358 F2					dta b(%11110010)		;green
  3703 F359 EE EE EE				:3 dta b(%11101110)
  3704 F35C EA EA				:2 dta b(%11101010)
  3705 F35E E2					dta b(%11100010)
  3706 F35F 00					dta b(0)
  3707
  3708 F360 A8					   dta b(%10101000)		;yellow
  3709 F361 AB AB				:2 dta b(%10101011)
  3710 F363 89					   dta b(%10001001)
  3711 F364 DB DB				:2 dta b(%11011011)
  3712 F366 D8					   dta b(%11011000)
  3713 F367 00					dta b(0)
  3714 						
  3715 F368 CC					dta b(%11001100)		;red
  3716 F369 D5 D5				:2 dta b(%11010101)
  3717 F36B CC					dta b(%11001100)
  3718 F36C D5 D5				:2 dta b(%11010101)
  3719 F36E D4					dta b(%11010100)
  3720 F36F 00					dta b(0)
  3721
  3722 				;2 duszek
  3723 = F370			condition2	equ *
  3724 F370 62					dta b(%01100010)	;green
  3725 F371 AE AE				:2 dta b(%10101110)
  3726 F373 66					dta b(%01100110)
  3727 F374 AE AE				:2 dta b(%10101110)
  3728 F376 A2					dta b(%10100010)
  3729 F377 00					dta b(0)
  3730 						
  3731 F378 BB BB BB BB BB BB			:6 dta b(%10111011)	;yellow
  3732 F37E 88					   dta b(%10001000)
  3733 F37F 00					dta b(0)
  3734 					
  3735 F380 4F					dta b(%01001111)		;red
  3736 F381 D7 D7 D7 D7 D7			:5 dta b(%11010111)
  3737 F386 4F					dta b(%01001111)
  3738 F387 00					dta b(0)
  3739 						
  3740 				;3duszek
  3741 = F388			condition3	equ *
  3742 F388 27					dta b(%00100111)		;green
  3743 F389 EB EB				:2 dta b(%11101011)
  3744 F38B 6B					dta b(%01101011)
  3745 F38C EB EB				:2 dta b(%11101011)
  3746 F38E 2B					dta b(%00101011)
  3747 F38F 00					dta b(0)
  3748 						
  3749 F390 CA					   dta b(%11001010)		;yellow
  3750 F391 AA AA AA				:3 dta b(%10101010)
  3751 F394 A8 A8				:2 dta b(%10101000)
  3752 F396 9A					   dta b(%10011010)
  3753 F397 00					dta b(0)
  3754 						
  3755 F398 CC CC CC				:3 dta b(%11001100)			;red
  3756 F39B DD					dta b(%11011101)
  3757 F39C FF					dta b(255)
  3758 F39D DD DD				:2 dta b(%11011101)
  3759 F39F 00					dta b(0)
  3760 						
  3761 = F3A0			nap_form2	equ *
  3762 F3A0 00 00 00			:3 dta b(0)		; strzala w gore
  3763 F3A3 10 10			:2 dta b(%00010000)
  3764 F3A5 00 00			:2 dta b(0)
  3765 F3A7 28 28			:2 dta b(%00101000)
  3766 F3A9 00 00			:2 dta b(0)
  3767 F3AB 44 44			:2 dta b(%01000100)
  3768 F3AD 00 00 00			:3 dta b(0)
  3769
  3770 F3B0 00				dta b(0)				;linia
  3771 F3B1 10 10			:2 dta b(%00010000)
  3772 F3B3 00				dta b(0)
  3773 F3B4 10 10			:2 dta b(%00010000)
  3774 F3B6 00				dta b(0)
  3775 F3B7 10 10			:2 dta b(%00010000)
  3776 F3B9 00				dta b(0)
  3777 F3BA 10 10			:2 dta b(%00010000)
  3778 F3BC 00				dta b(0)
  3779 F3BD 10 10			:2 dta b(%00010000)
  3780 F3BF 00				dta b(0)
  3781
  3782 F3C0 00 00 00			:3 dta b(0)
  3783 F3C3 44				dta b(%01000100)		;celownik ,kostka 5
  3784 F3C4 44				dta b(%01000100)
  3785 F3C5 00 00			:2 dta b(0)
  3786 F3C7 10				dta b(%00010000)
  3787 F3C8 10				dta b(%00010000)
  3788 F3C9 00 00			:2 dta b(0)
  3789 F3CB 44				dta b(%01000100)
  3790 F3CC 44				dta b(%01000100)
  3791 F3CD 00 00 00			:3 dta b(0)
  3792 					
  3793 F3D0 00 00 00			:3 dta b(0)		;krzyzyk
  3794 F3D3 10				dta b(%00010000)
  3795 F3D4 10				dta b(%00010000)
  3796 F3D5 00 00			:2 dta b(0)
  3797 F3D7 92				dta b(%10010010)
  3798 F3D8 92				dta b(%10010010)
  3799 F3D9 00 00			:2 dta b(0)
  3800 F3DB 10				dta b(%00010000)
  3801 F3DC 10				dta b(%00010000)
  3802 F3DD 00 00 00			:3 dta b(0)
  3803 					
  3804 = F3E0			statek_zapas	equ *	
  3805 F3E0 00				dta b(%00000000)
  3806 F3E1 10				dta b(%00010000)
  3807 F3E2 10				dta b(%00010000)
  3808 F3E3 10				dta b(%00010000)
  3809 F3E4 10				dta b(%00010000)
  3810 F3E5 38				dta b(%00111000)
  3811 F3E6 28				dta b(%00101000)
  3812 F3E7 28				dta b(%00101000)
  3813 F3E8 AA				dta b(%10101010)
  3814 F3E9 AA				dta b(%10101010)
  3815 F3EA FE				dta b(%11111110)
  3816 F3EB FE				dta b(%11111110)
  3817 F3EC D6				dta b(%11010110)
  3818 F3ED 92				dta b(%10010010)
  3819 F3EE 28				dta b(%00101000)
  3820 F3EF 28				dta b(%00101000)	
  3821 					
  3822 = F3F0			nap_1up	equ *
  3823 F3F0 25				dta b(%00100101)  ;player1
  3824 F3F1 65				dta b(%01100101)
  3825 F3F2 25				dta b(%00100101)
  3826 F3F3 25				dta b(%00100101)
  3827 F3F4 25				dta b(%00100101)
  3828 F3F5 25				dta b(%00100101)
  3829 F3F6 76				dta b(%01110110)
  3830 					
  3831 F3F7 70				dta b(%01110000)    ;player 2
  3832 F3F8 50				dta b(%01010000)
  3833 F3F9 50				dta b(%01010000)
  3834 F3FA 70				dta b(%01110000)
  3835 F3FB 40				dta b(%01000000)
  3836 F3FC 40				dta b(%01000000)
  3837 F3FD 40				dta b(%01000000)	
  3838
  3839 F3FE 00 00			dta b(0,0)		;wyrównanie do strony
  3840 				;poczatek strony
  3841 F400 70			cyfra2	dta b(%01110000)
  3842 F401 50					dta b(%01010000)
  3843 F402 50					dta b(%01010000)
  3844 F403 50					dta b(%01010000)
  3845 F404 50					dta b(%01010000)
  3846 F405 50					dta b(%01010000)
  3847 F406 70					dta b(%01110000)
  3848 F407 00					dta b(0)
  3849 						
  3850 F408 20					dta b(%00100000)
  3851 F409 60					dta b(%01100000)
  3852 F40A 20					dta b(%00100000)
  3853 F40B 20					dta b(%00100000)
  3854 F40C 20					dta b(%00100000)
  3855 F40D 20					dta b(%00100000)
  3856 F40E 70					dta b(%01110000)
  3857 F40F 00					dta b(0)
  3858 						
  3859 F410 70					dta b(%01110000)
  3860 F411 10					dta b(%00010000)
  3861 F412 10					dta b(%00010000)
  3862 F413 70					dta b(%01110000)
  3863 F414 40					dta b(%01000000)
  3864 F415 40					dta b(%01000000)
  3865 F416 70					dta b(%01110000)
  3866 F417 00					dta b(0)
  3867 						
  3868 F418 70					dta b(%01110000)
  3869 F419 10					dta b(%00010000)
  3870 F41A 10					dta b(%00010000)
  3871 F41B 30					dta b(%00110000)
  3872 F41C 10					dta b(%00010000)
  3873 F41D 10					dta b(%00010000)
  3874 F41E 70					dta b(%01110000)
  3875 F41F 00					dta b(0)
  3876 						
  3877 F420 50					dta b(%01010000)
  3878 F421 50					dta b(%01010000)
  3879 F422 50					dta b(%01010000)
  3880 F423 70					dta b(%01110000)
  3881 F424 10					dta b(%00010000)
  3882 F425 10					dta b(%00010000)
  3883 F426 10					dta b(%00010000)
  3884 F427 00					dta b(0)
  3885 						
  3886 F428 70					dta b(%01110000)
  3887 F429 40					dta b(%01000000)
  3888 F42A 40					dta b(%01000000)
  3889 F42B 70					dta b(%01110000)
  3890 F42C 10					dta b(%00010000)
  3891 F42D 10					dta b(%00010000)
  3892 F42E 70					dta b(%01110000)
  3893 F42F 00					dta b(0)
  3894 						
  3895 F430 70					dta b(%01110000)
  3896 F431 40					dta b(%01000000)
  3897 F432 40					dta b(%01000000)
  3898 F433 70					dta b(%01110000)
  3899 F434 50					dta b(%01010000)
  3900 F435 50					dta b(%01010000)
  3901 F436 70					dta b(%01110000)
  3902 F437 00					dta b(0)
  3903 						
  3904 F438 70					dta b(%01110000)
  3905 F439 10					dta b(%00010000)
  3906 F43A 10					dta b(%00010000)
  3907 F43B 10					dta b(%00010000)
  3908 F43C 10					dta b(%00010000)
  3909 F43D 10					dta b(%00010000)
  3910 F43E 10					dta b(%00010000)
  3911 F43F 00					dta b(0)
  3912 						
  3913 F440 70					dta b(%01110000)
  3914 F441 50					dta b(%01010000)
  3915 F442 50					dta b(%01010000)
  3916 F443 70					dta b(%01110000)
  3917 F444 50					dta b(%01010000)
  3918 F445 50					dta b(%01010000)
  3919 F446 70					dta b(%01110000)
  3920 F447 00					dta b(0)
  3921 						
  3922 F448 70					dta b(%01110000)
  3923 F449 50					dta b(%01010000)
  3924 F44A 50					dta b(%01010000)
  3925 F44B 70					dta b(%01110000)
  3926 F44C 10					dta b(%00010000)
  3927 F44D 10					dta b(%00010000)
  3928 F44E 10					dta b(%00010000)
  3929 F44F 00					dta b(0)
  3930 						
  3931 F450 00 00 00 00 00 00 + 		dta b(0,0,0,0,0,0,0,0)
  3932 					
  3933 					
  3934 					
  3935 = F458			nap_form1	equ *
  3936 F458 36				dta b(%00110110)	;pociski
  3937 F459 25				dta b(%00100101)
  3938 F45A 35				dta b(%00110101)
  3939 F45B 25 25			:2 dta b(%00100101)
  3940 F45D 00 00			dta b(0,0)
  3941 F45F 05 05			:2 dta b(%00000101)
  3942 F461 06				dta b(%00000110)
  3943 F462 05 05			:2 dta b(%00000101)
  3944 					
  3945 F464 4C				dta b(%01001100)	;1duszek
  3946 F465 AA				dta b(%10101010)
  3947 F466 AC				dta b(%10101100)
  3948 F467 AA				dta b(%10101010)
  3949 F468 4A				dta b(%01001010)
  3950 F469 00 00 00 00 00 00 + 	dta b(0,0,0,0,0,0,0)
  3951 					
  3952 F470 A4				dta b(%10100100)	;2duszek
  3953 F471 EA				dta b(%11101010)
  3954 F472 AE				dta b(%10101110)
  3955 F473 AA AA			:2 dta b(%10101010)
  3956 F475 00 00			dta b(0,0)
  3957 F477 4D				dta b(%01001101)
  3958 F478 A4				dta b(%10100100)
  3959 F479 E4				dta b(%11100100)
  3960 F47A A4 A4			:2 dta b(%10100100)
  3961 					
  3962 F47C D2				dta b(%11010010)	;3duszek
  3963 F47D 55 55 55			:3 dta b(%01010101)
  3964 F480 52				dta b(%01010010)
  3965 F481 00 00			dta b(0,0)
  3966 F483 93				dta b(%10010011)
  3967 F484 AA				dta b(%10101010)
  3968 F485 BA				dta b(%10111010)
  3969 F486 AA				dta b(%10101010)
  3970 F487 AB				dta b(%10101011)
  3971 						
  3972 = F488			nap_condition	equ *
  3973 F488 36				   dta b(%00110110)	;pociski
  3974 F489 25 25 25 25 25		:5 dta b(%00100101)
  3975 F48E 35				   dta b(%00110101)
  3976 					
  3977 F48F 36				   dta b(%00110110)	;1duszek
  3978 F490 55 55 55 55 55		:5 dta b(%01010101)
  3979 F495 65				   dta b(%01100101)
  3980 					
  3981 F496 65				   dta b(%01100101)	;3duszek
  3982 F497 54 54 54 54 54		:5 dta b(%01010100)
  3983 F49C 64				   dta b(%01100100)	
  3984 					
  3985 F49D D3				   dta b(%11010011)	;3duszek
  3986 F49E 95 95 95 95 95		:5 dta b(%10010101)
  3987 F4A3 96				   dta b(%10010110)
  3988 					   
  3989 = F4A4			nap_hiscore	equ *
  3990 F4A4 E7				dta b(%11100111)    ;pociski
  3991 F4A5 D4				dta b(%11010100)
  3992 F4A6 D4				dta b(%11010100)
  3993 F4A7 E6				dta b(%11100110)
  3994 F4A8 D4				dta b(%11010100)
  3995 F4A9 D4				dta b(%11010100)
  3996 F4AA D7				dta b(%11010111)
  3997 					
  3998 F4AB 57				dta b(%01010111)   ;player1
  3999 F4AC 52				dta b(%01010010)
  4000 F4AD 52				dta b(%01010010)
  4001 F4AE 72				dta b(%01110010)
  4002 F4AF 52				dta b(%01010010)
  4003 F4B0 52				dta b(%01010010)
  4004 F4B1 57				dta b(%01010111)
  4005 					
  4006 F4B2 0C				dta b(%00001100)   ;player2
  4007 F4B3 11				dta b(%00010001)
  4008 F4B4 11				dta b(%00010001)
  4009 F4B5 DD				dta b(%11011101)
  4010 F4B6 05				dta b(%00000101)
  4011 F4B7 05				dta b(%00000101)
  4012 F4B8 18				dta b(%00011000)
  4013 					
  4014 F4B9 CD				dta b(%11001101)   ;player3
  4015 F4BA 15				dta b(%00010101)
  4016 F4BB 15				dta b(%00010101)
  4017 F4BC 15				dta b(%00010101)
  4018 F4BD 15				dta b(%00010101)
  4019 F4BE 15				dta b(%00010101)
  4020 F4BF D9				dta b(%11011001)
  4021
  4022
  4023 = F4C0			statekm_zapas	equ *
  4024 F4C0 2A 2A 2A 2A			:4 dta b(%00101010)
  4025 F4C4 00 00			:2 dta b(0)
  4026 F4C6 3F				dta b(%00111111)
  4027 F4C7 00				dta b(0)
  4028 F4C8 2A 2A			:2 dta b(%00101010)
  4029 					
  4030 = F4CA			nap_round	equ *
  4031 F4CA 06				dta b(%00000110)	;pociski
  4032 F4CB 05				dta b(%00000101)
  4033 F4CC 05				dta b(%00000101)
  4034 F4CD 05				dta b(%00000101)
  4035 F4CE 05				dta b(%00000101)
  4036 F4CF 05				dta b(%00000101)
  4037 F4D0 06				dta b(%00000110)	
  4038 					
  4039 F4D1 63				dta b(%01100011)   ;1 duszek
  4040 F4D2 55				dta b(%01010101)
  4041 F4D3 55				dta b(%01010101)
  4042 F4D4 65				dta b(%01100101)
  4043 F4D5 55				dta b(%01010101)
  4044 F4D6 55				dta b(%01010101)
  4045 F4D7 56				dta b(%01010110)
  4046 					
  4047 F4D8 56				dta b(%01010110)  ;2 duszek
  4048 F4D9 55				dta b(%01010101)
  4049 F4DA 55				dta b(%01010101)
  4050 F4DB 55				dta b(%01010101)
  4051 F4DC 55				dta b(%01010101)
  4052 F4DD 55				dta b(%01010101)
  4053 F4DE 65				dta b(%01100101)
  4054 					
  4055
  4056 = F4DF			nap_0	equ *
  4057 F4DF 02				dta b(%00000010)   ;0 w pociskach
  4058 F4E0 05				dta b(%00000101)
  4059 F4E1 05				dta b(%00000101)
  4060 F4E2 05				dta b(%00000101)
  4061 F4E3 05				dta b(%00000101)
  4062 F4E4 05				dta b(%00000101)
  4063 F4E5 02				dta b(%00000010)	
  4064 					
  4065 F4E6 80 40 20 10 08 04 + radarBazy1	dta b(128,64,32,16,8,4,2,1,0,0,0,0)   ;pozycja X bazy na radarze sprit3
  4066 F4F2 00 00 00 00 00 00 + radarBazy2	dta b(0,0,0,0,0,0,0,0,32,16,8,4)		;pociski 3 i 2		
  4067 								
  4068 							
  4069 							
  4070 F4FE						org $B700,$4000	;$9000
  4071 B700						icl 'title.asm'
Source: title.asm
     1 				;strona tytułowa
     2 4000-562C> 74 45 77 51 + shp64	.he 74,45,77,51,71
     3
     4 = B705			Title		equ *
     5 B705 20 A9 BD				jsr prepare_title
     6 B708 20 16 28				jsr waitvbl
     7 = B70B			Title2	equ *
     8 B70B 20 ED BD				jsr title_init
     9 B70E A9 00 8D 23 BB			mva #0 atariX1
    10 B713 85 FF				sta zegar
    11 B715 85 60				sta poz0
    12 B717 85 61				sta kol0
    13 						
    14 B719 A2 0F				ldx #15
    15 B71B 9D 76 1C		@		sta sprites+$476,x
    16 B71E 9D 76 1D				sta sprites+$576,x
    17 B721 CA					dex
    18 B722 10 F7				bpl @-
    19 						
    20 B724 A9 D8				lda #>znaki1
    21 B726 8D 09 D4				sta CHBASE
    22
    23 B729 A9 94 8D 02 D4 A9 + 		mwa #dlist	DLPTR
    24 B733 A9 40 8D 0E D4			mva #%01000000 NMIEN		;wylacz przerwania DLI i IRQ
    25 B738 A9 3A 8D 00 D4			mva #58 DMACTL
    26 						
    27 B73D 20 32 BB				jsr ppanel
    28
    29 B740 20 70 BE		@		jsr printNapis
    30 						
    31 B743 20 32 BB				jsr ppanel		;bez irq
    32 						;lda CONSOL
    33 						;and #SELECT		;wylaczamy matrix
    34 						;bne *+5
    35 						;jmp matrixOn
    36 						
    37 B746 AD 10 D0				lda FIRE
    38 B749 D0 03				bne *+5
    39 B74B 4C 16 28				jmp waitvbl
    40 						
    41 B74E 20 16 28				jsr waitvbl
    42 						
    43 B751 A5 FD				lda pozNapis
    44 B753 C9 1D				cmp #29
    45 B755 90 E9				bcc @-
    46 						
    47 B757 A9 28 85 82 A9 06 + 		mwa #obraz1+19+29+13*48 pom1
    48 						
    49 						
    50 B75F 20 32 BB		@		jsr ppanel
    51 						;lda CONSOL
    52 						;and #SELECT		;wylaczamy matrix
    53 						;bne *+5
    54 						;jmp matrixOn
    55
    56 B762 AD 10 D0				lda FIRE
    57 B765 D0 03				bne *+5	
    58 B767 4C 16 28				jmp waitvbl
    59 					
    60 B76A 20 16 28				jsr waitvbl
    61 B76D 20 32 BB				jsr ppanel
    62 						
    63 B770 20 31 BF				jsr efektNapis1
    64 						
    65 B773 A5 F8				lda napisX
    66 B775 10 E8				bpl @-	
    67 						
    68 B777 A9 A5 85 60				mva #165 poz0
    69 						
    70 				//tu		
    71 B77B A2 04				ldx #4
    72 B77D A0 08				ldy #8
    73 B77F BD 00 B7		@		lda shp64,x
    74 B782 99 8C 1C				sta sprites+$48c,y
    75 B785 99 8D 1C				sta sprites+$48d,y
    76 B788 88					dey
    77 B789 88					dey
    78 B78A CA					dex
    79 B78B 10 F2				bpl @-
    80
    81 B78D 20 32 BB		@		jsr ppanel
    82 B790 A0 20				ldy #32
    83 B792 20 0E BF				jsr efnap1
    84 						
    85 B795 A9 84				lda #$84
    86 B797 8D 16 D0				sta COLPF0
    87 						
    88 B79A A0 07				ldy #7
    89 B79C A9 00				lda #0
    90 B79E 99 29 05		@		sta obraz1+19+29+7*48+33,y
    91 B7A1 99 89 08				sta obraz1+19+29+25*48+33,y
    92 B7A4 99 99 07				sta obraz1+19+29+20*48+33,y
    93 B7A7 99 F9 07				sta obraz1+19+29+22*48+33,y
    94 B7AA 99 39 07				sta obraz1+19+29+18*48+33,y
    95 B7AD 99 69 07				sta obraz1+19+29+19*48+33,y
    96 B7B0 99 C9 07				sta obraz1+19+29+21*48+33,y
    97 B7B3 99 29 08				sta obraz1+19+29+23*48+33,y
    98 B7B6 88					dey
    99 B7B7 10 E5				bpl @-
   100 						
   101 B7B9 8D DF 1C				sta sprites+$4df
   102 B7BC 8D DF 1D				sta sprites+$5df
   103 						
   104 						
   105 B7BF A2 06				ldx #6
   106 B7C1 A9 CC		@		lda #%11001100 				;last line
   107 B7C3 9D D7 1C				sta sprites+$4d8-1,x
   108 B7C6 A9 30				lda #%00110000
   109 B7C8 9D D7 1D				sta sprites+$5d8-1,x
   110 						
   111 B7CB A9 F7				lda #%11110111			;code and gfx
   112 B7CD 9D 9F 1C				sta sprites+$4a0-1,x
   113 B7D0 A9 70				lda #%01110000
   114 B7D2 9D 9F 1D				sta sprites+$5a0-1,x
   115
   116 B7D5 A9 7D				lda #%01111101			;music and sfx
   117 B7D7 9D AF 1C				sta sprites+$4b0-1,x
   118 B7DA A9 DC				lda #%11011100
   119 B7DC 9D AF 1D				sta sprites+$5b0-1,x
   120 						
   121 B7DF A9 F8				lda #%11111000				;pictures
   122 B7E1 9D BF 1C				sta sprites+$4c0-1,x
   123 B7E4 A9 FC				lda #%11111100
   124 B7E6 9D BF 1D				sta sprites+$5c0-1,x
   125 						
   126 B7E9 CA					dex
   127 B7EA 10 D5				bpl @-
   128 						
   129 						
   130 B7EC A9 05				lda #5 
   131 B7EE A2 07				ldx #7									;fragment napisu na duszku
   132 B7F0 9D 46 1F		@		sta sprites+$700+startWyniki+54,x
   133 B7F3 CA					dex
   134 B7F4 10 FA				bpl @-
   135 						
   136 B7F6 A9 34 8D F3 23			mva #kolorLogo duszek4kolor
   137 B7FB A9 2B 8D E1 23			mva #43 duszek4pos
   138 							
   139 B800 A9 32				lda #$32					;zmiana trybu na gr0 w 2 liniach
   140 B802 8D 9E 17				sta dlist+10
   141 B805 8D B0 17				sta dlist+28	
   142 						
   143 B808 A2 05				ldx #5
   144 B80A 9D A9 17		@		sta dlist+21,x
   145 B80D CA					dex
   146 B80E 10 FA				bpl @-
   147 							
   148 						
   149 B810 A2 0D				ldx #13
   150 B812 BD 31 BD		@		lda theStarDestroyer,x
   151 B815 9D 13 05				sta obraz1+19+12+28+7*48,x
   152 B818 BD 6D BD				lda sfxt,x
   153 B81B 9D 7F 07				sta obraz1+19+8+28+20*48,x
   154 B81E CA					dex
   155 B81F 10 F1				bpl @-
   156 						
   157 B821 A2 27				ldx #39
   158 B823 A9 80				lda #$80
   159 B825 9D 68 08		@		sta obraz1+19+29+25*48,x
   160 B828 CA					dex
   161 B829 10 FA				bpl @-
   162 						
   163 B82B A2 11				ldx #17
   164 B82D BD 3F BD		@		lda atariversion,x
   165 B830 09 80				ora #$80
   166 B832 9D 72 08				sta obraz1+19+11+28+25*48,x
   167 B835 CA					dex
   168 B836 10 F5				bpl @-
   169 						
   170 					
   171 B838 A2 0B				ldx #11
   172 B83A BD 51 BD		@		lda codet,x
   173 B83D 9D 1E 07				sta obraz1+19+7+28+18*48,x
   174 B840 BD 8C BD				lda pict,x
   175 B843 9D E0 07				sta obraz1+19+8+28+22*48+1,x
   176 B846 CA					dex
   177 B847 10 F1				bpl @-
   178 						
   179 B849 A2 0F				ldx #15
   180 B84B BD 5D BD		@		lda codet1,x
   181 B84E 9D 4E 07				sta obraz1+19+7+28+19*48,x
   182 B851 CA					dex
   183 B852 10 F7				bpl @-
   184 						
   185 B854 A2 10				ldx #16
   186 B856 BD 7B BD		@		lda sfxt1,x
   187 B859 9D AF 07				sta obraz1+19+8+28+21*48,x
   188 B85C BD 98 BD				lda pict1,x
   189 B85F 9D 10 08				sta obraz1+19+8+28+23*48+1,x
   190 B862 CA					dex
   191 B863 10 F1				bpl @-
   192 						
   193 B865 A9 39 8D 23 BB			mva #67-10 atariX1
   194 							
   195 B86A A9 02				lda #2
   196 B86C 8D D0 03				sta obraz1+19+25+28
   197 B86F 8D 4D 04				sta obraz1+19+25+9+3*48		;gwiazdy
   198 B872 8D E2 04				sta obraz1+19+25+14+6*48
   199 B875 8D B2 05				sta obraz1+19+25+30+10*48
   200 B878 8D 61 06				sta obraz1+19+25+13+14*48
   201 B87B 8D FC 06				sta obraz1+19+25+24+17*48
   202 B87E 8D A7 08				sta obraz1+19+25+19+26*48
   203 B881 8D E1 08				sta obraz1+19+25+29+27*48
   204 B884 8D 3C 08				sta obraz1+19+25+8+24*48
   205 						
   206 B887 A9 81				lda #129
   207 B889 8D 2A 04				sta obraz1+19+25+2*48+22
   208 B88C 8D 93 04				sta obraz1+19+25+4*48+31
   209 B88F 8D 7A 05				sta obraz1+19+25+22+9*48
   210 B892 8D 4F 08				sta obraz1+19+25+27+24*48
   211 B895 8D D0 08				sta obraz1+19+25+12+27*48
   212 						
   213 B898 A9 03 85 E3				mva #3 posx
   214 B89C A9 24 8D C1 17			mva #36 enemyX+4
   215 B8A1 A9 0E 8D CD 17			mva #14 enemyY+4
   216 B8A6 A9 00 8D D9 17			mva #0 enemyDX+4
   217 B8AB 8D DF 17				sta enemyDY+4
   218 B8AE 85 E4				sta posY
   219 B8B0 85 EB				sta ramka
   220 B8B2 85 59				sta ramka4
   221 B8B4 85 FC				sta pom0e		;kierunek
   222 B8B6 85 FF				sta zegar
   223 B8B8 A9 0C 8D E5 17			mva #12 enemyFaza+4
   224 B8BD A9 80 8D 75 01			mva #EKOLOR1 enemyNegatyw+4
   225 B8C2 A9 EA 8D 95 01			mva #>scolor1 enemyOraTab+4
   226 						
   227 B8C7 A9 10 8D F1 17			mva #enemy2shape enemyShapeH+4
   228 B8CC A9 25 85 FD				mva #37 pom0f
   229 B8D0 85 55				sta pom0g
   230 					
   231 B8D2 20 32 BB		@		jsr ppanel
   232
   233 B8D5 AD 10 D0		bbs		lda fire
   234 B8D8 D0 03 4C A4 B9			jeq @+1
   235
   236 B8DD A6 FD				ldx pom0f
   237 B8DF A5 FC				lda pom0e
   238 B8E1 D0 18				bne bb0
   239
   240 B8E3 E0 25				cpx #37
   241 B8E5 F0 28				beq bb1
   242 B8E7 A0 02				ldy #2
   243 B8E9 B9 80 01 9D 25 06	bf_3	mva bufore3,y obraz1-3+14*48,x
   244 B8EF B9 83 01 9D 55 06			mva bufore3+3,y obraz1-3+15*48,x
   245 B8F5 E8					inx
   246 B8F6 88					dey
   247 B8F7 10 F0				bpl bf_3
   248
   249 B8F9 30 14				bmi bb1	;jmp
   250
   251 						
   252 B8FB A0 02		bb0		ldy #2
   253 B8FD B9 80 01 9D 75 04	bf_2	mva bufore3,y obraz1-3+5*48,x
   254 B903 B9 83 01 9D A5 04			mva bufore3+3,y obraz1-3+6*48,x
   255 B909 E8					inx
   256 B90A 88					dey
   257 B90B 10 F0				bpl bf_2
   258
   259 B90D 30 49				bmi bb2		;jmp
   260 						
   261 = B90F			bb1		equ *		
   262 B90F 38					sec
   263 B910 AD D9 17				lda enemyDX+4		;ruch w lewo
   264 B913 E9 40				sbc #%01000000
   265 B915 8D D9 17				sta enemyDX+4
   266 B918 AD C1 17				lda enemyX+4
   267 B91B E9 00				sbc #0
   268 B91D 29 7F				and #127
   269 B91F 8D C1 17				sta enemyX+4
   270 						
   271 B922 D0 17				bne bb1_	;sprawdz czy juz poza ekranem
   272 B924 E6 FC				inc pom0e	;zmien kierunek
   273 B926 A9 00 8D C1 17			mva #0 enemyX+4
   274 B92B 8D D9 17				sta enemyDX+4
   275 B92E A9 04 8D E5 17			mva #4 enemyFaza+4
   276 B933 A9 05 8D CD 17			mva #5 enemyY+4
   277 B938 4C 58 B9				jmp bb2
   278 						
   279 B93B AA			bb1_	tax
   280 B93C 86 FD				stx pom0f
   281 B93E A0 02				ldy #2
   282 B940 BD 25 06 99 80 01	bf_1	mva obraz1-3+14*48,x bufore3,y		;zapamietaj obszar pod nową pozycją duszka
   283 B946 BD 55 06 99 83 01			mva obraz1-3+15*48,x bufore3+3,y
   284 B94C E8					inx
   285 B94D 88					dey
   286 B94E 10 F0				bpl bf_1
   287 						
   288 B950 A2 04				ldx #4
   289 B952 20 39 2D				jsr duszkiPrint
   290 B955 4C 90 B9				jmp bb3
   291 						
   292 = B958			bb2		equ *		
   293 B958 18					clc
   294 B959 AD D9 17				lda enemyDX+4		;ruch w prawo
   295 B95C 69 40				adc #%01000000
   296 B95E 8D D9 17				sta enemyDX+4
   297 B961 AD C1 17				lda enemyX+4
   298 B964 69 00				adc #0
   299 B966 29 7F				and #127
   300 B968 8D C1 17				sta enemyX+4
   301 						
   302 B96B C9 26				cmp #38
   303 B96D D0 07				bne bb2_ 
   304 B96F A9 FE 85 FF				mva #254 zegar
   305 B973 4C A4 B9				jmp @+1
   306 						
   307 B976 AA			bb2_	tax
   308 B977 86 FD				stx pom0f
   309 B979 A0 02				ldy #2
   310 B97B BD 75 04 99 80 01	bf_0	mva obraz1-3+5*48,x bufore3,y		;zapamietaj obszar pod nową pozycją duszka
   311 B981 BD A5 04 99 83 01			mva obraz1-3+6*48,x bufore3+3,y
   312 B987 E8					inx
   313 B988 88					dey
   314 B989 10 F0				bpl bf_0
   315 						
   316 B98B A2 04				ldx #4
   317 B98D 20 39 2D				jsr duszkiPrint
   318 						
   319 = B990			bb3		equ *
   320 						
   321 B990 AD 23 BB				lda atariX1
   322 B993 18					clc
   323 B994 69 02				adc #2
   324 B996 C9 9A				cmp #144+10
   325 B998 90 02				bcc @+
   326 B99A A9 39				lda #67-10
   327 B99C 8D 23 BB		@		sta atariX1
   328 						
   329 						
   330 B99F E6 61				inc kol0
   331 B9A1 4C D2 B8				jmp @-1	
   332 						
   333 B9A4 A9 34		@		lda #$34				;zmiana trybu w 2 liniach
   334 B9A6 8D 9E 17				sta dlist+10
   335 B9A9 8D B0 17				sta dlist+28	
   336 						
   337 						
   338 B9AC A2 05				ldx #5
   339 B9AE 9D A9 17		@		sta dlist+21,x
   340 B9B1 CA					dex
   341 B9B2 10 FA				bpl @-
   342 							
   343 						
   344 B9B4 A2 06				ldx #6
   345 B9B6 A9 00		@		lda #0
   346 B9B8 9D AF 1C				sta sprites+$4b0-1,x
   347 B9BB 9D AF 1D				sta sprites+$5b0-1,x
   348 B9BE 9D BF 1C				sta sprites+$4c0-1,x
   349 B9C1 9D BF 1D				sta sprites+$5c0-1,x
   350 B9C4 9D 9F 1C				sta sprites+$4a0-1,x
   351 B9C7 9D 9F 1D				sta sprites+$5a0-1,x
   352 B9CA CA					dex
   353 B9CB 10 E9				bpl @-
   354 						
   355 B9CD A2 09				ldx #9
   356 B9CF 9D 8C 1C		@		sta sprites+$48c,x		;wymaz 64
   357 B9D2 CA					dex
   358 B9D3 10 FA				bpl @-
   359 							
   360 B9D5 8D F3 23				sta duszek4kolor
   361 B9D8 A9 B0 8D E1 23			mva #pozWyniki-1 duszek4pos
   362 						
   363 B9DD A9 FF				lda #255
   364 B9DF A2 07				ldx #7									;przywróc duszka
   365 B9E1 9D 46 1F		@		sta sprites+$700+startWyniki+54,x
   366 B9E4 CA					dex
   367 B9E5 10 FA				bpl @-	
   368 						
   369 B9E7 A9 0A 8D 17 D0			mva #$0a COLPF1
   370 						
   371 B9EC A5 FF				lda zegar 
   372 B9EE C9 FE				cmp #254
   373 B9F0 F0 03				beq @+		;jesli minelo 5 sek wyswietl HS
   374
   375 						
   376 B9F2 4C 16 28				jmp waitvbl
   377 						
   378 B9F5 A9 00 85 FF		@		mva #0 zegar		;wyswietl tabele wynikow
   379
   380 B9F9 20 BB C2				jsr tabhscore1
   381
   382 B9FC A9 24 8D C1 17			mva #36 enemyX+4
   383 BA01 A9 17 8D CD 17			mva #23 enemyY+4
   384 BA06 A9 0C 8D E5 17			mva #12 enemyFaza+4
   385 BA0B A9 80 8D 75 01			mva #EKOLOR1 enemyNegatyw+4
   386 BA10 A9 00 8D F1 17			mva #enemy1shape enemyShapeH+4
   387 BA15 A9 01 85 EB				mva #1 ramka
   388 BA19 A9 04 85 59				mva #4 ramka4
   389 BA1D A9 25 85 FD				mva #37 pom0f
   390 BA21 A9 00 85 FC				mva #0 pom0e	;kierunek
   391
   392 BA25 85 FF				sta zegar
   393 								
   394 				;przygotowanie obrazu1
   395 BA27 20 1E C4				jsr ppanel1
   396 						
   397 BA2A A9 06 85 5F				mva #6 strz0
   398 						
   399 BA2E A9 03 8D 2A BB			mva #>(obraz1+19) _zako1
   400 BA33 20 24 BB		@		jsr zakryjObraz
   401 BA36 20 1E C4				jsr ppanel1
   402 BA39 C6 5F				dec strz0
   403 BA3B D0 F6				bne @-
   404 						
   405 						
   406 BA3D A9 00				lda #0
   407 BA3F A2 3F				ldx #63
   408 BA41 9D DB 08		@		sta obraz1+19+28*48,x
   409 BA44 CA					dex
   410 BA45 10 FA				bpl @-
   411 						
   412 						
   413 				;---		
   414 BA47 20 1E C4		@		jsr ppanel1
   415 						
   416 BA4A A6 FD				ldx pom0f
   417 BA4C A5 FC				lda pom0e
   418 BA4E D0 19				bne bbb0
   419
   420 BA50 E0 25				cpx #37
   421 BA52 F0 2A				beq bbb1
   422 BA54 A0 02				ldy #2
   423 BA56 B9 80 01 9D CD 0E	bf_4	mva bufore3,y obraz2-3+23*48,x
   424 BA5C B9 83 01 9D FD 0E			mva bufore3+3,y obraz2-3+24*48,x
   425 BA62 E8					inx
   426 BA63 88					dey
   427 BA64 10 F0				bpl bf_4
   428
   429 BA66 4C 7E BA				jmp bbb1
   430 						
   431 						
   432 BA69 A0 02		bbb0	ldy #2
   433 BA6B B9 80 01 9D CD 0B	bf_5	mva bufore3,y obraz2-3+7*48,x
   434 BA71 B9 83 01 9D FD 0B			mva bufore3+3,y obraz2-3+8*48,x
   435 BA77 E8					inx
   436 BA78 88					dey
   437 BA79 10 F0				bpl bf_5
   438
   439 BA7B 4C CC BA				jmp bbb2	
   440 						
   441 = BA7E			bbb1		equ *		
   442 BA7E 38					sec
   443 BA7F AD D9 17				lda enemyDX+4		;ruch w lewo
   444 BA82 E9 40				sbc #%01000000
   445 BA84 8D D9 17				sta enemyDX+4
   446 BA87 AD C1 17				lda enemyX+4
   447 BA8A E9 00				sbc #0
   448 BA8C 29 7F				and #127
   449 BA8E 8D C1 17				sta enemyX+4
   450 						
   451 BA91 D0 1C				bne bbb1_	;sprawdz czy juz poza ekranem
   452 BA93 E6 FC				inc pom0e	;zmien kierunek
   453 BA95 A9 00 8D C1 17			mva #0 enemyX+4
   454 BA9A 8D D9 17				sta enemyDX+4
   455 BA9D A9 04 8D E5 17			mva #4 enemyFaza+4
   456 BAA2 A9 07 8D CD 17			mva #7 enemyY+4
   457 BAA7 A9 10 8D F1 17			mva #enemy2shape enemyShapeH+4
   458 BAAC 4C CC BA				jmp bbb2
   459 						
   460 BAAF AA			bbb1_	tax
   461 BAB0 86 FD				stx pom0f
   462 BAB2 A0 02				ldy #2
   463 BAB4 BD CD 0E 99 80 01	bf_6	mva obraz2-3+23*48,x bufore3,y	;zapamietaj obszar pod nową pozycją duszka
   464 BABA BD FD 0E 99 83 01			mva obraz2-3+24*48,x bufore3+3,y
   465 BAC0 E8					inx
   466 BAC1 88					dey
   467 BAC2 10 F0				bpl bf_6
   468 						
   469 BAC4 A2 04				ldx #4
   470 BAC6 20 39 2D				jsr duszkiPrint
   471 BAC9 4C 04 BB				jmp bbb3
   472 						
   473 = BACC			bbb2		equ *		
   474 BACC 18					clc
   475 BACD AD D9 17				lda enemyDX+4		;ruch w prawo
   476 BAD0 69 40				adc #%01000000
   477 BAD2 8D D9 17				sta enemyDX+4
   478 BAD5 AD C1 17				lda enemyX+4
   479 BAD8 69 00				adc #0
   480 BADA 29 7F				and #127
   481 BADC 8D C1 17				sta enemyX+4
   482 						
   483 BADF C9 25				cmp #37
   484 BAE1 D0 07				bne bbb2_ 
   485 BAE3 A9 FE 85 FF				mva #254 zegar
   486 BAE7 4C 0C BB				jmp @+
   487 						
   488 BAEA AA			bbb2_	tax
   489 BAEB 86 FD				stx pom0f
   490 BAED A0 02				ldy #2
   491 BAEF BD CD 0B 99 80 01	bf_7	mva obraz2-3+7*48,x bufore3,y	;zapamietaj obszar pod nową pozycją duszka
   492 BAF5 BD FD 0B 99 83 01			mva obraz2-3+8*48,x bufore3+3,y
   493 BAFB E8					inx
   494 BAFC 88					dey
   495 BAFD 10 F0				bpl bf_7
   496
   497 BAFF A2 04				ldx #4
   498 BB01 20 39 2D				jsr duszkiPrint
   499 						
   500 = BB04			bbb3		equ *
   501 						
   502 						
   503 BB04 AD 10 D0		bbbs	lda FIRE
   504 BB07 F0 03 4C 47 BA			jne @-
   505
   506 = BB0C			@		equ *
   507 BB0C 20 1E C4				jsr ppanel1
   508 BB0F 20 8C C1				jsr tabhs1cls
   509 						
   510 							
   511 BB12 A9 00 8D 07 D0			mva #0 HPOSM+3
   512 						
   513 BB17 A5 FF				lda zegar
   514 BB19 C9 FF				cmp #255
   515 BB1B F0 03				beq @+
   516 					
   517 BB1D 4C 16 28				jmp waitvbl
   518
   519 BB20 4C 0B B7		@		jmp Title2
   520
   521 BB23 00			atariX1	dta b(0)
   522
   523
   524 = BB24			zakryjObraz	equ *
   525 BB24 A2 00				ldx #0
   526 BB26 A9 7D				lda #$7d
   527 = BB2A			_zako1	equ *+2		
   528 BB28 9D 9B 03		@		sta obraz1+19,x
   529 BB2B CA					dex
   530 BB2C D0 FA				bne @-
   531 BB2E EE 2A BB				inc _zako1
   532 BB31 60					rts
   533 						
   534 				;tworzy prawy panel bez przerwan
   535 = BB32			ppanel	equ *
   536 BB32 20 E0 C7				jsr ppan_1		
   537 BB35 20 37 C8				jsr ppan_2
   538 						
   539 BB38 A9 15				lda #21
   540 BB3A CD 0B D4		@		cmp VCOUNT
   541 BB3D D0 FB				bne @-
   542 						
   543 BB3F A9 B3 8D 00 D0			mva #pozWyniki+2 HPOSP		;score
   544 BB44 A9 BB 8D 01 D0			mva #pozWyniki+10 HPOSP+1
   545 BB49 A9 0C 8D 12 D0			mva #kolorLiczby COLPM
   546 BB4E 8D 13 D0				sta COLPM+1
   547 						
   548 BB51 20 51 C8				jsr ppan_3
   549 BB54 A9 0F 8D 17 D0			mva #$0f COLPF1
   550 						
   551 BB59 A9 22				lda #34
   552 BB5B CD 0B D4		@		cmp VCOUNT
   553 BB5E D0 FB				bne @-
   554 						
   555 BB60 8D 0A D4 8D 0A D4			:2 sta WSYNC
   556 						
   557 BB66 AD E1 23 8D 03 D0			mva duszek4pos	HPOSP+3		
   558 BB6C AD F3 23 8D 15 D0			mva duszek4kolor COLPM+3		;poczatek litery B
   559 						
   560 BB72 20 77 C8				jsr ppan_4
   561 						
   562 BB75 A9 26				lda #38
   563 BB77 CD 0B D4		@		cmp VCOUNT
   564 BB7A D0 FB				bne @-
   565 BB7C 8D 0A D4 8D 0A D4			:2 sta WSYNC
   566 						
   567 BB82 A9 B0 8D 03 D0			mva #pozWyniki-1 HPOSP+3			;koniec litery B
   568 BB87 A9 00 8D 15 D0			mva #0	COLPM+3
   569 						
   570 BB8C A9 2F				lda #47
   571 BB8E CD 0B D4		@		cmp VCOUNT
   572 BB91 D0 FB				bne @-
   573 						
   574 BB93 8D 0A D4				sta WSYNC
   575 BB96 A9 50 8D 15 D0			mva #kolorMapa	COLPM+3
   576 							
   577 BB9B A9 0C 8D 12 D0			mva #kolorLiczby COLPM
   578 BBA0 A9 14				lda #16+4
   579 BBA2 8D 0C D0				sta SIZEM
   580 BBA5 A9 36 8D 13 D0			mva #kolorCzerwony COLPM+1
   581 BBAA 8D 14 D0				sta COLPM+2
   582 BBAD A9 C4 8D 06 D0			mva #pozWyniki+19 HPOSM+2
   583 BBB2 A9 C8 8D 05 D0			mva #pozWyniki+23 HPOSM+1
   584 						
   585 BBB7 A9 00 8D 04 D0			mva #0 HPOSM
   586 BBBC A9 01 8D 0A D0			mva #1 SIZEP+2		;przeciwnicy na radarze
   587 BBC1 A9 B4 8D 02 D0			mva #pozWyniki+3 HPOSP+2
   588 						
   589 						
   590 BBC6 A5 60				lda poz0
   591 BBC8 8D 00 D0				sta HPOSP
   592 BBCB A5 61				lda kol0
   593 BBCD 8D 12 D0				sta colpm
   594 						;lda szer0
   595 						;sta sizep
   596 						;mva #0 HPOSP		;schowaj statek
   597 						;sta HPOSP+1
   598 						
   599 BBD0 A9 4E				lda #78
   600 BBD2 CD 0B D4		@		cmp VCOUNT
   601 BBD5 D0 FB				bne @-
   602 						
   603 BBD7 A9 03 8D 08 D0			mva #3 SIZEP
   604 BBDC 8D 09 D0				sta SIZEP+1
   605 BBDF A9 47 8D 00 D0			mva #71 HPOSP
   606 BBE4 A9 30 8D 12 D0			mva #$30 COLPM
   607 BBE9 A9 67 8D 01 D0			mva #71+32 HPOSP+1
   608 						
   609 BBEE 8D 0A D4				sta WSYNC
   610 BBF1 8D 0A D4				sta WSYNC
   611 						
   612 BBF4 A0 07				ldy #7
   613 BBF6 8D 0A D4		@		sta WSYNC
   614 BBF9 A9 30 8D 13 D0			mva #$30 COLPM+1
   615 						
   616 						;30 cykli
   617 BBFE 48 68 48 68 48 68 + 		:4 _7CYCLE
   618 BC06 A9 00				lda #0
   619 						
   620 BC08 A9 36 8D 13 D0			mva #kolorCzerwony COLPM+1
   621 BC0D 88					dey 
   622 BC0E D0 E6				bne @-
   623 						
   624 BC10 A9 0E 8D 17 D0			mva #$0e COLPF1
   625 						
   626 						
   627 BC15 A9 56				lda #86
   628 BC17 CD 0B D4		@		cmp VCOUNT
   629 BC1A D0 FB				bne @-
   630 BC1C A9 0A 8D 17 D0			mva #$0a COLPF1
   631 						
   632 BC21 A9 03 8D 08 D0			mva #3 SIZEP
   633 BC26 8D 09 D0				sta SIZEP+1
   634 BC29 A9 17 8D 0C D0			mva #%00010111 SIZEM
   635 BC2E A9 67 8D 01 D0			mva #71+32 HPOSP+1
   636 BC33 A9 8F 8D 04 D0			mva #71+56+16 HPOSM
   637 BC38 A2 50				ldx #$50 ;COLPM
   638 						
   639 BC3A 8D 0A D4 8D 0A D4			:2 sta WSYNC
   640 BC40 8E 12 D0				stx COLPM
   641 						
   642 BC43 A0 07				ldy #7
   643 BC45 8D 0A D4		@		sta WSYNC
   644 BC48 A9 50 8D 13 D0			mva #$50 COLPM+1
   645 BC4D C6 5F C6 5F C6 5F + 		:6 dec strz0
   646 BC59 A9 36 8D 13 D0			mva #kolorCzerwony COLPM+1
   647 BC5E 88					dey 
   648 BC5F D0 E4				bne @-
   649 						
   650 BC61 A9 0E 8D 17 D0			mva #$0e COLPF1
   651 BC66 8D 0A D4				sta WSYNC
   652 						
   653 BC69 A9 5E				lda #94
   654 BC6B CD 0B D4		@		cmp VCOUNT
   655 BC6E D0 FB				bne @-
   656 						
   657 BC70 A9 0A 8D 17 D0			mva #$0a COLPF1
   658 BC75 A9 4F 8D 00 D0			mva #75+4 HPOSP
   659 BC7A A9 B0 8D 12 D0			mva #$b0 COLPM
   660 BC7F 8D 0A D4 8D 0A D4			:2 sta WSYNC
   661 						
   662 BC85 A0 07				ldy #7
   663 BC87 8D 0A D4		@		sta WSYNC
   664 BC8A A9 B0 8D 13 D0			mva #$b0 COLPM+1
   665 						
   666 						;30 cykli
   667 BC8F 48 68 48 68 48 68 + 		:4 _7CYCLE
   668 BC97 A9 00				lda #0
   669 						
   670 BC99 A9 36 8D 13 D0			mva #kolorCzerwony COLPM+1
   671 BC9E 88					dey 
   672 BC9F D0 E6				bne @-
   673 						
   674 						
   675 BCA1 A9 63				lda #99
   676 BCA3 CD 0B D4		@		cmp VCOUNT
   677 BCA6 D0 FB				bne @-
   678 						
   679 						
   680 BCA8 8D 0A D4				sta WSYNC
   681 BCAB A9 0F 8D 17 D0			mva #$0f COLPF1
   682 BCB0 A9 00 8D 00 D0			mva #0 HPOSP
   683 BCB5 8D 01 D0				sta HPOSP+1
   684 						
   685 						
   686 BCB8 A9 66				lda #102
   687 BCBA CD 0B D4		@		cmp VCOUNT
   688 BCBD D0 FB				bne @-	
   689 						
   690 BCBF A9 0A 8D 17 D0			mva #$0a COLPF1
   691 						
   692 BCC4 A9 00 8D 15 D0			mva #0 COLPM+3		;koniec mapy zapasowe statki
   693 						
   694 BCC9 8D 0C D0				sta SIZEM
   695 BCCC 8D 0A D0				sta SIZEP+2			;zakonczenie mapy
   696 BCCF 8D 02 D0				sta HPOSP+2
   697 BCD2 8D 04 D0				sta HPOSM
   698 BCD5 8D 05 D0				sta HPOSM+1
   699 BCD8 8D 06 D0				sta HPOSM+2
   700 						
   701 BCDB A9 69				lda #105
   702 BCDD CD 0B D4		@		cmp VCOUNT
   703 BCE0 D0 FB				bne @-
   704 						
   705 BCE2 A9 03 8D 08 D0			mva #3 SIZEP
   706 BCE7 8D 09 D0				sta SIZEP+1
   707 BCEA A9 0F 8D 12 D0			mva #$0f COLPM
   708 BCEF A9 08 8D 13 D0			mva #$08 COLPM+1
   709
   710 						;sta WSYNC
   711 						
   712 BCF4 A2 03				ldx #3
   713 BCF6 20 2A BD				jsr xwsync
   714 BCF9 A9 00				lda #0
   715 BCFB A2 0A				ldx #$0a
   716 BCFD AC 23 BB				ldy atariX1
   717 BD00 8D 0A D4				sta WSYNC
   718 						
   719 BD03 8D 17 D0				sta COLPF1
   720 BD06 8E 18 D0				stx COLPF2
   721 BD09 8C 00 D0				sty HPOSP
   722 BD0C 8C 01 D0				sty HPOSP+1
   723
   724 						
   725 BD0F A2 06				ldx #6
   726 BD11 20 2A BD				jsr xwsync
   727 BD14 A2 3A				ldx #$3a
   728 BD16 A0 00				ldy #0
   729 BD18 8D 0A D4				sta WSYNC
   730 						
   731 BD1B 8E 17 D0				stx COLPF1
   732 BD1E 8C 18 D0				sty COLPF2
   733 BD21 8C 00 D0				sty HPOSP
   734 BD24 8C 01 D0				sty HPOSP+1
   735
   736 						
   737 BD27 4C 93 C8				jmp ppan_end
   738 						
   739 				.macro _7CYCLE
   740 						pha
   741 						pla
   742 				.endm
   743 						
   744 BD2A 8D 0A D4		xwsync	sta wsync
   745 BD2D CA					dex
   746 BD2E D0 FA				bne xwsync
   747 BD30 60					rts
   748
   749 BD31 53 54 41 52 00 44 + theStarDestroyer	dta c'STAR',b(0),c'DESTROYER'
   750 BD3F 00 00 46 49 4E 41 + atariversion		dta b(0,0),c'FINAL',b(0),c'VER',b(91),b(0),b(95),b(93),b(95),b(95,0)
   751 BD51 43 4F 44 45 00 41 + codet				dta c'CODE',b(0),'AND',b(0),'GFX'
   752 BD5D 4A 41 4E 55 53 5A + codet1				dta c'JANUSZ',b(0),c'CHABOWSKI'
   753 BD6D 4D 55 53 49 43 00 + sfxt				dta c'MUSIC',b(0),c'AND',b(0),c'SFX',b(0)
   754 BD7B 4D 49 43 48 41 4C + sfxt1				dta c'MICHAL',b(0),c'SZPILOWSKI'
   755 BD8C 54 49 54 4C 45 00 + pict				dta c'TITLE',b(0),'SCREEN'
   756 BD98 4B 52 5A 59 53 5A + pict1				dta c'KRZYSZTOF',b(0),c'ZIEMBIK'				
   757
   758
   759 = BDA9			prepare_title	equ *
   760 BDA9 A9 00 8D 58 19				mva #0 lives
   761 BDAE 20 0E 6F					jsr printLives
   762 					
   763 				;1
   764 BDB1 A2 37					ldx #55
   765 BDB3 BD AD BF		@			lda titleChars1,x
   766 BDB6 9D C8 DB					sta znaki1+121*8,x
   767 BDB9 CA						dex
   768 BDBA 10 F7					bpl @-
   769 							
   770 BDBC A9 D8					lda #>znaki1
   771 BDBE 20 6A C1					jsr przepiszZnaki
   772 							
   773 BDC1 A9 00					lda #0 
   774 BDC3 8D 8B 23					sta kolor1up
   775 							
   776 							;ldx #0
   777 BDC6 AA						tax
   778 BDC7 A9 7D					lda #$7d
   779 BDC9 9D 9B 03		@			sta obraz1+19,x
   780 BDCC 9D 9B 04					sta obraz1+$100+19,x
   781 BDCF 9D 9B 05					sta obraz1+$200+19,x
   782 BDD2 9D 9B 06					sta obraz1+$300+19,x
   783 BDD5 9D 9B 07					sta obraz1+$400+19,x
   784 BDD8 9D 9B 08					sta obraz1+$500+19,x
   785 BDDB CA						dex
   786 BDDC D0 EB					bne @-
   787 							
   788 BDDE 8A						txa
   789 							;lda #0
   790 BDDF A2 3F					ldx #63
   791 BDE1 9D DB 08		@			sta obraz1+19+28*48,x
   792 BDE4 CA						dex
   793 BDE5 10 FA					bpl @-
   794 						
   795 BDE7 20 C6 75					jsr czarnyPanel
   796 				;2		
   797 BDEA 4C E4 C2					jmp tabhscore2
   798 						
   799 				;Inicjalizacja strony tytułowej
   800 = BDED			title_init	equ *
   801 BDED A9 0A					lda #$0A		
   802 BDEF 8D 16 D0					sta COLPF0
   803 BDF2 A9 3A					lda #$3a		
   804 BDF4 8D 17 D0					sta COLPF1
   805 BDF7 A9 00					lda #$00		
   806 BDF9 8D 18 D0					sta COLPF2
   807 BDFC A9 34					lda #kolorLogo
   808 BDFE 8D 19 D0					sta COLPF3
   809 							
   810 BE01 A9 FF					lda #255
   811 BE03 A2 2C					ldx #44
   812 BE05 9D 21 1F		@			sta sprites+$700+33,x
   813 BE08 CA						dex
   814 BE09 10 FA					bpl @-
   815 						
   816 									
   817 BE0B A9 9B 8D 96 17 A9 + 			mwa #obraz1+19 dlist+2
   818 BE15 A9 00 8D 05 D4				mva #0 VSCROL
   819 BE1A 8D 58 19					sta lives
   820 BE1D A9 D8 8D 09 D4				mva #>znaki1 CHBASE
   821 							
   822 BE22 20 0E 6F					jsr printLives
   823 							
   824 							
   825 BE25 A9 B0 8D E1 23				mva #pozWyniki-1 duszek4pos
   826 BE2A A9 00 8D F3 23				mva #0 duszek4kolor
   827 							
   828 BE2F 85 FD					sta pozNapis	;34 pozNapis
   829 							
   830 BE31 A9 0E 85 F9					mva #14 napisY
   831 BE35 A9 0F 85 F8					mva #15 napisX
   832 BE39 A9 01 85 FA					mva #1 napisDX
   833 							
   834 BE3D A9 0C 85 FC					mva #12 pom0e
   835 BE41 8D 0A D4					sta wsync
   836 BE44 8D 04 D4					sta HSCROL
   837 							
   838 BE47 A9 37 85 82 A9 06 + 			mwa #obraz1+19+668 pom1		;pozycja poczatkowa dla efektu
   839 							
   840 BE4F A9 37					lda #<(obraz1+19+668) 
   841 BE51 8D 64 BF					sta efn1+1
   842 BE54 8D 6A BF					sta efn1b+1
   843 BE57 A9 06					lda #>(obraz1+19+668) 
   844 BE59 8D 65 BF					sta efn1+2
   845 BE5C 8D 6B BF					sta efn1b+2
   846 							
   847 BE5F A9 67					lda #<(obraz1+19+668+48) 
   848 BE61 8D 6D BF					sta efn2+1
   849 BE64 8D 73 BF					sta efn2b+1
   850 BE67 A9 06					lda #>(obraz1+19+668+48) 
   851 BE69 8D 6E BF					sta efn2+2
   852 BE6C 8D 74 BF					sta efn2b+2
   853 							
   854 BE6F 60						rts
   855
   856 = 00FD			pozNapis	equ pom0f
   857 							
   858 = BE70			printNapis	equ *	
   859 							
   860 BE70 A5 FC					lda pom0e
   861 BE72 8D 0A D4					sta wsync
   862 BE75 8D 04 D4					sta HSCROL		
   863 BE78 A5 FC					lda pom0e
   864 BE7A 38						sec
   865 BE7B E9 01					sbc #1
   866 BE7D 09 0C					ora #%1100
   867 BE7F 85 FC					sta pom0e
   868 BE81 C9 0E					cmp #14
   869 BE83 F0 01					beq @+
   870 BE85 60						rts
   871 							
   872 BE86 A4 FD		@			ldy pozNapis
   873 BE88 C0 1B					cpy #27
   874 BE8A B0 31					bcs @+1
   875 							
   876 BE8C A9 E5 85 80 A9 BF + 			mwa #titleNapis pom
   877 BE94 A9 DC 85 82 A9 04 + 			mwa #obraz1+19+$120+33 pom1
   878 BE9C A2 0B					ldx #11
   879 BE9E B1 80		@			lda (pom),y
   880 BEA0 91 82					sta (pom1),y
   881 BEA2 18						clc
   882 BEA3 A5 80					lda pom
   883 BEA5 69 1B					adc #27
   884 BEA7 85 80					sta pom
   885 BEA9 90 03					bcc *+5
   886 BEAB 18						clc
   887 BEAC E6 81					inc pom+1
   888 BEAE A5 82					lda pom1
   889 BEB0 69 30					adc #$30
   890 BEB2 85 82					sta pom1
   891 BEB4 90 02					bcc *+4
   892 BEB6 E6 83					inc pom1+1
   893 BEB8 CA						dex
   894 BEB9 D0 E3					bne @-
   895 BEBB F0 0D					beq @+1
   896 							
   897 BEBD A2 0B		@			ldx #11
   898 BEBF A9 DC 85 80 A9 04 + 			mwa #obraz1+19+$120+33 pom
   899 BEC7 20 F7 BE					jsr fill7d
   900 							
   901 BECA A2 06		@			ldx #6
   902 BECC A9 BC 85 80 A9 03 + 			mwa #obraz1+19+33 pom
   903 BED4 20 F7 BE					jsr fill7d
   904 							
   905 BED7 A2 06					ldx #6
   906 BED9 A9 EC 85 80 A9 06 + 			mwa #obraz1+19+33+17*48 pom
   907 BEE1 20 F7 BE					jsr fill7d
   908 							
   909 BEE4 A2 05					ldx #5
   910 BEE6 A9 0C 85 80 A9 08 + 			mwa #obraz1+19+33+23*48 pom
   911 BEEE 20 F7 BE					jsr fill7d
   912 							
   913 BEF1 E6 FD					inc pozNapis
   914 BEF3 EE 96 17					inc dlist+2
   915 							
   916 BEF6 60						rts
   917 							
   918 = BEF7			fill7d		equ *
   919 BEF7 A9 7D		@			lda #$7d
   920 BEF9 91 80					sta (pom),y
   921 BEFB 18						clc
   922 BEFC A5 80					lda pom
   923 BEFE 69 30					adc #$30
   924 BF00 85 80					sta pom
   925 BF02 90 02					bcc *+4
   926 BF04 E6 81					inc pom+1
   927 BF06 CA						dex
   928 BF07 D0 EE					bne @-
   929 BF09 60						rts
   930 							
   931 							
   932 = 00F8			napisX		equ pom0a
   933 = 00F9			napisY		equ pom0b
   934 = 00FA			napisDX		equ pom0c	
   935
   936 = BE8D			eftab1		equ *-125
   937 BF0A 79 FC FB FA					dta b($79,$fc,$fb,$fa)
   938
   939 = BF0E			efnap1		equ *
   940 BF0E A9 1C		efnp_0		lda #28
   941 BF10 85 55					sta pom0g
   942 BF12 A5 82 85 80 A5 83 + 			mwa pom1 pom
   943 					
   944 				.if .def UC
   945 BF1A B3 80		@			lax (pom),y
   946 				.else			
   947 				@			lda (pom),y
   948 							tax
   949 				.endif			
   950 BF1C BD 8D BE					lda eftab1,x
   951 BF1F 91 80					sta (pom),y
   952 BF21 18						clc
   953 BF22 A5 80					lda pom
   954 BF24 69 30					adc #$30
   955 BF26 85 80					sta pom
   956 BF28 90 02					bcc *+4
   957 BF2A E6 81					inc pom+1
   958 							
   959 BF2C C6 55					dec pom0g
   960 BF2E D0 EA					bne @-
   961 BF30 60						rts
   962 							
   963 = BF31			efektNapis1	equ *
   964 BF31 A4 F9					ldy napisY
   965 BF33 C0 0E					cpy #14			;dla 15 nie rysuj pionowych linii
   966 BF35 B0 26					bcs @+
   967 							
   968 BF37 98						tya
   969 BF38 0A						asl
   970 BF39 38						sec
   971 BF3A E9 1D					sbc #28+1
   972 BF3C 49 FF					eor #$ff
   973 BF3E 8D 0F BF					sta efnp_0+1
   974 							
   975 BF41 18						clc
   976 BF42 A5 F8					lda napisX
   977 BF44 65 FA					adc napisDX
   978 BF46 A8						tay
   979 BF47 20 0E BF					jsr efnap1
   980 BF4A A4 F8					ldy napisX
   981 BF4C 20 0E BF					jsr efnap1
   982 							
   983 BF4F C0 02					cpy #2			
   984 BF51 90 0A					bcc @+
   985 							;sec
   986 BF53 A5 82					lda pom1
   987 BF55 E9 30					sbc #$30
   988 BF57 85 82					sta pom1
   989 BF59 B0 02					bcs *+4
   990 BF5B C6 83					dec pom1+1
   991
   992 BF5D A4 FA		@			ldy napisDX
   993 BF5F C0 1D					cpy #29
   994 BF61 B0 3D					bcs @+1
   995
   996 = BF63			efn1		equ *			
   997 BF63 BE FF FF					ldx $ffff,y
   998 BF66 BD 8D BE					lda eftab1,x
   999 = BF69			efn1b		equ *
  1000 BF69 99 FF FF					sta $ffff,y
  1001 = BF6C			efn2		equ *
  1002 BF6C BE FF FF					ldx $ffff,y
  1003 BF6F BD 8D BE					lda eftab1,x
  1004 = BF72			efn2b		equ *
  1005 BF72 99 FF FF					sta $ffff,y
  1006 BF75 88						dey
  1007 BF76 10 EB					bpl efn1
  1008 							
  1009 BF78 38						sec
  1010 BF79 AD 64 BF					lda efn1+1
  1011 BF7C E9 31					sbc #49
  1012 BF7E 8D 64 BF					sta efn1+1
  1013 BF81 8D 6A BF					sta efn1b+1
  1014 BF84 B0 06					bcs @+
  1015 BF86 CE 65 BF					dec efn1+2
  1016 BF89 CE 6B BF					dec efn1b+2
  1017 						
  1018 BF8C 18			@			clc
  1019 BF8D AD 6D BF					lda efn2+1
  1020 BF90 69 2F					adc #47
  1021 BF92 8D 6D BF					sta efn2+1
  1022 BF95 8D 73 BF					sta efn2b+1
  1023 BF98 90 06					bcc @+
  1024 BF9A EE 6E BF					inc efn2+2
  1025 BF9D EE 74 BF					inc efn2b+2
  1026
  1027 							
  1028 BFA0 C6 F8		@			dec napisX
  1029 BFA2 E6 FA					inc napisDX
  1030 BFA4 E6 FA					inc napisDX
  1031 BFA6 A5 F9					lda napisY
  1032 BFA8 F0 02					beq @+
  1033 BFAA C6 F9					dec napisY
  1034
  1035 BFAC 60			@			rts
  1036 							
  1037 = BFAD			titleChars1	equ *
  1038 BFAD 00 00 00 00 00 00 + 			:8 dta b(0)				;79
  1039 BFB5 FF FF FF FF FF FF + 			:8 dta b(%11111111)		;7a
  1040 BFBD F0 F0 F0 F0 F0 F0 + 			:8 dta b(%11110000)		;7b
  1041 BFC5 0F 0F 0F 0F 0F 0F + 			:8 dta b(%00001111)		;7c
  1042 BFCD 55 55 55 55 55 55 + 			:8 dta b(%01010101)		;7d
  1043 BFD5 50 50 50 50 50 50 + 			:8 dta b(%01010000)		;7e
  1044 BFDD 05 05 05 05 05 05 + 			:8 dta b(%00000101)		;7f
  1045 							
  1046 = BFE5			titleNapis	equ *
  1047 BFE5 80 80 7F 7D 7D 7D + 			dta b($80,$80,$7f,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d)
  1048 C000 80 7D 80 7D 7D 7D + 			dta b($80,$7d,$80,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d)
  1049 C01B 80 7D 7E 7D 7D 7D + 			dta b($80,$7d,$7e,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d)
  1050 C036 80 7D 80 7D 7D 7D + 			dta b($80,$7d,$80,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d)
  1051 C051 80 80 7F 7D 7D 7D + 			dta b($80,$80,$7f,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d,$7d)
  1052 C06C 80 7D 80 7D 7E 80 + 			dta b($80,$7d,$80,$7d,$7e,$80,$7d,$7e,$80,$7d,$7e,$80,$7f,$7e,$80,$7d,$7f,$7d,$7f,$7f,$7e,$80,$7d,$7f,$7d,$7f,$7d)
  1053 C087 80 7D 7E 7F 80 7E + 			dta b($80,$7d,$7e,$7f,$80,$7e,$7f,$80,$7d,$7d,$80,$7d,$7f,$80,$7e,$7f,$80,$7d,$7f,$7f,$80,$7e,$7f,$80,$7d,$7f,$7d)
  1054 C0A2 80 7D 7E 7F 7F 7D + 			dta b($80,$7d,$7e,$7f,$7f,$7d,$7f,$80,$80,$7d,$7f,$7d,$7d,$7f,$7d,$7f,$80,$7f,$7f,$7f,$7f,$7d,$7f,$80,$7f,$7f,$7d)
  1055 C0BD 80 7D 7E 7F 7F 7D + 			dta b($80,$7d,$7e,$7f,$7f,$7d,$7f,$7d,$7e,$7f,$7f,$7d,$7d,$7f,$7d,$7f,$7f,$80,$7f,$7f,$80,$80,$7f,$7f,$80,$7f,$7d)
  1056 C0D8 80 80 80 7F 80 7E + 			dta b($80,$80,$80,$7f,$80,$7e,$7f,$7f,$7e,$7f,$80,$7d,$7f,$80,$7e,$7f,$7f,$7e,$7f,$7f,$7f,$7d,$7f,$7f,$7e,$7f,$7d)
  1057 C0F3 80 80 80 7D 7E 80 + 			dta b($80,$80,$80,$7d,$7e,$80,$7d,$80,$80,$7d,$7e,$80,$7f,$7e,$80,$7d,$7f,$7d,$7f,$7f,$7f,$7d,$7f,$7f,$7d,$7f,$7d)
  1058 							
  4072 C10E						icl 'hscore.asm'			
Source: hscore.asm
     1 = 0A80			hscr	equ obraz2
     2 						
     3 						
     4 C10E 00 00 54 48 45 00 + tx1a	dta b(0,0),c'THE',b(0,0),c'LIST',b(0,0),c'OF',b(0)
     5 C11E 00 53 50 41 43 45 + tx2a	dta b(0),c'SPACE',b(0,0),'FIGHTERS'		
     6 C12E 45 4E 54 45 52 00 + tx1		dta c'ENTER',b(0),c'YOUR',b(0),c'INITIALS',b(0)
     7 C142 00 00 53 43 4F 52 + tx2		dta b(0,0),c'SCORE',b(0,0,0,0,0,0,0),c'NAME',b(0,0)
     8 C156 42 45 53 54 00	tx3		dta c'BEST',b(0)
     9 C15B 5E 53 54 5F 4E 44 + tx4		dta b(94),c'ST',b(95),c'ND',b(96),c'RD',b(97),c'TH',b(98),c'TH'
    10
    11 				;Przepisuje litery i cyfry do zestawu znaku
    12 = C16A			przepiszZnaki	equ *
    13 C16A 18					clc
    14 C16B 69 02				adc #2
    15 C16D 8D 7C C1				sta ppz1+2
    16 C170 69 01				adc #1
    17 C172 8D 87 C1				sta ppz2+2
    18
    19 C175 A2 00				ldx #0
    20 C177 BD 08 F8		@		lda znakiBosc,x
    21 = C17A			ppz1	equ *
    22 C17A 9D 08 DE				sta znaki2+65*8,x
    23 C17D CA					dex
    24 C17E D0 F7				bne @-
    25 						
    26 C180 A2 2F				ldx #47
    27 C182 BD 08 F9		@		lda znakiBosc+$100,x
    28 = C185			ppz2	equ *
    29 C185 9D 08 DF				sta znaki2+$100+65*8,x
    30 C188 CA					dex
    31 C189 10 F7				bpl @-
    32 						
    33 C18B 60					rts
    34 						
    35 = C18C			tabhs1cls	equ *
    36 C18C A2 06				ldx #6
    37 C18E A9 00		@		lda #0
    38 C190 9D 23 1E				sta sprites+$600+35,x
    39 C193 9D 23 1F				sta sprites+$700+35,x
    40 C196 9D 23 1B				sta sprites+$300+35,x
    41 C199 9D 37 1E				sta sprites+$600+55,x
    42 C19C 9D 37 1F				sta sprites+$700+55,x
    43 C19F 9D 37 1B				sta sprites+$300+55,x
    44 C1A2 9D 62 1C				sta sprites+$400+98,x
    45 C1A5 9D 62 1D				sta sprites+$500+98,x
    46 C1A8 9D 72 1C				sta sprites+$400+114,x
    47 C1AB 9D 72 1D				sta sprites+$500+114,x
    48 C1AE 9D 82 1D				sta sprites+$500+130,x
    49 C1B1 9D 92 1D				sta sprites+$500+146,x
    50 C1B4 9D A2 1D				sta sprites+$500+162,x
    51 C1B7 9D B2 1D				sta sprites+$500+178,x
    52 C1BA 9D C2 1D				sta sprites+$500+194,x
    53 C1BD 9D 82 1C				sta sprites+$400+130,x
    54 C1C0 9D 92 1C				sta sprites+$400+146,x
    55 C1C3 9D A2 1C				sta sprites+$400+162,x
    56 C1C6 9D B2 1C				sta sprites+$400+178,x
    57 C1C9 9D C2 1C				sta sprites+$400+194,x
    58 C1CC CA					dex
    59 C1CD 10 BF				bpl @-
    60 						
    61 C1CF 60					rts
    62 						
    63 						
    64 				;tylko tabela		
    65 = C1D0			tabhs2	equ *		
    66 C1D0 A2 06				ldx #6
    67 C1D2 A9 0E		@		lda #%00001110
    68 C1D4 9D 23 1E				sta sprites+$600+35,x
    69 C1D7 A9 79				lda #%01111001
    70 C1D9 9D 23 1F				sta sprites+$700+35,x
    71 C1DC A9 80				lda #%10000000
    72 C1DE 9D 23 1B				sta sprites+$300+35,x
    73 C1E1 A9 1F				lda #%00011111
    74 C1E3 9D 37 1E				sta sprites+$600+55,x
    75 C1E6 A9 3F				lda #%00111111
    76 C1E8 9D 37 1F				sta sprites+$700+55,x
    77 C1EB A9 C0				lda #%11000000
    78 C1ED 9D 37 1B				sta sprites+$300+55,x
    79 						
    80 C1F0 CA					dex
    81 C1F1 10 DF				bpl @-
    82 						
    83 C1F3 A2 0F				ldx #15
    84 C1F5 BD 0E C1		@		lda tx1a,x
    85 C1F8 9D E8 0A				sta hscr+2*48+6+2,x
    86 C1FB BD 1E C1				lda tx2a,x
    87 C1FE 9D 48 0B				sta hscr+4*48+6+2,x
    88 C201 CA					dex
    89 C202 10 F1				bpl @-
    90 						
    91 						
    92 C204 30 4D				bmi tabhs	;jmp
    93
    94 C206 FE 7E 3E		hsctab	dta b(%11111110,%01111110,%00111110)
    95 						
    96 				;dodawanie swojego wyniku		
    97 = C209			tabhs1	equ *
    98 C209 A9 00				lda #0
    99 C20B A2 5D				ldx #95-2					;wyczyść duszka 4
   100 C20D 9D 00 1F		@		sta sprites+$700,x
   101 C210 CA					dex
   102 C211 10 FA				bpl @-
   103
   104 C213 A9 28 8D 17 D0			mva #KOLOR1 COLPF1
   105 						
   106 C218 A2 06				ldx #6
   107 C21A A9 FB		@		lda #%11111011
   108 C21C 9D 23 1E				sta sprites+$600+35,x
   109 C21F A9 DF				lda #%11011111
   110 C221 9D 23 1F				sta sprites+$700+35,x
   111 C224 A9 E0				lda #%11100000
   112 C226 9D 23 1B				sta sprites+$300+35,x
   113 C229 A9 3E				lda #%00111110
   114 C22B 9D 37 1E				sta sprites+$600+55,x
   115 C22E A9 03				lda #%00000011
   116 C230 9D 37 1F				sta sprites+$700+55,x
   117 C233 A9 C0				lda #%11000000
   118 C235 9D 37 1B				sta sprites+$300+55,x
   119 C238 A9 80				lda #%10000000
   120 C23A 9D 47 1F				sta sprites+$700+71,x
   121 						
   122 C23D CA					dex
   123 C23E 10 DA				bpl @-
   124 						
   125 C240 A2 13				ldx #19
   126 C242 BD 2E C1		@		lda tx1,x			;enter your initials,score name
   127 C245 9D E6 0A				sta hscr+2*48+6,x
   128 C248 BD 42 C1				lda tx2,x
   129 C24B 9D 46 0B				sta hscr+4*48+6,x
   130 C24E A9 80				lda #128
   131 C250 CA					dex
   132 C251 10 EF				bpl @-
   133 						
   134 						
   135 						
   136 						
   137 = C253			tabhs	equ *		
   138 C253 A2 06				ldx #6
   139 C255 A9 78		@		lda #%01111000
   140 C257 9D 62 1C				sta sprites+$400+98,x
   141 C25A A9 80				lda #%10000000
   142 C25C 9D 62 1D				sta sprites+$500+98,x
   143 C25F A9 F8				lda #%11111000
   144 C261 9D 72 1C				sta sprites+$400+114,x
   145 C264 A9 3C				lda #%00111100
   146 C266 9D 72 1D				sta sprites+$500+114,x
   147 						
   148 C269 A9 00				lda #0
   149 C26B 9D 7A 1C				sta sprites+$400+122,x
   150 C26E 9D 7A 1D				sta sprites+$500+122,x
   151 						
   152 C271 A9 E0				lda #%11100000
   153 C273 9D 82 1D				sta sprites+$500+130,x
   154 C276 9D 92 1D				sta sprites+$500+146,x
   155 C279 9D A2 1D				sta sprites+$500+162,x
   156 C27C 9D B2 1D				sta sprites+$500+178,x
   157 C27F 9D C2 1D				sta sprites+$500+194,x
   158 						
   159 C282 AC A2 27				ldy hscScore1+3
   160 C285 B9 06 C2				lda hsctab,y
   161 C288 9D 82 1C				sta sprites+$400+130,x
   162 C28B AC A6 27				ldy hscScore2+3
   163 C28E B9 06 C2				lda hsctab,y
   164 C291 9D 92 1C				sta sprites+$400+146,x
   165 C294 AC AA 27				ldy hscScore3+3
   166 C297 B9 06 C2				lda hsctab,y
   167 C29A 9D A2 1C				sta sprites+$400+162,x
   168 C29D AC AE 27				ldy hscScore4+3
   169 C2A0 B9 06 C2				lda hsctab,y
   170 C2A3 9D B2 1C				sta sprites+$400+178,x
   171 C2A6 AC B2 27				ldy hscScore5+3
   172 C2A9 B9 06 C2				lda hsctab,y
   173 C2AC 9D C2 1C				sta sprites+$400+194,x
   174 						
   175 C2AF CA					dex
   176 C2B0 10 A3				bpl @-
   177 						
   178 C2B2 A9 00				lda #0
   179 C2B4 8D 81 1C				sta sprites+$400+129
   180 C2B7 8D 81 1D				sta sprites+$500+129 
   181 						
   182 C2BA 60					rts
   183 						
   184 = C2BB			tabhscore1	equ *
   185 C2BB A9 00				lda #0
   186 C2BD A2 4D				ldx #95-2-16			;77			;wyczyść duszka 4
   187 C2BF 9D 00 1F		@		sta sprites+$700,x
   188 C2C2 CA					dex
   189 C2C3 E0 20				cpx #32
   190 C2C5 D0 F8				bne @-
   191
   192 C2C7 A9 DC 8D 09 D4			mva #>znaki2 CHBASE
   193 						
   194 C2CC A9 00 8D 1D C4			mva #0 kolor0
   195 C2D1 A9 B0 8D 1C C4			mva #pozWyniki-1 nick0
   196 C2D6 A9 59 8D 02 D4 A9 + 		mwa #hsdlist	DLPTR
   197 C2E0 20 D0 C1				jsr tabhs2
   198 C2E3 60					rts
   199 						
   200 						
   201 = C2E4			tabhscore2	equ *
   202 C2E4 A9 00				lda #0
   203 C2E6 AA					tax
   204 C2E7 9D 80 0A		@		sta obraz2,x
   205 C2EA 9D 80 0B				sta obraz2+$100,x
   206 C2ED 9D 80 0C				sta obraz2+$200,x
   207 C2F0 9D 80 0D				sta obraz2+$300,x
   208 C2F3 9D 80 0E				sta obraz2+$400,x
   209 C2F6 CA					dex
   210 C2F7 D0 EE				bne @-
   211 						
   212 C2F9 A2 0F				ldx #15
   213 C2FB 9D 80 0F		@		sta obraz2+$500,x
   214 C2FE CA					dex
   215 C2FF 10 FA				bpl @-
   216 						
   217 C301 A9 DC		@		lda #>znaki2
   218 C303 20 6A C1				jsr przepiszZnaki
   219
   220 C306 A2 04				ldx #4
   221 C308 BD 56 C1		@		lda tx3,x				;BEST
   222 C30B 9D 3D 0C				sta hscr+48*9+6+7,x
   223 C30E BD 44 C1				lda tx2+2,x				;SCORE
   224 C311 9D 9C 0C				sta hscr+48*11+6+6,x
   225 C314 BD 50 C1				lda	tx2+14,x			;NAME
   226 C317 9D A6 0C				sta hscr+48*11+6+16,x
   227 C31A CA					dex
   228 C31B 10 EB				bpl @-
   229 						
   230 C31D A9 62				lda #98			;best ->5
   231 C31F 8D 44 0C				sta hscr+48*9+6+14
   232 						
   233 C322 A2 02				ldx #2
   234 C324 BD 5B C1		@		lda tx4,x				;miejsca
   235 C327 9D F6 0C				sta hscr+13*48+6,x
   236 C32A BD 5E C1				lda tx4+3,x
   237 C32D 9D 56 0D				sta hscr+15*48+6,x
   238 C330 BD 61 C1				lda tx4+6,x
   239 C333 9D B6 0D				sta hscr+17*48+6,x
   240 C336 BD 64 C1				lda tx4+9,x
   241 C339 9D 16 0E				sta hscr+19*48+6,x
   242 C33C BD 67 C1				lda tx4+12,x
   243 C33F 9D 76 0E				sta hscr+21*48+6,x	
   244 						
   245 C342 BD 8B 27				lda hscNick1,x			;nicki
   246 C345 9D 07 0D				sta hscr+13*48+6+17,x
   247 C348 BD 8F 27				lda hscNick2,x
   248 C34B 9D 67 0D				sta hscr+15*48+6+17,x
   249 C34E BD 93 27				lda hscNick3,x
   250 C351 9D C7 0D				sta hscr+17*48+6+17,x
   251 C354 BD 97 27				lda hscNick4,x
   252 C357 9D 27 0E				sta hscr+19*48+6+17,x
   253 C35A BD 9B 27				lda hscNick5,x
   254 C35D 9D 87 0E				sta hscr+21*48+6+17,x
   255 						
   256 C360 CA					dex
   257 C361 10 C1				bpl @-
   258 						
   259 C363 A2 00				ldx #0
   260 C365 20 F6 C3				jsr hscToBuf
   261 C368 AC A2 27				ldy hscScore1+3
   262 C36B A9 FA				lda <(hscr+13*48+10)
   263 C36D A2 0C				ldx >(hscr+13*48+10)
   264 C36F 20 E0 C3				jsr prhsc
   265 						
   266 C372 A2 04				ldx #4
   267 C374 20 F6 C3				jsr hscToBuf
   268 C377 AC A6 27				ldy hscScore2+3
   269 C37A A9 5A				lda <(hscr+15*48+10)
   270 C37C A2 0D				ldx >(hscr+15*48+10)
   271 C37E 20 E0 C3				jsr prhsc
   272 						
   273 C381 A2 08				ldx #8
   274 C383 20 F6 C3				jsr hscToBuf
   275 C386 AC AA 27				ldy hscScore3+3
   276 C389 A9 BA				lda <(hscr+17*48+10)
   277 C38B A2 0D				ldx >(hscr+17*48+10)
   278 C38D 20 E0 C3				jsr prhsc
   279 						
   280 C390 A2 0C				ldx #12
   281 C392 20 F6 C3				jsr hscToBuf
   282 C395 AC AE 27				ldy hscScore4+3
   283 C398 A9 1A				lda <(hscr+19*48+10)
   284 C39A A2 0E				ldx >(hscr+19*48+10)
   285 C39C 20 E0 C3				jsr prhsc
   286 						
   287 C39F A2 10				ldx #16
   288 C3A1 20 F6 C3				jsr hscToBuf
   289 C3A4 AC B2 27				ldy hscScore5+3
   290 C3A7 A9 7A				lda <(hscr+21*48+10)
   291 C3A9 A2 0E				ldx >(hscr+21*48+10)
   292 C3AB 20 E0 C3				jsr prhsc
   293 					
   294 						
   295 C3AE A9 02				lda #2
   296 C3B0 8D 9C 0A				sta hscr+28			;gwiazdy
   297 C3B3 8D 18 0B				sta hscr+8+3*48
   298 C3B6 8D E1 0B				sta hscr+17+7*48
   299 C3B9 8D 7E 0C				sta hscr+30+10*48
   300 C3BC 8D 2A 0D				sta hscr+10+14*48
   301 C3BF 8D 95 0D				sta hscr+21+16*48
   302 C3C2 8D B2 0E				sta hscr+18+22*48
   303 C3C5 8D 63 0F				sta hscr+3+26*48
   304 						
   305 						
   306 C3C8 A9 81				lda #129
   307 C3CA 8D C4 0A				sta hscr+1*48+20
   308 C3CD 8D 71 0B				sta hscr+5*48+1
   309 C3D0 8D 17 0C				sta hscr+23+8*48
   310 C3D3 8D 67 0C				sta hscr+7+10*48
   311 C3D6 8D 49 0E				sta hscr+9+20*48
   312 C3D9 8D 1B 0F				sta hscr+27+24*48
   313 C3DC 8D 70 0F				sta hscr+16+26*48
   314 						
   315 C3DF 60					rts
   316
   317 = C3E0			prhsc	equ *
   318 C3E0 85 80				sta pom
   319 C3E2 86 81				stx pom+1
   320 C3E4 B9 13 C4		@		lda hscbuf,y
   321 C3E7 18					clc
   322 C3E8 69 5D				adc #93
   323 C3EA 91 80				sta (pom),y
   324 C3EC C8					iny
   325 C3ED C0 06				cpy #6
   326 C3EF 90 F3				bcc @-
   327 C3F1 A9 5D				lda #93
   328 C3F3 91 80				sta (pom),y
   329 C3F5 60					rts
   330
   331 = C3F6			hscToBuf	equ *		
   332 C3F6 A0 00				ldy #0
   333 C3F8 BD 9F 27		@		lda hscScore1,x
   334 				.if .def UC
   335 C3FB 4B F0				alr #$f0
   336 				.else		
   337 						and #$f0
   338 						lsr
   339 				.endif		
   340 C3FD 4A 4A 4A				:3 lsr
   341 C400 99 13 C4				sta hscbuf,y
   342 C403 C8					iny
   343 C404 BD 9F 27				lda hscScore1,x
   344 C407 29 0F				and #$0f
   345 C409 99 13 C4				sta hscbuf,y
   346 C40C C8					iny
   347 C40D E8					inx
   348 C40E C0 06				cpy #6
   349 C410 D0 E6				bne @-
   350 C412 60					rts
   351 						
   352 C413 00 00 00 00 00 00	hscbuf	dta b(0,0,0,0,0,0)		
   353 C419 06 05 04		hsctab1	dta b(6,5,4)
   354 C41C 84			nick0	dta b(132)
   355 C41D A0			kolor0	dta b($A0)
   356
   357 				;prawy panel podczas wyświetlania hscore
   358 = C41E			ppanel1	equ *
   359 C41E 20 E0 C7				jsr ppan_1
   360 						
   361 C421 A9 10				lda #16
   362 C423 CD 0B D4		@		cmp VCOUNT
   363 C426 D0 FB				bne @-
   364 						
   365 C428 A9 48 8D 02 D0			mva #72 HPOSP+2
   366 C42D A9 68 8D 03 D0			mva #72+32 HPOSP+3
   367 C432 A9 88 8D 07 D0			mva #72+64 HPOSM+3
   368 C437 A9 90 8D 06 D0			mva #72+64+8 HPOSM+2
   369 C43C A9 03 8D 0A D0			mva #3 SIZEP+2
   370 C441 8D 0B D0				sta SIZEP+3
   371 C444 A9 F0 8D 0C D0			mva #%11110000 SIZEM
   372 						
   373 C449 20 3E C8				jsr ppan_2b
   374 						
   375 C44C A9 30				lda #$30					;Enter your initials | THE LIST OF
   376 C44E 8D 14 D0				sta COLPM+2
   377 C451 8D 15 D0				sta COLPM+3
   378 						
   379 C454 A9 14				lda #20
   380 C456 CD 0B D4		@		cmp VCOUNT
   381 C459 D0 FB				bne @-
   382 C45B 8D 0A D4				sta WSYNC
   383 						;36 cykli
   384 C45E 48 68 48 68 48 68 + 		:4 _7CYCLE
   385 C466 AD FF FF AD FF FF			:2 lda $ffff
   386 						
   387 						;:18 nop 
   388 						
   389 C46C A9 0C 8D 12 D0			mva #kolorLiczby COLPM
   390 C471 8D 13 D0				sta COLPM+1
   391 C474 8D 14 D0				sta COLPM+2
   392 C477 A9 00 8D 0C D0			mva #0 SIZEM
   393 C47C 8D 0A D0				sta SIZEP+2
   394 C47F A9 B3 8D 00 D0			mva #pozWyniki+2 HPOSP		;score
   395 C484 A9 BB 8D 01 D0			mva #pozWyniki+10 HPOSP+1
   396 C489 A9 C3 8D 02 D0			mva #pozWyniki+18 HPOSP+2
   397 C48E A9 C9 8D 06 D0			mva #pozWyniki+24 HPOSM+2
   398 						
   399 						
   400 C493 A9 1A				lda #26
   401 C495 CD 0B D4		@		cmp VCOUNT
   402 C498 D0 FB				bne @-
   403 						
   404 C49A A9 48 8D 02 D0			mva #72 HPOSP+2
   405 C49F A9 90 8D 06 D0			mva #72+64+8 HPOSM+2
   406 C4A4 A9 03 8D 0A D0			mva #3 SIZEP+2
   407 C4A9 8D 0B D0				sta SIZEP+3
   408 C4AC A9 F0 8D 0C D0			mva #%11110000 SIZEM
   409 						
   410 C4B1 A9 30				lda #$30					;SCORE NAME | SPACE FIGHTERS
   411 C4B3 8D 14 D0				sta COLPM+2
   412 						
   413 C4B6 20 51 C8				jsr ppan_3
   414 C4B9 A9 00 8D 0A D0			mva #0 SIZEP+2
   415 C4BE A9 00 8D 0C D0			mva #0 SIZEM
   416 C4C3 A9 0C 8D 14 D0			mva #kolorliczby COLPM+2
   417 						
   418 C4C8 AD 1C C4 8D 03 D0			mva nick0 HPOSP+3
   419 C4CE AD 1D C4 8D 15 D0			mva kolor0 COLPM+3
   420 C4D4 A9 0E 8D 17 D0			mva #14 COLPF1
   421 						
   422 C4D9 20 77 C8				jsr ppan_4
   423 						
   424 C4DC A9 2F				lda #47
   425 C4DE CD 0B D4		@		cmp VCOUNT
   426 C4E1 D0 FB				bne @-
   427 						
   428 						
   429 C4E3 A9 00 8D 15 D0			mva #0 COLPM+3
   430 C4E8 A9 B0 8D 03 D0			mva #pozWyniki-1 HPOSP+3
   431 C4ED A9 03 8D 0B D0			mva #3 SIZEP+3
   432 						
   433 						
   434 						
   435 C4F2 A9 0C 8D 12 D0			mva #kolorLiczby COLPM
   436 C4F7 A9 14				lda #16+4
   437 C4F9 8D 0C D0				sta SIZEM
   438 C4FC A9 36 8D 13 D0			mva #kolorCzerwony COLPM+1
   439 C501 8D 14 D0				sta COLPM+2
   440 C504 A9 C4 8D 06 D0			mva #pozWyniki+19 HPOSM+2
   441 C509 A9 C8 8D 05 D0			mva #pozWyniki+23 HPOSM+1
   442 						
   443 C50E A9 00 8D 04 D0			mva #0 HPOSM
   444 C513 A9 01 8D 0A D0			mva #1 SIZEP+2		;przeciwnicy na radarze
   445 C518 A9 B4 8D 02 D0			mva #pozWyniki+3 HPOSP+2
   446 						
   447 C51D 8D 0A D4				sta WSYNC
   448 C520 A9 50 8D 15 D0			mva #kolorMapa	COLPM+3
   449 						
   450 C525 A9 60 8D 00 D0			mva #96 HPOSP			
   451 C52A A9 80 8D 01 D0			mva #96+32 HPOSP+1
   452 C52F A9 03 8D 08 D0			mva #3 SIZEP
   453 C534 8D 09 D0				sta SIZEP+1
   454 						
   455 C537 8D 0A D4 8D 0A D4 + 		:3 sta WSYNC
   456 						
   457 C540 A9 A0 8D 12 D0			mva #$A0 COLPM
   458 C545 A2 06				ldx #6
   459 						
   460 C547 A9 A0 8D 13 D0	@		mva #$A0 COLPM+1
   461 						;28 cykli
   462 C54C 48 68 48 68 48 68 + 		:4 _7CYCLE
   463 						;:14 nop
   464 C554 A9 36 8D 13 D0			mva #kolorCzerwony COLPM+1
   465 C559 8D 0A D4				sta WSYNC
   466 C55C CA					dex
   467 C55D 10 E8				bpl @-
   468 						
   469 						
   470 C55F A9 38				lda #56
   471 C561 CD 0B D4		@		cmp VCOUNT
   472 C564 D0 FB				bne @-
   473 						
   474 C566 8D 0A D4 8D 0A D4			:2 sta WSYNC
   475 C56C A9 D0 8D 12 D0			mva #$D0 COLPM
   476 C571 A2 06				ldx #6
   477 						
   478 						
   479 C573 A9 D0 8D 13 D0	@		mva #$D0 COLPM+1
   480 						;28 cykli
   481 C578 48 68 48 68 48 68 + 		:4 _7CYCLE
   482 						;:14 nop
   483 C580 A9 36 8D 13 D0			mva #kolorCzerwony COLPM+1
   484 C585 8D 0A D4				sta WSYNC
   485 C588 CA					dex
   486 C589 10 E8				bpl @-
   487 						
   488 						
   489 C58B A9 40				lda #64
   490 C58D CD 0B D4		@		cmp VCOUNT
   491 C590 D0 FB				bne @-
   492 						
   493 C592 A2 80				ldx #$80
   494 						
   495 C594 8E 12 D0				stx COLPM
   496 C597 A9 58 8D 00 D0			mva #96-8 HPOSP
   497 						
   498 C59C 20 D8 C5				jsr ppan1_a
   499
   500 C59F A2 70				ldx #$70
   501 C5A1 20 D8 C5				jsr ppan1_a
   502 						
   503 C5A4 A2 60				ldx #$60
   504 C5A6 20 D8 C5				jsr ppan1_a
   505
   506 C5A9 A2 50				ldx #$50
   507 C5AB 20 D8 C5				jsr ppan1_a
   508 						
   509 C5AE A2 40				ldx #$40
   510 C5B0 20 D8 C5				jsr ppan1_a
   511
   512 C5B3 A9 28 8D 17 D0			mva #Kolor1 COLPF1
   513 						
   514 C5B8 A9 66				lda #102
   515 C5BA CD 0B D4		@		cmp VCOUNT
   516 C5BD D0 FB				bne @-
   517 						
   518 C5BF A9 00 8D 15 D0			mva #0 COLPM+3		;koniec mapy zapasowe statki
   519 						
   520 C5C4 8D 0C D0				sta SIZEM
   521 C5C7 8D 0A D0				sta SIZEP+2			;zakonczenie mapy
   522 						;sta HPOSP
   523 						;sta HPOSP+1
   524 						;sta HPOSP+2
   525 						;sta HPOSM
   526 						;sta HPOSM+1
   527 						;sta HPOSM+2
   528
   529 C5CA A2 02				ldx #2
   530 C5CC 9D 00 D0				sta HPOSP,x
   531 C5CF 9D 04 D0				sta HPOSM,x
   532 C5D2 CA					dex
   533 C5D3 10 F7				bpl *-7
   534 						
   535 C5D5 4C 93 C8				jmp ppan_end
   536
   537 = C5D8			ppan1_a	equ *
   538 C5D8 8D 0A D4				sta WSYNC
   539
   540 C5DB A0 07				ldy #7
   541 C5DD 8D 0A D4		@		sta WSYNC
   542 C5E0 EA					nop
   543 C5E1 8E 13 D0				stx COLPM+1
   544 C5E4 A9 48 8D 01 D0			mva #72 HPOSP+1
   545 C5E9 8E 12 D0				stx COLPM
   546 C5EC EA EA EA EA EA			:5 nop
   547 C5F1 A9 8C 8D 01 D0			mva #140 HPOSP+1
   548 C5F6 EA EA EA EA				:4 nop
   549 C5FA A9 36 8D 13 D0			mva #kolorCzerwony COLPM+1
   550 C5FF 88					dey 
   551 C600 D0 DB				bne @-
   552 						
   553 C602 E0 40				cpx #$40
   554 C604 F0 08				beq @+
   555 C606 A2 06				ldx #6
   556 C608 20 2A BD				jsr xwsync
   557 C60B 8D 0A D4				sta WSYNC
   558 						;:8 sta WSYNC
   559 C60E 60			@		rts
   560 						
   561 						
   562 C60F 43 4F 4E 47 52 41 + texc1	dta c'CONGRATULATIONS',b(0,0,0,92,92)
   563 C623 54 48 45 00 00 48 + texc2	dta c'THE',b(0,0),c'HIGH',b(0,0),c'SCORE'
   564 C633 4F 46 00 54 48 45 + texc3	dta c'OF',b(0),c'THE',b(0),c'DAY'
   565 C63D 47 4F 00 46 4F 52 + texc4	dta c'GO',b(0),c'FOR',b(0),c'THE'
   566 C647 53 50 41 43 45 00 + texc5	dta c'SPACE',b(0),c'RECORD',b(0),c'NOW'		
   567 						
   568 				//najlepszy wynik		
   569 = C657			congrat	equ *
   570 C657 A9 B1 8D 02 D4 A9 + 		mwa #hsdlist1 DLPTR
   571 C661 A9 0A 8D 17 D0			mva #10 COLPF1
   572 C666 A9 00 8D 18 D0			mva #0 COLPF2
   573 						
   574 						
   575 C66B AA					tax
   576 C66C 9D 80 0A		@		sta hscr,x			;czyścimy obraz
   577 C66F 9D 80 0B				sta hscr+$100,x
   578 C672 9D 80 0C				sta hscr+$200,x
   579 C675 9D 80 0D				sta hscr+$300,x
   580 C678 CA					dex
   581 C679 D0 F1				bne @-
   582
   583 C67B A2 4F				ldx #79
   584 C67D 9D 80 0E		@		sta hscr+$400,x
   585 C680 CA					dex
   586 C681 10 FA				bpl @-
   587 						
   588 						
   589 C683 A9 02				lda #2
   590 C685 8D 9C 0A				sta hscr+28			;gwiazdy
   591 						
   592 C688 8D E1 0B				sta hscr+17+7*48
   593 C68B 8D 7E 0C				sta hscr+30+10*48
   594 C68E 8D 2A 0D				sta hscr+10+14*48
   595 C691 8D 95 0D				sta hscr+21+16*48
   596 C694 8D B8 0E				sta hscr+24+22*48
   597 C697 8D 20 0E				sta hscr+16+19*48
   598 						
   599 						
   600 						
   601 C69A A9 81				lda #129
   602 C69C 8D C4 0A				sta hscr+1*48+20
   603 C69F 8D 71 0B				sta hscr+5*48+1
   604 C6A2 8D E7 0B				sta hscr+23+7*48
   605 C6A5 8D 67 0C				sta hscr+7+10*48
   606 C6A8 8D 15 0B				sta hscr+5+3*48
   607 C6AB 8D 76 0E				sta hscr+6+21*48
   608 C6AE 8D 18 0B				sta hscr+8+3*48
   609 C6B1 8D BA 0D				sta hscr+10+17*48
   610 						
   611 C6B4 A9 DC				lda #>znaki2
   612 C6B6 8D 09 D4				sta CHBASE
   613 C6B9 20 6A C1				jsr przepiszZnaki		
   614 						
   615 C6BC A2 13				ldx #19
   616 C6BE BD 0F C6		@		lda texc1,x
   617 C6C1 9D E6 0A				sta hscr+2*48+6,x
   618 C6C4 CA					dex
   619 C6C5 10 F7				bpl @-
   620 						
   621 C6C7 A2 0F				ldx #15
   622 C6C9 BD 23 C6		@		lda texc2,x
   623 C6CC 9D 48 0B				sta hscr+4*48+8,x
   624 C6CF BD 47 C6				lda texc5,x
   625 C6D2 9D 48 0E				sta hscr+20*48+8,x
   626 C6D5 CA					dex
   627 C6D6 10 F1				bpl @-
   628
   629 C6D8 A2 09				ldx #9
   630 C6DA BD 33 C6		@		lda texc3,x
   631 C6DD 9D AB 0B				sta hscr+6*48+11,x
   632 C6E0 BD 3D C6				lda texc4,x
   633 C6E3 9D EB 0D				sta hscr+18*48+11,x
   634 C6E6 CA					dex
   635 C6E7 10 F1				bpl @-
   636 						
   637 C6E9 A2 07				ldx #7
   638 C6EB A9 00		@		lda #0
   639 C6ED 9D 38 DF				sta znaki2+103*8,x
   640 C6F0 A9 0A				lda #%00001010
   641 C6F2 9D 40 DF				sta znaki2+104*8,x
   642 C6F5 A9 A0				lda #%10100000
   643 C6F7 9D 48 DF				sta znaki2+105*8,x
   644 C6FA A9 AA				lda #%10101010
   645 C6FC 9D 50 DF				sta znaki2+106*8,x
   646 C6FF CA					dex
   647 C700 10 E9				bpl @-
   648 						
   649 C702 20 EF CA				jsr score2buf
   650 C705 20 5A CC				jsr scoreLen
   651 						
   652 C708 AA					tax
   653 C709 18					clc
   654 C70A A9 30				lda #<(hscr+9*48)		;ustalamy początek pamieci gdzie wpisujemy wynik + poprawka długości
   655 C70C 7D 9A CA				adc congTab,x
   656 C70F 85 80				sta pom
   657 C711 A9 0C				lda #>(hscr+9*48)
   658 C713 69 00				adc #0
   659 C715 85 81				sta pom+1
   660 						
   661 C717 BD 13 C4		@		lda hscbuf,x	;wczytaj cyfre
   662 C71A 20 9D CA				jsr printCyfra	;wyświetl cyfrę
   663 C71D E8					inx
   664 C71E E0 06				cpx #6
   665 C720 90 F5				bcc @-
   666 C722 A9 00				lda #0
   667 C724 20 9D CA				jsr printCyfra
   668
   669 C727 A2 06				ldx #6
   670 C729 A9 FE		@		lda #%11111110
   671 C72B 9D 23 1E				sta sprites+$600+35,x
   672 C72E A9 C0				lda #%11000000
   673 C730 9D 23 1B				sta sprites+$300+35,x
   674 C733 A9 E7				lda #%11100111
   675 C735 9D 38 1F				sta sprites+$700+56,x
   676 C738 A9 9F				lda #%10011111
   677 C73A 9D 38 1E				sta sprites+$600+56,x
   678 C73D A9 FF				lda #255
   679 C73F 9D 4D 1B				sta sprites+$300+77,x
   680 C742 A9 DD				lda #%11011101
   681 C744 9D 4D 1F				sta sprites+$700+77,x
   682 C747 A9 DD				lda #%11011101
   683 C749 9D B6 1C				sta sprites+$400+182,x
   684 C74C BD B6 1B				lda sprites+$300+182,x
   685 C74F 09 03				ora #%00000011
   686 C751 9D B6 1B				sta sprites+$300+182,x
   687 C754 A9 FB				lda #%11111011
   688 C756 9D CB 1C				sta sprites+$400+203,x
   689 C759 A9 F7				lda #%11110111
   690 C75B 9D CB 1D				sta sprites+$500+203,x
   691 C75E CA					dex
   692 C75F 10 C8				bpl @-
   693 						
   694 						
   695 						
   696 C761 A2 42				ldx #<MODUL					;low byte of RMT module to X reg
   697 C763 A0 A9				ldy #>MODUL					;hi byte of RMT module to Y reg
   698 C765 A9 16				lda #$16 					;starting song line 0-255 to A reg 	
   699 C767 20 00 A6				jsr RASTERMUSICTRACKER
   700
   701 C76A A9 01 85 EE				mva #1 stan_gry
   702 						
   703 C76E A9 1D 8D DF C7			mva #29 opoz_congrat
   704 						
   705 C773 20 16 28				jsr waitvbl
   706 C776 A9 3A 8D 00 D4			mva #58 DMACTL
   707 C77B A9 0F 8D DE C7			mva #15 conLIcz
   708 C780 A9 00 85 FF				mva #0 zegar
   709 C784 A9 0C 8D 1D C4			mva #$0c kolor0
   710 						
   711 						
   712 						
   713 						
   714 C789 20 C9 C8		@		jsr ppanel2
   715 C78C 20 16 28				jsr waitvbl
   716 C78F CE DE C7				dec conLicz
   717 C792 D0 F5				bne @-
   718
   719 C794 A9 0A				lda #10
   720 C796 8D DE C7				sta conLicz
   721 C799 AD 1D C4				lda kolor0
   722 C79C 49 0C				eor #$0c
   723 C79E 8D 1D C4				sta kolor0
   724 C7A1 CE DF C7				dec opoz_congrat
   725 C7A4 10 E3				bpl @-
   726 						
   727 						
   728 						
   729 C7A6 A9 00 8D 00 D4			mva #0 DMACTL
   730 C7AB A9 00 85 EE				mva #0 stan_gry
   731 						
   732 C7AF A2 06				ldx #6
   733 C7B1 A9 00		@		lda #0
   734 C7B3 9D 23 1E				sta sprites+$600+35,x
   735 C7B6 9D 23 1B				sta sprites+$300+35,x			;czyścimy duszki
   736 C7B9 9D 38 1E				sta sprites+$600+56,x
   737 C7BC 9D B6 1C				sta sprites+$400+182,x
   738 C7BF 9D CB 1C				sta sprites+$400+203,x
   739 C7C2 9D CB 1D				sta sprites+$500+203,x
   740 C7C5 A9 FF				lda #255
   741 C7C7 9D 38 1F				sta sprites+$700+56,x
   742 C7CA 9D 4D 1F				sta sprites+$700+77,x
   743 C7CD A9 3F				lda #%00111111
   744 C7CF 9D 4D 1B				sta sprites+$300+77,x
   745 C7D2 BD B6 1B				lda sprites+$300+182,x
   746 C7D5 29 FC				and #%11111100
   747 C7D7 9D B6 1B				sta sprites+$300+182,x
   748 C7DA CA					dex
   749 C7DB 10 D4				bpl @-
   750 						
   751 						
   752 C7DD 60					rts
   753 						
   754 						
   755 C7DE 00			conLicz	dta b(0)		
   756 C7DF 00			opoz_congrat	dta b(0)
   757 						
   758 = C7E0			ppan_1	equ *
   759 C7E0 A9 04				lda #4
   760 C7E2 CD 0B D4		@		cmp VCOUNT
   761 C7E5 90 FB				bcc @-
   762 						
   763 C7E7 A9 B1				lda #pozWyniki
   764 C7E9 8D 00 D0				sta HPOSP    ;hiscore
   765 C7EC A9 B9				lda #pozWyniki+8
   766 C7EE 8D 01 D0				sta HPOSP+1
   767 C7F1 A9 C1				lda #pozWyniki+16
   768 C7F3 8D 02 D0				sta HPOSP+2
   769 C7F6 A9 C9				lda #pozWyniki+24
   770 C7F8 8D 06 D0				sta HPOSM+2
   771 C7FB A9 CB				lda #pozWyniki+26
   772 C7FD 8D 05 D0				sta HPOSM+1
   773 C800 A9 CD				lda #pozWyniki+28
   774 C802 8D 04 D0				sta HPOSM
   775 C805 A9 00				lda #0
   776 C807 8D 0C D0				sta SIZEM
   777 							
   778 C80A A9 36				lda #kolorHiscore
   779 C80C 8D 12 D0				sta COLPM
   780 C80F 8D 13 D0				sta COLPM+1
   781 C812 8D 14 D0				sta COLPM+2
   782 						
   783 						
   784 C815 A9 0C				lda #12
   785 C817 CD 0B D4		@		cmp VCOUNT
   786 C81A D0 FB				bne @-
   787 						
   788 C81C A9 0C				lda #kolorLiczby		;pod Hiscore
   789 C81E 8D 12 D0				sta COLPM
   790 C821 8D 13 D0				sta COLPM+1
   791 C824 8D 14 D0				sta COLPM+2
   792 C827 A9 B3 8D 00 D0			mva #pozWyniki+2 HPOSP
   793 C82C A9 BB 8D 01 D0			mva #pozWyniki+10 HPOSP+1
   794 C831 A9 C3 8D 02 D0			mva #pozWyniki+18 HPOSP+2
   795 						
   796 C836 60					rts
   797 						
   798 = C837			ppan_2	equ *
   799 C837 A9 10				lda #16
   800 C839 CD 0B D4		@		cmp VCOUNT
   801 C83C D0 FB				bne @-
   802 						
   803 = C83E			ppan_2b	equ *		
   804 C83E A9 B1 8D 00 D0			mva #pozWyniki HPOSP		;1up
   805 C843 A9 B9 8D 01 D0			mva #pozWyniki+8 HPOSP+1
   806 C848 A9 8A 8D 12 D0			mva #kolor1ups COLPM
   807 C84D 8D 13 D0				sta COLPM+1
   808 						
   809 C850 60					rts
   810 						
   811 = C851			ppan_3	equ *
   812 C851 A9 1F				lda #31
   813 C853 CD 0B D4		@		cmp VCOUNT
   814 C856 D0 FB				bne @-
   815 						
   816 C858 A9 B3 8D 00 D0			mva #pozWyniki+2 HPOSP		;condition
   817 C85D A9 BB 8D 01 D0			mva #pozWyniki+8+2 HPOSP+1
   818 C862 A9 C3 8D 02 D0			mva #pozWyniki+16+2 HPOSP+2
   819 C867 A9 CB 8D 05 D0			mva #pozWyniki+24+2 HPOSM+1
   820 C86C A9 CD 8D 04 D0			mva #pozWyniki+26+2 HPOSM
   821 C871 A9 B1 8D 06 D0			mva #pozWyniki HPOSM+2
   822 						
   823 C876 60					rts
   824 						
   825 = C877			ppan_4	equ *
   826 C877 A9 25				lda #37
   827 C879 CD 0B D4		@		cmp VCOUNT
   828 C87C D0 FB				bne @-
   829 						
   830 C87E A9 0A 8D 17 D0			mva #10 COLPF1
   831 C883 AD 48 24				lda conditionColor		;conditionColor
   832 C886 8D 13 D0				sta COLPM+1
   833 C889 8D 14 D0				sta COLPM+2
   834 C88C AD 50 24				lda conditionColor1
   835 C88F 8D 12 D0				sta COLPM
   836 						
   837 C892 60					rts
   838 						
   839 = C893			ppan_end	equ *
   840 C893 A9 70				lda #113-1
   841 C895 CD 0B D4		@		cmp VCOUNT
   842 C898 D0 FB				bne @-
   843 					
   844 C89A A9 00 8D 08 D0			mva #0 SIZEP
   845 C89F 8D 09 D0				sta SIZEP+1
   846 C8A2 A9 B1 8D 00 D0			mva #pozWyniki HPOSP
   847 C8A7 A9 B9 8D 01 D0			mva #pozWyniki+8 HPOSP+1
   848 C8AC A9 C1 8D 05 D0			mva #pozWyniki+16 HPOSM+1		;Round
   849 C8B1 A9 C3 8D 04 D0			mva #pozWyniki+18 HPOSM
   850 C8B6 A9 C7 8D 02 D0			mva #pozWyniki+22 HPOSP+2
   851 C8BB A9 BA 8D 14 D0			mva #kolorLevel COLPM+2
   852 C8C0 A9 4A 8D 12 D0			mva #kolorRound COLPM
   853 C8C5 8D 13 D0				sta COLPM+1
   854 						
   855 						;mva #0 COLBAK
   856 						
   857 C8C8 60					rts
   858 						
   859 				;prawy panel podczas wyświetlania hscore
   860 = C8C9			ppanel2	equ *
   861 C8C9 20 E0 C7				jsr ppan_1
   862 C8CC 20 37 C8				jsr ppan_2
   863 						
   864 C8CF 8D 0A D4				sta WSYNC
   865 C8D2 8D 0A D4				sta WSYNC
   866 C8D5 8D 0A D4				sta WSYNC
   867 C8D8 A9 48 8D 03 D0			mva #72 HPOSP+3
   868 C8DD A9 30 8D 15 D0			mva #$30 COLPM+3
   869 C8E2 8D 14 D0				sta COLPM+2
   870 C8E5 A9 68 8D 02 D0			mva #104 HPOSP+2
   871 C8EA A9 03 8D 0A D0			mva #3 SIZEP+2
   872 C8EF A9 90 8D 07 D0			mva #144 HPOSM+3
   873 C8F4 A9 C0				lda #%11000000
   874 C8F6 8D 0C D0				sta SIZEM
   875 						
   876 C8F9 A9 14				lda #20
   877 C8FB CD 0B D4		@		cmp VCOUNT
   878 C8FE D0 FB				bne @-
   879 C900 8D 0A D4				sta WSYNC
   880 						
   881 						;32 cykle
   882 C903 48 68 48 68 48 68 + 		:4 _7CYCLE
   883 C90B AD FF FF				lda $ffff
   884 						
   885 						
   886 C90E A9 0C 8D 12 D0			mva #kolorLiczby COLPM	
   887 C913 8D 13 D0				sta COLPM+1
   888 C916 8D 14 D0				sta COLPM+2
   889 C919 A9 00 8D 15 D0			mva #0 COLPM+3
   890 C91E 8D 0C D0				sta SIZEM
   891 C921 8D 0A D0				sta SIZEP+2
   892 C924 A9 B3 8D 00 D0			mva #pozWyniki+2 HPOSP		;score
   893 C929 A9 BB 8D 01 D0			mva #pozWyniki+10 HPOSP+1
   894 C92E A9 C3 8D 02 D0			mva #pozWyniki+18 HPOSP+2
   895 C933 A9 C9 8D 06 D0			mva #pozWyniki+24 HPOSM+2
   896 						
   897 C938 A9 1B				lda #27
   898 C93A CD 0B D4		@		cmp VCOUNT
   899 C93D D0 FB				bne @-
   900 						
   901 C93F 8D 0A D4 8D 0A D4			:2 sta WSYNC
   902 C945 8E 02 D0				stx HPOSP+2			;?
   903 C948 A9 20 8D 15 D0			mva #$20 COLPM+3
   904 C94D 8D 14 D0				sta COLPM+2
   905 C950 A9 50 8D 03 D0			mva #80 HPOSP+3
   906 C955 A9 70 8D 02 D0			mva #112 HPOSP+2
   907 C95A A9 03 8D 0A D0			mva #3 SIZEP+2
   908 					
   909 						
   910 C95F A9 1F				lda #31
   911 C961 CD 0B D4		@		cmp VCOUNT
   912 C964 D0 FB				bne @-
   913 						
   914 						
   915 C966 A9 B3 8D 00 D0			mva #pozWyniki+2 HPOSP		;condition
   916 C96B A9 BB 8D 01 D0			mva #pozWyniki+8+2 HPOSP+1
   917 						
   918 C970 A9 CB 8D 05 D0			mva #pozWyniki+24+2 HPOSM+1
   919 C975 A9 CD 8D 04 D0			mva #pozWyniki+26+2 HPOSM
   920 C97A A9 B1 8D 06 D0			mva #pozWyniki HPOSM+2	
   921 C97F A9 00 8D 15 D0			mva #0 COLPM+3
   922 C984 A9 00 8D 0A D0			mva #0 SIZEP+2
   923 C989 A9 00 8D 0C D0			mva #0 SIZEM
   924 C98E A9 0C 8D 14 D0			mva #kolorliczby COLPM+2
   925 C993 A9 C3 8D 02 D0			mva #pozWyniki+16+2 HPOSP+2
   926 						
   927 C998 A9 25				lda #37
   928 C99A CD 0B D4		@		cmp VCOUNT
   929 C99D D0 FB				bne @-
   930 						
   931 						
   932 C99F 20 77 C8				jsr ppan_4
   933 						
   934 C9A2 8D 0A D4 8D 0A D4 + 		:3 sta WSYNC
   935 						
   936 C9AB A9 20 8D 15 D0			mva #$20 COLPM+3
   937 C9B0 A9 5C 8D 03 D0			mva #92 HPOSP+3
   938 C9B5 A9 7C 8D 07 D0			mva #124 HPOSM+3
   939 C9BA A9 C0 8D 0C D0			mva #%11000000 SIZEM	
   940 						
   941 C9BF A9 2A				lda #42
   942 C9C1 CD 0B D4		@		cmp VCOUNT
   943 C9C4 D0 FB				bne @-
   944 						
   945 C9C6 A9 00 8D 15 D0			mva #0 COLPM+3
   946 C9CB 8D 0A D4				sta WSYNC
   947 C9CE AD 1D C4 8D 17 D0			mva kolor0 COLPF1
   948 						
   949 						
   950 C9D4 A9 2F				lda #47
   951 C9D6 CD 0B D4		@		cmp VCOUNT
   952 C9D9 D0 FB				bne @-
   953 						
   954 						
   955 						
   956 C9DB A9 B0 8D 03 D0			mva #pozWyniki-1 HPOSP+3
   957 C9E0 A9 03 8D 0B D0			mva #3 SIZEP+3
   958 							
   959 C9E5 A9 0C 8D 12 D0			mva #kolorLiczby COLPM
   960 C9EA A9 14				lda #16+4
   961 C9EC 8D 0C D0				sta SIZEM
   962 C9EF A9 36 8D 13 D0			mva #kolorCzerwony COLPM+1
   963 C9F4 8D 14 D0				sta COLPM+2
   964 C9F7 A9 C4 8D 06 D0			mva #pozWyniki+19 HPOSM+2
   965 C9FC A9 C8 8D 05 D0			mva #pozWyniki+23 HPOSM+1
   966 						
   967 CA01 A9 00 8D 04 D0			mva #0 HPOSM
   968 CA06 A9 01 8D 0A D0			mva #1 SIZEP+2		;przeciwnicy na radarze
   969 CA0B A9 B4 8D 02 D0			mva #pozWyniki+3 HPOSP+2
   970 						
   971 CA10 A9 50 8D 15 D0			mva #kolorMapa	COLPM+3
   972 						
   973 CA15 A9 58				lda #88
   974 CA17 CD 0B D4		@		cmp VCOUNT
   975 CA1A D0 FB				bne @-
   976 						
   977 CA1C A9 08 8D 17 D0			mva #8 COLPF1
   978 						
   979 CA21 A9 A0 8D 12 D0			mva #$a0 COLPM		;GO FOR THE
   980 CA26 A9 5C 8D 00 D0			mva #92 HPOSP
   981 CA2B A9 7C 8D 04 D0			mva #124 HPOSM
   982 CA30 A9 03 8D 08 D0			mva #3 SIZEP
   983 CA35 8D 09 D0				sta SIZEP+1
   984 CA38 A9 97 8D 0C D0			mva #%10010111 SIZEM
   985 						
   986 CA3D A9 5F				lda #95
   987 CA3F CD 0B D4		@		cmp VCOUNT
   988 CA42 D0 FB				bne @-
   989 						
   990 CA44 A9 00 8D 04 D0			mva #0 HPOSM		
   991 								
   992 CA49 A9 50 8D 00 D0			mva #80 HPOSP
   993 						
   994 						
   995 						
   996 CA4E A9 65				lda #101
   997 CA50 CD 0B D4		@		cmp VCOUNT
   998 CA53 D0 FB				bne @-
   999 						
  1000 CA55 8D 0A D4				sta WSYNC
  1001 						
  1002 CA58 A9 A0 8D 13 D0			mva #$a0 COLPM+1		;SPACE RECORD NOW
  1003 CA5D A9 70 8D 01 D0			mva #112 HPOSP+1
  1004 						
  1005 						
  1006 CA62 A9 66				lda #102
  1007 CA64 CD 0B D4		@		cmp VCOUNT
  1008 CA67 D0 FB				bne @-
  1009 						
  1010 CA69 A9 00 8D 15 D0			mva #0 COLPM+3		;koniec mapy zapasowe statki
  1011 CA6E 8D 14 D0				sta COLPM+2
  1012 CA71 8D 04 D0				sta HPOSM
  1013 CA74 8D 05 D0				sta HPOSM+1
  1014 CA77 8D 06 D0				sta HPOSM+2
  1015
  1016 CA7A A9 69				lda #105
  1017 CA7C CD 0B D4		@		cmp VCOUNT
  1018 CA7F D0 FB				bne @-
  1019
  1020 CA81 A9 00 8D 12 D0			mva #0 COLPM
  1021 CA86 8D 13 D0				sta COLPM+1
  1022 CA89 8D 14 D0				sta COLPM+2
  1023 CA8C A9 00 8D 0A D0			mva #0 SIZEP+2
  1024 CA91 8D 02 D0				sta HPOSP+2
  1025 CA94 8D 0C D0				sta SIZEM
  1026 						
  1027 CA97 4C 93 C8				jmp ppan_end
  1028
  1029 CA9A 02 04 06		congTab	dta b(2,4,6)
  1030
  1031
  1032 = CA9D			printCyfra	equ *
  1033 CA9D 86 F7				stx pom0
  1034 						
  1035 CA9F 0A 0A 0A				:3 asl
  1036 CAA2 09 01				ora #1
  1037 CAA4 AA					tax
  1038 						
  1039 CAA5 20 C9 CA		@		jsr prcyf1		;rysuje jedną linię znaku
  1040 CAA8 18					clc
  1041 CAA9 A5 80				lda pom		;następna linia
  1042 CAAB 69 30				adc #48
  1043 CAAD 85 80				sta pom
  1044 CAAF 90 02				bcc @+
  1045 CAB1 E6 81				inc pom+1
  1046 CAB3 E8			@		inx
  1047 CAB4 8A					txa
  1048 CAB5 29 07				and #%111
  1049 CAB7 D0 EC				bne @-1
  1050 						
  1051 CAB9 38					sec
  1052 CABA A5 80				lda pom			;ustaw się na następną literę
  1053 CABC E9 4C				sbc #<332		;7*48-4
  1054 CABE 85 80				sta pom
  1055 CAC0 A5 81				lda pom+1
  1056 CAC2 E9 01				sbc #>332
  1057 CAC4 85 81				sta pom+1
  1058 						
  1059 CAC6 A6 F7				ldx pom0
  1060 CAC8 60					rts
  1061 						
  1062 = CAC9			prcyf1	equ *
  1063 CAC9 A0 00				ldy #0
  1064 CACB BD E8 F8		@		lda cyfryBosc,x
  1065 CACE 39 EB CA				and prcyfTab,y
  1066 						
  1067 CAD1 C0 03				cpy #3
  1068 CAD3 F0 0B				beq @+1
  1069 CAD5 84 F8				sty pom0a
  1070 CAD7 4A 4A		@		:2 lsr
  1071 CAD9 C8					iny
  1072 CADA C0 03				cpy #3
  1073 CADC 90 F9				bcc @-
  1074 CADE A4 F8				ldy pom0a
  1075 CAE0 18			@		clc
  1076 CAE1 69 67				adc #103
  1077 CAE3 91 80				sta (pom),y
  1078 CAE5 C8					iny
  1079 CAE6 C0 04				cpy #4
  1080 CAE8 90 E1				bcc @-2
  1081 						
  1082 CAEA 60					rts
  1083
  1084 CAEB C0 30 0C 03		prcyfTab	dta b(%11000000,%00110000,%00001100,%00000011)
  1085 						
  1086 = CAEF			score2buf	equ *		
  1087 CAEF A0 00				ldy #0
  1088 CAF1 A2 02				ldx #2
  1089 CAF3 B5 20		@		lda Score,x
  1090 				.if .def UC
  1091 CAF5 4B F0				alr #$f0
  1092 				.else		
  1093 						and #$f0
  1094 						lsr
  1095 				.endif		
  1096 CAF7 4A 4A 4A				:3 lsr
  1097 CAFA 99 13 C4				sta hscbuf,y
  1098 CAFD C8					iny
  1099 CAFE B5 20				lda Score,x
  1100 CB00 29 0F				and #$0f
  1101 CB02 99 13 C4				sta hscbuf,y
  1102 CB05 C8					iny
  1103 CB06 CA					dex
  1104 CB07 C0 06				cpy #6
  1105 CB09 D0 E8				bne @-
  1106 CB0B 60					rts		
  1107 					
  1108 CB0C 00 00 00 00 00 00 + 		:8 dta b(0)
  1109 					
  1110
  1111
  1112 				;Dodajemy nowy wynik		
  1113 = CB14			gameover1	equ *
  1114 CB14 20 B9 26				jsr zmaz_radar
  1115 						
  1116 CB17 A5 21				lda score+1
  1117 CB19 05 22				ora score+2
  1118 CB1B F0 26				beq @+2
  1119 						
  1120 CB1D AD 47 19				lda flaghscore
  1121 CB20 F0 15				beq @+
  1122 						
  1123 CB22 A5 20 8D 73 31			mva score hscore		;przepisz score do high score
  1124 CB27 A5 21 8D 74 31			mva score+1 hscore+1
  1125 CB2C A5 22 8D 75 31			mva score+2	hscore+2
  1126 						
  1127 CB31 20 16 28				jsr waitvbl
  1128 CB34 20 57 C6				jsr congrat		;najlepszy wynik
  1129
  1130 						
  1131 CB37 A2 00		@		ldx #0
  1132 CB39 20 02 CD		@		jsr porownaj
  1133 CB3C D0 08				bne @+1			;>1 skocz do obslugi hscore
  1134 CB3E E8					inx
  1135 CB3F E0 05				cpx #5
  1136 CB41 D0 F6				bne @-
  1137 						
  1138 CB43 4C 64 76		@		jmp title_s
  1139
  1140 CB46 E0 04		@		cpx #4			
  1141 CB48 F0 19				beq @+1
  1142 						
  1143 CB4A BD FE CC				lda porBuf,x			;przepisz wszystkie hscore 1 poziom nizej
  1144 CB4D 8D 60 CB				sta _por+1
  1145 						
  1146 CB50 A0 0F				ldy #15
  1147 CB52 B9 9F 27		@		lda hscScore1,y
  1148 CB55 99 A3 27				sta hscScore1+4,y
  1149 CB58 B9 8B 27				lda hscNick1,y
  1150 CB5B 99 8F 27				sta hscNick1+4,y
  1151 CB5E 88					dey
  1152 = CB5F			_por	equ *
  1153 CB5F C0 FF				cpy #$ff
  1154 CB61 D0 EF				bne @-
  1155 						
  1156 CB63 8A			@		txa
  1157 CB64 0A					asl
  1158 CB65 0A					asl					;wpisz nowy wynik na odpowiedniej pozycji
  1159 CB66 A8					tay	
  1160 CB67 85 FD				sta pom0f
  1161 CB69 A5 22				lda score+2
  1162 CB6B 99 9F 27				sta hscScore1,y
  1163 CB6E A5 21				lda score+1
  1164 CB70 99 A0 27				sta hscScore1+1,y
  1165 CB73 A5 20				lda score
  1166 CB75 99 A1 27				sta hscScore1+2,y
  1167 CB78 A9 00				lda #0
  1168 CB7A 99 8B 27				sta hscNick1,y		;wyczysć nick na danej pozycji
  1169 CB7D 99 8C 27				sta hscNick1+1,y
  1170 CB80 99 8D 27				sta hscNick1+2,y
  1171 						
  1172 CB83 20 5A CC				jsr scoreLen		
  1173 CB86 99 A2 27				sta hscScore1+3,y	
  1174
  1175 CB89 48					pha		;zapamietaj dlugosc score
  1176 						
  1177 CB8A A9 00 8D 18 D0			mva #0 COLPF2
  1178 CB8F A9 0A 8D 17 D0			mva #10 COLPF1
  1179 						
  1180 CB94 A2 42				ldx #<MODUL					;muzyka podczas wprowadzania hscore
  1181 CB96 A0 A9				ldy #>MODUL					;hi byte of RMT module to Y reg
  1182 CB98 A9 18				lda #$18						;starting song line 0-255 to A reg 	
  1183 CB9A 20 00 A6				jsr RASTERMUSICTRACKER		;Na razie bez muzyczki
  1184
  1185 CB9D A9 01 85 EE				mva #1 stan_gry
  1186 						
  1187 CBA1 20 E4 C2				jsr tabhscore2
  1188 CBA4 20 09 C2				jsr tabhs1
  1189 					
  1190 CBA7 A9 59 8D 02 D4 A9 + 		mwa #hsdlist	DLPTR
  1191 						
  1192 CBB1 A9 80 8D 96 17 A9 + 		mwa #obraz2 dlist+2
  1193 CBBB A9 DC 8D 09 D4			mva #>znaki2 CHBASE
  1194 						
  1195 CBC0 A6 FD				ldx pom0f
  1196 CBC2 20 F6 C3				jsr hscToBuf
  1197 CBC5 68					pla					;wypisz obecne score na ekranie
  1198 CBC6 A8					tay
  1199 CBC7 A9 A6				lda <(hscr+6*48+6)
  1200 CBC9 A2 0B				ldx >(hscr+6*48+6)
  1201 CBCB 20 E0 C3				jsr prhsc
  1202 						
  1203 CBCE A9 41				lda #65
  1204 CBD0 8D B5 0B				sta hscr+6*48+21
  1205 CBD3 8D B6 0B				sta hscr+6*48+22
  1206 CBD6 8D B7 0B				sta hscr+6*48+23
  1207 						
  1208 CBD9 A9 41 8D F9 CC			mva #65 litera	
  1209 CBDE A9 00 8D FD CC			mva #0 pozLitera
  1210 CBE3 85 FF				sta zegar
  1211 						
  1212 CBE5 A9 8A 8D 8B 23			mva #kolor1ups kolor1up
  1213 CBEA 20 16 28				jsr waitvbl
  1214 CBED A9 3A 8D 00 D4			mva #58 DMACTL
  1215 						
  1216 CBF2 20 1E C4		@		jsr ppanel1
  1217 CBF5 A5 FF				lda zegar
  1218 CBF7 C9 01				cmp #1
  1219 CBF9 D0 08				bne @+
  1220 CBFB AD 0A D2				lda random
  1221 CBFE 29 F0				and #$f0
  1222 CC00 8D 1D C4				sta kolor0
  1223 CC03 20 6D CC		@		jsr changeletter
  1224 						
  1225 CC06 AE FD CC				ldx pozLitera
  1226 CC09 E0 03				cpx #3
  1227 CC0B F0 09				beq @+
  1228 CC0D BD FA CC				lda literaTab,x
  1229 CC10 8D 1C C4				sta nick0		;pozycja mrygajacego znaku
  1230 						
  1231 CC13 4C F2 CB				jmp @-1
  1232 						
  1233 CC16 A9 00 85 FF		@		mva #0 zegar
  1234 CC1A 8D 1D C4				sta kolor0
  1235
  1236 CC1D 20 1E C4		@		jsr ppanel1
  1237 CC20 A5 FF				lda zegar 
  1238 CC22 C9 C8				cmp #200
  1239 CC24 90 F7				bcc @-
  1240 						
  1241 CC26 AD 10 D0				lda FIRE
  1242 CC29 D0 07				bne @+
  1243 CC2B A9 BE 85 FF				mva #190 zegar
  1244 CC2F 4C 1D CC				jmp @-
  1245 							
  1246 CC32 A9 00 8D 00 D4	@		mva #0 DMACTL
  1247 						
  1248 CC37 20 8C C1				jsr tabhs1cls
  1249 CC3A A9 00 85 EE				mva #0 stan_gry
  1250 						
  1251 CC3E A9 94 8D 02 D4 A9 + 		mwa #dlist	DLPTR
  1252 CC48 A9 18 8D 07 D4			mva #>sprites PMBASE
  1253 CC4D A9 D8 8D 09 D4			mva #>znaki1 CHBASE
  1254 						
  1255 						
  1256 CC52 A9 00 8D 07 D0			mva #0 HPOSM+3
  1257 						
  1258 CC57 4C 64 76				jmp Title_s
  1259
  1260 = CC5A			scoreLen	equ *
  1261 CC5A A5 22				lda score+2
  1262 CC5C D0 04				bne @+					;wpisz odpowiednią długość hscScore
  1263 CC5E A9 02				lda #2
  1264 CC60 D0 0A				bne @+2
  1265 CC62 C9 10		@		cmp #$10
  1266 CC64 B0 04				bcs @+
  1267 CC66 A9 01				lda #1
  1268 CC68 D0 02				bne @+1
  1269 CC6A A9 00		@		lda #0
  1270 CC6C 60			@		rts
  1271 						
  1272 = CC6D			changeLetter	equ *
  1273 CC6D A5 FF				lda zegar
  1274 CC6F C9 04				cmp #4		;opoznienie 
  1275 CC71 F0 01				beq @+
  1276 CC73 60					rts
  1277 CC74 A9 00 85 FF		@		mva #0 zegar
  1278 CC78 AD 00 D3				lda JOY
  1279 CC7B 29 0F				and #15
  1280 CC7D C9 0F				cmp #15
  1281 CC7F F0 34				beq cl1		;sprawdz fire
  1282 CC81 C9 07				cmp #7
  1283 CC83 D0 16				bne @+1
  1284 CC85 AD F9 CC				lda litera
  1285 CC88 18					clc
  1286 CC89 69 01				adc #1
  1287 CC8B C9 67				cmp #103
  1288 CC8D 90 02				bcc @+
  1289 CC8F A9 41				lda #65
  1290 CC91 8D F9 CC		@		sta litera
  1291 CC94 AE FD CC				ldx pozLitera
  1292 CC97 9D B5 0B				sta hscr+6*48+21,x
  1293 CC9A 60					rts
  1294 CC9B C9 0B		@		cmp #11
  1295 CC9D F0 01				beq @+
  1296 CC9F 60					rts
  1297 CCA0			@		;sec
  1298 CCA0 AD F9 CC				lda litera
  1299 CCA3 E9 01				sbc #1
  1300 CCA5 C9 41				cmp #65
  1301 CCA7 B0 02				bcs @+
  1302 CCA9 A9 66				lda #102
  1303 CCAB 8D F9 CC		@		sta litera
  1304 CCAE AE FD CC				ldx pozLitera
  1305 CCB1 9D B5 0B				sta hscr+6*48+21,x
  1306 CCB4 60					rts
  1307 = CCB5			cl1		equ *
  1308 CCB5 AD 10 D0				lda FIRE
  1309 CCB8 F0 01				beq @+
  1310 CCBA 60					rts
  1311 CCBB A5 FD		@		lda pom0f
  1312 CCBD 0D FD CC				ora pozLitera
  1313 CCC0 AA					tax
  1314 CCC1 AD F9 CC				lda litera
  1315 CCC4 9D 8B 27				sta hscNick1,x		;wpisz wybraną literę w tabeli
  1316 						
  1317 CCC7 A9 07				lda <(hscr+13*48+23)
  1318 CCC9 85 80				sta pom
  1319 CCCB A9 0D				lda >(hscr+13*48+23)
  1320 CCCD 85 81				sta pom+1
  1321 CCCF A5 FD				lda pom0f
  1322 CCD1 F0 11				beq @+2
  1323 CCD3 4A					lsr
  1324 CCD4 4A					lsr				;wpisz wybraną literę w tabeli na ekranie
  1325 CCD5 AA					tax
  1326 CCD6 18			@		clc
  1327 CCD7 A5 80				lda pom
  1328 CCD9 69 60				adc #96
  1329 CCDB 85 80				sta pom
  1330 CCDD 90 02				bcc @+
  1331 CCDF E6 81				inc pom+1
  1332 						
  1333 CCE1 CA			@		dex
  1334 CCE2 D0 F2				bne @-1
  1335 						
  1336 CCE4 AC FD CC		@		ldy pozLitera
  1337 						
  1338 CCE7 AD F9 CC				lda litera
  1339 CCEA 91 80				sta (pom),y
  1340 						
  1341 CCEC EE FD CC				inc pozLitera
  1342 CCEF A9 41 8D F9 CC			mva #65 litera
  1343 CCF4 A9 E7 85 FF				mva #-25 zegar
  1344 CCF8 60					rts
  1345 						
  1346 CCF9 00			litera	dta b(0)	
  1347 CCFA 84 88 8C		literaTab	dta b(132,136,140)
  1348 CCFD 00			pozLitera dta b(0)	
  1349 CCFE FF 03 07 0B		porBuf	dta b(255,3,7,11)
  1350
  1351 = CD02			porownaj	equ *
  1352 CD02 8A					txa
  1353 CD03 0A					asl
  1354 CD04 0A					asl
  1355 CD05 A8					tay
  1356 CD06 A5 22				lda score+2
  1357 CD08 D9 9F 27				cmp hscScore1,y
  1358 CD0B 90 1D				bcc por1
  1359 CD0D F0 03				beq @+
  1360 CD0F A9 01				lda #1		;score>hscore
  1361 CD11 60					rts
  1362 CD12 A5 21		@		lda score+1
  1363 CD14 D9 A0 27				cmp hscScore1+1,y
  1364 CD17 90 11				bcc por1
  1365 CD19 F0 03				beq @+
  1366 CD1B A9 01				lda #1		;score>hscore
  1367 CD1D 60					rts
  1368 CD1E A5 20		@		lda score
  1369 CD20 D9 A1 27				cmp hscScore1+2,y
  1370 CD23 90 05				bcc por1
  1371 CD25 F0 03				beq por1
  1372 CD27 A9 01				lda #1		;score>hscore
  1373 CD29 60					rts
  1374 CD2A A9 00		por1	lda #0
  1375 CD2C 60					rts		
  1376 					
  1377 								
  1378 								
  1379 								
  1380 								
  1381 								
  1382 								
  1383 								
  1384 								
  1385 								
  4073 									
  4074 						
  4075 							
  4076 							
  4077 02E2-02E3> 89 3B					ini (init_banki)
  4078 							
   427 							
   428 							//inicjalizacja
   429 							;org $2000
   430 CD2D						org $1e00
   431 							
   432 = 1E00						run		equ *	
   433 1E00-1F0B> A5 14				lda 20
   434 1E02 C5 14		@		cmp 20
   435 1E04 F0 FC				beq @-
   436 						
   437 1E06 A9 00 8D 00 D4			mva #0 DMACTL		;ukryj ekran
   438 						;sta DMACTLS
   439 1E0B 85 EE				sta stan_gry
   440 1E0D 8D 08 D2				sta $d208
   441 1E10 A0 03				ldy #3
   442 1E12 8C 0F D2				sty $d20f
   443 						
   444 1E15 78					sei
   445 1E16 8D 0E D4				sta NMIEN		;A=0
   446 1E19 8D 0E D2				sta $d20e
   447 1E1C 8D 07 D0				sta HPOSM+3
   448 1E1F A9 B0				lda #pozWyniki-1
   449 1E21 8D 03 D0				sta HPOSP+3
   450 						
   451 1E24 A9 FE 8D 01 D3			mva #BANK0 PORTB		;wylaczamy bios
   452 						
   453 1E29 A9 C4 8D FA FF			mva <nmi $fffa
   454 1E2E A9 21 8D FB FF			mva >nmi $fffa+1
   455 1E33 A9 46 8D FE FF A9 + 		mwa #pokey $fffe
   456 						
   457 1E3D A9 CC 8D 00 02 A9 + 		mwa #dli DLIV ;wektor przerwania dli
   458 						
   459 1E47 A9 40 8D 0E D4			mva #%01000000 NMIEN ;zezwolenia na przerwania VBLK
   460 1E4C 58					cli
   461
   462 							;tabX
   463 1E4D A0 50					ldy #80
   464 1E4F A2 D0					ldx #208
   465 1E51 8A			@			txa
   466 1E52 9D 00 1A					sta tabx,x		;od 208 do 79 -> (208-79)
   467 1E55 99 00 1A					sta tabX,y		;od 80 do 207 -> (208-79)
   468 1E58 C8						iny
   469 1E59 E8						inx
   470 1E5A E0 50					cpx #80
   471 1E5C D0 F3					bne @-
   472
   473 1E5E A2 FA				ldx #$fa
   474 1E60 BD FF FE		@		lda sprites1+$700-1,x
   475 1E63 9D FF 17				sta enemyTab1-1,x
   476 1E66 A9 FF				lda #$ff
   477 1E68 9D FF FE				sta sprites1+$700-1,x
   478 1E6B CA					dex
   479 1E6C D0 F2				bne @-
   480 							
   481 						;adresy linii obraz1a
   482 1E6E A9 00 85 80 A9 02 + 		mwa #obraz1a pom
   483 1E76 A9 F8 85 82 A9 08 + 		mwa #obraz2a pom1
   484 						;ldx #0			;X=0
   485 						
   486 1E7E A5 80		@		lda pom
   487 1E80 9D 00 17				sta obraz1La,x
   488 1E83 A5 81				lda pom+1
   489 1E85 9D 25 17				sta obraz1Ha,x
   490 1E88 A5 82				lda pom1
   491 1E8A 9D 4A 17				sta obraz2La,x
   492 1E8D A5 83				lda pom1+1
   493 1E8F 9D 6F 17				sta obraz2Ha,x
   494 1E92 18					clc
   495 1E93 A5 80				lda pom
   496 1E95 69 30				adc #48
   497 1E97 85 80				sta pom
   498 1E99 90 02				bcc @+
   499 1E9B E6 81				inc pom+1
   500 1E9D 18			@		clc
   501 1E9E A5 82				lda pom1
   502 1EA0 69 30				adc #48
   503 1EA2 85 82				sta pom1
   504 1EA4 90 02				bcc @+
   505 1EA6 E6 83				inc pom1+1
   506 1EA8 E8			@		inx
   507 1EA9 E0 25				cpx #37
   508 1EAB D0 D1				bne @-2
   509 						
   510 						;dlist
   511 1EAD A9 D0 8D 94 17			mva #$d0 dlist
   512 1EB2 A9 74 8D 95 17			mva #$74 dlist+1
   513 1EB7 A9 80 8D 96 17 A9 + 		mwa #obraz2 dlist+2
   514 1EC1 A0 1A				ldy #26
   515 1EC3 A9 34				lda #$34
   516 1EC5 99 98 17		@		sta dlist+4,y
   517 1EC8 88					dey
   518 1EC9 10 FA				bpl @-
   519 1ECB A9 14 8D B3 17			mva #$14 dlist+31
   520 1ED0 A9 41 8D B4 17			mva #$41 dlist+32
   521 						
   522 1ED5 A9 94 8D B5 17			mva #<dlist dlist+33
   523 1EDA 8D 02 D4				sta DLPTR			;program antica
   524 1EDD A9 17 8D B6 17			mva #>dlist dlist+34
   525 1EE2 8D 03 D4				sta DLPTR+1
   526 						;mwa #dlist dlist+33
   527 						
   528
   529 						
   530 						;-----
   531 1EE5 20 F0 39				jsr gwiazdyInit
   532 						
   533 1EE8 A9 0A 8D E6 49			mva #10 punkty
   534 1EED 8D 5A 19				sta antyairOpoznienie
   535 1EF0 20 62 21				jsr czyscObraz2
   536 1EF3 A9 0A 85 E5				mva #10 movX
   537 						;mva #0 movY
   538 						
   539 						
   540 						;mwa #obraz2 dlist+2
   541 						
   542 						;lda #<dlist    
   543 						;sta DLPTR
   544 						;lda #>dlist
   545 						;sta DLPTR+1
   546 1EF7 A9 D8 8D 09 D4			mva #>znaki1 CHBASE
   547 							
   548 						//jsr spriteOn	
   549 						
   550 1EFC A0 00 8C 1A D0			mvy #0 COLBAK
   551 1F01 8C 47 19				sty flagHscore
   552 1F04 84 1F				sty movy
   553 1F06 20 A8 6E				jsr setCondition
   554 					
   555 						
   556
   557 						
   558 						;ldy #0
   559 						;jsr setCondition
   560
   561 1F09 4C 56 76				jmp title_s0
   562 							
   563 							
   564 							
   565 							//wlasciwy program
   566 1F0C						icl 'przerwania.asm'
Source: przerwania.asm
     1 							
     2 = 1300			bazyRodzaj	equ $1300		;:maxBaz dta b(0)  ;rodzaj (pozioma czy pionowa)
     3 = 1310			bazyStan	equ $1310		;:maxBaz dta b(0)	  ;stan zniszczenia
     4 = 1320			bazyRakieta	equ $1320 	;:maxBaz dta b(0)		;numer rakiety przypisanej do bazy 255=brak
     5 = 1330			bazyX		equ $1330 	;:maxBaz dta b(0)  ;pozycja x
     6 = 1340			bazyX0		equ $1340		;:maxBaz dta b(0)	;pozycja X na ekranie
     7 = 1350			bazyY		equ $1350		;:maxBaz dta b(0)	;pozycja Y
     8 = 1360			bazyY0		equ $1360	;:maxBaz dta b(0)	;pozycja Y na ekranie
     9
    10 = 1370			rakietyStan	equ $1370	;:8 dta b(0)
    11 = 1378			rakietyTyp	equ $1378	;:8 dta b(0)
    12 = 1380			rakietyX	equ $1380	;:8 dta b(0)
    13 = 1388			rakietyX0	equ $1388	;:8 dta b(0)
    14 = 1390			rakietyY	equ $1390	;:8 dta b(0)
    15 = 1398			rakietyY0	equ $1398	;:8 dta b(0)
    16 = 13A0			rakietyMove	equ $13A0	;:8 dta b(0)
    17
    18 = 13A8			mwybuchyX		equ $13A8	;org *+mwyb	;8b
    19 = 13B0			mwybuchyY		equ $13B0	;org *+mwyb
    20 = 13B8			mwybuchyLicznik	equ $13B8	;org *+mwyb
    21
    22
    23 = 13C0			wybuchyX0		equ $13C0	;org *+maxWybuchow
    24 = 13E0			wybuchyY0		equ $13E0	;org *+maxWybuchow
    25
    26 = 1400			wybuchyX		equ $1400	;org *+maxWybuchow	;32b
    27 = 1420			wybuchyY		equ $1420	;org *+maxWybuchow
    28 = 1440			wybuchyLicznik	equ $1440	;org *+maxWybuchow
    29
    30
    31 = 1460			mwybuchyTyp		equ $1460	;org *+mwyb   ;8b
    32 = 1468			pociskiX		equ $1468	;dta b(0,0,0,0,0)
    33 = 146E			pociskiX0		equ $146e	;dta b(0,0,0,0,0)
    34 = 1474			pociskiY		equ $1474	;dta b(0,0,0,0,0)
    35 = 147A			pociskiY0		equ $147a	;dta b(0,0,0,0,0)
    36 = 1480			pociskiDX		equ $1480	;$dta b(0,0,0,0,0)
    37 = 1486			pociskiDX0		equ $1486	;dta b(0,0,0,0,0)		;pociskiDX/4+pozycja znakowa *4
    38 = 148C			pociskiDY		equ $148c	;dta b(0,0,0,0,0)
    39 = 1492			pociskiDY0		equ $1492	;dta b(0,0,0,0,0)		;pociskiDY/4
    40 = 1498			pociskiPlusX	equ $1498	;dta b(0,0,0,0,0)
    41 = 149E			pociskiPlusY	equ $149e	;dta b(0,0,0,0,0)
    42 = 14A4			pociskiZnakY	equ $14a4	;dta b(0,0,0,0,0)
    43 					
    44 							//org $2100+$20
    45 1F0C						org $2000
    46 = 2000			dlist_title	equ *
    47 2000-7106> 70				dta b($70)
    48 2001 42 88 03				dta b($42),a(obraz1)
    49 2004 30					dta b($30)
    50 2005 1B 5B A8 03 5B A8 + 		dta b($1b),b($5b),a(obraz1+32),b($5b),a(obraz1+32)
    51 200C 1B 5B BC 03 5B BC + 		dta b($1b),b($5b),a(obraz1+52),b($5b),a(obraz1+52)
    52 2013 1B 5B D0 03 5B D0 + 		dta b($1b),b($5b),a(obraz1+72),b($5b),a(obraz1+72)
    53 201A 1B 5B E4 03 5B E4 + 		dta b($1b),b($5b),a(obraz1+92),b($5b),a(obraz1+92)
    54 2021 1B 5B F8 03 5B F8 + 		dta b($1b),b($5b),a(obraz1+112),b($5b),a(obraz1+112)
    55 2028 1B 5B 0C 04 5B 0C + 		dta b($1b),b($5b),a(obraz1+132),b($5b),a(obraz1+132)
    56 						
    57 202F 70 30				dta b($70,$30)
    58 2031 06					dta b($6)
    59 2032 10					dta b($10)
    60 2033 02					dta b($2)
    61 2034 30					dta b($30)
    62 2035 16					dta b($6+$10)
    63 2036 10					dta b($10)
    64 2037 02					dta b($2)
    65 2038 30 06 10 02				dta b($30,$6,$10,$2)		;
    66 203C 70 50				dta b(112,$50)
    67 203E 02					dta b($2)
    68 203F 40					dta b($40)
    69 2040 06 10 06 10 06 10 + 		dta b($6,$10,$6,$10,$6,$10,$6,$10,$6)
    70 2049 70 00 0F 00 0F 00 + 		dta b($70,$00),b($0f,0,$0f,0,$0f,0,$0f,0,$0f,0,$0f)		;
    71 2056 41 00 20				dta b($41),a(dlist_title)
    72
    73 2059 70 10		hsdlist	dta b(112,$10)
    74 205B 44 80 0A				dta b(64+4),a(hscr)
    75 205E 44 B0 0A				dta b(64+4),a(hscr+48)
    76 2061 42 E0 0A				dta b(64+2),a(hscr+2*48)
    77 2064 44 10 0B				dta b(64+4),a(hscr+3*48)
    78 2067 30					dta b($30)
    79 2068 42 40 0B				dta b(64+2),a(hscr+4*48)
    80 206B 44 70 0B				dta b(64+4),a(hscr+5*48)
    81 206E 42 A0 0B				dta b(64+2),a(hscr+6*48)
    82 2071 44 D0 0B				dta b(64+4),a(hscr+7*48)
    83 2074 44 00 0C				dta b(64+4),a(hscr+8*48)
    84 2077 20					dta b($20)
    85 2078 42 30 0C				dta b(64+2),a(hscr+9*48)
    86 207B 44 60 0C				dta b(64+4),a(hscr+10*48)
    87 207E 42 90 0C				dta b(64+2),a(hscr+11*48)
    88 2081 44 C0 0C				dta b(64+4),a(hscr+12*48)
    89 2084 42 F0 0C				dta b(64+2),a(hscr+13*48)
    90 2087 44 20 0D				dta b(64+4),a(hscr+14*48)
    91 208A 42 50 0D				dta b(64+2),a(hscr+15*48)
    92 208D 44 80 0D				dta b(64+4),a(hscr+16*48)
    93 2090 42 B0 0D				dta b(64+2),a(hscr+17*48)
    94 2093 44 E0 0D				dta b(64+4),a(hscr+18*48)
    95 2096 42 10 0E				dta b(64+2),a(hscr+19*48)
    96 2099 44 40 0E				dta b(64+4),a(hscr+20*48)
    97 209C 42 70 0E				dta b(64+2),a(hscr+21*48)
    98 209F 44 A0 0E				dta b(64+4),a(hscr+22*48)
    99 20A2 44 D0 0E				dta b(64+4),a(hscr+23*48)
   100 20A5 44 00 0F				dta b(64+4),a(hscr+24*48)
   101 20A8 44 30 0F				dta b(64+4),a(hscr+25*48)
   102 20AB 44 60 0F				dta b(64+4),a(hscr+26*48)
   103 20AE 41 59 20				dta b(65),a(hsdlist)
   104 						
   105 20B1 70 10		hsdlist1	dta b(112,$10)
   106 20B3 44 80 0A				dta b(64+4),a(hscr)
   107 20B6 44 B0 0A				dta b(64+4),a(hscr+48)
   108 20B9 42 E0 0A				dta b(64+2),a(hscr+48*2)		;CONGRATULATIONS !!
   109 20BC 44 10 0B				dta b(64+4),a(hscr+48*3)
   110 20BF 40					dta b($40)
   111 20C0 42 40 0B				dta b(64+2),a(hscr+48*4)		;THE HIGH SCORE
   112 20C3 44 70 0B				dta b(64+4),a(hscr+48*5)
   113 20C6 40					dta b($40)
   114 20C7 42 A0 0B				dta b(64+2),a(hscr+48*6)		;OF THE DAY
   115 20CA 44 D0 0B				dta b(64+4),a(hscr+48*7)
   116 20CD 44 00 0C				dta b(64+4),a(hscr+48*8)
   117 						
   118 20D0 44 30 0C				dta b(64+4),a(hscr+48*9)		;WYNIK
   119 20D3 44 60 0C				dta b(64+4),a(hscr+48*10)
   120 20D6 44 90 0C				dta b(64+4),a(hscr+48*11)
   121 20D9 44 C0 0C				dta b(64+4),a(hscr+48*12)
   122 20DC 44 F0 0C				dta b(64+4),a(hscr+48*13)
   123 20DF 44 20 0D				dta b(64+4),a(hscr+48*14)
   124 20E2 44 50 0D				dta b(64+4),a(hscr+48*15)
   125 20E5 30					dta b($30)		
   126 20E6 44 80 0D				dta b(64+4),a(hscr+48*16)
   127 20E9 44 B0 0D				dta b(64+4),a(hscr+48*17)
   128 20EC 40					dta b($40)
   129 20ED 42 E0 0D				dta b(64+2),a(hscr+48*18)		;GO FOR THE
   130 20F0 44 10 0E				dta b(64+4),a(hscr+48*19)
   131 20F3 40					dta b($40)
   132 20F4 42 40 0E				dta b(64+2),a(hscr+48*20)		;SPACE RECORD NOW
   133 20F7 44 70 0E				dta b(64+4),a(hscr+48*21)
   134 20FA 44 A0 0E				dta b(64+4),a(hscr+48*22)
   135 20FD 41 B1 20				dta b(65),a(hsdlist1)
   136 						
   137 						
   138 						
   139 = 2100			czyscObraz1	equ *
   140 2100 A9 80				lda #128
   141 2102 A2 22				ldx #34
   142 2104 9D 57 03 9D 87 03 + @		:30 sta obraz1-1-48+#*48,x
   143 215E CA					dex
   144 215F 10 A3				bpl @-
   145 						
   146 2161 60					rts
   147
   148 = 2162			czyscObraz2	equ *
   149 2162 A9 80				lda #128
   150 2164 A2 22				ldx #34
   151 2166 9D 4F 0A 9D 7F 0A + @		:30 sta obraz2-1-48+#*48,x
   152 21C0 CA					dex
   153 21C1 10 A3				bpl @-
   154 						
   155 21C3 60					rts		
   156 						
   157 21C4 2C 0F D4		nmi		bit $d40f
   158 21C7 30 03				bmi dli
   159 21C9 4C B8 25				jmp vblk	
   160 					
   161 = 21CC			dli		equ *
   162 21CC 8D 1A 22				sta dli_reja
   163
   164 21CF A9 46 8D FE FF A9 + 		mwa #pokey $fffe
   165 							
   166 21D9 A9 B1				lda #pozWyniki
   167 21DB 8D 00 D0				sta HPOSP    ;hiscore
   168 21DE A9 B9				lda #pozWyniki+8
   169 21E0 8D 01 D0				sta HPOSP+1
   170 21E3 A9 C1				lda #pozWyniki+16
   171 21E5 8D 02 D0				sta HPOSP+2
   172 21E8 A9 C9				lda #pozWyniki+24
   173 21EA 8D 06 D0				sta HPOSM+2
   174 21ED A9 CB				lda #pozWyniki+26
   175 21EF 8D 05 D0				sta HPOSM+1
   176 21F2 A9 CD				lda #pozWyniki+28
   177 21F4 8D 04 D0				sta HPOSM
   178 21F7 A9 00				lda #0
   179 21F9 8D 0C D0				sta SIZEM
   180 							
   181 21FC A9 36				lda #kolorHiscore
   182 21FE 8D 12 D0				sta COLPM
   183 2201 8D 13 D0				sta COLPM+1
   184 2204 8D 14 D0				sta COLPM+2
   185 						
   186 2207 A9 24 8D 06 D2			mva #36 AUDF4
   187 220C 8D 0A D4				sta WSYNC
   188 						
   189 								
   190 220F A9 00 8D 0E D2			mva #0 IRQEN
   191 2214 A9 04 8D 0E D2			mva #4 IRQEN
   192
   193 = 221A			dli_reja	equ *+1		
   194 2219 A9 FF				lda #$ff
   195 221B 40					rti 
   196 						
   197 221C 00			sam_rpt	dta b(0)		
   198 221D 94 7B 01		sample_table	dta a(blastoff_wav),1		;0 = blastoff
   199 2220 7E 82 02						dta a(alive_wav),2				;1 = alarm
   200 2223 83 86 01						dta a(spy_wav),1					;2 = spy
   201 2226 E9 8D 01						dta a(formation_wav),1		;3 = formation
   202 2229 74 95 02						dta a(conred_wav),2			;4 = condition red
   203 222C 61 9D 01						dta a(gameover_wav),1		;5 = game over
   204 								
   205 = 222F			set_sample	equ *
   206 222F 85 24					sta rodzajSpeech
   207 2231 8D 36 22					sta ssm_1
   208 2234 0A						asl
   209 							;:2 asl
   210 = 2236			ssm_1		equ *+1			
   211 2235 69 FF					adc #$ff
   212 2237 A8						tay
   213 2238 B9 1D 22					lda sample_table,y
   214 223B 85 7E					sta sam
   215 223D 8D 90 22					sta sam_l
   216 2240 B9 1E 22					lda sample_table+1,y
   217 2243 85 7F					sta sam+1
   218 2245 8D 94 22					sta sam_h
   219 							;lda sample_table+2,y
   220 							;sta sam_end
   221 							;lda sample_table+3,y
   222 							;sta sam1_end
   223 2248 B9 1F 22					lda sample_table+2,y
   224 224B 8D 1C 22					sta sam_rpt
   225 224E A9 01 85 1E					mva #1 nobanner
   226 2252 A9 FF 85 26					mva #255 ile_rpt
   227 2256 A9 88 8D 5F 22				mva #$88 probka1
   228 							
   229 225B 60						rts
   230 						
   231 = 225C			pok_s1	equ *
   232 225C 85 2A				sta rejA
   233 = 225F			probka1	equ *+1
   234 225E A9 FF				lda #$ff
   235 2260 8D 07 D2				sta AUDC4
   236 						
   237 2263 A5 26				lda ile_rpt		
   238 2265 30 1B				bmi @+ 
   239 						
   240 2267 C6 26				dec ile_rpt				;powtarzamy ciszę
   241 2269 30 17				bmi @+
   242 226B A9 FA 8D FE FF A9 + 		mwa #pok_s2 $fffe
   243 						
   244 2275 A9 00 8D 0E D2			mva #0 IRQEN			;zakoncz przerwanie
   245 227A A9 04 8D 0E D2			mva #4 IRQEN
   246 227F A5 2A				lda rejA
   247 2281 40					rti
   248 							
   249 2282 84 54		@		sty rejY
   250 2284 A0 00				ldy #0
   251 2286 B1 7E		@		lda (sam),y
   252 2288 D0 23				bne @+1
   253 						
   254 228A CE 1C 22				dec sam_rpt		;jesli koniec sampla to sprawdz czy go powtorzyc
   255 228D F0 0F				beq @+
   256 = 2290			sam_l	equ *+1		
   257 228F A9 FF				lda #$ff
   258 2291 85 7E				sta sam
   259 = 2294			sam_h	equ *+1		
   260 2293 A9 FF				lda #$ff
   261 2295 85 7F				sta sam+1
   262 2297 A9 FF 85 26				mva #255 ile_rpt
   263 229B 4C 86 22				jmp @-			;ponownie odczytaj probke
   264 						
   265 				;konczy odtwarzanie sampla		probka=0
   266 229E A9 00		@		lda #$00
   267 22A0 8D 06 D2				sta AUDF4
   268 22A3 8D 0E D2				sta $d20e
   269 22A6 85 EA				sta sirq
   270
   271 22A8 A5 2A				lda rejA
   272 22AA A4 54				ldy rejY
   273 22AC 40					rti
   274
   275 				;dekodowanie probki		
   276 22AD			@				
   277 22AD C9 10				cmp #$10
   278 22AF B0 29				bcs @+
   279 						
   280 22B1 29 0F				and #$0f
   281 22B3 85 26				sta ile_rpt
   282 22B5 A9 18				lda #%11000
   283 22B7 8D 5F 22				sta probka1
   284 22BA 8D FD 22				sta probka2
   285 						
   286 22BD E6 7E				inc sam			;ustaw na nastepny bajt
   287 22BF D0 02				bne *+4
   288 22C1 E6 7F				inc sam+1
   289 						
   290 22C3 A9 FA 8D FE FF A9 + 		mwa #pok_s2 $fffe
   291 22CD 8C 0E D2				sty IRQEN				;zakoncz przerwanie
   292 22D0 A9 04 8D 0E D2			mva #4 IRQEN
   293 22D5 A4 54				ldy rejY
   294 22D7 A5 2A				lda rejA
   295 22D9 40					rti	
   296
   297 				;zwykla probka		
   298 22DA			@		
   299 22DA 4A 4A 4A 4A				:4 lsr
   300 22DE 09 10				ora #%10000
   301 22E0 8D FD 22				sta probka2
   302 						
   303 22E3 A9 FA 8D FE FF A9 + 		mwa #pok_s2 $fffe		
   304 22ED 8C 0E D2				sty IRQEN		;zakoncz przerwanie
   305 22F0 A9 04 8D 0E D2			mva #4 IRQEN
   306 22F5 A4 54				ldy rejY
   307 22F7 A5 2A				lda rejA
   308 22F9 40					rti
   309 							
   310 						
   311 = 22FA			pok_s2	equ *
   312 22FA 85 2A				sta rejA
   313 = 22FD			probka2	equ *+1
   314 22FC A9 FF				lda #$ff
   315 22FE 8D 07 D2				sta AUDC4
   316 						
   317 2301 A5 26				lda ile_rpt
   318 2303 30 17				bmi @+				;koncz przerwanie
   319 						
   320 2305 A9 5C 8D FE FF A9 + 		mwa #pok_s1 $fffe	;nic nie zmieniaj bo powtarzamy cisze	
   321 230F A9 00 8D 0E D2			mva #0 IRQEN
   322 2314 A9 04 8D 0E D2			mva #4 IRQEN
   323 						
   324 2319 A5 2A				lda rejA
   325 231B 40					rti		
   326 						
   327 231C 84 54		@		sty rejY
   328 231E A0 00				ldy #0
   329 2320 B1 7E				lda (sam),y
   330 2322 29 0F				and #%1111
   331 2324 09 10				ora #%10000
   332 2326 8D 5F 22				sta probka1
   333 						
   334 2329 E6 7E				inc sam
   335 232B D0 02				bne *+4
   336 232D E6 7F				inc sam+1
   337 						
   338 232F A9 5C 8D FE FF A9 + 		mwa #pok_s1 $fffe
   339 2339 8C 0E D2				sty IRQEN
   340 233C A9 04 8D 0E D2			mva #4 IRQEN
   341 						
   342 2341 A5 2A				lda rejA
   343 2343 A4 54				ldy rejY
   344 2345 40					rti
   345 						
   346 						
   347 = 2346			pokey	equ *
   348 2346 85 2A				sta rejA
   349 						
   350 2348 A9 23 8D 06 D2			mva #35 AUDF4
   351 234D A9 0C				lda #kolorLiczby		;pod Hiscore
   352 234F 8D 12 D0				sta COLPM
   353 2352 8D 13 D0				sta COLPM+1
   354 2355 8D 14 D0				sta COLPM+2
   355 2358 A9 B3 8D 00 D0			mva #pozWyniki+2 HPOSP
   356 235D A9 BB 8D 01 D0			mva #pozWyniki+10 HPOSP+1
   357 2362 A9 C3 8D 02 D0			mva #pozWyniki+18 HPOSP+2
   358 						
   359 2367 A9 7E 8D FE FF A9 + 		mwa #pokey1 $fffe
   360 						
   361 2371 A9 00				lda #$00
   362 2373 8D 0E D2				sta $d20e
   363 2376 A9 04				lda #$04
   364 2378 8D 0E D2				sta $d20e
   365 						
   366 237B A5 2A				lda rejA
   367 237D 40					rti
   368 						
   369 = 237E			pokey1	equ *
   370 237E 85 2A				sta rejA
   371 						
   372 						
   373 2380 A9 B1 8D 00 D0			mva #pozWyniki HPOSP		;1up
   374 2385 A9 B9 8D 01 D0			mva #pozWyniki+8 HPOSP+1
   375 = 238B			kolor1up	equ *+1
   376 238A A9 8A 8D 12 D0			mva #kolor1ups COLPM
   377 238F 8D 13 D0				sta COLPM+1
   378 						
   379 2392 A9 AE 8D FE FF A9 + 		mwa #pokey2 $fffe
   380 239C A9 23 8D 06 D2			mva #35 AUDF4
   381 						
   382 						
   383 23A1 A9 00				lda #$00
   384 23A3 8D 0E D2				sta $d20e
   385 23A6 A9 04				lda #$04
   386 23A8 8D 0E D2				sta $d20e
   387 						
   388 23AB A5 2A				lda rejA
   389 23AD 40					rti
   390
   391 = 23AE			pokey2	equ *
   392 23AE 85 2A				sta rejA
   393 							
   394 23B0 A9 B3 8D 00 D0			mva #pozWyniki+2 HPOSP		;score
   395 23B5 A9 BB 8D 01 D0			mva #pozWyniki+10 HPOSP+1
   396 23BA A9 0C 8D 12 D0			mva #kolorLiczby COLPM
   397 23BF 8D 13 D0				sta COLPM+1
   398 						
   399 23C2 A9 DE 8D FE FF A9 + 		mwa #pokey3 $fffe
   400 						
   401 23CC A9 64				lda #100
   402 23CE 8D 06 D2				sta AUDF4
   403 								
   404 23D1 A9 00				lda #$00
   405 23D3 8D 0E D2				sta $d20e
   406 23D6 A9 04				lda #$04
   407 23D8 8D 0E D2				sta $d20e
   408
   409 23DB A5 2A				lda rejA
   410 23DD 40					rti		
   411 					
   412
   413 = 23DE			pokey3	equ *
   414 23DE 85 2A				sta rejA
   415 						
   416 = 23E1			duszek4pos	equ *+1		
   417 23E0 A9 FF 8D 03 D0			mva #$ff HPOSP+3
   418 						
   419 23E5 A5 0F				lda formacja_stan
   420 23E7 F0 04				beq @+
   421 23E9 C9 05				cmp #5
   422 23EB D0 26				bne pk3a
   423 						
   424 23ED A9 B1 8D 06 D0	@		mva #pozWyniki HPOSM+2
   425 = 23F3			duszek4kolor	equ *+1
   426 23F2 A9 FF 8D 15 D0			mva #$ff COLPM+3
   427 23F7 A9 40 8D FE FF A9 + 		mwa #pokey4 $fffe
   428
   429 						
   430 2401 A9 51				lda #81
   431 2403 8D 06 D2				sta AUDF4
   432 								
   433 2406 A9 00				lda #$00
   434 2408 8D 0E D2				sta $d20e
   435 240B A9 04				lda #$04
   436 240D 8D 0E D2				sta $d20e
   437
   438 						
   439 2410 A5 2A				lda rejA
   440 2412 40					rti		
   441
   442 2413 A9 B0 8D 06 D0	pk3a	mva #pozWyniki-1 HPOSM+2	
   443 2418 AD 48 24				lda conditionColor	;w czasie formacji mryga czerwonym napisem
   444 241B 8D 12 D0				sta COLPM
   445 241E 8D 13 D0				sta COLPM+1
   446 2421 8D 14 D0				sta COLPM+2
   447 						
   448 2424 A9 40 8D FE FF A9 + 		mwa #pokey4 $fffe
   449 						
   450 242E A9 51				lda #81
   451 2430 8D 06 D2				sta AUDF4
   452 							
   453 2433 A9 00				lda #$00
   454 2435 8D 0E D2				sta $d20e
   455 2438 A9 04				lda #$04
   456 243A 8D 0E D2				sta $d20e
   457 						
   458 243D A5 2A				lda rejA
   459 243F 40					rti		
   460 						
   461 = 2440			pokey4	equ *
   462 2440 85 2A				sta rejA
   463 2442 A9 FF				lda #255			;condition napis
   464 2444 8D 06 D2				sta AUDF4
   465 = 2448			conditionColor	equ *+1		
   466 2447 A9 FF				lda #$ff		;conditionColor
   467 2449 8D 13 D0				sta COLPM+1
   468 244C 8D 14 D0				sta COLPM+2
   469 = 2450			conditionColor1	equ *+1
   470 244F A9 FF				lda #$ff
   471 2451 8D 12 D0				sta COLPM
   472 						
   473 2454 A9 6B 8D FE FF A9 + 		mwa #pokey5 $fffe
   474 								
   475 245E A9 00				lda #$00
   476 2460 8D 0E D2				sta $d20e
   477 2463 A9 04				lda #$04
   478 2465 8D 0E D2				sta $d20e
   479 						
   480 2468 A5 2A				lda rejA
   481 246A 40					rti
   482 						
   483 = 246B			pokey5	equ *
   484 246B 85 2A				sta rejA
   485 						
   486 						
   487 246D A9 50 8D 15 D0			mva #kolorMapa	COLPM+3
   488 2472 A9 B0 8D 03 D0			mva #pozWyniki-1 HPOSP+3
   489 							
   490 2477 A9 5A 8D 12 D0			mva #ColorShip COLPM
   491 						
   492 247C A9 14				lda #16+4
   493 247E 8D 0C D0				sta SIZEM
   494 2481 A9 F6 8D 13 D0			mva #$f6 COLPM+1
   495 						
   496 2486 8D 14 D0				sta COLPM+2
   497 2489 A9 C4 8D 06 D0			mva #pozWyniki+19 HPOSM+2
   498 248E A9 C8 8D 05 D0			mva #pozWyniki+23 HPOSM+1
   499 						
   500 = 2494			radarX1	equ *+1
   501 2493 A9 FF 8D 04 D0			mva #$ff HPOSM  ;pozycja statku na radarze
   502 2498 A9 01 8D 0A D0			mva #1 SIZEP+2		;przeciwnicy na radarze
   503 249D A9 B4 8D 02 D0			mva #pozWyniki+3 HPOSP+2
   504 						
   505 						
   506 24A2 A9 B9				lda #185
   507 24A4 8D 06 D2				sta AUDF4
   508 						
   509 24A7 A9 21 8D 1B D0			mva #1+32 GTIACTL
   510 						
   511 24AC A9 DC 8D FE FF A9 + 		mwa #pokey5a $fffe
   512 							
   513 24B6 A9 00				lda #$00
   514 24B8 8D 0E D2				sta $d20e
   515 24BB A9 04				lda #$04
   516 24BD 8D 0E D2				sta $d20e
   517 						
   518 24C0 A5 F0				lda startMapy
   519 24C2 C9 0A				cmp #10
   520 24C4 B0 0B				bcs @+		
   521 						
   522 24C6 A9 6C				lda #108 	;pozWyniki-1-68		;statek srodek 108
   523 24C8 8D 00 D0				sta HPOSP
   524 24CB 8D 01 D0				sta HPOSP+1	
   525 						
   526 24CE A5 2A				lda rejA
   527 24D0 40					rti
   528 						
   529 24D1 A9 00 8D 00 D0	@		mva #0 HPOSP
   530 24D6 8D 01 D0				sta HPOSP+1
   531 						
   532 24D9 A5 2A				lda rejA
   533 24DB 40					rti
   534 						
   535 = 24DC			pokey5a	equ *
   536 24DC 85 2A				sta rejA
   537 						
   538 24DE A9 5C				lda #110-18
   539 24E0 8D 06 D2				sta AUDF4
   540 24E3 A9 FA 8D FE FF A9 + 		mwa #pokey6 $fffe
   541 								
   542 24ED A9 00				lda #$00
   543 24EF 8D 0E D2				sta $d20e
   544 24F2 A9 04				lda #$04
   545 24F4 8D 0E D2				sta $d20e
   546 						
   547 24F7 A5 2A				lda rejA
   548 24F9 40					rti
   549 						
   550 = 24FA			pokey6	equ *
   551 24FA 85 2A				sta rejA
   552
   553 						
   554 24FC A9 0D 8D 12 D0			mva #$0d COLPM	
   555 2501 8D 13 D0				sta COLPM+1
   556 						
   557 2504 8D 14 D0				sta COLPM+2
   558 2507 A9 00 8D 15 D0			mva #0 COLPM+3		;koniec mapy zapasowe statki
   559 						
   560 250C 8D 0A D0				sta SIZEP+2	
   561 250F 8D 0E D2				sta $d20e
   562
   563 2512 A9 55 8D 0C D0			mva #1+4+16+64 SIZEM
   564 								;zakonczenie mapy
   565 						
   566 = 2518			poz2lives equ *+1
   567 2517 A9 FF 8D 02 D0			mva #$ff HPOSP+2		
   568 251C A9 FF 8D 01 D0			mva #$ff HPOSP+1
   569 2521 A9 FF 8D 00 D0			mva #$ff HPOSP
   570 = 2527			poz2mlives	equ *+1		
   571 2526 A9 FF 8D 06 D0			mva #$ff HPOSM+2
   572 252B A9 FF 8D 05 D0			mva #$ff HPOSM+1
   573 2530 A9 FF 8D 04 D0			mva #$ff HPOSM
   574 2535 A9 11 8D 1B D0			mva #1+16 GTIACTL
   575 						
   576 253A A9 51 8D FE FF A9 + 		mwa #pokey7 $fffe
   577 						
   578 2544 A9 1A				lda #26
   579 2546 8D 06 D2				sta AUDF4
   580 								
   581 2549 A9 04				lda #$04
   582 254B 8D 0E D2				sta $d20e
   583
   584 254E A5 2A				lda rejA
   585 2550 40					rti
   586 							
   587
   588 					
   589 = 2551			pokey7	equ *
   590 2551 85 2A				sta rejA
   591 							
   592 2553 A9 00				lda #0
   593 2555 8D 06 D2				sta AUDF4
   594 2558 8D 0C D0				sta SIZEM
   595 255B 8D 0E D2				sta $d20e
   596 255E 85 EA				sta sirq
   597 						
   598 2560 A9 01 8D 1B D0			mva #1 GTIACTL
   599 2565 A9 B1 8D 00 D0			mva #pozWyniki HPOSP
   600 256A A9 B9 8D 01 D0			mva #pozWyniki+8 HPOSP+1
   601 256F A9 C1 8D 05 D0			mva #pozWyniki+16 HPOSM+1		;Round
   602 2574 A9 C3 8D 04 D0			mva #pozWyniki+18 HPOSM
   603 2579 A9 C7 8D 02 D0			mva #pozWyniki+22 HPOSP+2
   604 257E A9 BA 8D 14 D0			mva #kolorLevel COLPM+2
   605 2583 A9 4A 8D 12 D0			mva #kolorRound COLPM
   606 2588 8D 13 D0				sta COLPM+1
   607 						
   608 258B A5 2A				lda rejA
   609 258D 40					rti
   610
   611
   612 = 258E			sounds		equ *
   613 				/*
   614 				@			lda extraLicznik
   615 							beq @+
   616 							dec extraLicznik
   617 							jmp @+3				;pomin dzwiek silnika i strzaly
   618 						
   619 				@			lda sfx_extra
   620 							bmi @+
   621 							mva #30 extraLicznik		;czas trwania
   622 							lda #0
   623 							tax
   624 							ldy #13*2
   625 							jsr RASTERMUSICTRACKER+15
   626 							mva #255 sfx_extra
   627 							sta sfx_effect
   628 							jmp @+2
   629
   630 				@			lda licznikStrzal
   631 							beq @+
   632 							dec licznikStrzal
   633 							bne @+
   634 							ldy #16*2			;dzwiek silnika statku
   635 							;ldx #0		
   636 							lda #0
   637 							tax
   638 							;jsr RASTERMUSICTRACKER+15	
   639
   640 				@			ldy sfx_effect
   641 							bmi @+
   642 															;dzwiek strzalu statku
   643 													; * 2
   644 														;Y = 2,4,..,16	instrument number * 2 (0,2,4,..,126)
   645 							;ldx #0						;X = 3			channel (0..3 or 0..7 for stereo module)
   646 							lda #0						;A = 12			note (0..60)
   647 							ldx #1
   648 							jsr RASTERMUSICTRACKER+15	;RMT_SFX start tone (It works only if FEAT_SFX is enabled !!!)
   649
   650 							lda #$ff
   651 							sta sfx_effect				
   652
   653 				@			lda sfxLicznik1
   654 							beq @+1
   655 							dec sfxlicznik1			
   656 							lda sfxLicznik1
   657 							cmp #40
   658 							bne @+1
   659 							
   660 							lda formacja_stan
   661 							cmp #3
   662 							beq @+
   663 							cmp #4			;formacja gdy goni ma wartosc 3 lub 4
   664 							bne @+1
   665 				@			lda trafienie
   666 							bne @+
   667 							lda #0
   668 							jsr cisza		;dzwiek alarmu, wlacz po wybuchu
   669
   670 				@			ldy sfx_wybuch
   671 							bmi @+
   672 							
   673 							mva #70 sfxLicznik1
   674 							ldx #1
   675 							lda #0
   676 							jsr RASTERMUSICTRACKER+15
   677 							
   678 							lda #$ff
   679 							sta sfx_wybuch
   680
   681 				@			lda formacja_stan			;czy aby nie ma dzwieku formacji?
   682 							cmp #3
   683 							beq @+1
   684 							cmp #4
   685 							beq @+1
   686 							
   687 							ldy sfx_rakieta			
   688 							bmi @+
   689 							lda sfxlicznik1			;jesli licznik <40 to dodaj dzwiek rakiety
   690 							cmp #40
   691 							bcs @+
   692 							
   693 							mva #39 sfxlicznik1
   694 							ldx #1
   695 							lda #0
   696 							jsr RASTERMUSICTRACKER+15
   697 							jmp @+1
   698 							
   699 							
   700 				@			ldy sfx_antyair
   701 							bmi @+1 
   702 							
   703 							lda sfxlicznik1
   704 							bne @+
   705 							
   706 							ldx #1						;jesli nie ma zadnych innych dzwiekow to dodaj dzwiek strzalu dzialka
   707 							lda #0
   708 							jsr RASTERMUSICTRACKER+15
   709 							
   710 				@			lda #$ff
   711 							sta sfx_antyair
   712 							sta sfx_rakieta
   713 							
   714 							
   715 							
   716 				@			ldy sfx_dzialko		;wybuch dzialka bazy
   717 							bmi @+
   718 							
   719 							ldx #2-1
   720 							lda #0
   721 							jsr RASTERMUSICTRACKER+15
   722 							jmp eChannel2
   723 							
   724 				@			ldy sfx_bomba
   725 							bmi @+
   726 							
   727 							ldx #2-1
   728 							lda #0
   729 							jsr RASTERMUSICTRACKER+15
   730 							jmp eChannel2			
   731 							
   732 				@			ldy sfx_enemyHit
   733 							bmi @+
   734 							
   735 							ldx #2-1
   736 							lda #0
   737 							jsr RASTERMUSICTRACKER+15
   738 							jmp eChannel2
   739 							
   740 				@			ldy sfx_asteroid
   741 							bmi @+
   742 							
   743 							ldx #2-1
   744 							lda #0
   745 							jsr RASTERMUSICTRACKER+15		
   746
   747
   748 				eChannel2	equ *
   749 							lda #$ff
   750 							sta sfx_asteroid
   751 							sta sfx_enemyHit
   752 							sta sfx_bomba
   753 							sta sfx_dzialko
   754
   755
   756 				@			ldy sfx_dead
   757 							bmi @+
   758 							
   759 							
   760 							ldx #0+1
   761 							lda #0
   762 							ldy sfx_dead
   763 							jsr RASTERMUSICTRACKER+15
   764 							
   765 							lda #$ff
   766 							sta sfx_dead	 */			
   766 							
   767 								
   768 							
   769 258E A5 53		@			lda muzyka
   770 2590 F0 21					beq graj
   771 2592 C9 01					cmp #1
   772 2594 D0 0E					bne @+
   773 							
   774 2596 A2 78					ldx <(rmt_goto+$0*4)		;START	
   775 2598 A0 B6					ldy >(rmt_goto+$0*4)
   776 259A 86 70					stx p_song
   777 259C 84 71					sty p_song+1
   778 259E 20 64 A6					jsr GetSongLine
   779 25A1 4C B3 25					jmp graj
   780 							
   781 						
   782 25A4 C9 02		@			cmp #2				;nowy level
   783 25A6 D0 0B					bne @+
   784 							
   785 							
   786 25A8 A2 88					ldx <(rmt_goto+$4*4)		; NEXTLEVEL
   787 25AA A0 B6					ldy >(rmt_goto+$4*4)
   788 25AC 86 70					stx p_song
   789 25AE 84 71					sty p_song+1
   790 25B0 20 64 A6					jsr GetSongLine
   791
   792 = 25B3			@			equ *
   793 										
   794 25B3 A9 00 85 53		graj		mva #0 muzyka
   795 25B7 60						rts		
   796 							
   797 				;przerwanie vblk
   798 = 25B8			vblk		equ *
   799 25B8 85 F4					sta vblA
   800
   801 25BA E6 FF					inc zegar
   802 							;lda opoznienieFire
   803 							;bmi @+
   804 							;dec opoznienieFire
   805 				;@			
   806 25BC A5 EE					lda stan_gry
   807 25BE D0 03 4C 54 26				jeq vblk1
   808 25C3 C9 01					cmp #1
   809 25C5 D0 0E					bne @+
   810
   811 							
   812 25C7 86 F2					stx vblX
   813 25C9 84 F3					sty vblY
   814 							
   815 25CB 20 CD A7					jsr rmt_play
   816 							
   817 							
   818 25CE A6 F2					ldx vblX
   819 25D0 A4 F3					ldy vblY
   820 							
   821 25D2 4C 54 26					jmp vblk1
   822
   823 = 25D5			@			equ *
   824 25D5 A5 ED					lda pauza
   825 25D7 D0 5A					bne @+			;podczas pauzy nie odgrywaj dzwiekow
   826
   827 25D9 20 8B 71					jsr sfx.play_fx
   828 							
   829 25DC A5 0F					lda formacja_stan
   830 25DE F0 06					beq for2
   831 25E0 C9 05					cmp #5
   832 25E2 B0 21					bcs for0
   833 25E4 90 0F					bcc for1
   834 25E6			for2			
   835 25E6 AD 0A 71					lda petla1
   836 25E9 F0 1A					beq for0
   837 25EB A9 00 8D 09 71				mva #0 kanal1
   838 25F0 8D 08 71					sta petla
   839 25F3 F0 10					beq for0
   840 25F5			for1			
   841 25F5 AD 0A 71					lda petla1
   842 25F8 D0 0B					bne for0
   843 25FA 84 F3					sty vblY
   844 25FC A0 16					ldy #fx_alarm
   845 25FE A9 03					lda #3
   846 2600 20 15 71					jsr sfx.add_fx1
   847 2603 A4 F3					ldy vblY
   848 2605			for0			
   849 							
   850 = 2606			_vbsnd1		equ *+1			
   851 2605 A9 FF					lda #$ff		;zamiast SETPOKEY
   852 2607 8D 00 D2					sta $d200
   853 = 260B			_vbsnd2		equ *+1			
   854 260A A9 FF					lda #$ff
   855 260C 8D 01 D2					sta $d201
   856 = 2610			_vbsnd3		equ *+1			
   857 260F A9 FF					lda #$ff
   858 2611 8D 02 D2					sta $d200+2
   859 = 2615			_vbsnd4		equ *+1			
   860 2614 A9 FF					lda #$ff
   861 2616 8D 03 D2					sta $d201+2
   862 = 261A			_vbsnd5		equ *+1			
   863 2619 A9 FF					lda #$ff
   864 261B 8D 04 D2					sta $d200+4
   865 = 261F			_vbsnd6		equ *+1			
   866 261E A9 FF					lda #$ff
   867 2620 8D 05 D2					sta $d201+4
   868 							
   869 = 2624			_vbsnd7		equ *+1			
   870 2623 A9 FF					lda #$ff
   871 2625 8D 08 D2					sta $d208		
   872 							
   873 2628 A9 00					lda #0
   874 262A 8D 0B 26					sta _vbsnd2			;nie zapamietuj dzwiekow
   875 262D 8D 15 26					sta _vbsnd4
   876 2630 8D 1F 26					sta _vbsnd6
   877 							
   878 2633 A5 EC		@			lda vblFlaga
   879 2635 F0 1D					beq vblk1
   880 					
   881 2637 A5 16					lda trafienie		
   882 2639 05 F0					ora startMapy
   883 263B D0 17					bne vblk1
   884 							
   885 263D 68						pla
   886 263E 85 F5					sta znacznik
   887 2640 68						pla
   888 2641 8D AD 26					sta vb_ad+1		;adres powrotu
   889 2644 68						pla
   890 2645 8D AE 26					sta vb_ad+2
   891 2648 F0 0D					beq vblk2
   892 								
   893 264A A9 26					lda #>vb_strzal
   894 264C 48						pha
   895 264D A9 7C					lda #<vb_strzal		;adres pod ktory skoczymy po zakonczeniu przerwania
   896 264F 48						pha	
   897 2650 A5 F5					lda znacznik
   898 2652 48						pha					;znacznik
   899
   900 2653 40						rti					;opusc przerwanie
   901 							
   902 = 2654			vblk1		equ *
   903 							
   904 2654 A5 F4					lda vblA
   905
   906 2656 40						rti
   907 							
   908 2657			vblk2			
   909 2657 48						pha					;jeślśli vblk przerwie irq to pomin strzal
   910 2658 AD AD 26					lda vb_ad+1
   911 265B 48						pha
   912 265C A5 F5					lda znacznik
   913 265E 48						pha
   914 265F A5 F4					lda vblA
   915 2661 C6 EC					dec vblFlaga
   916 2663 40						rti			
   917 2664 00 00 00 00 01 01 + tab_movx	dta 0,0,0,0,1,1,1,0,-1,-1,-1	
   918 266F 00 FE 02 00 00 FE + tab_movy	dta 0,-2,2,0,0,-2,2,0,0,-2,2
   919 267A 00			movx2		dta 0
   920 267B 00			movy2		dta 0
   921 						
   922 				;wywołanie procedury podczas przerwania vblk			
   923 = 267C			vb_strzal	equ *	
   924 267C 08						php
   925 267D D8						cld		
   926 							
   927 267E 86 F2					stx vblX
   928 2680 84 F3					sty vblY
   929 2682 C6 EB					dec ramka
   930 2684 A5 59					lda ramka4
   931 2686 49 04					eor #4
   932 2688 85 59					sta ramka4
   933 							
   934 				/*			lda zegar
   935 							cmp #1
   936 							bne @+
   937 							beq @+
   938
   939 							ldx sJoy
   940 							clc
   941 							lda movX1
   942 							adc tab_movx,x
   943 							sta hscrol
   944 							sta movx1
   945 							sec
   946 							lda #12
   947 							sbc movx1
   948 							sta movx2
   949 							
   950 							
   951 							clc
   952 							lda movy1
   953 							adc tab_movy,x
   954 							sta movy1
   955 							bpl pp0
   956 							sec
   957 							lda dlist+2
   958 							sbc #48
   959 							sta dlist+2
   960 							bcs *+5
   961 							dec dlist+3
   962 							lda #6
   963 				pp0			
   964 							sta vscrol
   965 							
   966 							clc
   967 							lda movy1
   968 							sta movYs
   969 							bpl *+5
   970 							sec
   971 							lda #$ff
   972 							ror
   973 							sta movy2		
   974 							
   975 							
   976 				@			*/
   976
   977 							
   978 							;jsr moveStrzal
   979 							;jsr obliczStrzalXY2
   980 268A 20 B3 2A					jsr printStrzal
   981
   982 							
   983
   984 268D A5 E7 8D 7A 26				mva movx0 movx2
   985 2692 A5 E8 8D 7B 26				mva movy0 movy2
   986 2697 A5 1F 85 E9					mva movY movYs
   987 							
   988 							 
   989 269B E6 EB					inc ramka
   990 269D A5 59					lda ramka4
   991 269F 49 04					eor #4
   992 26A1 85 59					sta ramka4
   993 							
   994 26A3 C6 EC					dec vblFlaga
   995 							
   996 26A5 A6 F2					ldx vblX		;przywroc rejestry i znaczniki
   997 26A7 A4 F3					ldy vblY
   998 26A9 A5 F4					lda vblA
   999 26AB 28						plp
  1000 26AC 4C FF FF		vb_ad		jmp $ffff		
  1001 						
  1002 						
  1003 26AF 74 79 75 7B 00 00 + playerNapis2	dta b(116,121,117,123,0,0,125,118,123,124)
  1004
  1005 = 26B9			zmaz_radar	equ *
  1006 26B9 A4 5C				ldy rads		;wymaz pozycje statku/formacji na radarze
  1007 26BB B9 64 1B				lda sprites+$300+startWyniki+84,y
  1008 26BE 29 FC				and #%11111100
  1009 26C0 99 64 1B				sta sprites+$300+startWyniki+84,y
  1010 26C3 B9 65 1B				lda sprites+$300+startWyniki+84+1,y
  1011 26C6 29 FC				and #%11111100
  1012 26C8 99 65 1B				sta sprites+$300+startWyniki+84+1,y
  1013 26CB B9 66 1B				lda sprites+$300+startWyniki+84+2,y		;dodatkowe 2 punkty zmazujemy po formacji
  1014 26CE 29 FC				and #%11111100
  1015 26D0 99 66 1B				sta sprites+$300+startWyniki+84+2,y
  1016 26D3 60					rts
  1017 						
  1018 = 26D4			game_over	equ *
  1019 26D4 20 B3 27				jsr init_fx	;jsr mute
  1020 						;jsr playFX
  1021 						
  1022 26D7 20 76 31				jsr sumaPunkty		;dodaj i wyświetl punkty jeśli gra nie zdążyła dodać
  1023 26DA A5 27				lda scoreZmiana
  1024 26DC D0 06				bne @+
  1025 26DE 20 C4 31				jsr piszScore1		
  1026 26E1 20 5A 32				jsr czyHscore
  1027 = 26E4			@		equ *
  1028 						
  1029 26E4 20 BB 75				jsr livesRedOff
  1030 						
  1031 26E7 A9 00 85 12				mva #0 sfxlicznik1
  1032
  1033 26EB A2 68		@		ldx #104		;12znakow
  1034 26ED BD D9 34		@		lda player1chars-1,x
  1035 26F0 9D 97 DB				sta znaki1-1+115*8,x
  1036 26F3 9D 97 DF				sta znaki2-1+115*8,x
  1037 26F6 CA					dex
  1038 26F7 D0 F4				bne @-
  1039 						
  1040 26F9 A2 09				ldx #9
  1041 26FB BD AF 26		@		lda playerNapis2,x
  1042 26FE F0 08				beq @+
  1043 2700 09 80				ora #128
  1044 2702 9D 33 06				sta obraz1+11+14*48,x
  1045 2705 9D 2B 0D				sta obraz2+11+14*48,x
  1046 2708 CA			@		dex
  1047 2709 10 F0				bpl @-1
  1048 					
  1049 						;jsr waitvbl
  1050 						
  1051 270B A0 19				ldy #25
  1052 270D 20 0D 28				jsr wait
  1053 						
  1054
  1055 						
  1056 						
  1057 2710 A9 05 85 24				mva #5 rodzajSpeech
  1058 2714 20 2F 22				jsr set_sample
  1059 2717 20 84 4B				jsr schowaj_duszki
  1060 						
  1061 271A A9 00 8D 00 D0			mva #0 hposp
  1062 271F 8D 01 D0				sta hposp+1			;schowaj statek
  1063 							
  1064 2722 A9 40 8D 0E D4			mva #%01000000 NMIEN
  1065 2727 78					sei
  1066 2728 A9 5C 8D FE FF A9 + 		mwa #pok_s1 $fffe
  1067 2732 A9 0F				lda #15
  1068 2734 8D 06 D2				sta AUDF4
  1069 2737 A0 00 8C 0E D2			mvy #0 IRQEN		;odpal sampel
  1070 273C 58					cli
  1071 						
  1072 273D A9 04 85 EA				mva #4 sirq
  1073 2741 8D 0E D2				sta IRQEN
  1074 						
  1075 2744 A9 00 85 FF				mva #0 zegar
  1076 						
  1077 2748 C5 FF		wa1		cmp zegar
  1078 274A F0 FC				beq *-2
  1079 						
  1080 274C A2 01				ldx #1
  1081 274E 20 3E 76				jsr changePanelColor
  1082 						
  1083 2751 A5 FF				lda zegar
  1084 2753 C9 46				cmp #70
  1085 2755 90 F1				bcc wa1
  1086 						
  1087 2757			gov2	;jsr cisza
  1088 						;jsr playFX
  1089 2757 AD 10 D0				lda FIRE
  1090 275A F0 FB				beq *-3
  1091 275C 20 16 28				jsr waitvbl
  1092 						
  1093 275F A9 00 8D 00 D4			mva #0 DMACTL	
  1094 2764 20 26 4D				jsr pokaz_duszki
  1095 						
  1096 2767 A9 00 8D 06 D2			mva #0 AUDF4
  1097 276C 85 1E				sta nobanner
  1098 						
  1099 276E A9 C0 8D 0E D4			mva #%11000000 NMIEN
  1100 						
  1101 2773 85 EE				sta stan_gry	;nie graj dzwiekow
  1102 						
  1103 2775 85 0F				sta formacja_stan		;A=0
  1104 2777 20 DE 6F				jsr piszCondition
  1105 277A AC 59 19				ldy kondycja_stan
  1106 277D 20 A8 6E				jsr setCondition
  1107 							
  1108 2780 68			@		pla		;usuwamy adres powrotu po jsr PrintShip
  1109 2781 68					pla
  1110 						
  1111 2782 20 B9 26				jsr zmaz_radar
  1112 						
  1113 2785 20 14 CB				jsr gameover1	;jsr highscore  
  1114 						
  1115 2788 4C 64 76				jmp title_s
  1116
  1117 278B 41 5B 52 00		hscNick1	dta c'A',b(91),c'R',b(0)
  1118 278F 54 5B 55 00		hscNick2	dta c'T',b(91),c'U',b(0)
  1119 2793 41 5B 4C 00		hscNick3	dta c'A',b(91),c'L',b(0)
  1120 2797 52 5B 45 00		hscNick4	dta c'R',b(91),c'E',b(0)
  1121 279B 49 5B 5A 00		hscNick5	dta c'I',b(91),c'Z',b(0)	
  1122 279F 00 20 00 02		hscScore1	dta b($00,$20,$00),(2)	
  1123 27A3 00 20 00 02		hscScore2	dta b($00,$20,$00),(2)
  1124 27A7 00 20 00 02		hscScore3	dta b($00,$20,$00),(2)
  1125 27AB 00 20 00 02		hscScore4	dta b($00,$20,$00),(2)
  1126 27AF 00 20 00 02		hscScore5	dta b($00,$20,$00),(2)
  1127
  1128
  1129 				;inicjuje efekty dzwiekowe
  1130 = 27B3			init_fx	equ *
  1131 27B3 A2 42				ldx #<MODUL					;low byte of RMT module to X reg
  1132 27B5 A0 A9				ldy #>MODUL					;hi byte of RMT module to Y reg
  1133 27B7 A9 02				lda #2						;starting song line 0-255 to A reg 	
  1134 27B9 20 00 A6				jsr RASTERMUSICTRACKER
  1135 27BC 4C BF 27				jmp playFX
  1136 						
  1137 = 27BF			playFX	equ *		;dodaje fx'y do kolejki
  1138 27BF 20 D0 A7				jsr RMT_P1
  1139 						
  1140 27C2 AD 44 A3				lda trackn_audf+0		;zamiast SETPOKEY
  1141 27C5 8D 06 26				sta _vbsnd1
  1142 27C8 AD 48 A3				lda trackn_audc+0
  1143 27CB 8D 0B 26				sta _vbsnd2
  1144 27CE AD 45 A3				lda trackn_audf+1
  1145 27D1 8D 10 26				sta _vbsnd3
  1146 27D4 AD 49 A3				lda trackn_audc+1
  1147 27D7 8D 15 26				sta _vbsnd4
  1148 27DA AD 46 A3				lda trackn_audf+2
  1149 27DD 8D 1A 26				sta _vbsnd5
  1150 27E0 AD 4A A3				lda trackn_audc+2
  1151 27E3 8D 1F 26				sta _vbsnd6
  1152 							
  1153 27E6 AD FE A8				lda v_audctl
  1154 27E9 8D 24 26				sta _vbsnd7	
  1155 							
  1156 27EC 60					rts
  1157 						
  1158 = 27ED			cisza	equ *
  1159 27ED 60					rts
  1160 27EE 30 0C				bmi @+
  1161 27F0 98					tya
  1162 27F1 48					pha
  1163 27F2 A0 16				ldy #fx_alarm
  1164 27F4 A9 01				lda #1
  1165 27F6 20 15 71				jsr sfx.add_fx1
  1166 27F9 68					pla
  1167 27FA A8					tay
  1168 27FB 60					rts
  1169 27FC			@
  1170 27FC A9 00 8D 09 71			mva #0 kanal1
  1171 2801 60					rts
  1172
  1173 						
  1174 = 2802			mute	equ *
  1175 2802 A2 80				ldx <(rmt_goto+$02*4)		
  1176 2804 A0 B6				ldy >(rmt_goto+$02*4)
  1177 2806 86 70				stx p_song
  1178 2808 84 71				sty p_song+1
  1179 280A 4C 64 A6				jmp GetSongLine		
  1180 						
  1181 = 280D			wait	equ *	;czas w Y
  1182 280D 98					tya
  1183 280E 18					clc
  1184 280F 65 FF				adc zegar
  1185 2811 C5 FF		@		cmp zegar
  1186 2813 D0 FC				bne @-
  1187 2815 60					rts
  1188 						
  1189 = 2816			waitvbl	equ *
  1190 2816 A5 FF				lda zegar
  1191 2818 C5 FF		@		cmp zegar
  1192 281A F0 FC				beq @-
  1193 281C 60					rts
  1194 						
  1195 						
   567 							
   568 							
   569 							
   570 281D						icl 'bszczaly.asm'
Source: bszczaly.asm
     1 = 0003			STRZALSPEED	equ 2+1
     2 = 0002			skosspeed=2
     3
     4 = 281D			pushFire		equ *
     5 							;mva movY movYs
     6 							
     7 281D AD 69 19					lda opoznienieFire
     8 2820 30 05					bmi @+
     9 2822 CE 69 19					dec opoznienieFire
    10 2825 10 0F					bpl @+1
    11 						
    12 2827 AD 10 D0		@			lda FIRE
    13 282A D0 0A					bne @+
    14 282C 4C 4C 28					jmp dodajStrzal
    15 282F A9 06 8D 69 19	pf0			mva #6 opoznienieFire
    16 2834 D0 0F					bne pf1
    17 							
    18 2836 AD 10 D0		@			lda FIRE
    19 2839 F0 0A					beq pf1
    20 283B CD 6A 19					cmp sFIRE
    21 283E F0 05					beq pf1
    22 2840 A9 00 8D 69 19				mva #0 opoznienieFire
    23 							
    24 2845 AD 10 D0 8D 6A 19	pf1			mva FIRE sFIRE
    25 284B 60						rts
    26
    27 = 284C			dodajStrzal		equ *
    28 284C A2 00					ldx #0
    29 284E B5 17					lda strzal,x
    30 2850 15 18					ora strzal+1,x
    31 2852 F0 08					beq @+
    32 2854 A2 02					ldx #2
    33 2856 B5 17					lda strzal,x
    34 2858 15 18					ora strzal+1,x
    35 285A D0 D3					bne pf0			
    36 							
    37 285C			@			;mva #6*2	sfx_effect
    38 							;mva #12 licznikStrzal		;dlugosc dzwieku strzalu
    39 							
    40 285C A0 0A					ldy #fx_strzal
    41 285E A9 01					lda #1
    42 2860 20 50 71					jsr sfx.add_fx
    43 							
    44 2863 A4 5E					ldy	sJoy
    45 2865 D0 02					bne @+
    46 2867 A0 01					ldy #1	;jesli nie poruszono jeszcze joystickiem to wybierz gore
    47 2869 B9 78 28		@			lda strzalTab5,y
    48 286C 8D 76 28					sta _strzalJump0+1
    49 286F B9 83 28					lda strzalTab5+11,y
    50 2872 8D 77 28					sta _strzalJump0+2
    51 							
    52 = 2875			_strzalJump0	equ *
    53 2875 4C FF FF					jmp $ffff
    54 							
    55 2878 F6 D8 D8 F6 F9 B3 + strzalTab5	dta b(<_rts,<goraDol,<goraDol,<_rts,<lewoPrawo,<skos1,<skos2,<_rts,<lewoPrawo,<skos2,<skos1)
    56 2883 28 28 28 28 28 28 + 			dta b(>_rts,>goraDol,>goraDol,>_rts,>lewoPrawo,>skos1,>skos2,>_rts,>lewoPrawo,>skos2,>skos1)
    57 							
    58 				;prawoGora i lewoDol
    59 = 288E			skos2		equ *
    60 288E A9 01 95 17					mva #1 strzal,x
    61 2892 95 18					sta strzal+1,x
    62 							
    63 2894 A9 03 9D 24 19				mva #3 strzalKierunek,x
    64 2899 9D 25 19					sta strzalKierunek+1,x	
    65
    66 289C A9 43 9D 04 19				mva #17*4-1 strzalX,x
    67 28A1 A9 34 9D 00 19				mva #13*4 strzalY,x
    68 							
    69 28A6 A9 3B 9D 05 19				mva #15*4-1 strzalX+1,x
    70 28AB A9 3C 9D 01 19				mva #15*4 strzalY+1,x
    71 							
    72 28B0 4C 2F 28					jmp pf0
    73 							
    74 				;LewoGora i prawoDol
    75 = 28B3			skos1		equ *
    76 28B3 A9 01 95 17					mva #1 strzal,x
    77 28B7 95 18					sta strzal+1,x
    78 							
    79 28B9 A9 02 9D 24 19				mva #2 strzalKierunek,x
    80 28BE 9D 25 19					sta strzalKierunek+1,x
    81 							
    82 28C1 A9 3C 9D 04 19				mva #15*4 strzalX,x
    83 28C6 A9 34 9D 00 19				mva #13*4 strzalY,x
    84 							
    85 28CB A9 44 9D 05 19				mva #17*4 strzalX+1,x
    86 28D0 A9 3C 9D 01 19				mva #15*4 strzalY+1,x
    87 							
    88 28D5 4C 2F 28					jmp pf0
    89 							
    90 				;strzaly poruszaja sie w gore i dol			
    91 = 28D8			goraDol		equ *
    92 28D8 A9 01 95 17					mva #1 strzal,x
    93 28DC 95 18					sta strzal+1,x
    94 							
    95 28DE 9D 24 19					sta strzalKierunek,x
    96 28E1 9D 25 19					sta strzalKierunek+1,x
    97 							
    98 28E4 A9 3F 9D 04 19				mva #16*4-1 strzalX,x
    99 28E9 9D 05 19					sta strzalX+1,x
   100 							
   101 28EC A9 33 9D 00 19				mva #12*4+3 strzalY,x
   102 28F1 A9 3D 9D 01 19				mva #15*4+1 strzalY+1,x
   103 							
   104 28F6 4C 2F 28		_rts		jmp pf0	
   105
   106 				;strzaly poruszają się w prawo i w lewo			
   107 = 28F9			lewoPrawo	equ *
   108 28F9 A9 01 95 17					mva #1 strzal,x
   109 28FD 95 18					sta strzal+1,x
   110
   111 28FF A9 00 9D 24 19				mva #0 strzalKierunek,x
   112 2904 9D 25 19					sta strzalKierunek+1,x
   113 							
   114 2907 A9 3B 9D 04 19				mva #15*4-1 strzalX,x
   115 290C A9 45 9D 05 19				mva #17*4+1 strzalX+1,x
   116 							
   117 2911 A9 38 9D 00 19				mva #14*4 strzalY,x
   118 2916 9D 01 19					sta strzalY+1,x
   119 							
   120 2919 4C 2F 28					jmp pf0
   121
   122 				;poruszaj strzalami			
   123 = 291C			movestrzal	equ *
   124 291C A2 02					ldx #2
   125 291E B5 17		@			lda strzal,x
   126 2920 15 18					ora strzal+1,x
   127 2922 F0 12					beq mst1
   128 2924 BC 24 19					ldy strzalKierunek,x
   129 2927 B9 3B 29					lda strzalTab1,y
   130 292A 8D 34 29					sta _strzalJump+1
   131 292D B9 3F 29					lda strzalTab1+4,y
   132 2930 8D 35 29					sta _strzalJump+2
   133 2933 4C FF FF		_strzalJump	jmp $ffff
   134 2936 CA			mst1		dex
   135 2937 CA						dex
   136 2938 10 E4					bpl @- 
   137 							
   138 293A 60						rts
   139
   140 293B E4 B9 7E 43		strzalTab1	dta b(<moveStrzalLP,<moveStrzalGD,<moveStrzalSkos1,<moveStrzalSkos2)
   141 293F 29 29 29 29					dta b(>moveStrzalLP,>moveStrzalGD,>moveStrzalSkos1,>moveStrzalSkos2)
   142
   143
   144 				;prawoGora i lewoDol
   145 = 2943			moveStrzalSkos2	equ *
   146 2943 B5 17					lda strzal,x
   147 2945 F0 17					beq @+
   148 2947 18						clc
   149 2948 BD 04 19					lda strzalX,x
   150 294B 69 02					adc #skosspeed
   151 294D 9D 04 19					sta strzalX,x
   152 							;sec
   153 2950 BD 00 19					lda strzalY,x
   154 2953 E9 01					sbc #skosspeed-1
   155 2955 9D 00 19					sta strzalY,x
   156 2958 10 04					bpl @+
   157 295A A9 00 95 17					mva #0 strzal,x
   158 							
   159 295E B5 18		@			lda strzal+1,x
   160 2960 F0 19					beq @+
   161 2962 38						sec
   162 2963 BD 05 19					lda strzalX+1,x
   163 2966 E9 02					sbc #skosspeed
   164 2968 9D 05 19					sta strzalX+1,x
   165 							;clc
   166 296B BD 01 19					lda strzalY+1,x
   167 296E 69 01					adc #skosspeed-1
   168 2970 9D 01 19					sta strzalY+1,x
   169 2973 C9 70					cmp #112
   170 2975 90 04					bcc @+
   171 2977 A9 00 95 18					mva #0 strzal+1,x
   172 										
   173 297B 4C 36 29		@			jmp mst1
   174 							
   175 				;lewoGora i PrawoDol
   176 = 297E			moveStrzalSkos1	equ *
   177 297E B5 17					lda strzal,x
   178 2980 F0 17					beq @+
   179 2982 38						sec
   180 2983 BD 04 19					lda strzalX,x
   181 2986 E9 02					sbc #skosspeed
   182 2988 9D 04 19					sta strzalX,x
   183 298B BD 00 19					lda strzalY,x
   184 298E E9 02					sbc #skosspeed
   185 2990 9D 00 19					sta strzalY,x
   186 2993 10 04					bpl @+
   187 2995 A9 00 95 17					mva #0 strzal,x
   188 							
   189 2999 B5 18		@			lda strzal+1,x
   190 299B F0 19					beq @+
   191 299D 18						clc
   192 299E BD 05 19					lda strzalX+1,x
   193 29A1 69 02					adc #skosspeed
   194 29A3 9D 05 19					sta strzalX+1,x
   195 29A6 BD 01 19					lda strzalY+1,x
   196 29A9 69 02					adc #skosspeed
   197 29AB 9D 01 19					sta strzalY+1,x
   198 29AE C9 70					cmp #112
   199 29B0 90 04					bcc @+
   200 29B2 A9 00 95 18					mva #0 strzal+1,x
   201 							
   202 29B6 4C 36 29		@			jmp mst1
   203
   204 				;os pionowa
   205 = 29B9			moveStrzalGD	equ *
   206 29B9 B5 17					lda strzal,x
   207 29BB F0 0F					beq @+
   208 29BD 38						sec
   209 29BE BD 00 19					lda strzalY,x
   210 29C1 E9 03					sbc #STRZALSPEED
   211 29C3 9D 00 19					sta strzalY,x
   212 29C6 10 04					bpl @+
   213 29C8 A9 00 95 17					mva #0 strzal,x
   214 							
   215 29CC B5 18		@			lda strzal+1,x
   216 29CE F0 11					beq @+
   217 29D0 18						clc
   218 29D1 BD 01 19					lda strzalY+1,x
   219 29D4 69 03					adc #STRZALSPEED
   220 29D6 9D 01 19					sta strzalY+1,x
   221 29D9 C9 70					cmp #112
   222 29DB 90 04					bcc @+
   223 29DD A9 00 95 18					mva #0 strzal+1,x
   224 							
   225 29E1 4C 36 29		@			jmp mst1
   226 							
   227 				;os pozioma			
   228 = 29E4			moveStrzalLP	equ *
   229 29E4 B5 17					lda strzal,x
   230 29E6 F0 0F					beq @+
   231 29E8 38						sec
   232 29E9 BD 04 19					lda strzalX,x
   233 29EC E9 03					sbc #STRZALSPEED
   234 29EE 9D 04 19					sta strzalX,x
   235 29F1 10 04					bpl @+
   236 29F3 A9 00 95 17					mva #0 strzal,x
   237 							
   238 29F7 B5 18		@			lda strzal+1,x
   239 29F9 F0 0F					beq @+
   240 29FB 18						clc
   241 29FC BD 05 19					lda strzalX+1,x
   242 29FF 69 03					adc #STRZALSPEED
   243 2A01 9D 05 19					sta strzalX+1,x
   244 2A04 10 04					bpl @+
   245 2A06 A9 00 95 18					mva #0 strzal+1,x
   246 						
   247 2A0A 4C 36 29		@			jmp mst1
   248
   249 							
   250 				;obliczamy obecną pozycję X,Y pocisku (X1,Y1)
   251 = 2A0D			obliczStrzalXY2	equ *
   252 2A0D A2 03					ldx #3
   253 									
   254 2A0F B5 17		@			lda strzal,x
   255 2A11 F0 2E					beq @+
   256 							
   257 2A13 BD 04 19					lda strzalX,x
   258 2A16 18						clc
   259 2A17 6D 7A 26					adc movX2
   260 							
   261 2A1A 9D 10 19					sta strzalX3,x	;pozycja z poprawka przesuniecia obrazu
   262 2A1D 29 03					and #%11
   263 2A1F 9D 30 19					sta strzalXbit,x
   264 2A22 BD 10 19					lda strzalX3,x
   265 2A25 4A						lsr @
   266 2A26 4A						lsr @
   267 2A27 9D 0C 19					sta strzalX2,x
   268 							
   269 2A2A 18						clc
   270 2A2B AD 7B 26					lda movY2
   271 2A2E 7D 00 19					adc strzalY,x
   272 2A31 9D 1C 19					sta strzalY3,x	;pozycja z poprawka przesuniecia obrazu
   273 2A34 29 03					and #%11
   274 2A36 9D 20 19					sta strzalYbit,x
   275 2A39 BD 1C 19					lda strzalY3,x
   276 2A3C 4A						lsr @
   277 2A3D 4A						lsr @
   278 2A3E 9D 18 19					sta strzalY2,x
   279 							
   280 2A41 CA			@			dex
   281 2A42 10 CB					bpl @-1
   282 							
   283 2A44 60						rts
   284 				/*			
   285 				locateStrzal1	equ *
   286 							ldx #3
   287 				@			lda strzal,x
   288 							beq @+
   289 							
   290 							ldy strzalY2,x
   291 							
   292 							clc
   293 							lda obraz1L,y
   294 							adc strzalX2,x
   295 							sta pom1
   296 							lda obraz1H,y
   297 							adc #0
   298 							sta pom1+1
   299 							
   300 							ldy #0	
   301 							lda (pom1),y
   302 							sta strzalTlo1,x		;do zmazania 
   303 							and #127
   304 							cmp #firstStrzalChar
   305 							bcc @+
   306 							cmp #firstPociskChar
   307 							bcs @+
   308 							lda strzalTlo,x			;ta sama pozycja co ostatnio
   309 							sta strzalTLo1,x
   310 							
   311 				@			dex
   312 							bpl @-1
   313 							rts
   314 							
   315 				locateStrzal2	equ *
   316 							ldx #3
   317 				@			lda strzal,x
   318 							beq @+
   319 							
   320 							ldy strzalY2,x
   321 							
   322 							clc
   323 							lda obraz2L,y
   324 							adc strzalX2,x
   325 							sta pom1
   326 							lda obraz2H,y
   327 							adc #0
   328 							sta pom1+1	
   329 							
   330 							ldy #0	
   331 							lda (pom1),y
   332 							sta strzalTlo1,x		;do zmazania 
   333 							and #127
   334 							cmp #firstStrzalChar
   335 							bcc @+
   336 							cmp #firstPociskChar
   337 							bcs @+
   338 							lda strzalTlo,x			;ta sama pozycja co ostatnio
   339 							sta strzalTLo1,x
   340 							
   341 				@			dex
   342 							bpl @-1
   343 							rts  */
   343
   344
   345 							
   346 				;obliczenia ktore powtarzaja sie podczas rysowania pociskow				
   347 = 2A45			obliczStrzal	equ *
   348 2A45 BD 30 19					lda strzalXbit,x
   349 2A48 A8						tay
   350 2A49 B9 9F 2C					lda strzalTab6,y
   351 2A4C 85 61					sta strz0b		;ora
   352 							
   353 2A4E BC 18 19					ldy strzalY2,x
   354 2A51 C0 3F					cpy #$3f
   355 2A53 D0 02					bne *+4
   356 2A55 A0 00					ldy #0
   357 							
   358 2A57 A5 EB					lda ramka
   359 2A59 D0 19					bne @+
   360 							
   361 2A5B 18						clc
   362 2A5C B9 80 18					lda obraz1L,y
   363 2A5F 7D 0C 19					adc strzalX2,x
   364 2A62 85 68					sta strz1
   365 2A64 9D F4 18					sta zmazTab,x
   366 2A67 B9 9D 18					lda obraz1H,y
   367 2A6A 69 00					adc #0
   368 2A6C 85 69					sta strz1+1
   369 2A6E 9D F8 18					sta zmazTab+4,x
   370 2A71 4C 8A 2A					jmp @+1		;skok bezwarunkowy
   371 							
   372 2A74 18			@			clc
   373 2A75 B9 BA 18					lda obraz2L,y
   374 2A78 7D 0C 19					adc strzalX2,x
   375 2A7B 85 68					sta strz1
   376 2A7D 9D F4 18					sta zmazTab,x
   377 2A80 B9 D7 18					lda obraz2H,y
   378 2A83 69 00					adc #0
   379 2A85 85 69					sta strz1+1	
   380 2A87 9D F8 18					sta zmazTab+4,x
   381 							
   382 2A8A A0 00		@			ldy #0	
   383 2A8C B1 68					lda (strz1),y
   384 							;sta strzalTlo,x		;do zmazania 
   385 2A8E A8						tay
   386 2A8F 29 80					and #128
   387 2A91 1D DD 2A					ora strzalTab0,x
   388 2A94 AA						tax
   389 							
   390 2A95 B9 00 F6					lda adresZnakL,y	;nr znaku pod pociskiem
   391 2A98 85 66					sta strz
   392 2A9A B9 00 F7					lda adresZnakH,y
   393 2A9D 05 59					ora ramka4
   394 2A9F 85 67					sta strz+1
   395 							
   396 2AA1 A0 00					ldy #0
   397 2AA3 8A						txa
   398 2AA4 91 68					sta (strz1),y
   399 2AA6 BD 00 F6					lda adresZnakL,x
   400 2AA9 85 68					sta strz1
   401 							
   402 2AAB BD 00 F7					lda adresZnakH,x
   403 2AAE 05 59					ora ramka4
   404 2AB0 85 69					sta strz1+1			
   405 2AB2 60						rts
   406 						
   407 				;narysuj strzaly na ekranie, albo je usun(poza ekranem)			
   408 = 2AB3			printStrzal	equ *
   409 2AB3 A2 03					ldx #3
   410 2AB5 B5 17		@			lda strzal,x
   411 2AB7 F0 18					beq @+
   412 2AB9 BC 24 19					ldy strzalKierunek,x
   413 2ABC 84 65					sty strz0f
   414 2ABE B9 D5 2A					lda strzalTab2,y
   415 2AC1 8D CD 2A					sta _strzalJump1+1
   416 2AC4 B9 D9 2A					lda strzalTab2+4,y
   417 2AC7 8D CE 2A					sta _strzalJump1+2
   418 							
   419 2ACA 86 63					stx strz0d
   420 = 2ACC			_strzalJump1	equ *
   421 2ACC 4C FF FF					jmp $ffff
   422 2ACF A6 63		pst1		ldx strz0d
   423 2AD1 CA			@			dex
   424 2AD2 10 E1					bpl @-1
   425 							
   426 2AD4 60						rts
   427
   428 2AD5 FF A7 E1 E1		strzalTab2	dta b(<printStrzalLP,<printStrzalGD,<printStrzalSkos1,<printStrzalSkos1)
   429 2AD9 2B 2C 2A 2A					dta b(>printStrzalLP,>printStrzalGD,>printStrzalSkos1,>printStrzalSkos1)
   430
   431 2ADD 41 42 43 44		strzalTab0		:4 dta b(firstStrzalChar+#)
   432
   433 				;strzaly lewoGora i prawoDol
   434 = 2AE1			printStrzalSkos1	equ *
   435 2AE1 A5 EC					lda vblFlaga
   436 2AE3 F0 10					beq @+
   437 							
   438 2AE5 A0 00					ldy #0
   439 2AE7 BD F4 18					lda zmazTab,x
   440 2AEA 85 66					sta strz
   441 2AEC BD F8 18					lda zmazTab+4,x
   442 2AEF 85 67					sta strz+1
   443 							;lda strzalTlo,x
   444 2AF1 A9 80					lda #$80
   445 2AF3 91 66					sta (strz),y
   446 							
   447 2AF5 20 45 2A		@			jsr obliczStrzal
   448 							
   449 2AF8 A6 63					ldx strz0d
   450 2AFA BD 20 19					lda strzalYbit,x
   451 							
   452 2AFD A8						tay				
   453 2AFE B9 F3 2B					lda strzalTab8,y
   454 2B01 8D 0B 2B					sta _strzalSkos1+1
   455 2B04 B9 F7 2B					lda strzalTab8+4,y
   456 2B07 8D 0C 2B					sta _strzalSkos1+2
   457 = 2B0A			_strzalSkos1	equ *
   458 2B0A 4C FF FF					jmp $ffff
   459 							
   460 2B0D			@			
   461 						
   462 = 2B0D			strzalSkos10	equ *
   463 2B0D A0 07					ldy #7			;0010
   464 2B0F B1 66		@			lda (strz),y		;0000
   465 2B11 91 68					sta (strz1),y	;0000
   466 2B13 88						dey				;0000
   467 2B14 C0 01					cpy #1
   468 2B16 D0 F7					bne @-
   469
   470 2B18 B1 66		@			lda (strz),y
   471 2B1A 45 61					eor strz0b
   472 2B1C 91 68					sta (strz1),y
   473 2B1E 88						dey
   474 2B1F 10 F7					bpl @-
   475 							
   476 2B21 4C CF 2A					jmp pst1
   477 							
   478 = 2B24			strzalSkos11	equ *			
   479 2B24 A0 07		@			ldy #7			;na gorze
   480 2B26 B1 66		@			lda (strz),y		;0100
   481 2B28 91 68					sta (strz1),y	;0010
   482 2B2A 88						dey				;0000
   483 2B2B C0 03					cpy #3			;0000
   484 2B2D D0 F7					bne @-
   485 							
   486 2B2F B1 66		@			lda (strz),y
   487 2B31 45 61					eor strz0b
   488 2B33 91 68					sta (strz1),y
   489 2B35 88						dey
   490 2B36 C0 01					cpy #1
   491 2B38 D0 F5					bne @-
   492 							
   493 2B3A A5 65					lda strz0f
   494 2B3C C9 03					cmp #3
   495 2B3E F0 10					beq @+
   496 							
   497 2B40 06 61					asl strz0b
   498 2B42 06 61					asl strz0b	;skos1  \
   499 2B44 B1 66					lda (strz),y
   500 2B46 45 61					eor strz0b
   501 2B48 91 68					sta (strz1),y
   502 2B4A 88						dey
   503 2B4B 10 F7					bpl *-7
   504 							
   505 2B4D 4C CF 2A					jmp pst1
   506 							
   507 2B50 46 61		@			lsr strz0b
   508 2B52 46 61					lsr strz0b		;skos2 /
   509 							
   510 2B54 B1 66					lda (strz),y
   511 2B56 45 61					eor strz0b
   512 2B58 91 68					sta (strz1),y
   513 2B5A 88						dey
   514 2B5B 10 F7					bpl *-7
   515 							
   516 2B5D 4C CF 2A					jmp pst1
   517 							
   518 = 2B60			strzalSkos12	equ *
   519 2B60 A0 07					ldy #7					;0000
   520 2B62 B1 66		@			lda (strz),y			;0100
   521 2B64 91 68					sta (strz1),y			;0010
   522 2B66 88						dey						;0000
   523 2B67 C0 05					cpy #5
   524 2B69 D0 F7					bne @-		
   525 											
   526 2B6B B1 66		@			lda (strz),y
   527 2B6D 45 61					eor strz0b
   528 2B6F 91 68					sta (strz1),y
   529 2B71 88						dey
   530 2B72 C0 03					cpy #3
   531 2B74 D0 F5					bne @-
   532 							
   533 2B76 A5 65					lda strz0f
   534 2B78 C9 03					cmp #3
   535 2B7A F0 19					beq @+
   536 							
   537 2B7C 06 61					asl strz0b
   538 2B7E 06 61					asl strz0b	;skos1  \
   539 2B80 B1 66					lda (strz),y
   540 2B82 45 61					eor strz0b
   541 2B84 91 68					sta (strz1),y
   542 2B86 88						dey
   543 2B87 C0 01					cpy #1
   544 2B89 D0 F5					bne *-9
   545 							
   546 2B8B B1 66					lda (strz),y
   547 2B8D 91 68					sta (strz1),y
   548 2B8F 88						dey
   549 2B90 10 F9					bpl *-5
   550
   551 2B92 4C CF 2A					jmp pst1	
   552 							
   553 2B95 46 61		@			lsr strz0b
   554 2B97 46 61					lsr strz0b		;skos2 /
   555 							
   556 2B99 B1 66					lda (strz),y
   557 2B9B 45 61					eor strz0b
   558 2B9D 91 68					sta (strz1),y
   559 2B9F 88						dey
   560 2BA0 C0 01					cpy #1
   561 2BA2 D0 F5					bne *-9
   562 							
   563 2BA4 B1 66					lda (strz),y
   564 2BA6 91 68					sta (strz1),y
   565 2BA8 88						dey
   566 2BA9 10 F9					bpl *-5
   567
   568 2BAB 4C CF 2A					jmp pst1	
   569
   570 = 2BAE			strzalSkos13	equ *	
   571 2BAE A0 07					ldy #7
   572 2BB0 B1 66		@			lda (strz),y		;na dole
   573 2BB2 45 61					eor strz0b
   574 2BB4 91 68					sta (strz1),y		;0000
   575 2BB6 88						dey					;0000
   576 2BB7 C0 05					cpy #5				;0100
   577 2BB9 D0 F5					bne @-				;0010
   578 							
   579 2BBB A5 65					lda strz0f
   580 2BBD C9 03					cmp #3
   581 2BBF F0 19					beq @+
   582 							
   583 2BC1 06 61					asl strz0b
   584 2BC3 06 61					asl strz0b	;skos1  \
   585 2BC5 B1 66					lda (strz),y		
   586 2BC7 45 61					eor strz0b
   587 2BC9 91 68					sta (strz1),y
   588 2BCB 88						dey
   589 2BCC C0 03					cpy #3
   590 2BCE D0 F5					bne *-9
   591 							
   592 2BD0 B1 66					lda (strz),y
   593 2BD2 91 68					sta (strz1),y
   594 2BD4 88						dey
   595 2BD5 10 F9					bpl *-5
   596 							
   597 2BD7 4C CF 2A					jmp pst1
   598 							
   599 2BDA 46 61		@			lsr strz0b
   600 2BDC 46 61					lsr strz0b		;skos2 /
   601 							
   602 2BDE B1 66					lda (strz),y		
   603 2BE0 45 61					eor strz0b
   604 2BE2 91 68					sta (strz1),y
   605 2BE4 88						dey
   606 2BE5 C0 03					cpy #3
   607 2BE7 D0 F5					bne *-9
   608 							
   609 2BE9 B1 66					lda (strz),y
   610 2BEB 91 68					sta (strz1),y
   611 2BED 88						dey
   612 2BEE 10 F9					bpl *-5
   613 							
   614 2BF0 4C CF 2A					jmp pst1
   615 							
   616 2BF3 0D 24 60 AE		strzalTab8	dta b(<strzalSkos10,<strzalSkos11,<strzalSkos12,<strzalSkos13)
   617 2BF7 2B 2B 2B 2B					dta b(>strzalSkos10,>strzalSkos11,>strzalSkos12,>strzalSkos13)			
   618
   619
   620 2BFB 40 50 14 05		strzalTab3		dta b(%01000000,%01010000,%00010100,%00000101)
   621
   622 = 2BFF			printStrzalLP	equ *
   623 				;rejestr X (nr pocisku) w strz0d
   624 2BFF A5 EC					lda vblFlaga
   625 2C01 F0 15					beq @+1
   626 							;lda strzalTlo,x
   627 2C03 A9 80					lda #$80
   628 2C05 A4 EB					ldy ramka
   629 2C07 D0 09					bne @+			;odwrotne obrazy
   630 2C09 BC 08 19					ldy strzalX1,x
   631 2C0C 99 28 06					sta obraz1+14*48,y
   632 2C0F 4C 18 2C					jmp @+1
   633 2C12 BC 08 19		@			ldy strzalX1,x
   634 2C15 99 20 0D					sta obraz2+14*48,y
   635 							
   636 2C18 BD 10 19		@			lda strzalX3,x
   637 							
   638 2C1B 29 03					and #%11
   639 2C1D A8						tay
   640 							
   641 2C1E B9 FB 2B					lda strzalTab3,y
   642 2C21 85 61					sta strz0b		;Ora
   643 									
   644 2C23 BD 0C 19					lda strzalX2,x
   645 2C26 A8						tay
   646 2C27 9D 08 19					sta strzalX1,x		;do zmazania
   647 2C2A BD 18 19					lda strzalY2,x
   648 2C2D 9D 14 19					sta strzalY1,x		;do zmazania
   649 							
   650 							
   651 2C30 A5 EB					lda ramka
   652 2C32 D0 2C					bne @+
   653 						
   654 2C34 B9 28 06					lda obraz1+14*48,y
   655 2C37 9D 28 19					sta strzalTlo,x		;do zmazania 
   656 							
   657 2C3A B9 28 06					lda obraz1+14*48,y
   658 2C3D 29 80					and #128
   659 2C3F 1D DD 2A					ora strzalTab0,x
   660
   661 2C42 99 28 06					sta obraz1+14*48,y
   662 2C45 A8						tay
   663 2C46 B9 00 F6					lda adresZnakL,y 	;adres znaku pocisku
   664 2C49 85 68					sta strz1
   665 2C4B B9 00 F7					lda adresZnakH,y
   666 2C4E 85 69					sta strz1+1
   667 							
   668 2C50 BC 28 19					ldy strzalTlo,x
   669 							
   670 2C53 B9 00 F6					lda adresZnakL,y 	;adres znaku pod pociskiem
   671 2C56 85 66					sta strz
   672 2C58 B9 00 F7					lda adresZnakH,y
   673 2C5B 85 67					sta strz+1	
   674 							
   675 2C5D 4C 8D 2C					jmp slp1		;jmp
   676 								
   677 								
   678 2C60 B9 20 0D		@			lda obraz2+14*48,y
   679 2C63 9D 28 19					sta strzalTlo,x		;do zmazania 
   680 							
   681 2C66 B9 20 0D					lda obraz2+14*48,y
   682 2C69 29 80					and #128
   683 2C6B 1D DD 2A					ora strzalTab0,x
   684
   685 2C6E 99 20 0D					sta obraz2+14*48,y
   686 2C71 A8						tay
   687 2C72 B9 00 F6					lda adresZnakL,y 	;adres znaku pocisku
   688 2C75 85 68					sta strz1
   689 2C77 B9 00 F7					lda adresZnakH,y
   690 2C7A 09 04					ora #4
   691 2C7C 85 69					sta strz1+1
   692 							
   693 2C7E BC 28 19					ldy strzalTlo,x
   694 							
   695 2C81 B9 00 F6					lda adresZnakL,y 	;adres znaku pod pociskiem
   696 2C84 85 66					sta strz
   697 2C86 B9 00 F7					lda adresZnakH,y
   698 2C89 09 04					ora #4
   699 2C8B 85 67					sta strz+1	
   700 							
   701 = 2C8D			slp1		equ *			
   702 2C8D A0 07					ldy #7
   703 2C8F B1 66		@			lda (strz),y
   704 2C91 C4 E9					cpy movYs
   705 2C93 D0 02					bne *+4
   706 2C95 45 61					eor strz0b
   707 2C97 91 68					sta (strz1),y
   708 2C99 88						dey
   709 2C9A 10 F3					bpl @-
   710 							
   711 2C9C 4C CF 2A					jmp pst1
   712 							
   713
   714 										
   715 2C9F 40 10 04 01		strzalTab6	dta b(%01000000,%00010000,%00000100,%00000001)
   716 2CA3 3F CF F3 FC					dta b(%00111111,%11001111,%11110011,%11111100)
   717 								
   718 = 2CA7			printStrzalGD	equ *
   719 2CA7 A5 EC					lda vblFlaga
   720 2CA9 F0 10					beq @+
   721 							
   722 2CAB A0 00					ldy #0
   723 2CAD BD F4 18					lda zmazTab,x
   724 2CB0 85 66					sta strz
   725 2CB2 BD F8 18					lda zmazTab+4,x
   726 2CB5 85 67					sta strz+1
   727 							;lda strzalTlo,x
   728 2CB7 A9 80					lda #$80
   729 2CB9 91 66					sta (strz),y
   730 							
   731 2CBB 20 45 2A		@			jsr obliczStrzal	
   732 							
   733 2CBE A6 63					ldx strz0d
   734 2CC0 BD 20 19					lda strzalYbit,x
   735 							
   736 2CC3 A8						tay					;skok z OBLICZ przy pustym znaku
   737 2CC4 B9 1F 2D					lda strzalTab7,y
   738 2CC7 8D D1 2C					sta _strzalGD+1
   739 2CCA B9 23 2D					lda strzalTab7+4,y
   740 2CCD 8D D2 2C					sta _strzalGD+2
   741 2CD0 4C FF FF		_strzalGD	jmp $ffff
   742 							
   743 					
   744 = 2CD3			strzalGD0	equ *
   745 2CD3 A0 07					ldy #7
   746 2CD5 B1 66		@			lda (strz),y
   747 2CD7 C0 02					cpy #2
   748 2CD9 B0 02					bcs *+4
   749 2CDB 45 61					eor strz0b
   750 2CDD 91 68					sta (strz1),y
   751 2CDF 88						dey
   752 2CE0 10 F3					bpl @-
   753
   754 2CE2 4C CF 2A					jmp pst1
   755
   756 = 2CE5			strzalGD1	equ *			
   757 2CE5 A0 07					ldy #7			;na gorze
   758 2CE7 B1 66		@			lda (strz),y
   759 2CE9 C0 04					cpy #4
   760 2CEB B0 02					bcs *+4
   761 2CED 45 61					eor strz0b
   762 2CEF 91 68					sta (strz1),y
   763 2CF1 88						dey
   764 2CF2 10 F3					bpl @-
   765 							
   766 2CF4 4C CF 2A					jmp pst1
   767 							
   768 = 2CF7			strzalGD2	equ *
   769 2CF7 A0 07					ldy #7
   770 2CF9 B1 66		@			lda (strz),y
   771 2CFB C0 02					cpy #2
   772 2CFD 90 06					bcc *+8
   773 2CFF C0 06					cpy #6
   774 2D01 B0 02					bcs *+4
   775 2D03 45 61					eor strz0b
   776 2D05 91 68					sta (strz1),y
   777 2D07 88						dey
   778 2D08 10 EF					bpl @-
   779
   780 2D0A 4C CF 2A					jmp pst1
   781 							
   782 = 2D0D			strzalGD3	equ *	
   783 2D0D A0 07					ldy #7
   784 2D0F B1 66		@			lda (strz),y		;na dole
   785 2D11 C0 04					cpy #4
   786 2D13 90 02					bcc *+4
   787 2D15 45 61					eor strz0b
   788 2D17 91 68					sta (strz1),y	
   789 2D19 88						dey
   790 2D1A 10 F3					bpl @-
   791
   792 							
   793 2D1C 4C CF 2A					jmp pst1
   794 							
   795 2D1F D3 E5 F7 0D		strzalTab7	dta b(<strzalGD0,<strzalGD1,<strzalGD2,<strzalGD3)
   796 2D23 2C 2C 2C 2D					dta b(>strzalGD0,>strzalGD1,>strzalGD2,>strzalGD3)
   797 							
   571 2D27						icl 'duszki4.asm'
Source: duszki4.asm
     1 				;trzecia wersja duszków
     2 = 004A			firstDuchChar	equ 74
     3
     4 = E700			shpBuf			equ explo_adr+$100
     5
     6 				;tablice
     7 = 2D27			duszkiZnakiL	equ *
     8 2D27 50 98 E0 28 70 B8				:6 dta b(<((firstDuchChar+9*#)*8+znaki1))
     9 = 2D2D			duszkiZnakiH	equ *
    10 2D2D DA DA DA DB DB DB				:6 dta b(>((firstDuchChar+9*#)*8+znaki1))
    11 = 2D33			duszkiChar		equ *
    12 2D33 4A 53 5C 65 6E 77				:6 dta b(firstDuchChar+(#*9))
    13
    14 							
    15 = 0000			enemy1Shape	equ 0
    16 = 0010			enemy2Shape	equ 16			
    17 = 0020			spyShape1		equ 2*16	
    18 = 0030			exploShape	equ 3*16
    19
    20 2D39			duszkiPrint	.proc
    21 					
    22 = 00F7			nchar		equ pom0
    23 = 00F8			duchX		equ pom0a	
    24 = 00F9			DX			equ pom0b
    25 = 00FA			DY2		equ pom0c
    26 = 00FB			_bufor	equ pom0d
    27 							
    28 2D39 38						sec
    29 2D3A BD BD 17					lda enemyX,x
    30 2D3D E5 E3					sbc posX
    31 2D3F A8						tay
    32 2D40 B9 00 1A					lda tabX,y
    33 2D43 9D C3 17					sta enemyX0,x
    34 2D46 18						clc
    35 2D47 69 02					adc #2
    36 2D49 C9 23					cmp #33+2
    37 2D4B 90 06					bcc @+
    38 							;lda enemyY,x		;obliczmy też Y0 dla duszka poza ekranem
    39 							;sbc posY
    40 							;sta enemyY0,x
    41 2D4D A9 01					lda #1
    42 2D4F 9D 79 01					sta enemyEkran,x
    43 2D52 60						rts		;poza ekranem
    44 							
    45 2D53 69 06		@			adc #6
    46 2D55 85 F8					sta duchX
    47 							
    48 2D57 38						sec
    49 2D58 BD C9 17					lda enemyY,x
    50 2D5B E5 E4					sbc posY
    51 2D5D 9D CF 17					sta enemyY0,x
    52 2D60 18						clc
    53 2D61 69 02					adc #2
    54 2D63 C9 1F					cmp #29+2
    55 2D65 90 06					bcc @+
    56 2D67 A9 01					lda #1
    57 2D69 9D 79 01					sta enemyEkran,x
    58 2D6C 60						rts		;poza ekranem	
    59 							
    60 2D6D A8			@			tay
    61 							
    62 2D6E A5 EB					lda ramka
    63 2D70 D0 11					bne @+					;adres pamieci obrazu pod duszkiem
    64 							;clc
    65 2D72 B9 06 17					lda obraz1La+6,y
    66 2D75 65 F8					adc duchX
    67 2D77 85 80					sta pom
    68 2D79 B9 2B 17					lda obraz1Ha+6,y
    69 2D7C 69 00					adc #0
    70 2D7E 85 81					sta pom+1
    71 2D80 4C 91 2D					jmp @+1		;skok bezwarunkowy
    72 2D83			@			;clc
    73 2D83 B9 50 17					lda obraz2La+6,y
    74 2D86 65 F8					adc duchX
    75 2D88 85 80					sta pom
    76 2D8A B9 75 17					lda obraz2Ha+6,y
    77 2D8D 69 00					adc #0
    78 2D8F 85 81					sta pom+1
    79 							
    80 = 2D91			@			equ *
    81 2D91 BD DB 17					lda enemyDY,x
    82 2D94 29 C0					and #%11000000
    83 2D96 0A						asl
    84 2D97 2A 2A					:2 rol
    85 2D99 9D F9 17					sta enemyDY0,x
    86 2D9C 0A						asl
    87 2D9D 85 FA					sta pom0c	;DY*2
    88
    89 2D9F BD D5 17					lda enemyDX,x
    90 2DA2 29 C0					and #%11000000
    91 2DA4 0A						asl
    92 2DA5 2A 2A					:2  rol
    93 2DA7 9D F3 17					sta enemyDX0,x		
    94 2DAA 85 F9					sta pom0b			;DX
    95
    96 2DAC 86 F8					stx duchX	;zapamietaj X
    97 2DAE BD 91 01					lda enemyOraTab,x
    98 2DB1 85 BC					sta enemyColor
    99 							
   100 				//nowe znaki
   101 2DB3 BD 2D 2D					lda duszkiZnakiH,x
   102 2DB6 05 59					ora ramka4
   103 2DB8 A8						tay
   104 2DB9 BD 27 2D					lda duszkiZnakiL,x		;wskaznik do adresu pierwszego znaku duszka
   105 							
   106 2DBC 8D 0F 31					sta nznak0+1
   107 2DBF 8D 4B 31					sta nznak0b+1
   108 2DC2 8C 10 31					sty nznak0+2
   109 2DC5 8C 4C 31					sty nznak0b+2
   110 							;clc
   111 2DC8 69 08					adc #8
   112 2DCA 8D 1D 31					sta nznak1+1
   113 2DCD 8D 51 31					sta nznak1b+1
   114 2DD0 8C 1E 31					sty nznak1+2
   115 2DD3 8C 52 31					sty nznak1b+2
   116 2DD6 69 08					adc #8
   117 							
   118 2DD8 A6 F9					ldx DX
   119 2DDA F0 0C					beq @+
   120 						
   121 2DDC 8D 2B 31					sta nznak2+1
   122 2DDF 8D 37 31					sta nznak2b+1
   123 2DE2 8C 2C 31					sty nznak2+2
   124 2DE5 8C 38 31					sty nznak2b+2
   125 							
   126 2DE8 69 08		@			adc #8
   127 2DEA 8D E4 30					sta nznak3+1
   128 2DED 8C E5 30					sty nznak3+2
   129 2DF0 69 08					adc #8
   130 2DF2 90 02					bcc *+4
   131 2DF4 18						clc
   132 2DF5 C8						iny
   133 2DF6 8D D6 30					sta nznak4+1
   134 2DF9 8C D7 30					sty nznak4+2
   135 2DFC 69 08					adc #8
   136 							
   137 2DFE A6 F9					ldx DX
   138 2E00 F0 06					beq @+
   139 							
   140 2E02 8D C8 30					sta nznak5+1
   141 2E05 8C C9 30					sty nznak5+2
   142 							
   143 2E08 A6 FA		@			ldx DY2
   144 2E0A F0 2E					beq @+
   145 							
   146 2E0C 69 08					adc #8
   147 2E0E 8D 01 31					sta nznak6+1
   148 2E11 8D 5F 31					sta nznak6b+1
   149 2E14 8C 02 31					sty nznak6+2
   150 2E17 8C 60 31					sty nznak6b+2
   151 2E1A 69 08					adc #8
   152 2E1C 8D FB 30					sta nznak7+1
   153 2E1F 8D 6D 31					sta nznak7b+1
   154 2E22 8C FC 30					sty nznak7+2
   155 2E25 8C 6E 31					sty nznak7b+2
   156 							
   157 2E28 A6 F9					ldx DX
   158 2E2A F0 0E					beq @+
   159 							
   160 2E2C 69 08					adc #8
   161 2E2E 8D F5 30					sta nznak8+1
   162 2E31 8D 45 31					sta nznak8b+1
   163 2E34 8C F6 30					sty nznak8+2
   164 2E37 8C 46 31					sty nznak8b+2			
   165 						
   166 2E3A A6 F8		@			ldx DuchX
   167
   168 2E3C BD 33 2D					lda duszkiChar,x			
   169 2E3F 1D 71 01					ora enemyNegatyw,x	
   170 2E42 85 F7					sta nchar
   171 							
   172 2E44 BD E1 17		_jmp		lda enemyFaza,x
   173 2E47 1D ED 17					ora enemyShapeH,x
   174 2E4A C9 33					cmp #51
   175 2E4C D0 02					bne *+4
   176 2E4E A9 32					lda #50
   177 2E50 0A 0A 0A					:3 asl
   178 2E53 85 FB					sta _bufor
   179 2E55 A9 1C					lda #>(enemy1adr/8)
   180 2E57 2A						rol
   181 2E58 06 FB					asl _bufor
   182 2E5A 2A						rol
   183 2E5B 06 FB					asl _bufor
   184 2E5D 2A						rol
   185 							;ora #>enemy1adr
   186 2E5E AA						tax
   187 2E5F A5 FB					lda _bufor
   188 							
   189 				//procedura testowa kopiuje ksztalt do bufora, na podstawie adresu i DX,DY2
   190 2E61 A4 F9					ldy DX
   191 2E63 D0 2C					bne @+1
   192
   193 				//DX=0
   194 2E65 8D 80 2E					sta adr0+1
   195 2E68 8E 81 2E					stx adr0+2
   196 2E6B 09 10					ora #16			;zamiast adc
   197 2E6D 8D 86 2E					sta adr1+1
   198 2E70 8E 87 2E					stx adr1+2
   199
   200 							;lda #<shpBuf
   201 							;ora DY2
   202 2E73 A5 FA					lda DY2
   203 2E75 8D 83 2E					sta _shp0+1
   204 2E78 09 18					ora #24
   205 2E7A 8D 89 2E					sta _shp1+1
   206 							
   207
   208 2E7D A0 0F					ldy #15
   209 = 2E7F			@			equ *
   210 2E7F B9 FF FF		adr0		lda $ffff,y
   211 2E82 99 00 E7		_shp0		sta shpBuf,y
   212
   213 2E85 B9 FF FF		adr1		lda $ffff,y
   214 2E88 99 18 E7		_shp1		sta shpBuf+24,y
   215
   216 2E8B 88						dey
   217 2E8C 10 F1					bpl @-
   218 2E8E 4C E0 2E					jmp @+2
   219 				//DX>0			
   220 = 2E91			@			equ *
   221 2E91 8D CF 2E					sta adr0b+1
   222 2E94 8E D0 2E					stx adr0b+2
   223 2E97 09 10					ora #16
   224 2E99 8D C3 2E					sta adr1b+1
   225 2E9C 8E C4 2E					stx adr1b+2
   226 							
   227 2E9F B9 64 E6					lda tHShif,y
   228 2EA2 8D CD 2E					sta tShfL0+2
   229 2EA5 8D D9 2E					sta tShfL1+2
   230
   231 2EA8 B9 60 E6					lda tLShif,y
   232 2EAB 8D C7 2E					sta tShfH0+2
   233 2EAE 8D D3 2E					sta tShfH1+2
   234 							
   235 							;lda #<shpBuf
   236 							;ora DY2
   237 2EB1 A5 FA					lda DY2
   238 2EB3 8D DB 2E					sta _shp0b+1
   239 2EB6 09 18					ora #24				;+24
   240 2EB8 8D D5 2E					sta _shp1b+1
   241 2EBB 49 28					eor #%00101000		;+24
   242 2EBD 8D C9 2E					sta _shp2b+1
   243
   244 							
   245 2EC0 A0 0F					ldy #15
   246 = 2EC2			@			equ *	
   247 2EC2 BE FF FF		adr1b		ldx $ffff,y
   248
   249 2EC5 BD 00 FF		tShfH0		lda $ff00,x
   250 2EC8 99 30 E7		_shp2b		sta shpBuf+48,y
   251
   252 2ECB BD 00 FF		tShfL0		lda $ff00,x
   253
   254 2ECE BE FF FF		adr0b		ldx $ffff,y
   255
   256 2ED1 1D 00 FF		tShfH1		ora $ff00,x
   257 2ED4 99 18 E7		_shp1b		sta shpBuf+24,y
   258
   259 2ED7 BD 00 FF		tShfL1		lda $ff00,x
   260 2EDA 99 00 E7		_shp0b		sta shpBuf+0,y
   261
   262 2EDD 88						dey
   263 2EDE 10 E2					bpl @-								
   264 							
   265
   266 = 2EE0			_adres		equ *			
   267 = 2EE0			@			equ *	//adresy znaków pod duszkami
   268 2EE0 A0 00					ldy #0			;1znak
   269 				.if .def UC			
   270 2EE2 B3 80					lax (pom),y
   271 				.else		
   272 							lda (pom),y
   273 							tax
   274 				.endif			
   275 2EE4 29 80					and #128			
   276 2EE6 05 F7					ora nchar		;nr znaku duszka
   277 2EE8 91 80					sta (pom),y
   278 2EEA BD 00 F6					lda adresZnakL,x
   279 2EED 8D 07 31					sta tlo0+1
   280 2EF0 8D 48 31					sta tlo0b+1
   281 2EF3 BD 00 F7					lda adresZnakH,x
   282 2EF6 05 59					ora ramka4
   283 2EF8 8D 08 31					sta tlo0+2
   284 2EFB 8D 49 31					sta tlo0b+2
   285 							
   286 2EFE C8						iny
   287 2EFF E6 F7					inc nchar
   288 				.if .def UC			
   289 2F01 B3 80					lax (pom),y
   290 				.else		
   291 							lda (pom),y
   292 							tax
   293 				.endif	
   294 2F03 29 80					and #128			
   295 2F05 05 F7					ora nchar		;nr znaku duszka
   296 2F07 91 80					sta (pom),y
   297 2F09 BD 00 F6					lda adresZnakL,x
   298 2F0C 8D 15 31					sta tlo1+1
   299 2F0F 8D 4E 31					sta tlo1b+1
   300 2F12 BD 00 F7					lda adresZnakH,x
   301 2F15 05 59					ora ramka4
   302 2F17 8D 16 31					sta tlo1+2
   303 2F1A 8D 4F 31					sta tlo1b+2
   304 2F1D E6 F7					inc nchar
   305 							
   306 2F1F A6 F9					ldx DX	
   307 2F21 F0 1D					beq @+		;pomin 3 rząd
   308 							
   309 2F23 C8						iny
   310 				.if .def UC			
   311 2F24 B3 80					lax (pom),y
   312 				.else		
   313 							lda (pom),y
   314 							tax
   315 				.endif	
   316 2F26 29 80					and #128			
   317 2F28 05 F7					ora nchar		;nr znaku duszka
   318 2F2A 91 80					sta (pom),y
   319 2F2C BD 00 F6					lda adresZnakL,x
   320 2F2F 8D 23 31					sta tlo2+1
   321 2F32 8D 34 31					sta tlo2b+1
   322 2F35 BD 00 F7					lda adresZnakH,x
   323 2F38 05 59					ora ramka4
   324 2F3A 8D 24 31					sta tlo2+2
   325 2F3D 8D 35 31					sta tlo2b+2
   326 								
   327 = 2F40			@			equ *			
   328 2F40 A0 30					ldy #48
   329 2F42 E6 F7					inc nchar
   330 				.if .def UC			
   331 2F44 B3 80					lax (pom),y
   332 				.else		
   333 							lda (pom),y
   334 							tax
   335 				.endif	
   336 2F46 29 80					and #128			
   337 2F48 05 F7					ora nchar		;nr znaku duszka
   338 2F4A 91 80					sta (pom),y
   339 2F4C BD 00 F6					lda adresZnakL,x
   340 2F4F 8D DC 30					sta tlo3+1
   341 2F52 BD 00 F7					lda adresZnakH,x
   342 2F55 05 59					ora ramka4
   343 2F57 8D DD 30					sta tlo3+2
   344 							
   345 2F5A C8						iny
   346 2F5B E6 F7					inc nchar
   347 				.if .def UC			
   348 2F5D B3 80					lax (pom),y
   349 				.else		
   350 							lda (pom),y
   351 							tax
   352 				.endif	
   353 2F5F 29 80					and #128			
   354 2F61 05 F7					ora nchar		;nr znaku duszka
   355 2F63 91 80					sta (pom),y
   356 2F65 BD 00 F6					lda adresZnakL,x
   357 2F68 8D CE 30					sta tlo4+1
   358 2F6B BD 00 F7					lda adresZnakH,x
   359 2F6E 05 59					ora ramka4
   360 2F70 8D CF 30					sta tlo4+2
   361 2F73 E6 F7					inc nchar
   362 							
   363 2F75 A6 F9					ldx DX
   364 2F77 F0 17					beq @+
   365 							
   366 2F79 C8						iny
   367 				.if .def UC			
   368 2F7A B3 80					lax (pom),y
   369 				.else		
   370 							lda (pom),y
   371 							tax
   372 				.endif	
   373 2F7C 29 80					and #128			
   374 2F7E 05 F7					ora nchar		;nr znaku duszka
   375 2F80 91 80					sta (pom),y
   376 2F82 BD 00 F6					lda adresZnakL,x
   377 2F85 8D C0 30					sta tlo5+1
   378 2F88 BD 00 F7					lda adresZnakH,x
   379 2F8B 05 59					ora ramka4
   380 2F8D 8D C1 30					sta tlo5+2
   381 										
   382 2F90 A6 FA		@			ldx DY2
   383 2F92 F0 62					beq @+
   384 							
   385 2F94 A0 60					ldy #96
   386 2F96 E6 F7					inc nchar
   387 				.if .def UC			
   388 2F98 B3 80					lax (pom),y
   389 				.else		
   390 							lda (pom),y
   391 							tax
   392 				.endif	
   393 2F9A 29 80					and #128			
   394 2F9C 05 F7					ora nchar		;nr znaku duszka
   395 2F9E 91 80					sta (pom),y
   396 2FA0 BD 00 F6					lda adresZnakL,x
   397 2FA3 8D FE 30					sta tlo6+1
   398 2FA6 8D 57 31					sta tlo6b+1
   399 2FA9 BD 00 F7					lda adresZnakH,x
   400 2FAC 05 59					ora ramka4
   401 2FAE 8D FF 30					sta tlo6+2
   402 2FB1 8D 58 31					sta tlo6b+2
   403 							
   404 2FB4 C8						iny
   405 2FB5 E6 F7					inc nchar
   406 				.if .def UC			
   407 2FB7 B3 80					lax (pom),y
   408 				.else		
   409 							lda (pom),y
   410 							tax
   411 				.endif	
   412 2FB9 29 80					and #128			
   413 2FBB 05 F7					ora nchar		;nr znaku duszka
   414 2FBD 91 80					sta (pom),y
   415 2FBF BD 00 F6					lda adresZnakL,x
   416 2FC2 8D F8 30					sta tlo7+1
   417 2FC5 8D 65 31					sta tlo7b+1
   418 2FC8 BD 00 F7					lda adresZnakH,x
   419 2FCB 05 59					ora ramka4
   420 2FCD 8D F9 30					sta tlo7+2
   421 2FD0 8D 66 31					sta tlo7b+2
   422 							
   423 2FD3 A6 F9					ldx DX
   424 2FD5 F0 1F					beq @+
   425 							
   426 2FD7 C8						iny
   427 2FD8 E6 F7					inc nchar
   428 				.if .def UC			
   429 2FDA B3 80					lax (pom),y
   430 				.else		
   431 							lda (pom),y
   432 							tax
   433 				.endif	
   434 2FDC 29 80					and #128			
   435 2FDE 05 F7					ora nchar		;nr znaku duszka
   436 2FE0 91 80					sta (pom),y
   437 2FE2 BD 00 F6					lda adresZnakL,x
   438 2FE5 8D F2 30					sta tlo8+1
   439 2FE8 8D 3D 31					sta tlo8b+1
   440 2FEB BD 00 F7					lda adresZnakH,x
   441 2FEE 05 59					ora ramka4
   442 2FF0 8D F3 30					sta tlo8+2
   443 2FF3 8D 3E 31					sta tlo8b+2		
   444 						
   445 = 2FF6			@			equ *	
   446 2FF6 A2 07					ldx #7
   447 2FF8 A5 FA					lda DY2
   448 2FFA D0 51					bne @+1
   449 2FFC A5 F9					lda DX
   450 2FFE D0 1F					bne @+
   451 							;DY=0 i DX=0
   452 3000 A9 CA 8D 1F 31				mva #$ca tlo2-3	;dex
   453 3005 A9 10 8D 20 31				mva #$10 tlo2-2	;bpl
   454 300A A9 E1 8D 21 31				mva #256-31 tlo2-1	;dlugosc skoku do skok1
   455 300F 8D E8 30					sta _bpl1
   456 3012 A9 60 8D 22 31				mva #$60 tlo2		;rts
   457 							;mva #256-31 _bpl1	;zmiana dlugosci skoku do skok2
   458 							;ldx #7
   459 3017 20 03 31					jsr skok1
   460 301A A2 07					ldx #7
   461 301C 4C CA 30					jmp skok2
   462 							;DY=0,DX>0
   463 301F A9 BC 8D 1F 31	@			mva #$bc tlo2-3	;ldy $ffff,x
   464 3024 A9 30 8D 20 31				mva #<(shpBuf+6*8) tlo2-2
   465 3029 A9 E7 8D 21 31				mva #>(shpBuf+6*8) tlo2-1
   466 302E A9 BD 8D 22 31				mva #$bd tlo2	;lda $ffff,x
   467 							
   468 3033 A9 10 8D 2E 31				mva #$10 nznak2+4	;bpl
   469 3038 A9 D3 8D 2F 31				mva #256-45 nznak2+5	;skok do skok1
   470 303D 8D E8 30					sta _bpl1
   471 3040 A9 60 8D 30 31				mva #$60 nznak2+6		;rts
   472 							;mva #256-45 _bpl1		;skok na proc3
   473 							
   474 3045 20 03 31					jsr skok1
   475 3048 A2 07					ldx #7
   476 304A 4C BC 30					jmp proc3
   477 							;DY>0
   478 304D 8D 2F 31		@			sta nznak2+5
   479 3050 A5 F9					lda DX
   480 3052 D0 33					bne @+
   481 							;DY>0,DX=0
   482
   483 3054 A9 4C 8D 1F 31				mva #$4c tlo2-3	;jmp
   484 3059 A9 2D 8D 20 31 A9 + 			mwa #nznak2+3 tlo2-2	;skok do dex
   485 							
   486 3063 A9 E0 8D 2E 31				mva #$e0 nznak2+4 ;cpx
   487 3068 A9 B0 8D 30 31				mva #$b0 nznak2+6	;bcs
   488 306D A9 C5 8D 31 31				mva #256-59	nznak2+7	;do tlo7
   489 							
   490 3072 A9 D5 8D 71 31				mva #256-43 _bpl2	;do tlo0b
   491 3077 A9 E1 8D E8 30				mva #256-31 _bpl1	;do skok2
   492 							
   493 307C 20 F7 30					jsr tlo7
   494 307F 20 47 31					jsr tlo0b
   495 3082 A2 07					ldx #7
   496 3084 4C CA 30					jmp skok2
   497 							
   498 							;DY>0,DX>0
   499 3087 A9 BC 8D 1F 31	@			mva #$bc tlo2-3	;ldy $ffff,x
   500 308C A9 30 8D 20 31				mva #<(shpBuf+6*8) tlo2-2
   501 3091 A9 E7 8D 21 31				mva #>(shpBuf+6*8) tlo2-1
   502 3096 A9 BD 8D 22 31				mva #$bd tlo2	;lda $ffff,x
   503 							
   504 309B A9 E0 8D 2E 31				mva #$e0 nznak2+4 ;cpx
   505 30A0 A9 B0 8D 30 31				mva #$b0 nznak2+6	;bcs
   506 30A5 A9 BF 8D 31 31				mva #256-65 nznak2+7	; petla do proc1
   507 							
   508 30AA A9 C1 8D 71 31				mva #256-63 _bpl2		;petla do proc2
   509 							
   510 30AF A9 D3 8D E8 30				mva #256-45 _bpl1		;petla do proc3
   511 							
   512 30B4 20 F1 30					jsr proc1
   513 30B7 20 33 31					jsr proc2
   514 30BA A2 07					ldx #7
   515 							
   516 				//przepisanie 1 wiersza, zawsze niezależnie od DY			
   517 							
   518 = 30BC			proc3		equ *	
   519 					
   520 30BC BC 38 E7					ldy shpBuf+7*8,x
   521 30BF BD FF FF		tlo5		lda $ffff,x		;pomin dla DX=0
   522 30C2 39 00 E8					and mask,y
   523 30C5 11 BB					ora (enemyColor-1),y
   524 30C7 9D FF FF		nznak5		sta $ffff,x
   525 							
   526
   527 = 30CA			skok2		equ *	
   528 30CA BC 20 E7					ldy shpBuf+4*8,x
   529 30CD BD FF FF		tlo4		lda $ffff,x	
   530 30D0 39 00 E8					and mask,y
   531 30D3 11 BB					ora (enemyColor-1),y
   532 30D5 9D FF FF		nznak4		sta $ffff,x
   533 							
   534 30D8 BC 08 E7					ldy shpBuf+1*8,x
   535 30DB BD FF FF		tlo3		lda $ffff,x	
   536 30DE 39 00 E8					and mask,y
   537 30E1 11 BB					ora (enemyColor-1),y
   538 30E3 9D FF FF		nznak3		sta $ffff,x
   539 							
   540 30E6 CA						dex
   541 = 30E8			_bpl1		equ *+1
   542 30E7 10 D3					bpl proc3				;zmiana adresu dla DX=0, pomijamy 1 kolumne
   543 									
   544 30E9 A6 F8					ldx DuchX
   545 30EB A9 00					lda #0
   546 30ED 9D 79 01					sta enemyEkran,x
   547 30F0 60						rts			
   548 							
   549 				//procedury przepisująca znaki
   550 							
   551 = 30F1			proc1			equ *
   552 30F1 BD FF FF		tlo8		lda $ffff,x		;tylko dla szerokosci 3, inaczej pomin
   553 30F4 9D FF FF		nznak8		sta $ffff,x
   554
   555 30F7 BD FF FF		tlo7		lda $ffff,x		
   556 30FA 9D FF FF		nznak7		sta $ffff,x			
   557 30FD BD FF FF		tlo6		lda $ffff,x		
   558 3100 9D FF FF		nznak6		sta $ffff,x
   559
   560 = 3103			skok1		equ *
   561 							
   562 3103 BC 00 E7					ldy shpBuf,x
   563 3106 BD FF FF		tlo0		lda $ffff,x
   564 3109 39 00 E8					and mask,y
   565 310C 11 BB					ora (enemyColor-1),y
   566 310E 9D FF FF		nznak0		sta $ffff,x
   567
   568 3111 BC 18 E7					ldy shpBuf+3*8,x
   569 3114 BD FF FF		tlo1		lda $ffff,x
   570 3117 39 00 E8					and mask,y
   571 311A 11 BB					ora (enemyColor-1),y
   572 311C 9D FF FF		nznak1		sta $ffff,x
   573
   574 311F BC 30 E7					ldy shpBuf+6*8,x
   575 3122 BD FF FF		tlo2		lda $ffff,x			;tylko dla szerokosci 3, dla 2 jmp do dex
   576 3125 39 00 E8					and mask,y
   577 3128 11 BB					ora (enemyColor-1),y
   578 312A 9D FF FF		nznak2		sta $ffff,x
   579 					
   580 312D CA						dex
   581 312E E0 FF					cpx #$ff	;255,1,3,5
   582 3130 B0 BF					bcs proc1
   583 3132 60						rts
   584 							
   585 				//jeśli DY=0 to pomijamy		
   586 = 3133			proc2		equ *
   587
   588 3133 BD FF FF		tlo2b		lda $ffff,x		;tylko dla szerokosci 3
   589 3136 9D FF FF		nznak2b		sta $ffff,x	
   590
   591 3139 BC 40 E7					ldy shpBuf+8*8,x
   592 313C BD FF FF		tlo8b		lda $ffff,x		;tylko dla szerokosci 3
   593 313F 39 00 E8					and mask,y
   594 3142 11 BB					ora (enemyColor-1),y
   595 3144 9D FF FF		nznak8b		sta $ffff,x
   596
   597 						
   598 3147 BD FF FF		tlo0b		lda $ffff,x		;przepisz fragment tła
   599 314A 9D FF FF		nznak0b		sta $ffff,x			
   600 314D BD FF FF		tlo1b		lda $ffff,x		
   601 3150 9D FF FF		nznak1b		sta $ffff,x
   602
   603 3153 BC 10 E7					ldy shpBuf+2*8,x
   604 3156 BD FF FF		tlo6b		lda $ffff,x
   605 3159 39 00 E8					and mask,y
   606 315C 11 BB					ora (enemyColor-1),y
   607 315E 9D FF FF		nznak6b		sta $ffff,x
   608
   609 3161 BC 28 E7					ldy shpBuf+5*8,x
   610 3164 BD FF FF		tlo7b		lda $ffff,x
   611 3167 39 00 E8					and mask,y
   612 316A 11 BB					ora (enemyColor-1),y
   613 316C 9D FF FF		nznak7b		sta $ffff,x
   614 					
   615 316F CA						dex
   616 = 3171			_bpl2		equ *+1
   617 3170 10 C1					bpl proc2
   618 3172 60						rts							
   619 							
   620 				.endp
   572 3173						icl 'bliczby.asm'
Source: bliczby.asm
     1 						
     2 3173 00 20 00		hscore	dta b(0,$20,0)
     3
     4 				;jesli gracz zarobil jakies punkty to sa dodawane do score i wyswietlane
     5 = 3176			sumaPunkty	equ	*
     6 3176 AD 53 19				lda plusScore
     7 3179 0D 54 19				ora plusScore+1
     8 317C D0 01				bne @+
     9 317E 60					rts
    10 317F F8			@		sed
    11 3180 18					clc
    12 3181 AD 53 19				lda plusScore
    13 3184 65 20				adc score
    14 3186 85 20				sta score
    15 3188 A5 21				lda score+1
    16 318A 48					pha
    17 318B 29 F0				and #$f0
    18 318D 85 F7				sta pom0
    19 318F 68					pla
    20 3190 6D 54 19				adc plusScore+1
    21 3193 85 21				sta score+1
    22 3195 A5 22				lda score+2
    23 3197 69 00				adc #0
    24 3199 85 22				sta score+2
    25 319B D8					cld
    26 						
    27 319C A5 21				lda score+1
    28 319E 29 F0				and #$f0
    29 31A0 C9 20				cmp #$20
    30 31A2 F0 04				beq @+
    31 31A4 C9 70				cmp #$70
    32 31A6 D0 11				bne @+1
    33 31A8 C5 F7		@		cmp pom0
    34 31AA F0 0D				beq @+		;obecne=poprzedniemu
    35 						
    36 31AC EE 58 19				inc lives
    37 31AF 20 0E 6F				jsr printLives
    38 						
    39 31B2 A0 12				ldy #fx_extra
    40 31B4 A9 05				lda #5
    41 31B6 20 50 71				jsr sfx.add_fx
    42 						
    43 						;mva #13*2 SFX_EXTRA		;extra life
    44 						
    45 31B9 A9 00 8D 53 19	@		mva #0 plusScore
    46 31BE 8D 54 19				sta plusScore+1
    47 31C1 85 27				sta scoreZmiana
    48 31C3 60					rts
    49 						
    50 				;punkty
    51 = 31C4			piszScore1	equ *
    52 31C4 E6 27				inc scoreZmiana
    53 						
    54 31C6 A0 00				ldy #0
    55 31C8 A5 22				lda score+2
    56 31CA F0 22				beq @+2		;score+2=0
    57 						
    58 31CC C8					iny		;są już z przodu cyfry (wyswietlaj wszystkie 0)
    59 31CD 29 0F				and #%1111		;tysiace
    60 31CF 0A 0A 0A				:3 asl
    61 31D2 8D E3 31				sta _poz5+1
    62 						
    63 31D5 A5 22				lda score+2
    64 				.if .def UC
    65 31D7 4B F0				alr #%11110000
    66 				.else		
    67 						and #%11110000
    68 						lsr
    69 				.endif
    70 31D9 D0 02				bne @+
    71 31DB A9 50				lda #10*8	;puste
    72 31DD 8D E6 31		@		sta _poz6+1		
    73 						
    74 31E0 A2 06				ldx #6
    75 = 31E2			@		equ *
    76 31E2 BD 00 F3		_poz5	lda cyfra1,x
    77 31E5 1D 00 F4		_poz6	ora cyfra2,x
    78 31E8 9D 2A 1C				sta sprites+$400+startWyniki+26,x
    79 31EB CA					dex
    80 31EC 10 F4				bpl @-	
    81 						
    82 31EE A5 21		@		lda score+1
    83 31F0 D0 04				bne @+
    84 31F2 C0 00				cpy #0
    85 31F4 F0 26				beq @+3		;rysuj wszystkie cyfry
    86 						
    87 31F6 29 0F		@		and #%1111		;setki
    88 31F8 0A 0A 0A				:3 asl
    89 31FB 8D 11 32				sta _poz3+1
    90 					
    91 31FE A5 21				lda score+1
    92 				.if .def UC
    93 3200 4B F0				alr #%11110000
    94 				.else		
    95 						and #%11110000
    96 						lsr
    97 				.endif		
    98 3202 D0 06				bne @+		;nie zero
    99 3204 C0 00				cpy #0	
   100 3206 D0 02				bne @+
   101 3208 A9 50				lda #10*8		;pusty znak
   102 320A 8D 14 32		@		sta _poz4+1	
   103 320D C8					iny
   104 						
   105 320E A2 06				ldx #6
   106 = 3210			@		equ *
   107 3210 BD 00 F3		_poz3	lda cyfra1,x
   108 3213 1D 00 F4		_poz4	ora cyfra2,x
   109 3216 9D 2A 1D				sta sprites+$500+startWyniki+26,x
   110 3219 CA					dex
   111 321A 10 F4				bpl @-	
   112 						
   113 321C A5 20		@		lda score
   114 321E D0 06				bne @+
   115 3220 C0 00				cpy #0
   116 3222 D0 02				bne @+
   117 3224 A9 0A				lda #10
   118 						
   119 3226 29 0F		@		and #%1111
   120 3228 0A 0A 0A				:3 asl
   121 322B 8D 40 32				sta _poz1+1
   122 						
   123 322E A5 20				lda score
   124 				.if .def UC
   125 3230 4B F0				alr #%11110000
   126 				.else		
   127 						and #%11110000
   128 						lsr
   129 				.endif		
   130 						
   131 3232 D0 06				bne @+		;nie zero
   132 3234 C0 00				cpy #0	
   133 3236 D0 02				bne @+
   134 3238 A9 50				lda #10*8		;pusty znak
   135 323A 8D 43 32		@		sta _poz2+1	
   136 						
   137 323D A2 06				ldx #6
   138 = 323F			@		equ *
   139 323F BD 00 F3		_poz1	lda cyfra1,x
   140 3242 1D 00 F4		_poz2	ora cyfra2,x
   141 3245 9D 2A 1E				sta sprites+$600+startWyniki+26,x
   142 3248 CA					dex
   143 3249 10 F4				bpl @-
   144 						
   145 324B 60					rts
   146
   147 				;czysc setki i tysiace
   148 = 324C			czyscScore	equ *
   149 324C A9 00				lda #0
   150 324E A2 06				ldx #6
   151 3250 9D 2A 1C		@		sta sprites+$400+startWyniki+26,x 
   152 3253 9D 2A 1D				sta sprites+$500+startWyniki+26,x
   153 3256 CA					dex
   154 3257 10 F7				bpl @-
   155 						
   156 3259 60					rts
   157 						
   158 = 325A			czyHscore	equ *
   159 325A AD 47 19				lda flagHscore
   160 325D D0 21				bne czyH0		;score zliczamy razem z hscore
   161
   162 325F A5 22				lda score+2
   163 3261 CD 75 31				cmp hscore+2
   164 3264 B0 01				bcs *+3
   165 3266 60					rts	;score<hscore
   166 						
   167 3267 D0 12				bne czyH1		;score>hscore
   168
   169 				;score=hscore
   170 3269 A5 21				lda score+1
   171 326B CD 74 31				cmp hscore+1
   172 326E B0 01				bcs *+3
   173 3270 60					rts	;score<hscore
   174 						
   175 3271 D0 08				bne czyH1	;score>hscore
   176 						
   177 3273 A5 20				lda score
   178 3275 CD 73 31				cmp hscore
   179 3278 B0 01				bcs *+3
   180 327A 60					rts
   181 						
   182 327B A9 01 8D 47 19	czyH1	mva #1 flagHscore
   183 						
   184 = 3280			czyH0	equ *
   185 3280 A2 06				ldx #6
   186 3282 BD 2A 1E		@		lda sprites+$600+startWyniki+26,x
   187 3285 9D 19 1E				sta sprites+$600+startWyniki+9,x
   188 3288 BD 2A 1D				lda sprites+$500+startWyniki+26,x
   189 328B 9D 19 1D				sta sprites+$500+startWyniki+9,x
   190 328E BD 2A 1C				lda sprites+$400+startWyniki+26,x
   191 3291 9D 19 1C				sta sprites+$400+startWyniki+9,x
   192 3294 CA					dex
   193 3295 10 EB				bpl @-
   194 					
   195 3297 60					rts
   196 					
   197 				;Wyswietla numer poziomu
   198 = 3298			piszPoziom	equ *
   199 3298 A0 00				ldy #0
   200 329A AD 51 19				lda poziom
   201 329D C9 64				cmp #100			;jesli poziom jest >= 100 to wyświetl 99
   202 329F 90 02				bcc @+
   203 32A1 A9 63				lda #99
   204 						
   205 32A3 C9 0A		@		cmp #10
   206 32A5 90 05				bcc @+
   207 32A7 C8					iny
   208 32A8 E9 0A				sbc #10
   209 32AA B0 F7				bcs @-
   210 						
   211 32AC 0A 0A 0A		@		:3 asl
   212 32AF 8D C2 32				sta _lev1+1
   213 							
   214 32B2 C0 00				cpy #0
   215 32B4 D0 02				bne @+
   216 32B6 A0 0A				ldy #10
   217 						
   218 32B8 98			@		tya
   219 32B9 0A 0A 0A				:3 asl
   220 32BC 8D C5 32				sta _lev2+1
   221 						
   222 32BF A2 06				ldx #6
   223 = 32C1			@		equ *
   224 32C1 BD 00 F3		_lev1	lda cyfra1,x
   225 32C4 1D 00 F4		_lev2	ora cyfra2,x
   226 32C7 9D E6 1E				sta sprites+$600+startWyniki+217-3,x
   227 32CA CA					dex
   228 32CB 10 F4				bpl @-
   229
   230 32CD 60					rts
   231 						
   232 				;pisz hscore
   233 = 32CE			piszHscore1	equ *		
   234 32CE A0 00				ldy #0
   235 32D0 AD 75 31				lda hscore+2
   236 32D3 F0 23				beq @+2		;score+2=0
   237 						
   238 32D5 C8					iny		;są już z przodu cyfry (wyswietlaj wszystkie 0)
   239 32D6 29 0F				and #%1111		;tysiace
   240 32D8 0A 0A 0A				:3 asl
   241 32DB 8D ED 32				sta _pozh5+1
   242 					
   243 32DE AD 75 31				lda hscore+2
   244 				.if .def UC
   245 32E1 4B F0				alr #%11110000
   246 				.else		
   247 						and #%11110000
   248 						lsr
   249 				.endif		
   250 32E3 D0 02				bne @+
   251 32E5 A9 50				lda #10*8
   252 32E7 8D F0 32		@		sta _pozh6+1
   253 						
   254 32EA A2 06				ldx #6
   255 = 32EC			@		equ *
   256 32EC BD 00 F3		_pozh5	lda cyfra1,x
   257 32EF 1D 00 F4		_pozh6	ora cyfra2,x
   258 32F2 9D 19 1C				sta sprites+$400+startWyniki+9,x
   259 32F5 CA					dex
   260 32F6 10 F4				bpl @-	
   261 						
   262 32F8 AD 74 31		@		lda hscore+1
   263 32FB D0 04				bne @+
   264 32FD C0 00				cpy #0
   265 32FF F0 27				beq @+3		;rysuj wszystkie cyfry
   266 						
   267 3301 29 0F		@		and #%1111		;setki
   268 3303 0A 0A 0A				:3 asl
   269 3306 8D 1D 33				sta _pozh3+1
   270
   271 3309 AD 74 31				lda hscore+1
   272 				.if .def UC
   273 330C 4B F0				alr #%11110000
   274 				.else		
   275 						and #%11110000
   276 						lsr
   277 				.endif		
   278 330E D0 06				bne @+
   279 3310 C0 00				cpy #0
   280 3312 D0 02				bne @+
   281 3314 A9 50				lda #10*8
   282 3316 8D 20 33		@		sta _pozh4+1
   283 3319 C8					iny
   284 						
   285 331A A2 06				ldx #6
   286 = 331C			@		equ *
   287 331C BD 00 F3		_pozh3	lda cyfra1,x
   288 331F 1D 00 F4		_pozh4	ora cyfra2,x
   289 3322 9D 19 1D				sta sprites+$500+startWyniki+9,x
   290 3325 CA					dex
   291 3326 10 F4				bpl @-	
   292 						
   293 3328 AD 73 31		@		lda hscore
   294 332B D0 06				bne @+
   295 332D C0 00				cpy #0
   296 332F D0 02				bne @+
   297 3331 A9 0A				lda #10
   298 						
   299 3333 29 0F		@		and #%1111
   300 3335 0A 0A 0A				:3 asl
   301 3338 8D 4E 33				sta _pozh1+1
   302
   303 333B AD 73 31				lda hscore
   304 				.if .def UC
   305 333E 4B F0				alr #%11110000
   306 				.else		
   307 						and #%11110000
   308 						lsr
   309 				.endif
   310 3340 D0 06				bne @+
   311 3342 C0 00				cpy #0
   312 3344 D0 02				bne @+
   313 3346 A9 50				lda #10*8
   314 3348 8D 51 33		@		sta _pozh2+1
   315 						
   316
   317 334B A2 06				ldx #6
   318 = 334D			@		equ *
   319 334D BD 00 F3		_pozh1	lda cyfra1,x
   320 3350 1D 00 F4		_pozh2	ora cyfra2,x
   321 3353 9D 19 1E				sta sprites+$600+startWyniki+9,x
   322 3356 CA					dex
   323 3357 10 F4				bpl @-
   324 						
   325 3359 60					rts
   326
   327 						
   573 							
   574 335A						icl 'bmove.asm'
Source: bmove.asm
     1 = 0064			llinii	equ 100		;liczba linii
     2 = 0080			szerEkranu equ 128  ;szerokosc ekranu w bajtach
     3 = 0020			maxBombyEkran	equ 32
     4
     5
     6
     7 = 0101			BazyEkran			equ $101		;12b numery baz widocznych na ekranie
     8 = 010D			BombyEkran			equ BazyEkran+12		;:maxBombyEkran dta b(0)
     9 = 012D			bombX0				equ BombyEkran+maxBombyEkran	;:maxBombyEkran dta b(0)
    10 = 014D			bombY0				equ bombX0+maxBombyEkran		;:maxBombyEkran dta b(0)
    11
    12 = 0012			ileGwiazd 	equ 18
    13
    14 = DF20			znakXa	equ znaki2+100*8
    15 = DF32			znakYa	equ znakXa+ileGwiazd
    16
    17 335A 03 0C 30 C0		gwiazdyPixel	dta b(%11,%1100,%110000,%11000000)
    18
    19 335E 1C			znakUp1		dta b(28)
    20 335F 00 01 02 03 04 05 + 			:29 dta b(#)
    21 337C 00						dta b(0)
    22 							
    23 = 3360			znakDown1	equ znakUp1+2
    24
    25 337D 20			znakMinus1	dta b(32)
    26 337E 00 01 02 03 04 05 + 			:33 dta b(#)
    27 339F 00						dta b(0)
    28 							
    29 = 337F			znakPlus1 	equ znakMinus1+2
    30
    31 							
    32 				;rysuje obiekty na ekranie (bazy,meteory,bomby)
    33 = 33A0			printEkran	equ *
    34 33A0 A6 F6				ldx bazyIle		;ile mamy baz
    35 33A2 A9 00 8D 5B 19			mva #0 licznikBazyEkran		;zerujemy licznik widocznych baz
    36 33A7 8D 5C 19				sta licznikBombyEkran
    37 33AA BD FF 12		pre0	lda bazyRodzaj-1,x	
    38 33AD 30 08				bmi pre0a		;negatyw to nie ma bazy
    39 33AF D0 03				bne @+
    40 33B1 4C 3A 35				jmp printBazaA1
    41 33B4 4C 95 37		@		jmp printBazaB1
    42 33B7 CA			pre0a	dex
    43 33B8 D0 F0				bne pre0
    44 						
    45 						
    46 33BA A4 E4		pre1a	ldy posY	
    47 33BC BE 00 15				ldx tabBomb1,y
    48 33BF E0 FF				cpx #255
    49 33C1 D0 03				bne pre2a		;nie ma zadnej bomby na ekranie
    50 33C3 4C 78 34		pre2b	jmp pre3
    51 33C6 B9 00 16		pre2a	lda tabBomb2,y
    52 33C9 8D D7 33				sta pre2+1
    53 33CC A5 5A 8D DC 33			mva bombIle pre2_+1
    54 33D1 BD 7F 11		pre1	lda bombRodzaj-1,x
    55 33D4 10 10				bpl @+
    56 33D6 E0 FF		pre2	cpx #$ff
    57 33D8 F0 E9				beq pre2b	;narysowano juz wszystkie
    58 33DA E8					inx
    59 33DB E0 FF		pre2_	cpx #$ff
    60 33DD 90 F2				bcc pre1
    61 33DF F0 F0				beq pre1
    62 33E1 A2 01				ldx #1
    63 33E3 4C D1 33				jmp pre1	
    64 						
    65 33E6 38			@		sec
    66 33E7 BD FF 11				lda bombX-1,x
    67 33EA E5 E3				sbc posX
    68 33EC A8					tay
    69 33ED B9 00 1A				lda tabX,y
    70 33F0 18					clc
    71 33F1 69 01				adc #1
    72 33F3 C9 22				cmp #34
    73 33F5 B0 DF				bcs pre2
    74 						
    75 33F7 AC 5C 19				ldy licznikBombyEkran
    76 33FA 99 2D 01				sta bombX0,y		;pozycja x+1 na ekranie
    77 						
    78 33FD 69 07				adc #7
    79 33FF 85 F7				sta pom0
    80 						
    81 3401 38					sec
    82 3402 BD 7F 12				lda bombY-1,x
    83 3405 E5 E4				sbc posY
    84 3407 18					clc
    85 3408 69 01				adc #1
    86 340A C9 1E				cmp #lenDlist+1
    87 340C B0 6A				bcs pre3
    88 						
    89 340E 99 4D 01				sta bombY0,y		;pozycja y+1 na ekranie
    90 3411 85 82				sta pom1
    91 							
    92 3413 8A					txa
    93 3414 99 0D 01				sta bombyEkran,y	;nr+1
    94 3417 EE 5C 19				inc licznikBombyEkran
    95 						
    96 341A A4 82				ldy pom1
    97 						
    98 341C A5 EB				lda ramka
    99 341E D0 12				bne @+
   100 						
   101 3420 18					clc
   102 3421 B9 07 17				lda obraz1La+7,y
   103 3424 65 F7				adc pom0
   104 3426 85 80				sta pom
   105 3428 B9 2C 17				lda obraz1Ha+7,y
   106 342B 69 00				adc #0
   107 342D 85 81				sta pom+1
   108 342F 4C 41 34				jmp @+1	;skok bezwarunkowy
   109 3432 18			@		clc
   110 3433 B9 51 17				lda obraz2La+7,y
   111 3436 65 F7				adc pom0
   112 3438 85 80				sta pom
   113 343A B9 76 17				lda obraz2Ha+7,y
   114 343D 69 00				adc #0
   115 343F 85 81				sta pom+1
   116
   117 3441 BD 7F 11		@		lda bombRodzaj-1,x
   118 3444 D0 19				bne @+
   119 						
   120 						
   121 3446 A0 00				ldy #0
   122 3448 A9 1F				lda #firstBombaChar
   123 344A 91 80				sta (pom),y
   124 						
   125 344C C8					iny
   126 344D A9 21				lda #firstBombaChar+2
   127 344F 91 80				sta (pom),y
   128 						
   129 3451 A0 30				ldy #48
   130 3453 A9 20				lda #firstBombaChar+1
   131 3455 91 80				sta (pom),y
   132 						
   133 3457 C8					iny
   134 3458 A9 22				lda #firstBombaChar+3
   135 345A 91 80				sta (pom),y
   136 345C 4C D6 33				jmp pre2
   137 						
   138 345F A0 00		@		ldy #0
   139 3461 A9 A3				lda #firstMeteorChar+128		
   140 3463 91 80				sta (pom),y
   141 						
   142 3465 C8					iny
   143 3466 A9 A5				lda #firstMeteorChar+128+2
   144 3468 91 80				sta (pom),y
   145 						
   146 346A A0 30				ldy #48
   147 346C A9 A4				lda #firstMeteorChar+128+1
   148 346E 91 80				sta (pom),y
   149 						
   150 3470 C8					iny
   151 3471 A9 A6				lda #firstMeteorChar+128+3
   152 3473 91 80				sta (pom),y
   153 3475 4C D6 33				jmp pre2
   154 						
   155 						
   156 3478 A5 F0		pre3	lda startMapy
   157 347A D0 01				bne *+3
   158 347C 60					rts
   159 						
   160 347D C9 91				cmp #145
   161 347F F0 08				beq @+
   162 						
   163 3481 C9 3C				cmp #60
   164 3483 F0 04				beq @+
   165 						
   166 3485 C9 0C				cmp #12
   167 3487 D0 0E				bne @+2
   168 						
   169 3489 A2 68		@		ldx #104		;12znakow
   170 348B BD D9 34		@		lda player1chars-1,x
   171 348E 9D 97 DB				sta znaki1-1+115*8,x
   172 3491 9D 97 DF				sta znaki2-1+115*8,x
   173 3494 CA					dex
   174 3495 D0 F4				bne @-
   175 						
   176 						
   177 				.if .def UC
   178 3497 A9 0A		@		lda #10
   179 3499 C7 F0				dcp startMapy
   180 				.else		
   181 				@		dec startMapy		
   182 						lda startMapy
   183 						cmp #10
   184 				.endif		
   185 349B D0 07				bne @+
   186 						
   187 349D 20 41 7A				jsr graj_sampla
   188 34A0 A9 01 85 11				mva #1 licznikstrzal
   189 						
   190 34A4 A5 F0		@		lda startMapy
   191 34A6 C9 0B				cmp #11
   192 34A8 90 20				bcc @+2		;do rts
   193 						
   194 34AA A2 09				ldx #9
   195 34AC BD CB 34		@		lda playerNapis1,x
   196 34AF 09 80				ora #128
   197 34B1 9D 03 06				sta obraz1+11+13*48,x
   198 34B4 9D FB 0C				sta obraz2+11+13*48,x
   199 34B7 CA					dex
   200 34B8 10 F2				bpl @-
   201 						
   202 34BA A2 04				ldx #4
   203 34BC BD D5 34		@		lda playerNapis1+10,x
   204 34BF 09 80				ora #128
   205 34C1 9D 65 06				sta obraz1+13+15*48,x
   206 34C4 9D 5D 0D				sta obraz2+13+15*48,x
   207 34C7 CA					dex
   208 34C8 10 F2				bpl @-
   209 						
   210 34CA 60			@		rts
   211
   212 						
   213 34CB 77 78 79 7A 7B 7C + playerNapis1	dta b(119,120,121,122,123,124,0,125,126,123,124,123,121,115,122)
   214
   215 								
   216 34DA 50			player1chars	dta b(%01010000)		;115 D
   217 34DB 74							dta b(%01110100)
   218 34DC 44							dta b(%01000100)
   219 34DD 44							dta b(%01000100)
   220 34DE 44							dta b(%01000100)
   221 34DF 44							dta b(%01000100)
   222 34E0 5C							dta b(%01011100)
   223 34E1 F0							dta b(%11110000)	
   224 								
   225 34E2 14							dta b(%00010100)		;116 G
   226 34E3 7C							dta b(%01111100)
   227 34E4 40							dta b(%01000000)
   228 34E5 40							dta b(%01000000)
   229 34E6 44							dta b(%01000100)
   230 34E7 44							dta b(%01000100)
   231 34E8 54							dta b(%01010100)
   232 34E9 FC							dta b(%11111100)
   233
   234 34EA 44							dta b(%01000100)		;117 M
   235 34EB 54							dta b(%01010100)
   236 34EC 74							dta b(%01110100)
   237 34ED 44							dta b(%01000100)
   238 34EE 44							dta b(%01000100)
   239 34EF 44							dta b(%01000100)
   240 34F0 44							dta b(%01000100)
   241 34F1 CC							dta b(%11001100)
   242 								
   243 34F2 44							dta b(%01000100)		;118 V
   244 34F3 44							dta b(%01000100)
   245 34F4 44							dta b(%01000100)
   246 34F5 44							dta b(%01000100)
   247 34F6 44							dta b(%01000100)
   248 34F7 44							dta b(%01000100)
   249 34F8 DC							dta b(%11011100)
   250 34F9 30							dta b(%00110000)
   251 								
   252 34FA 54							dta b(%01010100)		;119 P
   253 34FB 74							dta b(%01110100)
   254 34FC 44							dta b(%01000100)
   255 34FD 54							dta b(%01010100)
   256 34FE 7C							dta b(%01111100)
   257 34FF 40							dta b(%01000000)
   258 3500 40							dta b(%01000000)
   259 3501 C0							dta b(%11000000)
   260 								
   261 3502 40							dta b(%01000000)		;120 L
   262 3503 40							dta b(%01000000)
   263 3504 40							dta b(%01000000)
   264 3505 40							dta b(%01000000)
   265 3506 40							dta b(%01000000)
   266 3507 40							dta b(%01000000)
   267 3508 54							dta b(%01010100)
   268 3509 FC							dta b(%11111100)
   269 								
   270 350A 10							dta b(%00010000)		;121 A
   271 350B 74							dta b(%01110100)
   272 350C 44							dta b(%01000100)
   273 350D 54							dta b(%01010100)
   274 350E 74							dta b(%01110100)
   275 350F 44							dta b(%01000100)
   276 3510 44							dta b(%01000100)
   277 3511 CC							dta b(%11001100)
   278 								
   279 3512 44							dta b(%01000100)		;122 Y
   280 3513 44							dta b(%01000100)
   281 3514 44							dta b(%01000100)
   282 3515 DC							dta b(%11011100)
   283 3516 10							dta b(%00010000)
   284 3517 10							dta b(%00010000)
   285 3518 10							dta b(%00010000)
   286 3519 30							dta b(%00110000)
   287 								
   288 351A 54							dta b(%01010100)		;123 E
   289 351B 7C							dta b(%01111100)
   290 351C 40							dta b(%01000000)
   291 351D 50							dta b(%01010000)
   292 351E 70							dta b(%01110000)
   293 351F 40							dta b(%01000000)
   294 3520 54							dta b(%01010100)
   295 3521 FC							dta b(%11111100)
   296 								
   297 3522 50							dta b(%01010000)		;124 R
   298 3523 74							dta b(%01110100)
   299 3524 44							dta b(%01000100)
   300 3525 50							dta b(%01010000)
   301 3526 74							dta b(%01110100)
   302 3527 44							dta b(%01000100)
   303 3528 44							dta b(%01000100)
   304 3529 CC							dta b(%11001100)
   305 								
   306 352A 14							dta b(%00010100)		;125 O
   307 352B 74							dta b(%01110100)
   308 352C 44							dta b(%01000100)
   309 352D 44							dta b(%01000100)
   310 352E 44							dta b(%01000100)
   311 352F 44							dta b(%01000100)
   312 3530 5C							dta b(%01011100)
   313 3531 F0							dta b(%11110000)
   314 								
   315 3532 50							dta b(%01010000)		;126 N
   316 3533 74							dta b(%01110100)
   317 3534 44							dta b(%01000100)
   318 3535 44							dta b(%01000100)
   319 3536 44							dta b(%01000100)
   320 3537 44							dta b(%01000100)
   321 3538 44							dta b(%01000100)
   322 3539 CC							dta b(%11001100)
   323 								
   324 								
   325
   326 = 353A			printBazaA1	equ *
   327 353A 38					sec
   328 353B BD 2F 13				lda bazyX-1,x
   329 353E E5 E3				sbc posX
   330 3540 A8					tay
   331 3541 B9 00 1A				lda tabX,y
   332 3544 9D 3F 13				sta bazyX0-1,x
   333 3547 18					clc
   334 3548 69 08				adc #8
   335 						
   336 354A C9 29				cmp #41
   337 354C 90 03				bcc @+
   338 354E 4C B7 33				jmp pre0a
   339
   340 3551 85 F7		@		sta pom0
   341 						
   342 3553 38					sec
   343 3554 BD 4F 13				lda bazyY-1,x
   344 3557 E5 E4				sbc posY
   345 3559 9D 5F 13				sta bazyY0-1,x
   346 355C 18					clc
   347 355D 69 07				adc #7	
   348 355F C9 24				cmp #lenDlist+7
   349 3561 90 03				bcc @+
   350 3563 4C B7 33				jmp pre0a
   351 						
   352 3566 85 F8		@		sta pom0a
   353 						
   354 						
   355 3568 A5 5B				lda czyRakiety		;czy na mapie sa rakiety?
   356 356A F0 5A				beq @+
   357 356C A5 F0				lda startMapy
   358 356E 05 16				ora trafienie
   359 3570 D0 54				bne @+
   360 3572 BD 1F 13				lda bazyRakieta-1,x
   361 3575 10 4F				bpl @+
   362 3577					DODAJRAKIETAA
Macro: DODAJRAKIETAA [Source: rakiety.asm]
     1 3577 AD 61 19					lda licznikJadroA
     2 357A C9 05					cmp #5
     3 357C 90 48					bcc dra1
     4 357E C9 10					cmp #16
     5 3580 B0 44					bcs dra1
     2 3582 A0 07					ldy #7
     3 3584 B9 70 13		szrak0		lda rakietyStan,y
     4 3587 F0 03					beq szrak1
     5 3589 88						dey
     6 358A 10 F8					bpl szrak0
     7 358C 98			szrak1		tya
     8 358D 9D 1F 13					sta bazyRakieta-1,x		;wpisz numer przypisanej rakiety
    10 3590 8A						txa
    11 3591 99 70 13					sta rakietyStan,y
    12 3594 BD 2F 13					lda bazyX-1,x
    13 3597 18						clc
    14 3598 69 04					adc #4
    15 359A 99 80 13					sta rakietyX,y
    17 359D BD 5F 13					lda bazyY0-1,x		;nad czy pod statkiem ?
    18 35A0 18						clc
    19 35A1 69 08					adc #8
    20 35A3 C9 12					cmp #10+8
    21 35A5 90 11					bcc dra2
    23 35A7 A9 00 99 78 13				mva #0 rakietyTyp,y		;w gore
    24 35AC BD 4F 13					lda bazyY-1,x
    25 35AF 18						clc
    26 35B0 69 02					adc #2
    27 35B2 99 90 13					sta rakietyY,y
    28 35B5 4C C6 35					jmp dra1
    30 35B8 A9 01 99 78 13	dra2		mva #1 rakietyTyp,y		;w dol
    31 35BD BD 4F 13					lda bazyY-1,x
    32 35C0 18						clc
    33 35C1 69 04					adc #4
    34 35C3 99 90 13					sta rakietyY,y
    36 = 35C6			dra1		equ *
Source: bmove.asm
   363 35C6 8A			@		txa
   364 35C7 AC 5B 19				ldy licznikBazyEkran
   365 35CA 99 01 01				sta BazyEkran,y
   366 35CD EE 5B 19				inc licznikBazyEkran
   367 						
   368 35D0 A4 F8		@		ldy pom0a
   369 35D2 A5 EB				lda ramka
   370 35D4 D0 18				bne @+
   371 						
   372 35D6 18					clc
   373 35D7 B9 01 17				lda obraz1La+1,y
   374 35DA 65 F7				adc pom0
   375 35DC 85 80				sta pom
   376 35DE 85 82				sta pom1
   377 35E0 B9 26 17				lda obraz1Ha+1,y
   378 35E3 69 00				adc #0
   379 35E5 85 81				sta pom+1
   380 35E7 69 01				adc #1
   381 35E9 85 83				sta pom1+1
   382 35EB 4C 03 36				jmp @+1	;skok bezwarunkowy
   383 35EE 18			@		clc
   384 35EF B9 4B 17				lda obraz2La+1,y
   385 35F2 65 F7				adc pom0
   386 35F4 85 80				sta pom
   387 35F6 85 82				sta pom1
   388 35F8 B9 70 17				lda obraz2Ha+1,y
   389 35FB 69 00				adc #0
   390 35FD 85 81				sta pom+1
   391 35FF 69 01				adc #1
   392 3601 85 83				sta pom1+1
   393
   394 3603 BD 0F 13		@		lda bazystan-1,x
   395 3606 85 F9				sta pom0b
   396 						
   397 3608 C0 1D				cpy #29
   398 360A 90 21				bcc @+
   399 						
   400 360C B9 23 36				lda tab_prbaz1-29,y
   401 360F 85 84				sta pom2
   402 3611 B9 2A 36				lda tab_prbaz1+7-29,y
   403 3614 85 85				sta pom2+1
   404 3616 A0 00				ldy #0
   405 3618 B1 84				lda (pom2),y
   406 361A 8D 25 36				sta _zapCom+1		;zapamietaj poprzednia komende
   407 361D A9 60				lda #96				;kod komendy RTS
   408 361F 91 84				sta (pom2),y
   409 3621 20 4E 36				jsr _rysBazA		;rysuj baze od poczatku
   410 3624 A9 00		_zapCom	lda #0
   411 3626 A0 00				ldy #0
   412 3628 91 84				sta (pom2),y
   413 362A 4C B7 33				jmp pre0a
   414 						
   415 362D C0 07		@		cpy #7
   416 362F B0 1D				bcs @+
   417 						
   418 3631 B9 40 36				lda tab_prbaz1,y
   419 3634 8D 3E 36				sta prb1_skok+1
   420 3637 B9 47 36				lda tab_prbaz1+7,y
   421 363A 8D 3F 36				sta prb1_skok+2
   422 = 363D			prb1_skok	equ *
   423 363D 4C FF FF				jmp $ffff
   424
   425 3640 72 58 28 F0 B8 88 + tab_prbaz1	dta b(<lin7a,<lin6a,<lin5a,<lin4a,<lin3a,<lin2a,<lin1a)		
   426 3647 37 37 37 36 36 36 + 			dta b(>lin7a,>lin6a,>lin5a,>lin4a,>lin3a,>lin2a,>lin1a)
   427
   428 = 364E			_rysBazA	equ *			
   429 364E BD 3F F9		@		lda bazyCannon0a-1,x
   430 3651 F0 04				beq @+
   431 3653 A0 02				ldy #2
   432 3655 91 80				sta (pom),y
   433 3657 A0 03		@		ldy #3
   434 3659 BD 4F F9				lda bazyCannon0b-1,x
   435 365C 91 80				sta (pom),y
   436 365E A0 05				ldy #5
   437 3660 BD 7F F9				lda bazyCannon1a-1,x
   438 3663 91 80				sta (pom),y
   439 						
   440 3665 BD 8F F9				lda bazyCannon1b-1,x
   441 3668 F0 04				beq lin1a
   442 366A A0 06				ldy #6
   443 366C 91 80				sta (pom),y
   444 						
   445 366E A0 32		lin1a	ldy #50
   446 3670 BD 5F F9				lda bazyCannon0c-1,x
   447 3673 91 80				sta (pom),y
   448 3675 C8					iny
   449 3676 BD 6F F9				lda bazyCannon0d-1,x
   450 3679 91 80				sta (pom),y
   451 367B A0 35				ldy #53
   452 367D BD 9F F9				lda bazyCannon1c-1,x
   453 3680 91 80				sta (pom),y
   454 3682 C8					iny
   455 3683 BD AF F9				lda bazyCannon1d-1,x
   456 3686 91 80				sta (pom),y
   457 						
   458 3688 A0 61		lin2a	ldy #97
   459 368A A9 0C				lda #b+9
   460 368C 91 80				sta (pom),y
   461
   462 368E A5 F9				lda pom0b		;jesli zbite dzialko 0
   463 3690 29 01				and #%1
   464 3692 F0 06				beq @+
   465 						
   466 3694 A0 62				ldy #98
   467 3696 A9 0B				lda #b+8
   468 3698 91 80				sta (pom),y
   469 369A A0 63		@		ldy #99
   470 369C A9 0D				lda #b+10
   471 369E 91 80				sta (pom),y
   472 36A0 A0 65				ldy #101
   473 36A2 A9 0E				lda #b+11
   474 36A4 91 80				sta (pom),y
   475
   476 36A6 A5 F9				lda pom0b		;jesli zbite dzialko 1
   477 36A8 29 02				and #%10
   478 36AA F0 06				beq @+
   479 						
   480 36AC A0 66				ldy #102
   481 36AE A9 09				lda #b+6
   482 36B0 91 80				sta (pom),y
   483 						
   484 36B2 A0 67		@		ldy #103
   485 36B4 A9 0A				lda #b+7
   486 36B6 91 80				sta (pom),y
   487 						
   488 36B8 BD 7F FA		lin3a	lda bazyCannon5a-1,x
   489 36BB F0 04				beq @+
   490 36BD A0 90				ldy #144
   491 36BF 91 80				sta (pom),y
   492 36C1 A0 91		@		ldy #145
   493 36C3 BD 8F FA				lda bazyCannon5b-1,x
   494 36C6 91 80				sta (pom),y
   495 36C8 C8					iny
   496 36C9 A9 07				lda #b+4
   497 36CB 91 80				sta (pom),y
   498 36CD C8					iny
   499 36CE A9 03				lda #b
   500 36D0 91 80				sta (pom),y
   501 36D2 C8					iny
   502 = 36D3			_bazaAJadro0	equ *
   503 36D3 A9 93				lda #b+16+128
   504 36D5 91 80				sta (pom),y
   505 36D7 C8					iny
   506 36D8 A9 05				lda #b+2
   507 36DA 91 80				sta (pom),y
   508 36DC C8					iny
   509 36DD A9 07				lda #b+4
   510 36DF 91 80				sta (pom),y
   511 36E1 C8					iny
   512 36E2 BD BF F9				lda bazyCannon2a-1,x
   513 36E5 91 80				sta (pom),y
   514 						
   515 36E7 BD CF F9				lda bazyCannon2b-1,x
   516 36EA F0 04				beq lin4a
   517 36EC A0 98				ldy #152
   518 36EE 91 80				sta (pom),y
   519 						
   520 36F0 BD 9F FA		lin4a	lda bazyCannon5c-1,x
   521 36F3 F0 04				beq @+
   522 36F5 A0 C0				ldy #192
   523 36F7 91 80				sta (pom),y
   524 36F9 A0 C1		@		ldy #193
   525 36FB BD AF FA				lda bazyCannon5d-1,x
   526 36FE 91 80				sta (pom),y
   527 3700 C8					iny
   528 3701 A9 08				lda #b+5
   529 3703 91 80				sta (pom),y
   530 3705 C8					iny
   531 3706 A9 04				lda #b+1
   532 3708 91 80				sta (pom),y
   533 370A C8					iny
   534 = 370B			_bazaAJadro1	equ *
   535 370B A9 94				lda #b+17+128
   536 370D 91 80				sta (pom),y
   537 370F C8					iny
   538 3710 A9 06				lda #b+3
   539 3712 91 80				sta (pom),y
   540 3714 C8					iny
   541 3715 A9 08				lda #b+5
   542 3717 91 80				sta (pom),y
   543 3719 C8					iny
   544 371A BD DF F9				lda bazyCannon2c-1,x
   545 371D 91 80				sta (pom),y
   546 						
   547 371F BD EF F9				lda bazyCannon2d-1,x
   548 3722 F0 04				beq lin5a
   549 3724 A0 C8				ldy #200
   550 3726 91 80				sta (pom),y
   551 						
   552 3728 A0 F1		lin5a	ldy #241
   553 372A A9 09				lda #b+6
   554 372C 91 80				sta (pom),y
   555
   556 372E A5 F9				lda pom0b		;jesli zbite dzialko 4
   557 3730 29 10				and #%10000
   558 3732 F0 06				beq @+
   559 						
   560 3734 A0 F2				ldy #242
   561 3736 A9 0A				lda #b+7
   562 3738 91 80				sta (pom),y
   563 373A A0 F3		@		ldy #243
   564 373C A9 0E				lda #b+11
   565 373E 91 80				sta (pom),y
   566 3740 A0 F5				ldy #245
   567 3742 A9 0D				lda #b+10
   568 3744 91 80				sta (pom),y
   569
   570 3746 A5 F9				lda pom0b	;jesli zbite dzialko 3
   571 3748 29 08				and #%1000
   572 374A F0 06				beq @+
   573 						
   574 374C A0 F6				ldy #246
   575 374E A9 0C				lda #b+9
   576 3750 91 80				sta (pom),y
   577 3752 A0 F7		@		ldy #247
   578 3754 A9 0B				lda #b+8
   579 3756 91 80				sta (pom),y
   580 						
   581 3758 A0 22		lin6a	ldy #34
   582 375A BD 3F FA				lda bazyCannon4a-1,x
   583 375D 91 82				sta (pom1),y
   584 375F C8					iny
   585 3760 BD 4F FA				lda bazyCannon4b-1,x
   586 3763 91 82				sta (pom1),y
   587 3765 A0 25				ldy #37
   588 3767 BD FF F9				lda bazyCannon3a-1,x
   589 376A 91 82				sta (pom1),y
   590 376C C8					iny
   591 376D BD 0F FA				lda bazyCannon3b-1,x
   592 3770 91 82				sta (pom1),y
   593 						
   594 3772 BD 5F FA		lin7a	lda bazyCannon4c-1,x
   595 3775 F0 04				beq @+
   596 3777 A0 52				ldy #82
   597 3779 91 82				sta (pom1),y
   598 377B A0 53		@		ldy #83
   599 377D BD 6F FA				lda bazyCannon4d-1,x
   600 3780 91 82				sta (pom1),y
   601 3782 A0 55				ldy #85
   602 3784 BD 1F FA				lda bazyCannon3c-1,x
   603 3787 91 82				sta (pom1),y
   604 						
   605 3789 BD 2F FA				lda bazyCannon3d-1,x
   606 378C F0 04				beq @+
   607 378E A0 56				ldy #86
   608 3790 91 82				sta (pom1),y
   609 						
   610 3792 4C B7 33		@		jmp pre0a
   611
   612 = 3795			printBazaB1	equ *
   613 3795 38					sec
   614 3796 BD 2F 13				lda bazyX-1,x
   615 3799 E5 E3				sbc posX
   616 379B A8					tay
   617 379C B9 00 1A				lda tabX,y
   618 379F 9D 3F 13				sta bazyX0-1,x
   619 37A2 18					clc
   620 37A3 69 07				adc #7
   621 						
   622 37A5 C9 28				cmp #40
   623 37A7 90 03				bcc @+
   624 37A9 4C B7 33				jmp pre0a
   625 						
   626 37AC 69 01		@		adc #1
   627 37AE 85 F7				sta pom0
   628 						
   629 37B0 38					sec
   630 37B1 BD 4F 13				lda bazyY-1,x
   631 37B4 E5 E4				sbc posY
   632 37B6 9D 5F 13				sta bazyY0-1,x
   633 37B9 18					clc
   634 37BA 69 08				adc #8	
   635 37BC C9 25				cmp #lenDlist+8
   636 37BE 90 03				bcc @+
   637 37C0 4C B7 33				jmp pre0a
   638
   639 37C3 85 F8		@		sta pom0a
   640 						
   641 37C5 A5 5B				lda czyRakiety
   642 37C7 F0 5A				beq @+
   643 37C9 A5 F0				lda startMapy
   644 37CB 05 16				ora trafienie
   645 37CD D0 54				bne @+
   646 37CF BD 1F 13				lda bazyRakieta-1,x
   647 37D2 10 4F				bpl @+
   648 37D4					DODAJRAKIETAB
Macro: DODAJRAKIETAB [Source: rakiety.asm]
     1 37D4 AD 62 19					lda licznikJadroB
     2 37D7 C9 05					cmp #5
     3 37D9 90 48					bcc drb1
     4 37DB C9 10					cmp #16
     5 37DD B0 44					bcs drb1
     2 37DF A0 07					ldy #7
     3 37E1 B9 70 13		szrak0		lda rakietyStan,y
     4 37E4 F0 03					beq szrak1
     5 37E6 88						dey
     6 37E7 10 F8					bpl szrak0
     7 37E9 98			szrak1		tya
     8 37EA 9D 1F 13					sta bazyRakieta-1,x		;wpisz numer przypisanej rakiety
    10 37ED 8A						txa
    11 37EE 99 70 13					sta rakietyStan,y
    12 37F1 BD 4F 13					lda bazyY-1,x
    13 37F4 18						clc
    14 37F5 69 04					adc #4
    15 37F7 99 90 13					sta rakietyY,y
    17 37FA BD 3F 13					lda bazyX0-1,x		;po lewo czy po prawo od statku?
    18 37FD 18						clc
    19 37FE 69 08					adc #8
    20 3800 C9 14					cmp #12+8
    21 3802 90 11					bcc drb2
    23 3804 A9 02 99 78 13				mva #2 rakietyTyp,y		;w lewo
    24 3809 BD 2F 13					lda bazyX-1,x
    25 380C 18						clc
    26 380D 69 02					adc #2
    27 380F 99 80 13					sta rakietyX,y
    28 3812 4C 23 38					jmp drb1
    30 3815 A9 03 99 78 13	drb2		mva #3 rakietyTyp,y		;w prawo
    31 381A BD 2F 13					lda bazyX-1,x
    32 381D 18						clc
    33 381E 69 04					adc #4
    34 3820 99 80 13					sta rakietyX,y
    36 = 3823			drb1		equ *			
Source: bmove.asm
   649 3823 8A			@		txa
   650 3824 AC 5B 19				ldy licznikBazyEkran
   651 3827 99 01 01				sta BazyEkran,y
   652 382A EE 5B 19				inc licznikBazyEkran
   653 						
   654 382D A4 F8				ldy pom0a
   655 382F A5 EB				lda ramka
   656 3831 D0 18				bne @+
   657 						
   658 3833 18					clc
   659 3834 B9 00 17				lda obraz1La,y
   660 3837 65 F7				adc pom0
   661 3839 85 80				sta pom
   662 383B 85 82				sta pom1
   663 383D B9 25 17				lda obraz1Ha,y
   664 3840 69 00				adc #0
   665 3842 85 81				sta pom+1
   666 3844 69 01				adc #1
   667 3846 85 83				sta pom1+1
   668 3848 4C 60 38				jmp @+1	;skok bezwarunkowy
   669 384B 18			@		clc
   670 384C B9 4A 17				lda obraz2La,y
   671 384F 65 F7				adc pom0
   672 3851 85 80				sta pom
   673 3853 85 82				sta pom1
   674 3855 B9 6F 17				lda obraz2Ha,y
   675 3858 69 00				adc #0
   676 385A 85 81				sta pom+1
   677 385C 69 01				adc #1
   678 385E 85 83				sta pom1+1
   679
   680 3860 BD 0F 13		@		lda bazyStan-1,x
   681 3863 85 F9				sta pom0b
   682 						
   683 3865 C0 1F				cpy #31
   684 3867 90 21				bcc @+
   685 						
   686 3869 B9 7F 38				lda tab_prbaz2-30,y
   687 386C 85 84				sta pom2
   688 386E B9 87 38				lda tab_prbaz2+8-30,y
   689 3871 85 85				sta pom2+1
   690 3873 A0 00				ldy #0
   691 3875 B1 84				lda (pom2),y
   692 3877 8D 82 38				sta _zapCom1+1		;zapamietaj poprzednia komende
   693 387A A9 60				lda #96				;kod komendy RTS
   694 387C 91 84				sta (pom2),y
   695 387E 20 AD 38				jsr _rysBazB		;rysuj baze od poczatku
   696 3881 A9 00		_zapCom1 lda #0
   697 3883 A0 00				ldy #0
   698 3885 91 84				sta (pom2),y
   699 3887 4C B7 33				jmp pre0a
   700 						
   701 388A C0 08		@		cpy #8
   702 388C B0 1F				bcs @+
   703 						
   704 388E B9 9D 38				lda tab_prbaz2,y
   705 3891 8D 9B 38				sta prb2_skok+1
   706 3894 B9 A5 38				lda tab_prbaz2+8,y
   707 3897 8D 9C 38				sta prb2_skok+2
   708 = 389A			prb2_skok	equ *
   709 389A 4C FF FF				jmp $ffff
   710
   711 389D DB C4 81 54 49 1C + tab_prbaz2	dta b(<lin8b,<lin7b,<lin6b,<lin5b,<lin4b,<lin3b,<lin2b,<lin1b)		
   712 38A5 39 39 39 39 39 39 + 			dta b(>lin8b,>lin7b,>lin6b,>lin5b,>lin4b,>lin3b,>lin2b,>lin1b)
   713
   714 = 38AD			_rysBazB	equ *			
   715 38AD A0 03		@		ldy #3
   716 38AF BD 3F F9				lda bazyCannon0a-1,x
   717 38B2 91 80				sta (pom),y
   718 38B4 C8					iny
   719 38B5 BD 4F F9				lda bazyCannon0b-1,x
   720 38B8 91 80				sta (pom),y
   721 						
   722 38BA A0 32		lin1b	ldy #50
   723 38BC A9 1C				lda #b+25
   724 38BE 91 80				sta (pom),y
   725 38C0 C8					iny
   726 38C1 BD 5F F9				lda bazyCannon0c-1,x
   727 38C4 F0 04				beq @+
   728 38C6 A0 33				ldy #51
   729 38C8 91 80				sta (pom),y
   730 38CA BD 6F F9		@		lda bazyCannon0d-1,x
   731 38CD F0 04				beq @+
   732 38CF A0 34				ldy #52
   733 38D1 91 80				sta (pom),y
   734 38D3 A0 35		@		ldy #53
   735 38D5 A9 1E				lda #b+27
   736 38D7 91 80				sta (pom),y
   737 						
   738 38D9 BD 7F FA		lin2b	lda bazyCannon5a-1,x
   739 38DC F0 04				beq @+
   740 38DE A0 60				ldy #96
   741 38E0 91 80				sta (pom),y
   742 38E2 A0 61		@		ldy #97
   743 38E4 BD 8F FA				lda bazyCannon5b-1,x
   744 38E7 91 80				sta (pom),y
   745
   746 38E9 A5 F9				lda pom0b		;jesli zbite dzialko 5
   747 38EB 29 20				and #%100000
   748 38ED F0 06				beq @+
   749 						
   750 38EF A0 62				ldy #98
   751 38F1 A9 1B				lda #b+24
   752 38F3 91 80				sta (pom),y
   753 38F5 A0 63		@		ldy #99
   754 38F7 A9 0F				lda #b+12
   755 38F9 91 80				sta (pom),y
   756 38FB C8					iny
   757 38FC A9 10				lda #b+13
   758 38FE 91 80				sta (pom),y
   759
   760 3900 A5 F9				lda pom0b		;jesli zbite dzialko 1
   761 3902 29 02				and #%10
   762 3904 F0 06				beq @+
   763 						
   764 3906 A0 65				ldy #101
   765 3908 A9 1D				lda #b+26
   766 390A 91 80				sta (pom),y
   767 390C A0 66		@		ldy #102
   768 390E BD 7F F9				lda bazyCannon1a-1,x
   769 3911 91 80				sta (pom),y
   770 						
   771 3913 BD 8F F9				lda bazyCannon1b-1,x
   772 3916 F0 04				beq lin3b
   773 3918 A0 67				ldy #103
   774 391A 91 80				sta (pom),y
   775 						
   776 391C A0 90		lin3b	ldy #144
   777 391E BD 9F FA				lda bazyCannon5c-1,x
   778 3921 91 80				sta (pom),y
   779 3923 C8					iny
   780 3924 BD AF FA				lda bazyCannon5d-1,x
   781 3927 91 80				sta (pom),y
   782 3929 C8					iny
   783 392A A9 11				lda #b+14
   784 392C 91 80				sta (pom),y
   785 392E C8					iny
   786 392F A9 03				lda #b
   787 3931 91 80				sta (pom),y
   788 3933 C8					iny
   789 3934 A9 05				lda #b+2
   790 3936 91 80				sta (pom),y
   791 3938 C8					iny
   792 3939 A9 12				lda #b+15
   793 393B 91 80				sta (pom),y
   794 393D C8					iny
   795 393E BD 9F F9				lda bazyCannon1c-1,x
   796 3941 91 80				sta (pom),y
   797 3943 C8					iny
   798 3944 BD AF F9				lda bazyCannon1d-1,x
   799 3947 91 80				sta (pom),y
   800 						
   801 3949 A0 C3		lin4b	ldy #195
   802 = 394B			_bazaBJadro0	equ *
   803 394B A9 95				lda #b+18+128
   804 394D 91 80				sta (pom),y
   805 394F C8					iny
   806 = 3950			_bazaBJadro1	equ *
   807 3950 A9 96				lda #b+19+128
   808 3952 91 80				sta (pom),y
   809 						
   810 3954 A0 F0		lin5b	ldy #240
   811 3956 BD 3F FA				lda bazyCannon4a-1,x
   812 3959 91 80				sta (pom),y
   813 395B C8					iny
   814 395C BD 4F FA				lda bazyCannon4b-1,x
   815 395F 91 80				sta (pom),y
   816 3961 C8					iny
   817 3962 A9 12				lda #b+15
   818 3964 91 80				sta (pom),y
   819 3966 C8					iny
   820 3967 A9 04				lda #b+1
   821 3969 91 80				sta (pom),y
   822 396B C8					iny
   823 396C A9 06				lda #b+3
   824 396E 91 80				sta (pom),y
   825 3970 C8					iny
   826 3971 A9 11				lda #b+14
   827 3973 91 80				sta (pom),y
   828 3975 C8					iny
   829 3976 BD BF F9				lda bazyCannon2a-1,x
   830 3979 91 80				sta (pom),y
   831 397B C8					iny
   832 397C BD CF F9				lda bazyCannon2b-1,x
   833 397F 91 80				sta (pom),y
   834 						
   835 3981 BD 5F FA		lin6b	lda bazyCannon4c-1,x
   836 3984 F0 04				beq @+
   837 3986 A0 20				ldy #32
   838 3988 91 82				sta (pom1),y
   839 398A A0 21		@		ldy #33
   840 398C BD 6F FA				lda bazyCannon4d-1,x
   841 398F 91 82				sta (pom1),y
   842
   843 3991 A5 F9				lda pom0b		;jesli zbite dzialko 4
   844 3993 29 10				and #%10000
   845 3995 F0 06				beq @+
   846 						
   847 3997 A0 22				ldy #34
   848 3999 A9 1E				lda #b+27
   849 399B 91 82				sta (pom1),y
   850 399D A0 23		@		ldy #35
   851 399F A9 0F				lda #b+12
   852 39A1 91 82				sta (pom1),y
   853 39A3 C8					iny
   854 39A4 A9 10				lda #b+13
   855 39A6 91 82				sta (pom1),y
   856
   857 39A8 A5 F9				lda pom0b		;jesli zbite dzialko 2
   858 39AA 29 04				and #%100
   859 39AC F0 06				beq @+
   860 						
   861 39AE A0 25				ldy #37
   862 39B0 A9 1C				lda #b+25
   863 39B2 91 82				sta (pom1),y
   864 39B4 A0 26		@		ldy #38
   865 39B6 BD DF F9				lda bazyCannon2c-1,x
   866 39B9 91 82				sta (pom1),y
   867 						
   868 39BB BD EF F9				lda bazyCannon2d-1,x
   869 39BE F0 04				beq lin7b
   870 39C0 A0 27				ldy #39
   871 39C2 91 82				sta (pom1),y
   872 						
   873 39C4 A0 52		lin7b	ldy #82
   874 39C6 A9 1D				lda #b+26
   875 39C8 91 82				sta (pom1),y
   876 39CA C8					iny
   877 39CB BD FF F9				lda bazyCannon3a-1,x
   878 39CE 91 82				sta (pom1),y
   879 39D0 C8					iny
   880 39D1 BD 0F FA				lda bazyCannon3b-1,x
   881 39D4 91 82				sta (pom1),y
   882 39D6 C8					iny
   883 39D7 A9 1B				lda #b+24
   884 39D9 91 82				sta (pom1),y
   885 						
   886 39DB BD 1F FA		lin8b	lda bazyCannon3c-1,x
   887 39DE F0 04				beq @+
   888 39E0 A0 83				ldy #131
   889 39E2 91 82				sta (pom1),y
   890 						
   891 39E4 BD 2F FA		@		lda bazyCannon3d-1,x
   892 39E7 F0 04				beq @+
   893 39E9 A0 84				ldy #132
   894 39EB 91 82				sta (pom1),y
   895 						
   896 39ED 4C B7 33		@		jmp pre0a
   897 						
   898 						
   899 = 39F0			gwiazdyInit	equ *	
   900 39F0 AD 5A 33 8D 08 D8			mva gwiazdyPixel znaki1+8
   901 39F6 8D 08 DC				sta znaki2+8
   902 39F9 29 55				and #%01010101
   903 39FB 8D 10 D8				sta znaki1+16
   904 39FE 8D 10 DC				sta znaki2+16
   905
   906 						
   907 3A01 A9 00 8D 6C 7B			mva #0 znakX1
   908 3A06 8D 60 7B				sta znakY1
   909 3A09 85 2D				sta znakDX
   910 3A0B 85 2E				sta znakDY
   911 3A0D 85 53				sta muzyka
   912 						
   913 3A0F A2 23				ldx #35
   914 3A11 BD 20 DF		@		lda znakXa,x
   915 3A14 95 2F				sta znakX,x
   916 3A16 CA					dex
   917 3A17 10 F8				bpl @- 
   918
   919 3A19 60					rts
   920
   921 = 3A1A			gwiazdyRysuj2	equ *
   922 3A1A A9 00				lda #0
   923 3A1C 8D 08 DC		_gwzmaz1 sta znaki2+8
   924 3A1F 8D 10 DC				sta znaki2+16
   925 3A22 A5 2E				lda znakDY
   926 3A24 09 08				ora #%1000
   927 3A26 8D 1D 3A				sta _gwzmaz1+1
   928 3A29 49 18				eor #%11000
   929 3A2B 8D 20 3A				sta _gwzmaz1+4
   930
   931 3A2E A6 2D				ldx znakDX
   932 3A30 BD 5A 33				lda gwiazdyPixel,x 	;narysuj gwiazde w nowej pozycji
   933 3A33 A4 2E				ldy znakDY
   934 3A35 99 08 DC				sta znaki2+8,y
   935 3A38 29 55				and #%01010101
   936 3A3A 99 10 DC				sta znaki2+16,y
   937
   938 3A3D D0 23				bne gwiazdyPrint		;skok bezwarunkowy
   939 						
   940 = 3A3F			gwiazdyRysuj1 equ *  ;narysuj gwiazdy na pustych polach
   941 3A3F A9 00				lda #0
   942 3A41 8D 08 D8		_gwzmaz		sta znaki1+8
   943 3A44 8D 10 D8					sta znaki1+16
   944 3A47 A5 2E				lda znakDY
   945 3A49 09 08				ora #%1000
   946 3A4B 8D 42 3A				sta _gwzmaz+1
   947 3A4E 49 18				eor #%11000
   948 3A50 8D 45 3A				sta _gwzmaz+4
   949
   950 3A53 A6 2D				ldx znakDX
   951 3A55 BD 5A 33				lda gwiazdyPixel,x 	;narysuj gwiazde w nowej pozycji
   952 3A58 A4 2E				ldy znakDY
   953 3A5A 99 08 D8				sta znaki1+8,y
   954 3A5D 29 55				and #%01010101
   955 3A5F 99 10 D8				sta znaki1+16,y
   956 					
   957 = 3A62			gwiazdyPrint equ *
   958 3A62 AD 5D 19				lda gwiazdyLicznik
   959 3A65 F0 0C				beq @+
   960 3A67 A9 82				lda #2+128	;kolor
   961 3A69 A2 11				ldx #17		;start
   962 3A6B A0 0B				ldy #11		;end-1
   963 3A6D 20 56 7B				jsr stars
   964 						
   965 3A70 AD 5D 19				lda gwiazdyLicznik
   966 3A73 C9 01		@		cmp #1
   967 3A75 F0 0C				beq @+
   968 						
   969 3A77 A9 81				lda #1+128
   970 3A79 A2 0B				ldx #11
   971 3A7B A0 05				ldy #5
   972 3A7D 20 56 7B				jsr stars
   973 						
   974 3A80 AD 5D 19				lda gwiazdyLicznik
   975 3A83 C9 02		@		cmp #2
   976 3A85 D0 01				bne @+
   977 3A87 60					rts
   978 3A88 A9 01		@		lda #1
   979 3A8A A2 05				ldx #5
   980 3A8C A0 FF				ldy #255
   981 3A8E 4C 56 7B				jmp stars
   982 					
   983 						
   984 = 3A91			movLeft	equ *
   985 3A91 AD 1A 77				lda gwx
   986 3A94 38					sec
   987 3A95 ED 18 77				sbc ruch
   988 3A98 29 01				and #1
   989 3A9A 8D 1A 77				sta gwx
   990 3A9D B0 14				bcs ml11
   991 						
   992 3A9F A6 2D				ldx znakDX ; czy zmienic pozycje X gwiazdy
   993 3AA1 E0 03				cpx #3
   994 3AA3 D0 0B				bne ml12
   995 						
   996 						
   997 3AA5 AC 6C 7B				ldy znakX1
   998 3AA8 B9 7D 33				lda znakMinus1,y
   999 3AAB 8D 6C 7B				sta znakX1
  1000 						
  1001 3AAE A2 FF				ldx #255
  1002 3AB0 E8			ml12	inx
  1003 3AB1 86 2D				stx znakDX	
  1004
  1005 3AB3 A5 E5		ml11	lda movX
  1006 3AB5 18					clc
  1007 3AB6 6D 18 77				adc ruch
  1008 3AB9 C9 0D				cmp #13
  1009 3ABB B0 05				bcs ml1
  1010 3ABD 85 E5				sta movX
  1011 3ABF 4C 65 3F				jmp l02
  1012 3AC2			ml1		
  1013 3AC2 E9 04				sbc #4
  1014 3AC4 85 E5				sta movX
  1015 3AC6 C6 E3				dec posX
  1016 3AC8 10 04				bpl ml2
  1017 3ACA A9 7F 85 E3				mva #127 posX
  1018 							
  1019 3ACE AC 6C 7B		ml2		ldy znakX1
  1020 3AD1 B9 7F 33				lda znakPlus1,y
  1021 3AD4 8D 6C 7B				sta znakX1	
  1022 						
  1023 3AD7 4C 65 3F				jmp l02
  1024
  1025 								
  1026 = 3ADA			movRight equ *		;statek w prawo tlo w lewo
  1027 3ADA AD 1A 77				lda gwx
  1028 3ADD 38					sec
  1029 3ADE ED 18 77				sbc ruch
  1030 3AE1 29 01				and #1
  1031 3AE3 8D 1A 77				sta gwx
  1032 3AE6 B0 12				bcs mr11
  1033 						
  1034 3AE8 A6 2D				ldx znakDX		;czy zmienic pozycje X gwiazd
  1035 3AEA D0 0B				bne mr12
  1036 						
  1037 3AEC AC 6C 7B				ldy znakX1
  1038 3AEF B9 7F 33				lda znakPlus1,y
  1039 3AF2 8D 6C 7B				sta znakX1
  1040 						
  1041 3AF5 A2 04				ldx #4
  1042 3AF7 CA			mr12	dex
  1043 3AF8 86 2D				stx znakDX	
  1044 						
  1045 3AFA A5 E5		mr11	lda movX			;przesow tla
  1046 3AFC 38					sec
  1047 3AFD ED 18 77				sbc ruch
  1048 3B00 C9 09				cmp #9
  1049 3B02 90 05				bcc mr1
  1050 3B04 85 E5				sta movX
  1051 3B06 4C 65 3F				jmp l02
  1052 3B09			mr1		
  1053 3B09 69 04				adc #4
  1054 3B0B 85 E5				sta movX
  1055 						
  1056 3B0D E6 E3				inc posX
  1057 3B0F 10 04				bpl mr2
  1058 3B11 A9 00 85 E3				mva #0 posX
  1059 						
  1060 3B15 AC 6C 7B		mr2		ldy znakX1
  1061 3B18 B9 7D 33				lda znakMinus1,y
  1062 3B1B 8D 6C 7B				sta znakX1
  1063 						
  1064 3B1E 4C 65 3F				jmp l02
  1065 						
  1066
  1067 = 3B21			movUp	equ *
  1068 3B21 38					sec
  1069 3B22 AD 1B 77				lda gwy
  1070 3B25 ED 19 77				sbc ruchy
  1071 3B28 29 02				and #%10
  1072 3B2A 8D 1B 77				sta gwy
  1073 3B2D B0 13				bcs mu11
  1074
  1075
  1076 3B2F A4 2E				ldy znakDY ; czy zmienic pozycje Y gwiazdy
  1077 3B31 D0 0B				bne mu12
  1078 						
  1079 3B33 AC 60 7B		@		ldy znakY1
  1080 3B36 B9 5E 33				lda znakUp1,y
  1081 3B39 8D 60 7B				sta znakY1
  1082 						
  1083 3B3C A0 08				ldy #8
  1084 3B3E 88			mu12	dey
  1085 3B3F 88					dey
  1086 3B40 84 2E				sty znakDY
  1087 					
  1088 3B42 A5 1F		mu11	lda movY
  1089 						;beq mu1
  1090 3B44 38					sec
  1091 3B45 ED 19 77				sbc ruchy
  1092 3B48 30 05				bmi mu1
  1093 3B4A 85 1F				sta movY
  1094 3B4C 4C 77 3F				jmp l04
  1095 3B4F 29 07		mu1		and #7
  1096 3B51 85 1F				sta movy
  1097 3B53 C6 E4				dec posY
  1098
  1099 3B55 AC 60 7B				ldy znakY1
  1100 3B58 B9 60 33				lda znakDown1,y
  1101 3B5B 8D 60 7B				sta znakY1	
  1102 						
  1103 3B5E 4C 77 3F				jmp l04
  1104 						
  1105
  1106 = 3B61			movDown	equ *
  1107 3B61 38					sec
  1108 3B62 AD 1B 77				lda gwy
  1109 3B65 ED 19 77				sbc ruchy
  1110 3B68 29 02				and #%10
  1111 3B6A 8D 1B 77				sta gwy
  1112 3B6D B0 17				bcs md11
  1113
  1114
  1115 3B6F A6 1F				ldx movY
  1116 3B71 A4 2E				ldy znakDY ; czy zmienic pozycje Y gwiazdy
  1117 3B73 C0 06				cpy #6
  1118 3B75 D0 0B				bne md12
  1119 						
  1120 3B77 AC 60 7B		@		ldy znakY1
  1121 3B7A B9 60 33				lda znakDown1,y
  1122 3B7D 8D 60 7B				sta znakY1
  1123 						
  1124 3B80 A0 FE				ldy #-2
  1125 3B82 C8			md12	iny
  1126 3B83 C8					iny
  1127 3B84 84 2E				sty znakDY
  1128
  1129 3B86 A5 1F		md11	lda movY
  1130 3B88 18					clc
  1131 3B89 6D 19 77				adc ruchy
  1132 3B8C C9 08				cmp #8
  1133 3B8E B0 05				bcs md1
  1134 3B90 85 1F				sta movY
  1135 3B92 4C 77 3F				jmp l04
  1136 3B95			md1		
  1137 3B95 29 07				and #7
  1138 3B97 85 1F				sta movY
  1139 3B99 E6 E4				inc posY
  1140 						
  1141 3B9B AC 60 7B				ldy znakY1
  1142 3B9E B9 5E 33				lda znakUp1,y
  1143 3BA1 8D 60 7B				sta znakY1
  1144 3BA4 4C 77 3F				jmp l04
  1145 						
  1146
  1147 3BA7 00 0F 2F 00 4F 8F + joyTable	dta 0,15,47,0,79,143,239,0,111,175,207
  1148
  1149 							
  1150 = 3BB2			wybuch0		equ *
  1151 3BB2 00 00 00 00 00 00 + 			:16*4 dta b(0)			
  1152 							
  1153 							;3
  1154 3BF2 00 00					:2 dta b(0)
  1155 3BF4 10 10 10					:3 dta b(%00010000)
  1156 3BF7 28						dta b(%00101000)
  1157 3BF8 44 44 44					:3 dta b(%01000100)
  1158 3BFB 28						dta b(%00101000)
  1159 3BFC 10 10 10					:3 dta b(%00010000)
  1160 3BFF 00 00 00					:3 dta b(0)
  1161 							
  1162 							;2
  1163 3C02 00 00 00					:3 dta b(0)
  1164 3C05 10 10 10					:3 dta b(%00010000)
  1165 3C08 38						dta b(%00111000)
  1166 3C09 6C						dta b(%01101100)
  1167 3C0A 38						dta b(%00111000)
  1168 3C0B 10 10 10					:3 dta b(%00010000)
  1169 3C0E 00 00 00 00					:4 dta b(0)
  1170 							
  1171 							;1
  1172 3C12 00 00 00 00					:4 dta b(0)
  1173 3C16 10 10					:2 dta b(%00010000)
  1174 3C18 38						dta b(%00111000)
  1175 3C19 7C						dta b(%01111100)
  1176 3C1A 38						dta b(%00111000)
  1177 3C1B 10 10					:2 dta b(%00010000)
  1178 3C1D 00 00 00 00 00				:5 dta b(0)
  1179 							
  1180 							;0
  1181 3C22 00 00 00 00 00 00				:6 dta b(0)
  1182 3C28 10						dta b(%00010000)
  1183 3C29 38						dta b(%00111000)
  1184 3C2A 10						dta b(%00010000)
  1185 3C2B 00 00 00 00 00 00 + 			:7 dta b(0)
  1186 							
  1187 							
  1188 = 3C32			wybuch1		equ *
  1189 3C32 00 00 00 00 00 00 + 			:16 dta b(0)				
  1190 					
  1191 							;6
  1192 3C42 10						dta b(%00010000)
  1193 3C43 00 00					:2 dta b(0)
  1194 3C45 28						dta b(%00101000)
  1195 3C46 00						dta b(0)
  1196 3C47 44						dta b(%01000100)
  1197 3C48 00						dta b(0)
  1198 3C49 82						dta b(%10000010)
  1199 3C4A 00						dta b(0)
  1200 3C4B 44						dta b(%01000100)
  1201 3C4C 00						dta b(0)
  1202 3C4D 28						dta b(%00101000)
  1203 3C4E 00 00					:2 dta b(0)
  1204 3C50 10						dta b(%00010000)
  1205 3C51 00						dta b(0)
  1206 							
  1207 							;5
  1208 3C52 10						dta b(%00010000)
  1209 3C53 00						dta b(0)
  1210 3C54 28 28 28					:3 dta b(%00101000)
  1211 3C57 44						dta b(%01000100)
  1212 3C58 00						dta b(0)
  1213 3C59 82						dta b(%10000010)
  1214 3C5A 00						dta b(0)
  1215 3C5B 44						dta b(%01000100)
  1216 3C5C 28 28 28					:3 dta b(%00101000)
  1217 3C5F 00						dta b(0)
  1218 3C60 10						dta b(%00010000)
  1219 3C61 00						dta b(0)
  1220 							
  1221 							;4
  1222 3C62 10 10					:2 dta b(%00010000)
  1223 3C64 38 38					:2 dta b(%00111000)
  1224 3C66 28						dta b(%00101000)
  1225 3C67 6C						dta b(%01101100)
  1226 3C68 44						dta b(%01000100)
  1227 3C69 C6						dta b(%11000110)
  1228 3C6A 44						dta b(%01000100)
  1229 3C6B 6C						dta b(%01101100)
  1230 3C6C 28						dta b(%00101000)
  1231 3C6D 38 38					:2 dta b(%00111000)
  1232 3C6F 10 10					:2 dta b(%00010000)
  1233 3C71 00						dta b(0)
  1234 							
  1235 							;3
  1236 3C72 10 10					:2 dta b(%00010000)
  1237 3C74 00						dta b(0)
  1238 3C75 28 28					:2 dta b(%00101000)
  1239 3C77 44						dta b(%01000100)
  1240 3C78 28						dta b(%00101000)
  1241 3C79 82						dta b(%10000010)
  1242 3C7A 28						dta b(%00101000)
  1243 3C7B 44						dta b(%01000100)
  1244 3C7C 28 28					:2 dta b(%00101000)
  1245 3C7E 00						dta b(0)
  1246 3C7F 10 10					:2 dta b(%00010000)
  1247 3C81 00						dta b(0)
  1248 							
  1249 							;2
  1250 3C82 00						dta b(0)
  1251 3C83 10 10					:2 dta b(%00010000)
  1252 3C85 00						dta b(0)
  1253 3C86 28 28					:2 dta b(%00101000)
  1254 3C88 44						dta b(%01000100)
  1255 3C89 92						dta b(%10010010)
  1256 3C8A 44						dta b(%01000100)
  1257 3C8B 28 28					:2 dta b(%00101000)
  1258 3C8D 00						dta b(0)
  1259 3C8E 10 10					:2 dta b(%00010000)
  1260 3C90 00 00					:2 dta b(0)
  1261 							
  1262 							;1
  1263 3C92 00 00 00					:3 dta b(0)
  1264 3C95 10						dta b(%00010000)
  1265 3C96 28 28					:2 dta b(%00101000)
  1266 3C98 44						dta b(%01000100)
  1267 3C99 00						dta b(0)
  1268 3C9A 44						dta b(%01000100)
  1269 3C9B 28 28					:2 dta b(%00101000)
  1270 3C9D 10						dta b(%00010000)
  1271 3C9E 00 00 00 00					:4 dta b(0)
  1272 							
  1273 							;0
  1274 3CA2 00 00 00 00					:4 dta b(0)
  1275 3CA6 10						dta b(%00010000)
  1276 3CA7 00						dta b(0)
  1277 3CA8 28						dta b(%00101000)
  1278 3CA9 44						dta b(%01000100)
  1279 3CAA 28						dta b(%00101000)
  1280 3CAB 00						dta b(0)
  1281 3CAC 10						dta b(%00010000)
  1282 3CAD 00 00 00 00 00				:5 dta b(0) 
  1283
  1284 							
  1285 = 3CB2			printShip	equ * ;przemieszczaj statek		
  1286 3CB2 A5 F0				lda startMapy
  1287 3CB4 F0 01				beq *+3
  1288 3CB6 60					rts
  1289 						
  1290 3CB7 A5 16				lda trafienie
  1291 3CB9 D0 03				bne @+
  1292 3CBB 4C A0 3D				jmp prsp1
  1293 						
  1294 3CBE AD 70 19		@		lda fazaWybuch
  1295 3CC1 30 4F				jmi @+3	
  1296 3CC3 C9 3E				cmp #62
  1297 3CC5 D0 28				bne @+1
  1298 						
  1299 3CC7 20 A4 42				jsr exploAllEnemy
  1300 3CCA A9 00 85 11				mva #0 licznikStrzal
  1301 3CCE AD 48 24				lda conditionColor		;jeśli 0 to jest red condition , trzeba narysować
  1302 3CD1 D0 09				bne prs_1
  1303 3CD3 AD 42 18				lda conditionC+2
  1304 3CD6 8D 48 24				sta conditionColor
  1305 3CD9 8D 50 24				sta conditionColor1	 
  1306 3CDC A9 0F 8D 5E 19	prs_1	mva #15 opoz_potrafieniu
  1307 3CE1 A5 12				lda sfxlicznik1
  1308 3CE3 C9 29				cmp #41
  1309 3CE5 B0 05				bcs @+			;jeśli wybuch to nie wyciszaj
  1310 						
  1311 3CE7 A9 80				lda #128
  1312 3CE9 20 ED 27				jsr cisza
  1313 						
  1314 = 3CEC			@		equ *
  1315 3CEC AD 70 19				lda fazaWybuch		
  1316 3CEF 0A			@		asl
  1317 3CF0 29 F0				and #%11110000		;rysuje nastepna faze wybuchu statku	
  1318 3CF2 A8					tay
  1319 3CF3 A2 00				ldx #0
  1320 3CF5 86 11				stx licznikStrzal		;nie wlaczaj dzwięku silnika
  1321 3CF7 B9 B2 3B		@		lda wybuch0,y
  1322 3CFA 9D 76 1C				sta sprites+$400+118,x
  1323 3CFD B9 32 3C				lda wybuch1,y
  1324 3D00 9D 76 1D				sta sprites+$500+118,x
  1325 3D03 C8					iny
  1326 3D04 E8					inx
  1327 3D05 E0 10				cpx #16
  1328 3D07 D0 EE				bne @-
  1329 						;sec		;c=1
  1330 3D09 AD 70 19				lda fazaWybuch
  1331 3D0C E9 03				sbc #3
  1332 3D0E 8D 70 19				sta fazaWybuch
  1333 3D11 60					rts
  1334 						
  1335 = 3D12			@		equ *		;koniec gry
  1336 3D12 CE 5E 19				dec opoz_potrafieniu
  1337 3D15 30 0E				bmi @+
  1338 3D17 F0 01				beq *+3
  1339 3D19 60					rts
  1340 								
  1341 3D1A A9 00				lda #0
  1342 3D1C A2 05				ldx #5
  1343 3D1E 9D B7 17		_skx1	sta enemy,x
  1344 3D21 CA					dex
  1345 3D22 10 FA				bpl _skx1
  1346 3D24 60					rts
  1347 						
  1348 3D25 CE 58 19		@		dec lives
  1349 3D28 10 03				bpl @+
  1350 3D2A 4C D4 26				jmp game_over
  1351 						
  1352 3D2D 20 0E 6F		@		jsr printlives
  1353 3D30 AD 4C 19				lda zbiteBazy		;czy zbito juz wszystkie bazy
  1354 3D33 C5 F6				cmp bazyIle
  1355 3D35 D0 33				bne @+
  1356 3D37 EE 51 19				inc poziom			;to nastepny poziom
  1357 						
  1358 						
  1359 3D3A AD 51 19				lda poziom		;jeśli poziom = 161 to ustaw 129 , zapetlamy
  1360 3D3D C9 A1				cmp #161
  1361 3D3F 90 05				bcc skpoz1
  1362 3D41 A9 81				lda #129
  1363 3D43 8D 51 19				sta poziom
  1364 = 3D46			skpoz1	equ *
  1365 						
  1366 3D46 20 BE 6A				jsr wczytajLevel		;ztaranowana ostatnia baza
  1367 						
  1368
  1369 3D49 A9 02 85 53				mva #2 muzyka
  1370 						
  1371 3D4D A9 3C 85 F0				mva #60 startMapy
  1372 3D51 A9 36 85 11				mva #54 licznikStrzal	;opoznienie dzwieku silnika
  1373 3D55 20 BA 6D				jsr pokazBazyRadar
  1374 3D58 20 16 28				jsr waitvbl
  1375 3D5B A5 1F 8D 05 D4			mva movy vscrol
  1376 3D60 A5 E5 8D 04 D4			mva movx hscrol
  1377 						
  1378 3D65 A9 00 85 FF				mva #0 zegar
  1379 3D69 60					rts
  1380 						
  1381 3D6A A5 12		@		lda sfxlicznik1
  1382 3D6C C9 14				cmp #20
  1383 3D6E B0 05				bcs @+			;jeśli wybuch to nie wyciszaj
  1384 						
  1385 3D70 A9 80				lda #128
  1386 3D72 20 ED 27				jsr cisza
  1387 						
  1388
  1389 = 3D75			@		equ *
  1390 3D75 A9 00 85 0F				mva #0 formacja_stan
  1391 3D79 AD 4F 19				lda startX		
  1392 3D7C 85 E3				sta posX
  1393 3D7E AD 50 19				lda startY
  1394 3D81 85 E4				sta posY
  1395 						
  1396 3D83 A4 F6				ldy bazyIle			;wyczysc rakiety w bazach
  1397 3D85 A9 FF				lda #255
  1398 3D87 99 1F 13		@		sta bazyRakieta-1,y
  1399 3D8A 88					dey
  1400 3D8B D0 FA				bne @-
  1401 						
  1402 3D8D 4C DE 68				jmp initPoziom
  1403 					
  1404 						
  1405 3D90 00 01 02 00 04 05 + tabjoy	dta b(0,1,2,0,4,5,6,0,8,9,10,0,0,0,0,0)
  1406 						
  1407 3DA0 AD 00 D3		prsp1	lda JOY
  1408 3DA3 29 0F				and #%1111
  1409 3DA5 49 0F				eor #%1111
  1410 3DA7 AA					tax
  1411 3DA8 BD 90 3D				lda tabjoy,x
  1412 3DAB F0 15				beq mryganieStatek
  1413 3DAD A8			@		tay
  1414 3DAE C5 5E				cmp sJoy
  1415 3DB0 F0 10				beq mryganieStatek
  1416 3DB2 85 5E		@		sta sJoy
  1417 3DB4 A5 11				lda licznikStrzal
  1418 3DB6 D0 02				bne printShip1
  1419 3DB8 E6 11				inc licznikStrzal	;zmiana kierunku= dzwiek silnikow od poczatku
  1420 = 3DBA			printShip1	equ *
  1421 3DBA BE A7 3B				ldx joyTable,y
  1422 3DBD F0 07				beq rrts
  1423 3DBF 4C 16 3F				jmp rstatek
  1424
  1425 						
  1426 = 3DC2			mryganieStatek	equ *
  1427 3DC2 A4 5E				ldy sJoy
  1428 3DC4 D0 01				bne @+
  1429 3DC6 60			rrts	rts
  1430 3DC7 B9 E3 3D		@		lda statekTab+11,y
  1431 3DCA F0 FA				beq rrts
  1432 3DCC 8D D7 3D				sta statek_skok+2
  1433 3DCF B9 D8 3D				lda statekTab,y
  1434 3DD2 8D D6 3D				sta statek_skok+1
  1435 = 3DD5			statek_skok	equ *
  1436 3DD5 4C FF FF				jmp $ffff
  1437 					
  1438 3DD8 00 EE FF 00 10 72	statekTab	dta b(0),b(<mstatekUp),b(<mstatekDown),b(0),b(<mstatekLeft),b(<mstatekUpLeft)	;1,2,4,5
  1439 3DDE ED 00 41 9B C4				dta b(<mstatekDownLeft),b(0),b(<mstatekRight),b(<mstatekUpRight),b(<mstatekDownRight) ;6,8,9,10
  1440 3DE3 00 3D 3D 00 3E 3E				dta b(0),b(>mstatekUp),b(>mstatekDown),b(0),b(>mstatekLeft),b(>mstatekUpLeft)	;1,2,4,5
  1441 3DE9 3E 00 3E 3E 3E				dta b(>mstatekDownLeft),b(0),b(>mstatekRight),b(>mstatekUpRight),b(>mstatekDownRight) ;6,8,9,10
  1442 							
  1443 = 3DEE			mstatekUp	equ *
  1444 3DEE AD 84 1D				lda sprites+$500+118+14
  1445 3DF1 49 92				eor #%10010010
  1446 3DF3 8D 84 1D				sta sprites+$500+118+14
  1447 3DF6 AD 83 1D				lda sprites+$500+118+13
  1448 3DF9 49 92				eor #%10010010
  1449 3DFB 8D 83 1D				sta sprites+$500+118+13
  1450 3DFE 60					rts
  1451 						
  1452 = 3DFF			mstatekDown	equ *
  1453 3DFF AD 77 1D				lda sprites+$500+118+1
  1454 3E02 49 92				eor #%10010010
  1455 3E04 8D 77 1D				sta sprites+$500+118+1
  1456 3E07 AD 78 1D				lda sprites+$500+118+2
  1457 3E0A 49 92				eor #%10010010
  1458 3E0C 8D 78 1D				sta sprites+$500+118+2
  1459 3E0F 60					rts
  1460 						
  1461 = 3E10			mstatekLeft	equ *
  1462 3E10 AD 77 1D				lda sprites+$500+118+1
  1463 3E13 49 01				eor #%00000001
  1464 3E15 8D 77 1D				sta sprites+$500+118+1
  1465 3E18 AD 78 1D				lda sprites+$500+118+2
  1466 3E1B 49 01				eor #%00000001
  1467 3E1D 8D 78 1D				sta sprites+$500+118+2
  1468 3E20 AD 83 1D				lda sprites+$500+118+13
  1469 3E23 49 01				eor #%00000001
  1470 3E25 8D 83 1D				sta sprites+$500+118+13
  1471 3E28 AD 84 1D				lda sprites+$500+118+14
  1472 3E2B 49 01				eor #%00000001
  1473 3E2D 8D 84 1D				sta sprites+$500+118+14
  1474 3E30 AD 7D 1D				lda sprites+$500+118+7
  1475 3E33 49 01				eor #%00000001
  1476 3E35 8D 7D 1D				sta sprites+$500+118+7
  1477 3E38 AD 7E 1D				lda sprites+$500+118+8
  1478 3E3B 49 01				eor #%00000001
  1479 3E3D 8D 7E 1D				sta sprites+$500+118+8	
  1480 3E40 60					rts		
  1481
  1482 = 3E41			mstatekRight	equ *
  1483 3E41 AD 77 1D				lda sprites+$500+118+1
  1484 3E44 49 80				eor #%10000000
  1485 3E46 8D 77 1D				sta sprites+$500+118+1
  1486 3E49 AD 78 1D				lda sprites+$500+118+2
  1487 3E4C 49 80				eor #%10000000
  1488 3E4E 8D 78 1D				sta sprites+$500+118+2
  1489 3E51 AD 83 1D				lda sprites+$500+118+13
  1490 3E54 49 80				eor #%10000000
  1491 3E56 8D 83 1D				sta sprites+$500+118+13
  1492 3E59 AD 84 1D				lda sprites+$500+118+14
  1493 3E5C 49 80				eor #%10000000
  1494 3E5E 8D 84 1D				sta sprites+$500+118+14
  1495 3E61 AD 7D 1D				lda sprites+$500+118+7
  1496 3E64 49 80				eor #%10000000
  1497 3E66 8D 7D 1D				sta sprites+$500+118+7
  1498 3E69 AD 7E 1D				lda sprites+$500+118+8
  1499 3E6C 49 80				eor #%10000000
  1500 3E6E 8D 7E 1D				sta sprites+$500+118+8
  1501 3E71 60					rts	
  1502 						
  1503 = 3E72			mstatekUpLeft	equ *
  1504 3E72 AD 7D 1D				lda sprites+$500+118+7
  1505 3E75 49 01				eor #%00000001
  1506 3E77 8D 7D 1D				sta sprites+$500+118+7
  1507 3E7A AD 7C 1D				lda sprites+$500+118+6
  1508 3E7D 49 01				eor #%00000001
  1509 3E7F 8D 7C 1D				sta sprites+$500+118+6
  1510 3E82 AD 84 1D				lda sprites+$500+118+14
  1511 3E85 49 10				eor #%00010000
  1512 3E87 8D 84 1D				sta sprites+$500+118+14
  1513 3E8A AD 85 1D				lda sprites+$500+118+15
  1514 3E8D 49 10				eor #%00010000
  1515 3E8F 8D 85 1D				sta sprites+$500+118+15
  1516 3E92 AD 84 1D				lda sprites+$500+118+14
  1517 3E95 49 02				eor #%00000010
  1518 3E97 8D 84 1D				sta sprites+$500+118+14
  1519 3E9A 60					rts
  1520
  1521 = 3E9B			mstatekUpRight	equ *
  1522 3E9B AD 7D 1D				lda sprites+$500+118+7
  1523 3E9E 49 80				eor #%10000000
  1524 3EA0 8D 7D 1D				sta sprites+$500+118+7
  1525 3EA3 AD 7E 1D				lda sprites+$500+118+8
  1526 3EA6 49 80				eor #%10000000
  1527 3EA8 8D 7E 1D				sta sprites+$500+118+8
  1528 3EAB AD 84 1D				lda sprites+$500+118+14
  1529 3EAE 49 10				eor #%00010000
  1530 3EB0 8D 84 1D				sta sprites+$500+118+14
  1531 3EB3 AD 85 1D				lda sprites+$500+118+15
  1532 3EB6 49 10				eor #%00010000
  1533 3EB8 8D 85 1D				sta sprites+$500+118+15
  1534 3EBB AD 84 1D				lda sprites+$500+118+14
  1535 3EBE 49 80				eor #%10000000
  1536 3EC0 8D 84 1D				sta sprites+$500+118+14
  1537 3EC3 60					rts
  1538
  1539 = 3EC4			mstatekDownRight	equ *
  1540 3EC4 AD 76 1D				lda sprites+$500+118+0
  1541 3EC7 49 10				eor #%00010000
  1542 3EC9 8D 76 1D				sta sprites+$500+118+0
  1543 3ECC AD 77 1D				lda sprites+$500+118+1
  1544 3ECF 49 10				eor #%00010000
  1545 3ED1 8D 77 1D				sta sprites+$500+118+1
  1546 3ED4 AD 7F 1D				lda sprites+$500+118+9
  1547 3ED7 49 80				eor #%10000000
  1548 3ED9 8D 7F 1D				sta sprites+$500+118+9
  1549 3EDC AD 7E 1D				lda sprites+$500+118+8
  1550 3EDF 49 80				eor #%10000000
  1551 3EE1 8D 7E 1D				sta sprites+$500+118+8
  1552 3EE4 AD 78 1D				lda sprites+$500+118+2
  1553 3EE7 49 80				eor #%10000000
  1554 3EE9 8D 78 1D				sta sprites+$500+118+2
  1555 3EEC 60					rts		
  1556
  1557 = 3EED			mstatekDownLeft	equ *
  1558 3EED AD 76 1D				lda sprites+$500+118+0
  1559 3EF0 49 10				eor #%00010000
  1560 3EF2 8D 76 1D				sta sprites+$500+118+0
  1561 3EF5 AD 77 1D				lda sprites+$500+118+1
  1562 3EF8 49 10				eor #%00010000
  1563 3EFA 8D 77 1D				sta sprites+$500+118+1
  1564 3EFD AD 7E 1D				lda sprites+$500+118+8
  1565 3F00 49 02				eor #%00000010
  1566 3F02 8D 7E 1D				sta sprites+$500+118+8
  1567 3F05 AD 7F 1D				lda sprites+$500+118+9
  1568 3F08 49 02				eor #%00000010
  1569 3F0A 8D 7F 1D				sta sprites+$500+118+9
  1570 3F0D AD 78 1D				lda sprites+$500+118+2
  1571 3F10 49 02				eor #%00000010
  1572 3F12 8D 78 1D				sta sprites+$500+118+2
  1573 3F15 60					rts
  1574 						
  1575 = 3F16			rstatek	equ *
  1576 3F16 A0 0F				ldy #15
  1577 3F18 BD 00 F5		@		lda statek,x
  1578 3F1B 99 76 1C				sta sprites+$476,y
  1579 3F1E BD 10 F5				lda statek+16,x
  1580 3F21 99 76 1D				sta sprites+$576,y
  1581 3F24 CA					dex
  1582 3F25 88					dey
  1583 3F26 10 F0				bpl @-
  1584 					
  1585 3F28 60					rts	
  1586 						
  1587 3F29			copyShip
  1588 3F29 A5 1E				lda nobanner
  1589 3F2B D0 01				bne *+3
  1590 3F2D 60					rts
  1591 						
  1592 3F2E A2 0F				ldx #15
  1593 3F30 BD 76 1C		@		lda sprites+$476,x			;kopiuj podczas sampla
  1594 3F33 9D 76 FC				sta sprites1+$476,x
  1595 3F36 BD 76 1D				lda sprites+$576,x
  1596 3F39 9D 76 FD				sta sprites1+$576,x
  1597 3F3C CA					dex
  1598 3F3D 10 F1				bpl @-
  1599 					
  1600 3F3F 60					rts
  1601 					
  1602 = 3F40			moveShip	equ *	;przesun ekran	
  1603 3F40 8D 18 77				sta ruch
  1604 3F43 0A					asl
  1605 3F44 8D 19 77				sta ruchy
  1606
  1607 3F47 A5 F0				lda startMapy		;czy opoznienie po wlaczeniu nowej mapy
  1608 3F49 C9 06				cmp #10-4
  1609 3F4B 90 01				bcc *+3
  1610 3F4D 60					rts
  1611 						
  1612 3F4E A5 16				lda trafienie
  1613 3F50 F0 01				beq *+3
  1614 3F52 60					rts
  1615 						
  1616 3F53 A5 5E				lda sJOY
  1617 3F55 29 04				and #%0100
  1618 3F57 F0 03				beq l01
  1619 3F59 4C 91 3A				jmp movLeft
  1620
  1621 3F5C A5 5E		l01		lda sJOY
  1622 3F5E 29 08				and #%1000
  1623 3F60 F0 03				beq l02
  1624 3F62 4C DA 3A				jmp movRight
  1625 					
  1626 3F65 A5 5E		l02		lda sJOY
  1627 3F67 29 01				and #%0001
  1628 3F69 F0 03				beq l03
  1629 3F6B 4C 21 3B				jmp movUp
  1630
  1631 3F6E A5 5E		l03		lda sJOY
  1632 3F70 29 02				and #%0010
  1633 3F72 F0 03				beq l04
  1634 3F74 4C 61 3B				jmp movDOWN
  1635 						
  1636 3F77 38			l04		sec
  1637 3F78 A9 0C				lda #12
  1638 3F7A E5 E5				sbc movX
  1639 3F7C 85 E7				sta movX0		;15-movX
  1640 						
  1641 3F7E A5 1F				lda movY
  1642 3F80 4A					lsr @
  1643 3F81 85 E8				sta movY0		;movy/2
  1644
  1645 3F83 60					rts
  1646
  1647 3F84 18 28 38 48		ksztaltJadroAL	dta b(<ksztaltJadroA0),b(<ksztaltJadroA1),b(<ksztaltJadroA2),b(<ksztaltJadroA3)
  1648 3F88 58 68 78						dta b(<ksztaltJadroA4),b(<ksztaltJadroA5),b(<ksztaltJadroA6)
  1649 3F8B FB FB FB FB		ksztaltJadroAH	dta b(>ksztaltJadroA0),b(>ksztaltJadroA1),b(>ksztaltJadroA2),b(>ksztaltJadroA3)
  1650 3F8F FB FB FB						dta b(>ksztaltJadroA4),b(>ksztaltJadroA5),b(>ksztaltJadroA6)
  1651 3F92 88 98 A8 B8		ksztaltJadroBL	dta b(<ksztaltJadroB0),b(<ksztaltJadroB1),b(<ksztaltJadroB2),b(<ksztaltJadroB3)
  1652 3F96 C8 D8 E8						dta b(<ksztaltJadroB4),b(<ksztaltJadroB5),b(<ksztaltJadroB6)
  1653 3F99 FB FB FB FB		ksztaltJadroBH	dta b(>ksztaltJadroB0),b(>ksztaltJadroB1),b(>ksztaltJadroB2),b(>ksztaltJadroB3)
  1654 3F9D FB FB FB						dta b(>ksztaltJadroB4),b(>ksztaltJadroB5),b(>ksztaltJadroB6)
  1655 						
  1656 				;przygotuj liczniki i wyglad jadra
  1657 = 3FA0			initJadra	equ *
  1658 3FA0 A0 0F				ldy #15
  1659 3FA2 B9 58 FB		@		lda ksztaltJadroA4,y
  1660 3FA5 99 98 D8				sta znaki1+(b+16)*8,y
  1661 3FA8 99 98 DC				sta znaki2+(b+16)*8,y
  1662 3FAB B9 C8 FB				lda ksztaltJadroB4,y
  1663 3FAE 99 A8 D8				sta znaki1+(b+18)*8,y
  1664 3FB1 99 A8 DC				sta znaki2+(b+18)*8,y
  1665 3FB4 88					dey
  1666 3FB5 10 EB				bpl @-
  1667 							
  1668 3FB7 AD 4D 19				lda czasOtwarcia
  1669 3FBA C9 FF				cmp #255
  1670 3FBC D0 20				bne @+
  1671 						
  1672 3FBE 8D 63 19				sta openA		;jesli wartosc ujemna to zablokuj jadra
  1673 3FC1 8D 64 19				sta openB
  1674 3FC4 A9 01 8D 5F 19			mva #1 czyJadroA
  1675 3FC9 8D 60 19				sta czyJadroB
  1676 						
  1677 3FCC A0 93 8C D4 36			mvy #b+16+128 _bazaAJadro0+1	 ;jeśli jadra caly czas otwarte
  1678 3FD1 C8					iny
  1679 3FD2 8C 0C 37				sty _bazaAJadro1+1
  1680 3FD5 C8					iny
  1681 3FD6 8C 4C 39				sty _bazaBJadro0+1
  1682 3FD9 C8					iny 
  1683 3FDA 8C 51 39				sty _bazaBJadro1+1
  1684
  1685 						
  1686 3FDD 60					rts
  1687 						
  1688 3FDE A9 00 8D 63 19	@		mva #0 openA
  1689 3FE3 8D 64 19				sta openB
  1690 3FE6 8D 5F 19				sta czyJadroA
  1691 3FE9 8D 60 19				sta czyJadroB
  1692 						
  1693 3FEC A9 04 8D 61 19			mva #4 licznikJadroA
  1694 3FF1 A9 14 8D 62 19			mva #20 licznikJadroB
  1695 3FF6 60					rts
  1696
  1697 				;Animacja Jadra A
  1698 = 3FF7			animacjaJadraA	equ *
  1699 3FF7 AD 63 19				lda openA
  1700 3FFA F0 08				beq @+1
  1701 3FFC C9 FF				cmp #255
  1702 3FFE F0 03				beq @+			;jesli ujemna wartosc to nie zmieniaj stanu
  1703 4000 CE 63 19				dec openA
  1704 4003 60			@		rts
  1705 					
  1706 4004 A9 00 8D 5F 19	@		mva #0 czyJadroA
  1707 4009 EE 61 19				inc licznikJadroA
  1708 400C AD 61 19				lda licznikJadroA
  1709 400F C9 03				cmp #3
  1710 4011 D0 06				bne @+
  1711 4013 AE 4E 19 8E 63 19			mvx czasZamkniecia openA
  1712 4019 C9 13		@		cmp #19
  1713 401B D0 45				bne @+
  1714 401D AE 4D 19 8E 63 19			mvx czasOtwarcia openA
  1715 4023					odpalRakietyA		;MACRO
Macro: ODPALRAKIETYA [Source: rakiety.asm]
     2 4023 A0 07					ldy #7
     3 4025 A9 00 8D 7E 19				mva #0 rak_flag
     4 402A BE 70 13		odpraka0	ldx rakietyStan,y
     5 402D F0 12					beq odpraka1
     7 402F B9 78 13					lda rakietyTyp,y
     8 4032 29 02					and #%10
     9 4034 D0 0B					bne odpraka1
    10 4036 9D 1F 13					sta bazyRakieta-1,x			;wyczysc numer rakiety przypisanej do bazy,A=0
    11 4039 A9 01 99 A0 13				mva #1 rakietyMove,y		;uwolnienie rakiety
    12 403E 8D 7E 19					sta rak_flag
    13 4041 88			odpraka1	dey
    14 4042 10 E6					bpl odpraka0
    15 4044 AD 7E 19					lda rak_flag
    16 4047 F0 0B					beq odpraka2
    18 4049 98						tya
    19 404A 48						pha
    20 404B A0 14					ldy #fx_rakieta
    21 404D A9 02					lda #2
    22 404F 20 15 71					jsr sfx.add_fx1
    23 4052 68						pla
    24 4053 A8						tay
    29 = 4054			odpraka2	equ *	;lda licznikJadroA
Source: bmove.asm
  1716 4054 A9 04 8D 65 19			mva #4 opozCoreA
  1717 4059 A9 01 8D 67 19			mva #1 liczCoreA
  1718 405E 8D 5F 19				sta czyJadroA
  1719 4061 60					rts
  1720
  1721 4062 4A			@		lsr @				;spowolnienie
  1722 4063 4A					lsr @
  1723 4064 C9 07				cmp #7
  1724 4066 90 05				bcc @+
  1725 						
  1726 4068 A9 00 8D 61 19			mva #0 licznikJadroA		;reset licznika
  1727 					
  1728 406D AA			@		tax
  1729 406E E0 04				cpx #4
  1730 4070 D0 05				bne @+
  1731 4072 A9 01 8D 5F 19			mva #1 czyJadroA
  1732 						
  1733 4077 BC 10 FB		@		ldy ad_jadra,x
  1734
  1735 407A 8E 9E 40				stx r_x1
  1736 407D A2 00				ldx #0
  1737 407F A5 EB				lda ramka
  1738 4081 D0 0E				bne @+
  1739 						
  1740 4083 B9 18 FB		jr_0	lda ksztaltJadroA0,y
  1741 4086 9D 98 D8				sta znaki1+(b+16)*8,x
  1742 4089 C8					iny
  1743 408A E8					inx
  1744 408B E0 10				cpx #16
  1745 408D 90 F4				bcc jr_0
  1746 408F B0 0C				bcs @+1
  1747 						
  1748 = 4091			@		equ *
  1749 4091 B9 18 FB		jr_1	lda ksztaltJadroA0,y
  1750 4094 9D 98 DC				sta znaki2+(b+16)*8,x
  1751 4097 C8					iny
  1752 4098 E8					inx
  1753 4099 E0 10				cpx #16
  1754 409B 90 F4				bcc jr_1
  1755
  1756 = 409E			r_x1	equ *+1		
  1757 409D A2 FF		@		ldx #$ff
  1758 409F E0 04				cpx #4		
  1759 40A1 D0 0A				bne @+
  1760 40A3 A0 93 8C D4 36			mvy #b+16+128 _bazaAJadro0+1
  1761 40A8 C8					iny
  1762 40A9 8C 0C 37				sty _bazaAJadro1+1	
  1763 40AC 60					rts
  1764 						
  1765 40AD E0 05		@		cpx #5
  1766 40AF F0 01				beq @+
  1767 40B1 60					rts
  1768 						
  1769 40B2 A0 13 8C D4 36	@		mvy #b+16 _bazaAJadro0+1
  1770 40B7 C8					iny
  1771 40B8 8C 0C 37				sty _bazaAJadro1+1
  1772 40BB 60					rts
  1773
  1774 = 40BC			ksztaltCoreA	equ *
  1775 40BC 00					dta b(0)
  1776 40BD 30 30				:2 dta b(%00110000)
  1777 40BF 3C 3C				:2 dta b(%00111100)
  1778 40C1 FB					dta b(%11111011)
  1779 40C2 E7					dta b(%11100111)
  1780 40C3 D7 D7				:2 dta b(%11010111)
  1781 40C5 DB					dta b(%11011011)
  1782 40C6 EF					dta b(%11101111)
  1783 40C7 3C 3C				:2 dta b(%00111100)
  1784 40C9 0C 0C				:2 dta b(%00001100)
  1785 40CB 00					dta b(0)
  1786 				;1
  1787 40CC 00 00				dta b(0,0)
  1788 40CE 30 30				:2 dta b(%00110000)
  1789 40D0 3C 3C				:2 dta b(%00111100)
  1790 40D2 FB					dta b(%11111011)
  1791 40D3 E7					dta b(%11100111)
  1792 40D4 DB					dta b(%11011011)
  1793 40D5 EF					dta b(%11101111)
  1794 40D6 3C 3C				:2 dta b(%00111100)
  1795 40D8 0C 0C				:2 dta b(%00001100)
  1796 40DA 00 00				dta b(0,0)
  1797 				;2
  1798 40DC 00 00 00				dta b(0,0,0)
  1799 40DF 30 30				:2 dta b(%00110000)
  1800 40E1 3C					dta b(%00111100)
  1801 40E2 FC					dta b(%11111100)
  1802 40E3 EB EB				:2 dta b(%11101011)
  1803 40E5 3F					dta b(%00111111)
  1804 40E6 3C					dta b(%00111100)
  1805 40E7 0C 0C				:2 dta b(%00001100)
  1806 40E9 00 00 00				dta b(0,0,0)
  1807 				;3	
  1808 40EC 00 00 00 00 00			dta b(0,0,0,0,0)
  1809 40F1 30					dta b(%00110000)
  1810 40F2 3C					dta b(%00111100)
  1811 40F3 EF					dta b(%11101111)
  1812 40F4 FB					dta b(%11111011)
  1813 40F5 3C					dta b(%00111100)
  1814 40F6 0C					dta b(%00001100)
  1815 40F7 00 00 00 00 00			dta b(0,0,0,0,0)
  1816 						
  1817 = 40FC			ksztaltCoreB	equ *
  1818 40FC 00					dta b(0)
  1819 40FD 03					dta b(%00000011)
  1820 40FE 0D					dta b(%00001101)
  1821 40FF F5					dta b(%11110101)
  1822 4100 39					dta b(%00111001)
  1823 4101 0D					dta b(%00001101)
  1824 4102 03					dta b(%00000011)
  1825 4103 00 00				dta b(0,0)
  1826 4105 C0					dta b(%11000000)
  1827 4106 70					dta b(%01110000)
  1828 4107 6C					dta b(%01101100)
  1829 4108 5F					dta b(%01011111)
  1830 4109 70					dta b(%01110000)
  1831 410A C0					dta b(%11000000)
  1832 410B 00					dta b(0)
  1833 				;1
  1834 410C 00					dta b(0)
  1835 410D 03					dta b(%00000011)
  1836 410E 0D					dta b(%00001101)
  1837 410F 35					dta b(%00110101)
  1838 4110 3D					dta b(%00111101)
  1839 4111 0F					dta b(%00001111)
  1840 4112 00 00 00				dta b(0,0,0)
  1841 4115 C0					dta b(%11000000)
  1842 4116 B0					dta b(%10110000)
  1843 4117 7C					dta b(%01111100)
  1844 4118 5C					dta b(%01011100)
  1845 4119 70					dta b(%01110000)
  1846 411A C0					dta b(%11000000)
  1847 411B 00					dta b(0)
  1848 				;2
  1849 411C 00					dta b(0)
  1850 411D 03					dta b(%00000011)
  1851 411E 0B					dta b(%00001011)
  1852 411F 0D					dta b(%00001101)
  1853 4120 09					dta b(%00001001)
  1854 4121 0F					dta b(%00001111)
  1855 4122 00 00 00 00				dta b(0,0,0,0)
  1856 4126 F0					dta b(%11110000)
  1857 4127 60					dta b(%01100000)
  1858 4128 70					dta b(%01110000)
  1859 4129 E0					dta b(%11100000)
  1860 412A C0					dta b(%11000000)
  1861 412B 00					dta b(0)
  1862 				;3		
  1863 412C 00 00				dta b(0,0)
  1864 412E 03					dta b(%00000011)
  1865 412F 0D					dta b(%00001101)
  1866 4130 02					dta b(%00000010)
  1867 4131 03					dta b(%00000011)
  1868 4132 00 00 00 00				dta b(0,0,0,0)
  1869 4136 C0					dta b(%11000000)
  1870 4137 80					dta b(%10000000)
  1871 4138 70					dta b(%01110000)
  1872 4139 C0					dta b(%11000000)
  1873 413A 00 00				dta b(0,0)
  1874 						
  1875 						
  1876 413C 00 10 20 30 30 20 + tabCoreA	dta b(0,16,32,48,48,32,16,0)
  1877 						
  1878 = 4144			coreWaveA	equ *
  1879 4144 AD 61 19				lda licznikJadroA		;jeśli otwarte jądro
  1880 4147 C9 13				cmp #19
  1881 4149 F0 08				beq @+
  1882 414B AD 63 19				lda openA
  1883 414E C9 FF				cmp #255
  1884 4150 F0 01				beq @+
  1885 4152 60					rts
  1886 4153 CE 65 19		@		dec opozCoreA		;opoznienie animacji
  1887 4156 D0 0F				bne @+ 
  1888 4158 A9 04 8D 65 19			mva #4 opozCoreA
  1889 						
  1890 415D CE 67 19				dec liczCoreA		;numer fazy animacji
  1891 4160 10 05				bpl @+
  1892 4162 A9 07 8D 67 19			mva #7 liczCoreA
  1893 						
  1894 4167 AE 67 19		@		ldx liczCoreA
  1895 416A BC 3C 41				ldy tabCoreA,x
  1896 					
  1897 416D A5 EB				lda ramka
  1898 416F D0 0F				bne @+
  1899 						
  1900 4171 A2 00				ldx #0
  1901 4173 B9 BC 40		jad1	lda ksztaltCoreA,y
  1902 4176 9D 98 D8				sta znaki1+(b+16)*8,x
  1903 4179 C8					iny
  1904 417A E8					inx
  1905 417B E0 10				cpx #16
  1906 417D D0 F4				bne jad1
  1907
  1908 417F 60					rts
  1909 = 4180			@		equ *
  1910 4180 A2 00				ldx #0
  1911 4182 B9 BC 40		jad2	lda ksztaltCoreA,y
  1912 4185 9D 98 DC				sta znaki2+(b+16)*8,x
  1913 4188 C8					iny
  1914 4189 E8					inx
  1915 418A E0 10				cpx #16
  1916 418C D0 F4				bne jad2
  1917 						
  1918 418E 60					rts
  1919 						
  1920 				;Animacja Jadra B
  1921 = 418F			animacjaJadraB	equ *
  1922 418F AD 64 19				lda openB
  1923 4192 F0 08				beq @+1
  1924 4194 C9 FF				cmp #255
  1925 4196 F0 03				beq @+			;jesli ujemna wartosc to nie zmieniaj stanu
  1926 4198 CE 64 19				dec openB
  1927 419B 60			@		rts
  1928 					
  1929 419C A9 00 8D 60 19	@		mva #0 czyJadroB
  1930 41A1 EE 62 19				inc licznikJadroB
  1931 41A4 AD 62 19				lda licznikJadroB
  1932 						
  1933 41A7 C9 03				cmp #3
  1934 41A9 D0 06				bne @+
  1935 41AB AE 4E 19 8E 64 19			mvx czasZamkniecia openB
  1936 41B1 C9 13		@		cmp #19
  1937 41B3 D0 45				bne @+
  1938 41B5 AE 4D 19 8E 64 19			mvx czasOtwarcia openB
  1939 41BB					odpalRakietyB		;MACRO
Macro: ODPALRAKIETYB [Source: rakiety.asm]
     2 41BB A0 07					ldy #7
     3 41BD A9 00 8D 7E 19				mva #0 rak_flag
     4 41C2 BE 70 13		odprakb0	ldx rakietyStan,y
     5 41C5 F0 12					beq odprakb1
     7 41C7 B9 78 13					lda rakietyTyp,y
     8 41CA 29 02					and #%10
     9 41CC F0 0B					beq odprakb1
    10 41CE 99 A0 13					sta rakietyMove,y	;mva #1 rakietyMove,y		;uwolnienie rakiety
    11 41D1 8D 7E 19					sta rak_flag
    12 41D4 A9 00 9D 1F 13				mva #0 bazyRakieta-1,x		;wyczysc numer rakiety przypisanej do bazy
    13 41D9 88			odprakb1	dey
    14 41DA 10 E6					bpl odprakb0
    15 41DC AD 7E 19					lda rak_flag
    16 41DF F0 0B					beq odprakb2
    18 41E1 98						tya
    19 41E2 48						pha
    20 41E3 A0 14					ldy #fx_rakieta
    21 41E5 A9 02					lda #2
    22 41E7 20 15 71					jsr sfx.add_fx1
    23 41EA 68						pla
    24 41EB A8						tay			
    28 = 41EC			odprakb2	equ *	;lda licznikJadroB
Source: bmove.asm
  1940 41EC A9 04 8D 66 19			mva #4 opozCoreB
  1941 41F1 A9 01 8D 68 19			mva #1 liczCoreB
  1942 41F6 8D 60 19				sta czyJadroB
  1943 41F9 60					rts
  1944 						
  1945 41FA 4A			@		lsr @				;spowolnienie
  1946 41FB 4A					lsr @
  1947 41FC C9 07				cmp #7
  1948 41FE 90 05				bcc @+
  1949 4200 A9 00 8D 62 19			mva #0 licznikJadroB		;reset licznika
  1950 						
  1951 4205 AA			@		tax
  1952 4206 E0 04				cpx #4
  1953 4208 D0 0A				bne @+
  1954 420A AD 62 19				lda licznikJadroB
  1955 420D 29 01				and #1
  1956 420F F0 03				beq @+
  1957 4211 8D 60 19				sta czyJadroB	;A=1
  1958 						
  1959 4214 BC 10 FB		@		ldy ad_jadra,x
  1960 4217 8E 3B 42				stx r_x2
  1961 421A A2 00				ldx #0
  1962 						
  1963 421C A5 EB				lda ramka
  1964 421E D0 0E				bne @+
  1965 						
  1966 4220 B9 88 FB		rj_2	lda ksztaltJadroB0,y
  1967 4223 9D A8 D8				sta znaki1+(b+18)*8,x
  1968 4226 C8					iny
  1969 4227 E8					inx
  1970 4228 E0 10				cpx #16
  1971 422A 90 F4				bcc rj_2
  1972 422C B0 0C				bcs @+1
  1973
  1974 = 422E			@		equ *
  1975 422E B9 88 FB		rj_3	lda ksztaltJadroB0,y
  1976 4231 9D A8 DC				sta znaki2+(b+18)*8,x
  1977 4234 C8					iny
  1978 4235 E8					inx
  1979 4236 E0 10				cpx #16
  1980 4238 90 F4				bcc rj_3
  1981
  1982 = 423B			r_x2	equ *+1		
  1983 423A A2 FF		@		ldx #$ff
  1984 423C E0 04				cpx #4		
  1985 423E D0 0A				bne @+
  1986 4240 A0 95 8C 4C 39			mvy #b+18+128 _bazaBJadro0+1
  1987 4245 C8					iny
  1988 4246 8C 51 39				sty _bazaBJadro1+1
  1989 4249 60					rts
  1990 						
  1991 424A E0 05		@		cpx #5
  1992 424C F0 01				beq @+
  1993 424E 60					rts
  1994 						
  1995 424F A0 15 8C 4C 39	@		mvy #b+18 _bazaBJadro0+1
  1996 4254 C8					iny
  1997 4255 8C 51 39				sty _bazaBJadro1+1
  1998 4258 60					rts
  1999 						
  2000 = 4259			coreWaveB	equ *
  2001 4259 AD 62 19				lda licznikJadroB		;jeśli otwarte jądro
  2002 425C C9 13				cmp #19
  2003 425E F0 08				beq @+
  2004 4260 AD 64 19				lda openB
  2005 4263 C9 FF				cmp #255
  2006 4265 F0 01				beq @+
  2007 4267 60					rts
  2008 4268 CE 66 19		@		dec opozCoreB		;opoznienie animacji
  2009 426B D0 0F				bne @+ 
  2010 426D A9 04 8D 66 19			mva #4 opozCoreB
  2011 						
  2012 4272 CE 68 19				dec liczCoreB		;numer fazy animacji
  2013 4275 10 05				bpl @+
  2014 4277 A9 07 8D 68 19			mva #7 liczCoreB
  2015 						
  2016 427C AE 68 19		@		ldx liczCoreB
  2017 427F BC 3C 41				ldy tabCoreA,x
  2018 					
  2019 4282 A5 EB				lda ramka
  2020 4284 D0 0F				bne @+
  2021 						
  2022 4286 A2 00				ldx #0
  2023 4288 B9 FC 40		jad1b	lda ksztaltCoreB,y
  2024 428B 9D A8 D8				sta znaki1+(b+18)*8,x
  2025 428E C8					iny
  2026 428F E8					inx
  2027 4290 E0 10				cpx #16
  2028 4292 D0 F4				bne jad1b
  2029 4294 60					rts
  2030 = 4295			@		equ *
  2031 4295 A2 00				ldx #0
  2032 4297 B9 FC 40		jad2b	lda ksztaltCoreB,y
  2033 429A 9D A8 DC				sta znaki2+(b+18)*8,x
  2034 429D C8					iny
  2035 429E E8					inx
  2036 429F E0 10				cpx #16
  2037 42A1 D0 F4				bne jad2b
  2038 						
  2039 42A3 60					rts
  2040 						
  2041 = 42A4			exploAllEnemy	equ *
  2042 42A4 A2 05				ldx #5
  2043 42A6 BD B7 17		@		lda enemy,x			;w momencie trafienia wszystkie statki wybuchaja
  2044 42A9 F0 23				beq @+
  2045 42AB BD 89 01				lda enemyWybuch,x
  2046 42AE D0 1E				bne @+
  2047 						
  2048 42B0 BD E1 17 9D 81 01			mva enemyFaza,x enemyLastFaza,x
  2049 42B6 A9 08 9D 89 01			mva #8 enemyWybuch,x
  2050 42BB A9 80 9D 71 01			mva #EKOLOR1 enemyNegatyw,x	
  2051 42C0 A9 EB 9D 91 01			mva #>scolor2 enemyOraTab,x
  2052 42C5 A9 30 9D ED 17			mva #exploshape enemyShapeH,x
  2053 42CA A9 0A 85 08				mva #5*2 sfx_enemyHit
  2054
  2055 42CE CA			@		dex
  2056 42CF 10 D5				bpl @-1
  2057 						
  2058 42D1 A2 07				ldx #7
  2059 42D3 BD A0 13		@		lda rakietyMove,x
  2060 42D6 F0 0B				beq @+	
  2061 42D8 A9 00				lda #0	
  2062 42DA 9D 70 13				sta rakietyStan,x
  2063 42DD 9D A0 13				sta rakietyMove,x
  2064 42E0 20 8E 48				jsr dodajMalyWybuch		;dodaj male wybuchy
  2065 						
  2066 42E3 CA			@		dex
  2067 42E4 10 ED				bpl @-1
  2068 						
  2069 						
  2070 42E6 A5 1D				lda jestSpy
  2071 42E8 F0 08				beq eal
  2072 42EA C9 03				cmp #3
  2073 42EC B0 04				bcs eal
  2074 42EE A9 00 85 1D				mva #0 jestSpy		;zabezpieczenie przed pojawieniem się spy
  2075 42F2 60			eal		rts		
  2076 								
  2077 						
   575 							
   576 42F3						icl 'bantyair.asm'
Source: bantyair.asm
     1 				;opoznieniePocisku	equ 12	;po strzale opoznienie nastepnego strzalu minimalne
     2 42F3 00			opoznieniePocisku	dta b(0)
     3 42F4 40 50 10 14 04 05 + pociskiOra 		dta b(%01000000,%01010000,%00010000,%00010100,%00000100,%00000101,%00000101,%00000001)	
     4
     5
     6 = 0004			bit1	equ 4
     7
     8 42FC 00 09 12 1B		tabcan3cor_ad	dta b(0,9,18,27)
     9 4300 31 01 20 F4 DF E3 + tabcan3corB		dta b(%00110001,%00000001,%00100000,0-28+16,-18-32+17,-17-28+16,7-32+17,-17-28+16,-5-32+17)
    10 4309 07 01 04 F4 DF 04 + 				dta b(%00000111,%00000001,%00000100,0-28+16,-18-32+17,16-28+16,-5-32+17,16-28+16,7-32+17)
    11 4312 38 08 20 F4 04 E3 + 				dta b(%00111000,%00001000,%00100000,0-28+16,19-32+17,-17-28+16,7-32+17,-17-28+16,-5-32+17)
    12 431B 0E 08 04 F4 04 04 + 				dta b(%00001110,%00001000,%00000100,0-28+16,19-32+17,16-28+16,-5-32+17,16-28+16,7-32+17)
    13 								
    14 4324 23 20 02 DF F4 EC + tabcan3cor		dta b(%00100011,%00100000,%00000010,-18-32+17,0-28+16,-5-32+17,-17-28+16,8-32+17,-17-28+16)
    15 432D 07 04 02 04 F4 EC + 				dta b(%00000111,%00000100,%00000010,19-32+17,0-28+16,-5-32+17,-17-28+16,8-32+17,-17-28+16)
    16 4336 38 20 10 DF F4 F9 + 				dta b(%00111000,%00100000,%00010000,-18-32+17,0-28+16,8-32+17,16-28+16,-5-32+17,16-28+16)
    17 433F 1C 04 10 04 F4 F9 + 				dta b(%00011100,%00000100,%00010000,19-32+17,0-28+16,8-32+17,16-28+16,-5-32+17,16-28+16)
    18 								
    19 4348 AA 7D 5E 4E 3F 2F + tabcankier		dta b($aa,$7d,$5e,$4e,$3f,$2f,$2f,$2f,$1f,$1f,$1f,$1f,$1f,$1f,$1f,0)	
    20 4358 D6 AA 8C 6D 6E 5E + 				dta b($d6,$aa,$8c,$6d,$6e,$5e,$4e,$3e,$3e,$3e,$2e,$2e,$2f,$2f,$2f,0)
    21 4368 E4 C8 AA 9C 7C 6D + 				dta b($e4,$c8,$aa,$9c,$7c,$6d,$6d,$5e,$4e,$4e,$4e,$3e,$3e,$3e,$3e,0)
    22 4378 E3 D6 C9 AA 9B 8C + 				dta b($e3,$d6,$c9,$aa,$9b,$8c,$7d,$6d,$6d,$5e,$5e,$4e,$4e,$4e,$4e,0)
    23 4388 E3 D5 C7 B9 AA 9B + 				dta b($e3,$d5,$c7,$b9,$aa,$9b,$8c,$8c,$7d,$6d,$6d,$5d,$5e,$5e,$4e,0)
    24 4398 E2 E4 D6 C8 B9 AA + 				dta b($e2,$e4,$d6,$c8,$b9,$aa,$9b,$9c,$8c,$7c,$7d,$6d,$6d,$6d,$5e,0)
    25 43A8 E2 E4 D6 D7 C8 B9 + 				dta b($e2,$e4,$d6,$d7,$c8,$b9,$aa,$9b,$9b,$8c,$8c,$7d,$7d,$6d,$6d,0)
    26 43B8 E2 E3 E5 D6 C8 C9 + 				dta b($e2,$e3,$e5,$d6,$c8,$c9,$b9,$aa,$ab,$9b,$8c,$8c,$7c,$7d,$7d,0)
    27 43C8 E1 E3 E4 D6 D7 C8 + 				dta b($e1,$e3,$e4,$d6,$d7,$c8,$b9,$b9,$aa,$ab,$9b,$9c,$8c,$8c,$7c,0)
    28 43D8 E1 E3 E4 E5 D6 C7 + 				dta b($e1,$e3,$e4,$e5,$d6,$c7,$c8,$b9,$ba,$aa,$ab,$9b,$9b,$8c,$8c,0)
    29 43E8 F1 E2 E4 E5 D6 D7 + 				dta b($f1,$e2,$e4,$e5,$d6,$d7,$c8,$c8,$b9,$ba,$aa,$ab,$9b,$9b,$8c,0)
    30 43F8 F1 E2 E3 E4 D5 D6 + 				dta b($f1,$e2,$e3,$e4,$d5,$d6,$d7,$c8,$c9,$b9,$ba,$aa,$ab,$9b,$9b,0)
    31 4408 F1 F2 E3 E4 E5 D6 + 				dta b($f1,$f2,$e3,$e4,$e5,$d6,$d7,$c7,$c8,$b9,$b9,$ba,$aa,$ab,$9b,0)
    32 4418 F1 F2 E3 E4 E5 D6 + 				dta b($f1,$f2,$e3,$e4,$e5,$d6,$d6,$d7,$c8,$c8,$b9,$b9,$ba,$aa,$ab,0)
    33 							
    34 = 4428			antyair1	equ *
    35 4428 A5 F0				lda startMapy
    36 442A F0 01				beq *+3
    37 442C 60					rts
    38
    39 442D CE 5A 19				dec antyairOpoznienie
    40 4430 F0 01				beq *+3
    41 4432 60					rts
    42 4433 A9 01 8D 5A 19			mva #1 antyairOpoznienie
    43 4438 A5 13				lda liczbaPociskow
    44 = 443B			maxPociskow1	equ *+1
    45 443A C9 FF				cmp #$ff
    46 443C 90 01				bcc *+3
    47 443E 60					rts
    48 443F AE 5B 19				ldx licznikBazyEkran
    49 4442 D0 01				bne *+3
    50 4444 60					rts
    51
    52 4445 20 E8 46				jsr wylosujbaze
    53 						
    54 4448 BC 01 01				ldy bazyEkran,x
    55 444B 88					dey
    56 444C B9 00 13				lda bazyRodzaj,y
    57 444F F0 03				beq @+		;baza typu A
    58 4451 4C 4C 45				jmp antB1
    59 						
    60 = 4454			@		equ *	;Baza typu A
    61 4454 A2 00				ldx #0	;nr cwiartki
    62
    63 4456 18					clc
    64 4457 B9 60 13				lda bazyY0,y
    65 445A 69 07				adc #7
    66 445C 0A 0A				:2 asl
    67 445E 85 FB				sta pom0d
    68 4460 38					sec
    69 4461 E5 E8				sbc movy0
    70 4463 38					sec
    71 4464 E9 43				sbc #67
    72 4466 10 04				bpl @+
    73 4468 A2 02				ldx #2
    74 446A 49 FF				eor #255
    75
    76 446C C9 44		@		cmp #68		;czy spelnia zakres
    77 446E 90 01				bcc @+
    78 4470 60					rts
    79 						
    80 4471 85 FD		@		sta pom0f
    81 4473 18					clc
    82 4474 B9 40 13				lda bazyX0,y
    83 4477 69 08				adc #8
    84 4479 0A 0A				:2 asl
    85 447B 85 FA				sta pom0c
    86 447D 38					sec
    87 447E E5 E7				sbc movx0
    88 4480 38					sec
    89 4481 E9 4F				sbc #79
    90 4483 10 03				bpl @+
    91 4485 E8					inx
    92 4486 49 FF				eor #255
    93 						
    94 4488 C9 4E		@		cmp #78		;czy spełnia zakres
    95 448A 90 01				bcc @+
    96 448C 60					rts
    97 						
    98 448D 85 FC		@		sta pom0e
    99 448F BD FC 42				lda tabcan3cor_ad,x		;pobieramy adres tablicy z korekcjami 3 działek dla danej cwiartki
   100 4492 AA					tax
   101 4493 B9 10 13				lda bazyStan,y
   102 4496 3D 24 43				and tabcan3cor,x		;porownaj z maską tych działek, sprawdzamy czy nie są wszystkie zestrzelone
   103 4499 D0 01				bne @+
   104 449B 60					rts			;brak tych działek
   105 						
   106 449C DD 25 43		@		cmp tabcan3cor+1,x
   107 449F F0 18				beq _bokA
   108 44A1 3D 25 43				and tabcan3cor+1,x		;czy jest pion i poziom?
   109 44A4 F0 35				beq _goradolA
   110 						
   111 44A6 A5 FD				lda pom0f
   112 44A8 C9 11				cmp #17
   113 44AA 90 0D				bcc _bokA
   114 44AC A5 FC				lda pom0e
   115 44AE C9 13				cmp #19
   116 44B0 90 29				bcc _goradolA
   117 						
   118 44B2 AD 0A D2				lda random		;są oba losujemy które mogą strzelac
   119 44B5 29 04				and #bit1
   120 44B7 F0 22				beq _goradolA
   121 						
   122 = 44B9			_bokA	equ *		;strzela boczne dzialko
   123 44B9 A5 FC				lda pom0e
   124 44BB C9 13				cmp #19
   125 44BD B0 01				bcs @+
   126 44BF 60					rts
   127 44C0 18			@		clc
   128 44C1 A5 FA				lda pom0c
   129 44C3 7D 27 43				adc tabcan3cor+3,x
   130 44C6 85 F8				sta pom0a		;pozycja X pocisku
   131 44C8 18					clc
   132 44C9 A5 FB				lda pom0d
   133 44CB 7D 28 43				adc tabcan3cor+4,x
   134 44CE 85 F9				sta pom0b		;pozycja Y pocisku
   135 44D0 A9 FF 85 80				mva #$ff pom
   136 44D4 A5 2C 85 82				mva kat2 pom1
   137 44D8 4C 44 46				jmp dodajPocisk
   138
   139 = 44DB			_goradolA	equ *		;strzelaja dzialka gorne lub dolne zaleznie od polozenia		
   140 44DB A5 FD				lda pom0f
   141 44DD C9 11				cmp #17
   142 44DF B0 01				bcs @+
   143 44E1 60					rts
   144 44E2 BD 24 43		@		lda tabcan3cor,x
   145 44E5 5D 25 43				eor tabcan3cor+1,x
   146 44E8 39 10 13				and bazyStan,y
   147 44EB DD 26 43				cmp tabcan3cor+2,x
   148 44EE 90 26				bcc _pierwszeA
   149 44F0 F0 3F				beq _drugieA
   150 							
   151 				;są oba
   152 44F2 A5 13		@		lda liczbaPociskow
   153 44F4 C5 57				cmp maxPociskow
   154 44F6 B0 17				bcs @+				;za malo dostepnych pociskow , strzela tylko 1 dzialko
   155 						
   156 44F8 A5 FC				lda pom0e
   157 44FA C9 11				cmp #17
   158 44FC B0 11				bcs @+			;jeśli statek jest daleko to strzela tylko 1 dzialko
   159 						
   160 44FE AD 0A D2				lda random			;czy maja strzelic oba naraz?
   161 4501 29 04				and #bit1
   162 4503 F0 0A				beq @+		
   163 4505 86 F7				stx pom0
   164 4507 20 16 45				jsr _pierwszeA		;strzelają oba
   165 450A A6 F7				ldx pom0
   166 450C 4C 31 45				jmp _drugieA
   167 						
   168 450F AD 0A D2		@		lda random 
   169 4512 29 04				and #bit1
   170 4514 F0 1B				beq _drugieA
   171 						
   172 = 4516			_pierwszeA	equ *		;strzela pierwsze
   173 4516 18					clc
   174 4517 A5 FA				lda pom0c
   175 4519 7D 29 43				adc tabcan3cor+5,x
   176 451C 85 F8				sta pom0a
   177 451E 18					clc
   178 451F A5 FB				lda pom0d
   179 4521 7D 2A 43				adc tabcan3cor+6,x
   180 4524 85 F9				sta pom0b
   181 4526 A5 2B 85 80				mva kat1 pom		;typ działka 
   182 452A A9 FF 85 82				mva #$ff pom1
   183 452E 4C 44 46				jmp dodajPocisk
   184 = 4531			_drugieA	equ *		;strzela drugie
   185 4531 18					clc
   186 4532 A5 FA				lda pom0c
   187 4534 7D 2B 43				adc tabcan3cor+7,x
   188 4537 85 F8				sta pom0a
   189 4539 18					clc
   190 453A A5 FB				lda pom0d
   191 453C 7D 2C 43				adc tabcan3cor+8,x
   192 453F 85 F9				sta pom0b
   193 4541 A5 2B 85 80				mva kat1 pom
   194 4545 A9 FF 85 82				mva #$ff pom1
   195 4549 4C 44 46				jmp dodajPocisk
   196 						
   197 						
   198 = 454C			antB1	equ *	
   199 454C A2 00				ldx #0	;nr cwiartki
   200
   201 454E 18					clc
   202 454F B9 60 13				lda bazyY0,y
   203 4552 69 08				adc #8
   204 4554 0A 0A				:2 asl
   205 4556 85 FB				sta pom0d
   206 4558 38					sec
   207 4559 E5 E8				sbc movy0
   208 455B 38					sec
   209 455C E9 46				sbc #70
   210 455E 10 04				bpl @+
   211 4560 A2 02				ldx #2
   212 4562 49 FF				eor #255
   213
   214 4564 C9 44		@		cmp #68		;czy spelnia zakres
   215 4566 90 01				bcc @+
   216 4568 60					rts
   217 						
   218 4569 85 FD		@		sta pom0f
   219 456B 18					clc
   220 456C B9 40 13				lda bazyX0,y
   221 456F 69 07				adc #7
   222 4571 0A 0A				:2 asl
   223 4573 85 FA				sta pom0c
   224 4575 38					sec
   225 4576 E5 E7				sbc movx0
   226 4578 38					sec
   227 4579 E9 4C				sbc #76
   228 457B 10 03				bpl @+
   229 457D E8					inx
   230 457E 49 FF				eor #255
   231 						
   232 4580 C9 4E		@		cmp #78		;czy spełnia zakres
   233 4582 90 01				bcc @+
   234 4584 60					rts
   235 						
   236 4585 85 FC		@		sta pom0e
   237 4587 BD FC 42				lda tabcan3cor_ad,x		;pobieramy adres tablicy z korekcjami 3 działek dla danej cwiartki
   238 458A AA					tax
   239 458B B9 10 13				lda bazyStan,y
   240 458E 3D 00 43				and tabcan3corB,x		;porownaj z maską tych działek, sprawdzamy czy nie są wszystkie zestrzelone
   241 4591 D0 01				bne @+
   242 4593 60					rts			;brak tych działek
   243 						
   244 4594 DD 01 43		@		cmp tabcan3corB+1,x
   245 4597 F0 18				beq _bokB
   246 4599 3D 01 43				and tabcan3corB+1,x		;czy jest pion i poziom?
   247 459C F0 35				beq _goradolB
   248 						
   249 459E A5 FC				lda pom0e
   250 45A0 C9 11				cmp #17
   251 45A2 90 0D				bcc _bokB
   252 						
   253 45A4 A5 FD				lda pom0f
   254 45A6 C9 13				cmp #19
   255 45A8 90 29				bcc _goradolB
   256 						
   257 45AA AD 0A D2				lda random		;są oba losujemy które mogą strzelac
   258 45AD 29 04				and #bit1
   259 45AF D0 22				bne _goradolB
   260 						
   261 = 45B1			_bokB	equ *		;strzela pojedyncze dzialko
   262 45B1 A5 FD				lda pom0f
   263 45B3 C9 13				cmp #19
   264 45B5 B0 01				bcs @+
   265 45B7 60					rts
   266 45B8 18			@		clc
   267 45B9 A5 FA				lda pom0c
   268 45BB 7D 03 43				adc tabcan3corB+3,x
   269 45BE 85 F8				sta pom0a		;pozycja X pocisku
   270 45C0 18					clc
   271 45C1 A5 FB				lda pom0d
   272 45C3 7D 04 43				adc tabcan3corB+4,x
   273 45C6 85 F9				sta pom0b		;pozycja Y pocisku
   274 45C8 A5 2B 85 80				mva kat1 pom
   275 45CC A9 FF 85 82				mva #$ff pom1
   276 45D0 4C 44 46				jmp dodajPocisk
   277
   278 = 45D3			_goradolB	equ *		;strzelaja dzialka podwojne 		
   279 45D3 A5 FC				lda pom0e
   280 45D5 C9 11				cmp #17
   281 45D7 B0 01				bcs @+
   282 45D9 60					rts
   283 45DA BD 00 43		@		lda tabcan3corB,x
   284 45DD 5D 01 43				eor tabcan3corB+1,x
   285 45E0 39 10 13				and bazyStan,y
   286 45E3 DD 02 43				cmp tabcan3corB+2,x
   287 45E6 90 26				bcc _pierwszeB
   288 45E8 F0 3F				beq _drugieB
   289 							
   290 				;są oba
   291 45EA A5 13		@		lda liczbaPociskow
   292 45EC C5 57				cmp maxPociskow
   293 45EE B0 17				bcs @+				;za malo dostepnych pociskow , strzela tylko 1 dzialko
   294 						
   295 45F0 A5 FD				lda pom0f
   296 45F2 C9 13				cmp #19
   297 45F4 B0 11				bcs @+			;jeśli statek jest daleko to strzela tylko 1 dzialko
   298 						
   299 45F6 AD 0A D2				lda random			;czy maja strzelic oba naraz?
   300 45F9 29 04				and #bit1
   301 45FB F0 0A				beq @+		
   302 45FD 86 F7				stx pom0
   303 45FF 20 0E 46				jsr _pierwszeB		;strzelają oba
   304 4602 A6 F7				ldx pom0
   305 4604 4C 29 46				jmp _drugieB
   306 						
   307 4607 AD 0A D2		@		lda random 
   308 460A 29 04				and #bit1
   309 460C F0 1B				beq _drugieB
   310 						
   311 = 460E			_pierwszeB	equ *		;strzela pierwsze
   312 460E 18					clc
   313 460F A5 FA				lda pom0c
   314 4611 7D 05 43				adc tabcan3corB+5,x
   315 4614 85 F8				sta pom0a
   316 4616 18					clc
   317 4617 A5 FB				lda pom0d
   318 4619 7D 06 43				adc tabcan3corB+6,x
   319 461C 85 F9				sta pom0b
   320 461E A9 FF 85 80				mva #$ff pom		;typ działka 
   321 4622 A5 2C 85 82				mva kat2 pom1
   322 4626 4C 44 46				jmp dodajPocisk
   323 = 4629			_drugieB	equ *		;strzela drugie
   324 4629 18					clc
   325 462A A5 FA				lda pom0c
   326 462C 7D 07 43				adc tabcan3corB+7,x
   327 462F 85 F8				sta pom0a
   328 4631 18					clc
   329 4632 A5 FB				lda pom0d
   330 4634 7D 08 43				adc tabcan3corB+8,x
   331 4637 85 F9				sta pom0b
   332 4639 A9 FF 85 80				mva #$ff pom
   333 463D A5 2C 85 82				mva kat2 pom1
   334 4641 4C 44 46				jmp dodajPocisk
   335 						
   336 						
   337 						
   338 						
   339 						
   340 = 4644			dodajPocisk	equ *
   341 4644 A4 57				ldy maxPociskow	;wybierz wolny pocisk
   342 4646 B9 0A 00		@		lda pociski,y
   343 4649 30 03				bmi @+
   344 464B 88					dey
   345 464C 10 F8				bpl @-
   346 						
   347 									
   348 464E A5 F8		@		lda pom0a
   349 4650 18					clc
   350 4651 E5 E7				sbc movx0
   351 4653 38					sec
   352 4654 E9 3F				sbc #63
   353 4656 99 C3 00				sta pociskiZnakX,y		;kierunek ruchu, <0 prawo, >0 lewo
   354 4659 18					clc
   355 465A 10 03				bpl @+
   356 465C 49 FF				eor #255
   357 465E 38					sec				;przy zmianie znaku +1
   358 465F 69 01		@		adc #1			;zaokrąglenie
   359 4661 C9 40				cmp #64
   360 4663 90 01				bcc @+
   361 4665 60					rts
   362 4666 4A 4A		@		:2 lsr
   363 4668 29 0F				and #%1111
   364 466A 85 55				sta pom0g
   365 						
   366 466C A5 F9				lda pom0b
   367 466E 38					sec
   368 466F E5 E8				sbc movy0
   369 4671 38					sec
   370 4672 E9 37				sbc #55
   371 4674 99 A4 14				sta pociskiZnakY,y
   372 4677 18					clc
   373 4678 10 03				bpl @+
   374 467A 49 FF				eor #255
   375 467C 38					sec
   376 467D 69 01		@		adc #1
   377 467F 29 3C				and #%00111100
   378 4681 C9 34				cmp #13*4
   379 4683 90 01				bcc @+
   380 4685 60					rts		;za daleko
   381 4686 0A 0A		@		:2 asl
   382 4688 05 55				ora pom0g
   383 						
   384 468A AA					tax						;odczyt prędkości poruszanie się pocisku w osi X i Y
   385 468B BD 48 43				lda tabcankier,x
   386 468E D0 01				bne @+					;jeśli zero to obiekt poza zasięgiem
   387 4690 60					rts
   388 4691 29 0F		@		and #%1111
   389 4693 C5 80				cmp pom
   390 4695 90 01				bcc @+
   391 4697 60					rts				;za duzy kat
   392 4698 0A 0A		@		:2 asl					;dodajemy 2 zera na koncu
   393 469A 99 98 14				sta pociskiPlusX,y
   394 						
   395 469D BD 48 43				lda tabcankier,x
   396 46A0 29 F0				and #%11110000
   397 46A2 C5 82				cmp pom1
   398 46A4 90 01				bcc @+
   399 46A6 60					rts
   400 46A7 4A 4A		@		:2 lsr					;2 bity dx/dy, 4 bity po przecinku, 2 puste bity
   401 46A9 99 9E 14				sta pociskiPlusY,y
   402 						
   403 						
   404 46AC A5 F8				lda pom0a	;ustalenie pozycji startowej pocisku
   405 				.if .def UC		
   406 46AE 4B 03				alr #%11
   407 				.else		
   408 						and #%11
   409 						lsr			;2 najmlodsze bity ustawiamy jako 2 najstasze
   410 				.endif		
   411 46B0 6A 6A				:2 ror
   412 46B2 99 80 14				sta pociskidx,y
   413 46B5 A5 F8				lda pom0a
   414 46B7 4A					lsr
   415 				.if .def UC
   416 46B8 4B FE				alr #$fe
   417 				.else		
   418 						lsr
   419 						clc
   420 				.endif 		
   421 46BA 65 E3				adc posX
   422 46BC 29 7F				and #127
   423 46BE 99 68 14				sta pociskiX,y
   424 						
   425 46C1 A5 F9				lda pom0b
   426 				.if .def UC		
   427 46C3 4B 03				alr #%11
   428 				.else		
   429 						and #%11
   430 						lsr
   431 				.endif		
   432 46C5 6A 6A				:2 ror
   433 46C7 99 8C 14				sta pociskidy,y
   434 46CA A5 F9				lda pom0b
   435 46CC 4A					lsr
   436 				.if .def UC
   437 46CD 4B FE				alr #$fe
   438 				.else		
   439 						lsr
   440 						clc
   441 				.endif		
   442 46CF 65 E4				adc posY
   443 46D1 99 74 14				sta pociskiY,y
   444 						
   445 46D4 A9 00 99 0A 00			mva #0 pociski,y			;zajęcie pocisku
   446 46D9 E6 13				inc liczbaPociskow	
   447 46DB AD F3 42 8D 5A 19			mva opoznieniePocisku antyairOpoznienie
   448 						;mva #12*2 sfx_antyair
   449 46E1 A0 00				ldy #fx_antyair
   450 46E3 A9 00				lda #0
   451 46E5 4C 50 71				jmp sfx.add_fx
   452 						
   453 						;rts
   454 						
   455 = 46E8			wylosujBaze	equ *
   456 46E8 E0 01				cpx #1
   457 46EA D0 02				bne @+
   458 46EC CA					dex
   459 46ED 60					rts		;dla 1=0
   460 46EE E0 02		@		cpx #2
   461 46F0 D0 08				bne @+
   462 46F2 AD 0A D2				lda random
   463 				.if .def UC
   464 46F5 4B 04				alr #4
   465 				.else
   466 						and #4
   467 						lsr
   468 				.endif		
   469 46F7 4A					lsr
   470 46F8 AA					tax
   471 46F9 60					rts
   472 46FA E0 04		@		cpx #4
   473 46FC D0 07				bne @+
   474 46FE AD 0A D2				lda random
   475 				.if .def UC
   476 4701 4B 06				alr #%110
   477 				.else		
   478 						and #%110
   479 						lsr
   480 				.endif		
   481 4703 AA					tax
   482 4704 60					rts
   483 4705 E0 08		@		cpx #8
   484 4707 D0 07				bne @+
   485 4709 AD 0A D2				lda random
   486 				.if .def UC
   487 470C 4B 0E				alr #%1110
   488 				.else		
   489 						and #%1110
   490 						lsr
   491 				.endif		
   492 470E AA					tax
   493 470F 60					rts
   494 						
   495 						
   496 4710 BD 1E 47		@		lda tabwyl1-3,x
   497 4713 85 F7				sta pom0
   498 						
   499 4715 A2 FF				ldx #255
   500 4717 AD 0A D2				lda random
   501 						
   502 471A 38					sec
   503 471B E8			@		inx
   504 471C E5 F7				sbc pom0
   505 471E B0 FB				bcs @-
   506 4720 60					rts
   507 						
   508 4721 55 00 33 2A 24	tabwyl1	dta b(85,0,51,42,36)	
   509
   510 						
   511 = 4726			movePociski1	equ *
   512 4726 A6 57				ldx maxPociskow
   513 4728 B5 0A		@		lda pociski,x
   514 472A 10 04				bpl @+
   515 = 472C			movepnext1	equ *
   516 472C CA					dex
   517 472D 10 F9				bpl @-
   518 472F 60					rts
   519 						
   520 4730 B5 C3		@		lda pociskiZnakX,x
   521 4732 10 17				bpl @+
   522 4734 18					clc
   523 4735 BD 80 14				lda pociskiDX,x
   524 4738 7D 98 14				adc pociskiPlusX,x
   525 473B 9D 80 14				sta pociskiDX,x
   526 473E BD 68 14				lda pociskiX,x
   527 4741 69 00				adc #0
   528 4743 29 7F				and #127
   529 4745 9D 68 14				sta pociskiX,x
   530 4748 4C 5F 47				jmp @+1
   531
   532 						
   533 474B 38			@		sec
   534 474C BD 80 14				lda pociskiDX,x
   535 474F FD 98 14				sbc pociskiPlusX,x
   536 4752 9D 80 14				sta pociskiDX,x
   537 4755 BD 68 14				lda pociskiX,x
   538 4758 E9 00				sbc #0
   539 475A 29 7F				and #127
   540 475C 9D 68 14				sta pociskiX,x
   541 					
   542 475F BD A4 14		@		lda pociskiZnakY,x
   543 4762 10 12				bpl @+1
   544 4764 18					clc
   545 4765 BD 8C 14				lda pociskiDY,x
   546 4768 7D 9E 14				adc pociskiPlusY,x
   547 476B 9D 8C 14				sta pociskiDY,x
   548 476E 90 BC				bcc movepnext1
   549 4770 FE 74 14				inc pociskiY,x
   550 4773 4C 2C 47		@		jmp movepnext1
   551 						
   552 4776 38			@		sec
   553 4777 BD 8C 14				lda pociskiDY,x
   554 477A FD 9E 14				sbc pociskiPlusY,x
   555 477D 9D 8C 14				sta pociskiDY,x
   556 4780 B0 AA				bcs movepnext1
   557 4782 DE 74 14				dec pociskiY,x
   558 						
   559 4785 4C 2C 47		@		jmp movepnext1
   560
   561 4788 45 46 47 48 49	pociskiCharTab	:5 dta b(firstPociskChar+#)
   562 478D 28 30 38 40 48	pociskiAdTab	:5 dta b(<(znaki1+(firstPociskChar+#)*8))
   563 4792 DA DA DA DA DA					:5 dta b(>(znaki1+(firstPociskChar+#)*8))
   564
   565 				;rysuj pociski
   566 = 4797			printPociski	equ *
   567 4797 A6 57				ldx maxPociskow
   568 = 4799			proc_next1	equ *
   569 4799 B5 0A				lda pociski,x
   570 479B 10 04				bpl @+
   571 = 479D			poc_next	equ *
   572 479D CA					dex
   573 479E 10 F9				bpl proc_next1
   574 47A0 60					rts
   575 						
   576 47A1 38			@		sec
   577 47A2 BD 74 14				lda pociskiY,x
   578 47A5 E5 E4				sbc posY
   579 47A7 C9 1D				cmp #29
   580 47A9 90 08				bcc @+
   581 47AB D6 0A				dec pociski,x		;0-1 = 255
   582 47AD C6 13				dec liczbaPociskow
   583 47AF CA					dex
   584 47B0 10 E7				bpl proc_next1
   585 47B2 60					rts
   586 						
   587 47B3 9D 7A 14		@		sta pociskiY0,x	
   588 47B6 A8					tay
   589 47B7 0A 0A				:2 asl
   590 47B9 85 FA				sta pom0c
   591 						
   592 47BB B1 88				lda (screenL),y
   593 47BD 85 82				sta pom1
   594 47BF B1 8A				lda (screenH),y
   595 47C1 85 83				sta pom1+1	
   596 							
   597 47C3 BD 68 14				lda pociskiX,x
   598 47C6 38					sec
   599 47C7 E5 E3				sbc posX
   600 47C9 A8					tay
   601 47CA B9 00 1A				lda tabX,y
   602 47CD C9 21				cmp #33
   603 47CF 90 08				bcc @+
   604 47D1 D6 0A				dec pociski,x
   605 47D3 C6 13				dec liczbaPociskow
   606 47D5 CA					dex
   607 47D6 10 C1				bpl proc_next1
   608 47D8 60					rts
   609 						
   610 47D9 9D 6E 14		@		sta pociskiX0,x
   611 47DC A8					tay
   612 47DD 0A 0A				:2 asl
   613 47DF 85 F9				sta pom0b
   614 						
   615 47E1 B1 82				lda (pom1),y
   616 47E3 85 F7				sta pom0
   617 47E5 29 80				and #128
   618 47E7 1D 88 47				ora pociskiCharTab,x
   619 47EA 91 82				sta (pom1),y
   620 						
   621 47EC BD 8D 47				lda pociskiAdTab,x		;adres znaku pocisku
   622 47EF 85 80				sta pom
   623 47F1 BD 92 47				lda pociskiAdTab+5,x
   624 47F4 05 59				ora ramka4
   625 47F6 85 81				sta pom+1
   626 						
   627 47F8 A5 F7				lda pom0
   628 47FA 29 7F				and #127
   629 47FC 95 BE				sta pociskiTlo,x
   630
   631 47FE A8			@		tay
   632 47FF B9 00 F6				lda adresZnakL,y			;adres znaku pod pociskiem,tlo
   633 4802 85 82				sta pom1
   634 4804 B9 00 F7				lda adresZnakH,y
   635 4807 05 59				ora ramka4
   636 4809 85 83				sta pom1+1
   637 								
   638 480B BD 8C 14				lda pociskiDY,x
   639 480E 29 C0				and #%11000000
   640 4810 0A					asl
   641 4811 2A 2A				:2 rol
   642
   643 4813 A8					tay
   644 4814 05 FA				ora pom0c
   645 4816 9D 92 14				sta pociskiDY0,x
   646 4819 B9 3E 48				lda pociskiSkokL,y		;skok do procedury rysowania
   647 481C 8D 3C 48				sta _pociskiJump+1
   648 481F B9 42 48				lda pociskiSkokH,y
   649 4822 8D 3D 48				sta _pociskiJump+2
   650 						
   651 4825 BD 80 14		@		lda pociskiDX,x
   652 4828 4A 4A 4A 4A 4A			:5 lsr
   653 						
   654 482D A8					tay
   655 482E 4A					lsr
   656 482F 05 F9				ora pom0b
   657 4831 9D 86 14				sta pociskiDX0,x
   658 						
   659 4834 B9 F4 42				lda pociskiOra,y
   660 4837 85 F8				sta pom0a	;ora dla ksztaltu pocisku
   661
   662 4839 A0 07				ldy #7
   663 = 483B			_pociskiJump	equ *
   664 483B 4C FF FF				jmp $ffff			;w procedurach rysowania należy wpisać-> jmp poc_next, wtedy tutaj moze byc jmp zamiast jsr (+6cykli)
   665
   666
   667 483E 46 56 6A 7E		pociskiSkokL	dta b(<pociskiDY00),b(<pociskiDY2),b(<pociskiDY4),b(<pociskiDY6)
   668 4842 48 48 48 48		pociskiSkokH	dta b(>pociskiDY00),b(>pociskiDY2),b(>pociskiDY4),b(>pociskiDY6)
   669 								
   670 = 4846			pociskiDY00	equ *		
   671 4846 B1 82		@		lda (pom1),y
   672 4848 C0 03				cpy #3
   673 484A B0 02				bcs *+4
   674 484C 45 F8				eor pom0a
   675 484E 91 80				sta (pom),y
   676 4850 88					dey
   677 4851 10 F3				bpl @-
   678 						
   679 4853 4C 9D 47				jmp poc_next	
   680 						
   681 = 4856			pociskiDY2	equ *
   682 4856 B1 82		@		lda (pom1),y
   683 4858 C0 04				cpy #4
   684 485A B0 06				bcs *+8
   685 485C C0 02				cpy #2
   686 485E 90 02				bcc *+4
   687 4860 45 F8				eor pom0a
   688 4862 91 80				sta (pom),y
   689 4864 88					dey
   690 4865 10 EF				bpl @-
   691
   692 4867 4C 9D 47				jmp poc_next
   693 					
   694 = 486A			pociskiDY4	equ *
   695 486A B1 82		@		lda (pom1),y
   696 486C C0 06				cpy #6
   697 486E B0 06				bcs *+8
   698 4870 C0 03				cpy #3
   699 4872 90 02				bcc *+4
   700 4874 45 F8				eor pom0a
   701 4876 91 80				sta (pom),y
   702 4878 88					dey
   703 4879 10 EF				bpl @-
   704
   705 487B 4C 9D 47				jmp poc_next
   706 						
   707 = 487E			pociskiDY6	equ *
   708 487E B1 82		@		lda (pom1),y
   709 4880 C0 06				cpy #6
   710 4882 90 02				bcc *+4
   711 4884 45 F8				eor pom0a
   712 4886 91 80				sta (pom),y
   713 4888 88					dey
   714 4889 10 F3				bpl @-
   715 						
   716 488B 4C 9D 47				jmp poc_next	
   577 							
   578 488E						icl 'wybuch.asm'
Source: wybuch.asm
     1 = 0020			maxWybuchow 	equ 32
     2
     3 = 488E			dodajMalyWybuch	equ *
     4 488E 84 55				sty pom0g	;zapamietaj g
     5 4890 AC 9C 01				ldy mwybuchyStop
     6 						
     7 4893 BD 80 13				lda rakietyX,x
     8 4896 99 A8 13				sta mwybuchyX,y
     9 4899 BD 90 13				lda rakietyY,x
    10 489C 99 B0 13				sta mwybuchyY,y
    11 489F A9 06 99 B8 13			mva #6 mwybuchyLicznik,y	
    12 48A4 BD 78 13				lda rakietyTyp,x
    13 48A7 4A					lsr ;podziel przez 2
    14 48A8 99 60 14				sta mwybuchyTyp,y
    15 48AB C8					iny
    16 48AC 98					tya
    17 48AD 29 07				and #%111		;max 16 wybuchy
    18 48AF 8D 9C 01				sta mwybuchyStop
    19 						
    20 48B2 A4 55				ldy pom0g
    21 48B4 60					rts
    22 						
    23 = 48B5			rysujmWybuchy	equ *
    24 48B5 AD 9B 01				lda mwybuchyStart
    25 48B8 29 07				and #%111
    26 48BA AA					tax
    27 48BB CD 9C 01				cmp mwybuchyStop
    28 48BE D0 01				bne mrwy1
    29 48C0 60					rts
    30 						
    31 48C1 BD A8 13		mrwy1	lda mwybuchyX,x
    32 48C4 38					sec
    33 48C5 E5 E3				sbc posX
    34 48C7 A8					tay
    35 48C8 B9 00 1A				lda tabX,y
    36 48CB 18					clc
    37 48CC 69 01				adc #1
    38 48CE C9 22				cmp #34
    39 48D0 B0 50				bcs mrwy2
    40 						
    41 48D2 69 07				adc #7
    42 48D4 85 F7				sta pom0
    43 						
    44 48D6 38					sec
    45 48D7 BD B0 13				lda mwybuchyY,x
    46 48DA E5 E4				sbc posY
    47 48DC 18					clc
    48 48DD 69 01				adc #1
    49 48DF C9 1E				cmp #lenDlist+1
    50 48E1 B0 3F				bcs mrwy2
    51 						
    52 48E3 A8					tay
    53 						
    54 48E4 A5 EB				lda ramka
    55 48E6 D0 11				bne @+
    56 						
    57 48E8 18					clc
    58 48E9 B9 07 17				lda obraz1La+7,y
    59 48EC 65 F7				adc pom0
    60 48EE 85 80				sta pom
    61 48F0 B9 2C 17				lda obraz1Ha+7,y
    62 48F3 69 00				adc #0
    63 48F5 85 81				sta pom+1
    64 48F7 D0 0F				bne @+1	;skok bezwarunkowy
    65 48F9 18			@		clc
    66 48FA B9 51 17				lda obraz2La+7,y
    67 48FD 65 F7				adc pom0
    68 48FF 85 80				sta pom
    69 4901 B9 76 17				lda obraz2Ha+7,y
    70 4904 69 00				adc #0
    71 4906 85 81				sta pom+1
    72 						
    73 4908 BD 60 14		@		lda mwybuchyTyp,x
    74 490B D0 0C				bne @+
    75 						
    76 490D A0 00				ldy #0
    77 490F A9 3F				lda #firstMalyWybuchChar
    78 4911 91 80				sta (pom),y
    79 4913 A0 30				ldy #48
    80 4915 91 80				sta (pom),y
    81 4917 D0 09				bne mrwy2
    82 						
    83 4919 A0 00		@		ldy #0
    84 491B A9 40				lda #firstMalyWybuchChar+1
    85 491D 91 80				sta (pom),y
    86 491F C8					iny
    87 4920 91 80				sta (pom),y
    88 						
    89 4922 DE B8 13		mrwy2	dec mwybuchyLicznik,x
    90 4925 D0 03				bne @+
    91 4927 EE 9B 01				inc mwybuchyStart	
    92 						
    93 492A E8			@		inx
    94 				.if .def UC
    95 492B A9 07				lda #%111
    96 492D CB 00				sbx #0
    97 				.else		
    98 						txa 
    99 						and #%111
   100 						tax
   101 				.endif		
   102 492F EC 9C 01				cpx mwybuchyStop
   103 4932 D0 8D				jne mrwy1
   104 						
   105 4934 60					rts
   106
   107 				;dodaje wybuch
   108 = 4935			dodajWybuch		equ *		;X w Aku , Y w y
   109 4935 8E 4F 49				stx bufwyb+1
   110 						
   111 4938 AE 9A 01				ldx wybuchyStop
   112 493B 9D 00 14				sta wybuchyX,x
   113 493E 98					tya
   114 493F 9D 20 14				sta wybuchyY,x
   115 4942 A9 00 9D 40 14			mva #0 wybuchyLicznik,x
   116 4947 E8					inx
   117 4948 8A					txa
   118 4949 29 1F				and #%11111		;max 32 wybuchy
   119 494B 8D 9A 01				sta wybuchyStop
   120 = 494E			bufwyb	equ *		
   121 494E A2 00				ldx #0
   122 4950 60					rts
   123 						
   124 						
   125 				;rysuje duze wybuchy		
   126 = 4951			rysujWybuchy	equ *
   127 4951 AD 99 01				lda wybuchyStart
   128 4954 29 1F				and #%11111
   129 4956 AA					tax
   130 4957 CD 9A 01				cmp wybuchyStop
   131 495A D0 01				bne rwy1
   132 495C 60					rts
   133
   134 495D BD 00 14		rwy1	lda wybuchyX,x
   135 4960 38					sec
   136 4961 E5 E3				sbc posX
   137 4963 A8					tay
   138 4964 B9 00 1A				lda tabX,y
   139 4967 9D C0 13				sta wybuchyX0,x
   140 496A 18					clc
   141 496B 69 01				adc #1
   142 496D C9 22				cmp #34
   143 496F B0 57				bcs rwy2
   144 						
   145 4971 69 07				adc #7
   146 4973 85 F7				sta pom0		;pozycja X
   147 						
   148 4975 38					sec
   149 4976 BD 20 14				lda wybuchyY,x
   150 4979 E5 E4				sbc posY
   151 497B 9D E0 13				sta wybuchyY0,x
   152 497E 18					clc
   153 497F 69 01				adc #1
   154 4981 C9 1E				cmp #lenDlist+1
   155 4983 B0 43				bcs rwy2
   156 						
   157 4985 A8					tay
   158 						
   159 4986 A5 EB				lda ramka
   160 4988 D0 11				bne @+
   161 						
   162 498A 18					clc
   163 498B B9 07 17				lda obraz1La+7,y
   164 498E 65 F7				adc pom0
   165 4990 85 80				sta pom
   166 4992 B9 2C 17				lda obraz1Ha+7,y
   167 4995 69 00				adc #0
   168 4997 85 81				sta pom+1
   169 4999 D0 0F				bne @+1	;skok bezwarunkowy
   170 499B 18			@		clc
   171 499C B9 51 17				lda obraz2La+7,y
   172 499F 65 F7				adc pom0
   173 49A1 85 80				sta pom
   174 49A3 B9 76 17				lda obraz2Ha+7,y
   175 49A6 69 00				adc #0
   176 49A8 85 81				sta pom+1
   177 						
   178 49AA BD 40 14		@		lda wybuchyLicznik,x
   179 49AD 29 FC				and #%11111100
   180 						
   181 49AF 18					clc
   182 49B0 69 AF				adc #firstWybuchChar+128
   183 						
   184 49B2 A0 00				ldy #0
   185 49B4 91 80				sta (pom),y
   186 49B6 A0 30				ldy #48
   187 49B8 69 01				adc #1
   188 49BA 91 80				sta (pom),y
   189 49BC A0 01				ldy #1
   190 49BE 69 01				adc #1
   191 49C0 91 80				sta (pom),y
   192 49C2 A0 31				ldy #49
   193 49C4 69 01				adc #1
   194 49C6 91 80				sta (pom),y
   195 						
   196 49C8 BD 40 14		rwy2	lda wybuchyLicznik,x
   197 49CB 18					clc
   198 49CC 69 02				adc #2		;3
   199 49CE C9 0F				cmp #15		;20
   200 49D0 90 03				bcc @+
   201 49D2 EE 99 01				inc wybuchyStart
   202 						
   203 49D5 9D 40 14		@		sta wybuchyLicznik,x
   204 49D8 E8					inx
   205 				.if .def UC
   206 49D9 A9 1F				lda #%11111
   207 49DB CB 00				sbx #0
   208 				.else		
   209 						txa
   210 						and #%11111
   211 						tax
   212 				.endif		
   213 49DD EC 9A 01				cpx wybuchyStop		;czykoniec?
   214 49E0 F0 03 4C 5D 49			jne rwy1
   215 						
   216 49E5 60					rts
   217
   218 						
   219
   220 						
   221 						
   222 						
   579 49E6						icl 'time.asm'
Source: time.asm
     1 49E6 00			punkty	dta b(0)	
     2 49E7 0A			punkty1	dta b(10)
     3 49E8 03			punkty2	dta b(opoznienieRed)
     4 49E9 07			punkty3	dta b(opoznienieCondition)
     5
     6 49EA 00			speedEnemy0	dta b(0)
     7 49EB 14 13 12 12 11	timeBonus	dta b(20),b(19),(18),b(18),b(17)
     8 = 0001			kondycja_start	equ 1
     9 49F0 0F 0D 0B 09 09	conYellow		dta b(15),b(13),b(11),b(9),b(9)
    10 49F5 11 10 0F 0E 0C	con1enemy		dta b(17),b(16),b(15),b(14),b(12)
    11 49FA 20 1D 1B 1A 19	con2enemy		dta b(32),b(29),b(27),b(26),b(25)
    12 49FF 4A 3B 2C 21 1A	con3enemy		dta b(74),b(59),b(44),b(33),b(26)
    13 4A04 88 7E 77 74 6F	spyend			dta b(136),b(126),b(119),b(116),b(111)
    14 4A09 95 8B 85 7F 7B	conred			dta b(149),b(139),b(133),b(127),b(123)
    15 4A0E 99 8F 89 83 7F	con45enemy		dta b(153),b(143),b(137),b(131),b(127)
    16 4A13 F0 F0 F0 E6 E6	conUpSpeed		dta b(240),b(240),b(240),b(230),b(230)
    17 = 0003			opoznienieRed	equ 3
    18 = 0007			opoznienieCondition	equ 7		;50/2/7=3.5
    19
    20 				;zdarzenia czasowe
    21 = 4A18			timeEvents	equ *
    22 4A18 CE E6 49				dec punkty		;mryganie "1UP"
    23 4A1B D0 0D				bne @+
    24 4A1D A9 05 8D E6 49			mva #5 punkty
    25 4A22 AD 8B 23				lda kolor1up
    26 4A25 49 8A				eor #kolor1ups
    27 4A27 8D 8B 23				sta kolor1up
    28
    29 						
    30 = 4A2A			@		equ *
    31 4A2A CE E7 49				dec punkty1		;mryganie gwiazd
    32 4A2D D0 0F				bne @+
    33 4A2F A9 0A 8D E7 49			mva #10 punkty1
    34 4A34 CE 5D 19				dec gwiazdyLicznik
    35 4A37 10 05				bpl @+
    36 4A39 A9 02 8D 5D 19			mva #2 gwiazdyLicznik		
    37 = 4A3E			@		equ *	
    38 						
    39 4A3E A5 16				lda trafienie
    40 4A40 05 F0				ora startMapy
    41 4A42 05 0F				ora formacja_stan		;formacja_stan musi byc =0
    42 4A44 F0 01				beq *+3
    43 4A46 60					rts
    44 						
    45 					
    46 4A47 AE 7F 19				ldx timeLevel		;poziom trudnosci
    47 4A4A CE E9 49				dec punkty3
    48 4A4D F0 03 4C DB 4A			jne kmryg
    49 4A52 A9 07 8D E9 49			mva #opoznienieCondition punkty3
    50 4A57 A5 BD				lda kondycja		;ustawiamy kondycje
    51 4A59 D0 03 4C E4 4A			jeq kmryg1
    52 4A5E E6 BD				inc kondycja
    53 4A60 C9 01				cmp #1
    54 4A62 D0 0D				bne @+
    55 4A64 A9 00 85 1B				mva #0 max_Enemy
    56 4A68 A8					tay	;0
    57 4A69 AD EA 49 85 EF			mva speedEnemy0 speedEnemy	
    58 4A6E 4C A8 6E				jmp setCondition
    59 						
    60 4A71 DD F0 49		@		cmp conYellow,x
    61 4A74 D0 05				bne @+
    62 						
    63 4A76 A9 01				lda #1
    64 4A78 4C 2F 22				jmp set_sample		;a=1 -> alarm
    65 						
    66 4A7B DD F5 49		@		cmp con1enemy,x
    67 4A7E D0 07				bne @+
    68 4A80 A0 01 84 1B				mvy #1 max_Enemy
    69 4A84 4C A8 6E				jmp setCondition
    70 						
    71 4A87 DD FA 49		@		cmp con2enemy,x
    72 4A8A D0 05				bne @+
    73 4A8C A9 02 85 1B				mva #2 max_Enemy
    74 4A90 60					rts
    75 						
    76 4A91 DD FF 49		@		cmp con3enemy,x
    77 4A94 D0 05				bne @+
    78 4A96 A9 03 85 1B				mva #3 max_Enemy
    79 4A9A 60					rts
    80 						
    81 4A9B DD 09 4A		@		cmp conred,x
    82 4A9E D0 08				bne @+	
    83 						
    84 						
    85 4AA0 A9 04				lda #4
    86 4AA2 20 2F 22				jsr set_sample		
    87 						
    88 						
    89 						;ldy #2		;sampel conred 2x
    90 						;jsr setCondition
    91 4AA5 4C DB 4A				jmp kmryg
    92 						
    93 4AA8 DD 0E 4A		@		cmp con45enemy,x
    94 4AAB D0 1E				bne @+
    95 4AAD A0 02				ldy #2
    96 4AAF 20 A8 6E				jsr setCondition
    97 4AB2 A9 09 8D 48 19			mva #9 rotate_speed1
    98 4AB7 A9 06 8D 4A 19			mva #6 rotate_speed2
    99 4ABC A9 05 85 1B				mva #5 max_Enemy
   100 4AC0 A9 08 8D 45 19			mva #8 opoz_denemy
   101 4AC5 8D 6B 19				sta dlicz1
   102 4AC8 4C DB 4A				jmp kmryg
   103 						
   104 4ACB DD 13 4A		@		cmp conUpSpeed,x
   105 4ACE D0 0B				bne kmryg
   106 4AD0 A9 E0 85 EF				mva #7*32 speedEnemy		;max speed
   107 4AD4 A9 00 85 BD				mva #0 kondycja
   108 4AD8 4C E4 4A				jmp kmryg1
   109 						
   110
   111 = 4ADB			kmryg		equ *
   112 						
   113 4ADB A5 BD				lda kondycja				;mryganie
   114 4ADD F0 05				beq kmryg1
   115 4ADF DD 09 4A				cmp conred,x
   116 4AE2 90 1A				bcc @+	
   117 4AE4 A5 0F		kmryg1	lda formacja_stan
   118 4AE6 D0 16				bne @+
   119 4AE8 CE E8 49				dec punkty2
   120 4AEB D0 11				bne @+
   121 4AED A9 03 8D E8 49			mva #opoznienieRed punkty2
   122 4AF2 AD 48 24				lda conditionColor
   123 4AF5 4D 42 18				eor conditionC+2
   124 4AF8 8D 48 24				sta conditionColor
   125 4AFB 8D 50 24				sta conditionColor1
   126 = 4AFE			@		equ *
   127
   128 4AFE 60					rts
   129
   130 4AFF 00			opoz_denemy1	dta b(0)
   131 						
   132 				;po zbiciu bazy zmniejsz kondycję o ustalona wartośc i ustaw odpowiedni stan kondycji (green,yellow,red)
   133 = 4B00			zmniejszKondycja	equ *
   134 4B00 AE 7F 19				ldx timeLevel
   135 4B03 A5 BD				lda kondycja
   136 4B05 DD 09 4A				cmp conRed,x
   137 4B08 90 27				bcc zmKondycja1
   138 						
   139 4B0A BD FA 49				lda con2enemy,x
   140 4B0D 85 BD				sta kondycja
   141 4B0F AD EA 49 85 EF			mva speedEnemy0 speedEnemy	;=yellow po red
   142 4B14 AD FF 4A 8D 45 19			mva opoz_denemy1 opoz_denemy
   143 4B1A AD 49 19 8D 48 19			mva rotate_speed1d rotate_speed1
   144 4B20 AD 4B 19 8D 4A 19			mva rotate_speed2d rotate_speed2
   145 4B26 AD 46 19 8D FF 18			mva opoz_dlosuj losuj1
   146 4B2C A0 01				ldy #1			;ustaw yellow
   147 4B2E 4C A8 6E				jmp setCondition
   148
   149 = 4B31			zmKondycja1	equ *	
   150 4B31 38					sec
   151 4B32 A5 BD				lda kondycja
   152 4B34 D0 02				bne @+
   153 4B36 A9 FF				lda #255
   154 4B38 AE 7F 19		@		ldx timeLevel
   155 4B3B FD EB 49				sbc timeBonus,x
   156 4B3E F0 02				beq @+	;jesli zero, lub <0 to ustaw kondycja_start
   157 4B40 B0 05				bcs @+1	
   158 4B42 A9 02		@		lda #kondycja_start+1	
   159 4B44 85 BD				sta kondycja
   160 4B46 60					rts
   161
   162 4B47 85 BD		@		sta kondycja
   163 4B49 DD F0 49				cmp conYellow,x
   164 4B4C D0 03				bne zm1
   165 4B4E E6 BD				inc kondycja	;nie wlaczaj sampla
   166 4B50 60					rts				;=yellow
   167 4B51 B0 07		zm1		bcs @+
   168 						
   169 4B53 A0 00 84 1B				mvy #0 max_Enemy		;<yellow, czyli green
   170 4B57 4C A8 6E				jmp setCondition		;ustaw green
   171 						
   172 4B5A DD F5 49		@		cmp con1enemy,x
   173 4B5D D0 01				bne *+3
   174 4B5F 60					rts 
   175 4B60 B0 01				bcs @+
   176 						
   177 4B62 60					rts		;<con1enemy
   178 						
   179 4B63 DD FA 49		@		cmp con2enemy,x
   180 4B66 D0 01				bne *+3
   181 4B68 60					rts		;=con2enemy
   182 4B69 B0 05				bcs @+
   183 						
   184 4B6B A9 01 85 1B				mva #1 max_Enemy
   185 4B6F 60					rts		;<con2enemy czyli = con1enemy
   186 						
   187 4B70 DD FF 49		@		cmp con3enemy,x
   188 4B73 D0 01				bne *+3
   189 4B75 60					rts
   190 4B76 B0 05				bcs @+
   191 						
   192 4B78 A0 02				ldy #2
   193 4B7A 84 1B				sty max_Enemy	;<con3enemy, czyli con2enemy
   194 4B7C 60					rts
   195 						
   196 4B7D 60			@		rts
   197 						
   198
   199 4B7E 00 D0 B0 80 30 00	panelTab	.he 00,d0,b0,80,30,00
   200
   201 = 4B84			schowaj_duszki	equ *	
   202 4B84 A9 F8				lda #>SPRITES1
   203 4B86 8D 07 D4				sta PMBASE
   204 4B89 A9 02 8D 15 D0			mva #$02 COLPM+3		;szare tlo panelu
   205 						
   206 4B8E A9 00				lda #0
   207 4B90 A2 03				ldx #3
   208 4B92 9D 04 D0		@		sta HPOSM,x
   209 4B95 CA					dex
   210 4B96 10 FA				bpl @-
   211 						
   212 						
   213 4B98 A9 B8				lda #pozWyniki+7		;kolor i pozycja duszka na panelu
   214 4B9A 8D 02 D0				sta HPOSP+2
   215 4B9D A9 01 8D 0A D0			mva #1 SIZEP+2
   216 						
   217 4BA2 A9 6C				lda #108		;statek srodek 108
   218 4BA4 8D 00 D0				sta HPOSP
   219 4BA7 8D 01 D0				sta HPOSP+1
   220 4BAA A9 5A 8D 12 D0			mva #ColorShip COLPM
   221 4BAF A9 F6 8D 13 D0			mva #$f6 COLPM+1
   222 						
   223 4BB4 A6 24				ldx rodzajSpeech
   224 4BB6 D0 01				bne @+
   225 4BB8 60					rts
   226 						
   227 4BB9 BD 7E 4B		@		lda panelTab,x
   228 4BBC 85 25				sta kolorPanel
   229 4BBE E0 01				cpx #1		;alarm!alarm!
   230 4BC0 D0 06				bne @+
   231 						
   232 4BC2 20 F6 4B				jsr picAlarm
   233 4BC5 4C 02 4C				jmp picEnemy
   234
   235 						
   236 4BC8 E0 05		@	    cpx #5		;gameover
   237 4BCA D0 06				bne @+
   238 						
   239 4BCC 20 DF 4B				jsr clrAlarm
   240
   241 4BCF 4C 1A 4C				jmp picSkull
   242 					
   243 4BD2 E0 02		@		cpx #2	;spy!
   244 4BD4 D0 03				bne @+
   245 						
   246 4BD6 4C 29 4C				jmp picSpy
   247
   248 								
   249 4BD9 20 F6 4B		@		jsr picAlarm
   250 4BDC 4C EA 4B				jmp picFormation
   251
   252 = 4BDF			clrAlarm	equ *
   253 4BDF A9 00				lda #0
   254 4BE1 A2 1A				ldx #26
   255 4BE3 9D 30 FE		@		sta sprites1+$630,x
   256 4BE6 CA					dex
   257 4BE7 10 FA				bpl @-
   258
   259 4BE9 60					rts
   260 						
   261 = 4BEA			picFormation	equ *
   262 4BEA A2 4E				ldx #78
   263 4BEC BD D7 4C		@		lda formationShape,x
   264 4BEF 9D 70 FE				sta sprites1+$670,x
   265 4BF2 CA					dex
   266 4BF3 10 F7				bpl @-
   267
   268 4BF5 60					rts
   269 = 4BF6			picAlarm	equ *
   270 4BF6 A2 1A				ldx #26
   271 4BF8 BD AF 4C		@		lda alarmShape,x
   272 4BFB 9D 30 FE				sta sprites1+$630,x
   273 4BFE CA					dex
   274 4BFF 10 F7				bpl @-
   275 						
   276 4C01 60					rts
   277 						
   278 = 4C02			picEnemy	equ *
   279 4C02 A0 0C				ldy #12
   280 4C04 A2 30				ldx #12*4
   281 4C06 B9 CA 4C		@		lda enemyShape,y
   282 4C09 9D 80 FE				sta sprites1+$670+$10,x
   283 4C0C 9D 81 FE				sta sprites1+$671+$10,x
   284 4C0F 9D 82 FE				sta sprites1+$672+$10,x
   285 				.if .def UC
   286 4C12 A9 FF				lda #$ff
   287 4C14 CB 04				sbx #4
   288 				.else		
   289 						dex
   290 						dex
   291 						dex
   292 						dex
   293 				.endif		
   294 4C16 88					dey
   295 4C17 10 ED				bpl	@-
   296 						
   297 4C19 60					rts
   298 						
   299 = 4C1A			picSkull	equ *
   300 4C1A 20 3F 4D				jsr clr_banner
   301
   302 4C1D A2 46				ldx #70
   303 4C1F BD 68 4C		@		lda skullShape,x
   304 4C22 9D 60 FE				sta sprites1+$660,x
   305 4C25 CA					dex
   306 4C26 10 F7				bpl @-
   307 						
   308 4C28 60					rts
   309 						
   310 						
   311 = 4C29			picSpy		equ *
   312 4C29 A2 32				ldx #50
   313 4C2B BD 35 4C		@		lda spyShape,x
   314 4C2E 9D 80 FE				sta sprites1+$680,x
   315 4C31 CA					dex
   316 4C32 10 F7				bpl @-
   317 						
   318 						
   319 4C34 60					rts
   320
   321
   322 = 4C35			spyShape	equ *
   323 4C35 08 08				:2 dta b(%00001000)
   324 4C37 00					dta b(0)
   325 4C38 08					dta b(%00001000)
   326 4C39 1C 1C				:2 dta b(%00011100)
   327 4C3B 00					dta b(0)
   328 4C3C 3E 3E 3E				:3 dta b(%00111110)
   329 4C3F 00					dta b(0)
   330 4C40 2A					dta b(%00101010)
   331 4C41 6B 6B				:2 dta b(%01101011)
   332 4C43 00					dta b(0)
   333 4C44 6B 6B 6B				:3 dta b(%01101011)
   334 4C47 00					dta b(0)
   335 4C48 7F 7F 7F				:3 dta b(%01111111)
   336 4C4B 00					dta b(0)
   337 4C4C 7F 7F 7F				:3 dta b(%01111111)
   338 4C4F 00					dta b(0)
   339 4C50 5D 5D				:2 dta b(%01011101)
   340 4C52 49					dta b(%01001001)
   341 4C53 00					dta b(0)
   342 4C54 49 49 49				:3 dta b(%01001001)
   343 4C57 00					dta b(0)
   344 4C58 49 49 49				:3 dta b(%01001001)
   345 4C5B 00					dta b(0)
   346 4C5C 49 49 49				:3 dta b(%01001001)
   347 4C5F 00					dta b(0)
   348 4C60 08 08 08				:3 dta b(%00001000)
   349 4C63 00 00 00 00 00			:5 dta b(0)
   350 						
   351 = 4C68			skullShape	equ *
   352 4C68 18 18				:2 dta b(%00011000)
   353 4C6A 3C 3C				:2 dta b(%00111100)
   354 4C6C 00					dta b(0)
   355 4C6D 7E 7E 7E				:3 dta b(%01111110)
   356 4C70 00					dta b(0)
   357 4C71 FF FF FF				:3 dta b(%11111111)
   358 4C74 00					dta b(0)
   359 4C75 99 99 99				:3 dta b(%10011001)
   360 4C78 00					dta b(0)
   361 4C79 99 99				:2 dta b(%10011001)
   362 4C7B DB					dta b(%11011011)
   363 4C7C 00					dta b(0)
   364 4C7D FF FF FF				:3 dta b(%11111111)
   365 4C80 00					dta b(0)
   366 4C81 FF FF FF				:3 dta b(%11111111)
   367 4C84 00					dta b(0)
   368 4C85 7E 7E 7E				:3 dta b(%01111110)
   369 4C88 00					dta b(0)
   370 4C89 7E					dta b(%01111110)
   371 4C8A 3C					dta b(%00111100)
   372 4C8B 24					dta b(%00100100)
   373 4C8C 00					dta b(0)
   374 4C8D 24 24 24				:3 dta b(%00100100)
   375 4C90 00					dta b(0)
   376 4C91 24					dta b(%00100100)
   377 4C92 3C					dta b(%00111100)
   378 4C93 18					dta b(%00011000)
   379 4C94 00					dta b(0)
   380 4C95 18 18 18				:3 dta b(%00011000)
   381 4C98 00					dta b(0)
   382 4C99 42 42 42				:3 dta b(%01000010)
   383 4C9C 00					dta b(0)
   384 4C9D C3 C3 C3				:3 dta b(%11000011)
   385 4CA0 00					dta b(0)
   386 4CA1 24 24				:2 dta b(%00100100)
   387 4CA3 18 18				:2 dta b(%00011000)
   388 4CA5 24 24				:2 dta b(%00100100)
   389 4CA7 00					dta b(0)
   390 4CA8 C3 C3 C3				:3 dta b(%11000011)
   391 4CAB 00					dta b(0)
   392 4CAC 42 42 42				:3 dta b(%01000010) 
   393 						
   394 = 4CAF			alarmShape	equ *
   395 4CAF 08 08 08				:3 dta b(%00001000)
   396 4CB2 00 00 00				:3 dta b(0)
   397 4CB5 41					dta b(%01000001)
   398 4CB6 49 49				:2 dta b(%01001001)
   399 4CB8 00					dta b(0)
   400 4CB9 1C 1C				:2 dta b(%00011100)
   401 4CBB 00					dta b(0)
   402 4CBC 3E 3E				:2 dta b(%00111110)
   403 4CBE 00					dta b(0)
   404 4CBF 3E 3E				:2 dta b(%00111110)
   405 4CC1 00					dta b(0)
   406 4CC2 3E 3E				:2 dta b(%00111110)
   407 4CC4 41					dta b(%01000001)
   408 4CC5 7F 7F 7F 7F 7F			:5 dta b(%01111111)
   409 						
   410 = 4CCA			enemyShape	equ *
   411 4CCA 08					dta b(%00001000)
   412 4CCB 1C					dta b(%00011100)
   413 4CCC 14					dta b(%00010100)
   414 4CCD 36					dta b(%00110110)
   415 4CCE 3E 3E				:2 dta b(%00111110)
   416 4CD0 77					dta b(%01110111)
   417 4CD1 63 63				:2 dta b(%01100011)
   418 4CD3 41 41 41 41				:4 dta b(%01000001)
   419 					
   420 = 4CD7			formationShape	equ	*
   421 4CD7 10 10				:2 dta b(%00010000)
   422 4CD9 38 38				:2 dta b(%00111000)
   423 4CDB 28 28				:2 dta b(%00101000)
   424 4CDD 6C 6C				:2 dta b(%01101100)
   425 4CDF 7C 7C 7C				:3 dta b(%01111100)
   426 4CE2 EE EE				:2 dta b(%11101110)
   427 4CE4 C6 C6 C6 C6				:4 dta b(%11000110)
   428 4CE8 82 82 82 82 82 82 + 		:8 dta b(%10000010)
   429 4CF0 00 00				dta b(0,0)
   430 4CF2 08 08				:2 dta b(%00001000)
   431 4CF4 1C 1C				:2 dta b(%00011100)
   432 4CF6 14 14				:2 dta b(%00010100)
   433 4CF8 36 36				:2 dta b(%00110110)
   434 4CFA 3E 3E 3E				:3 dta b(%00111110)
   435 4CFD 77 77				:2 dta b(%01110111)
   436 4CFF 63 63 63 63				:4 dta b(%01100011)
   437 4D03 41 41 41 41 41 41 + 		:8 dta b(%01000001)
   438 4D0B 00 00				dta b(0,0)
   439 4D0D 10 10				:2 dta b(%00010000)
   440 4D0F 38 38				:2 dta b(%00111000)
   441 4D11 28 28				:2 dta b(%00101000)
   442 4D13 6C 6C				:2 dta b(%01101100)
   443 4D15 7C 7C 7C				:3 dta b(%01111100)
   444 4D18 EE EE				:2 dta b(%11101110)
   445 4D1A C6 C6 C6 C6				:4 dta b(%11000110)
   446 4D1E 82 82 82 82 82 82 + 		:8 dta b(%10000010)
   447 						
   448 = 4D26			pokaz_duszki	equ *
   449 4D26 A9 18				lda #>SPRITES
   450 4D28 8D 07 D4				sta PMBASE
   451 						
   452 4D2B A9 00 8D 0A D0			mva #0 SIZEP+2
   453 4D30 A9 00 8D 15 D0			mva #$0 COLPM+3
   454 4D35 A9 B1				lda #pozWyniki
   455 4D37 8D 00 D0				sta HPOSP 
   456 4D3A A9 B9				lda #pozWyniki+8
   457 4D3C 8D 01 D0				sta HPOSP+1
   458 4D3F			clr_banner		
   459 4D3F A9 00				lda #0
   460 4D41 A2 68				ldx #104
   461 4D43 9D 60 FE		@		sta sprites1+$660,x
   462 4D46 CA					dex
   463 4D47 10 FA				bpl @-
   464 4D49 60					rts
   465 						
   466
   467 						
   580 4D4A						icl 'rakiety.asm'
Source: rakiety.asm
     1 				;obsluga rakiet
     2 = 4D4A			rakiety		equ *
     3 4D4A A2 07					ldx #7
     4 = 4D4C			rak0		equ *
     5 4D4C BD 70 13		@			lda rakietyStan,x
     6 4D4F D0 04					bne @+
     7 4D51 CA			rak1		dex
     8 4D52 10 F8					bpl @-
     9 4D54 60						rts			
    10 								
    11 4D55 BD 78 13		@			lda rakietyTyp,x
    12 4D58 4A						lsr 
    13 4D59 F0 03 4C E7 4D				jne rakPoziom
    14 							
    15 = 4D5E			rakPion		equ *
    16 4D5E 38						sec
    17 4D5F BD 90 13					lda rakietyY,x
    18 4D62 E5 E4					sbc posY
    19 4D64 9D 98 13					sta rakietyY0,x
    20 4D67 18						clc
    21 4D68 69 01					adc #1
    22 4D6A C9 1E					cmp #30
    23 4D6C B0 11					bcs @+
    24 							
    25 4D6E 38						sec
    26 4D6F BD 80 13					lda rakietyX,x
    27 4D72 E5 E3					sbc posX		;c=1
    28 4D74 A8						tay
    29 4D75 B9 00 1A					lda tabX,y
    30 4D78 9D 88 13					sta rakietyX0,x
    31 4D7B C9 21					cmp #33
    32 4D7D 90 18					bcc @+1
    33 4D7F BD A0 13		@			lda rakietyMove,x
    34 4D82 F0 CD					beq rak1
    35 4D84 BC 70 13					ldy rakietyStan,x
    36 4D87 A9 FF 99 1F 13				mva #255 bazyRakieta-1,y
    37 4D8C A9 00					lda #0
    38 4D8E 9D 70 13					sta rakietyStan,x
    39 4D91 9D A0 13					sta rakietyMove,x
    40 4D94 4C 51 4D					jmp rak1
    41
    42 4D97 69 08		@			adc #8
    43 4D99 85 FD					sta pom0f
    44 4D9B BC 98 13					ldy rakietyY0,x
    45 4D9E C8						iny
    46 							
    47 4D9F A5 EB					lda ramka
    48 4DA1 D0 22					bne @+
    49 							
    50 4DA3 18						clc
    51 4DA4 B9 07 17					lda obraz1La+7,y
    52 4DA7 65 FD					adc pom0f
    53 4DA9 85 80					sta pom
    54 4DAB B9 2C 17					lda obraz1Ha+7,y
    55 4DAE 69 00					adc #0
    56 4DB0 85 81					sta pom+1
    57 							
    58 4DB2 BD 78 13					lda rakietyTyp,x
    59 4DB5 0A						asl 
    60 4DB6 69 A7					adc #firstRakietaChar+128
    61 							
    62 4DB8 A0 00					ldy #0
    63 4DBA 91 80					sta (pom),y
    64 4DBC A0 30					ldy #48
    65 4DBE 69 01					adc #1
    66 4DC0 91 80					sta (pom),y
    67 4DC2 4C 51 4D					jmp rak1
    68 							
    69 4DC5 18			@			clc
    70 4DC6 B9 51 17					lda obraz2La+7,y
    71 4DC9 65 FD					adc pom0f
    72 4DCB 85 80					sta pom
    73 4DCD B9 76 17					lda obraz2Ha+7,y
    74 4DD0 69 00					adc #0
    75 4DD2 85 81					sta pom+1
    76
    77 4DD4 BD 78 13					lda rakietyTyp,x
    78 4DD7 0A						asl @
    79 4DD8 69 A7					adc #firstRakietaChar+128
    80 							
    81 4DDA A0 00					ldy #0
    82 4DDC 91 80					sta (pom),y
    83 4DDE A0 30					ldy #48
    84 4DE0 69 01					adc #1
    85 4DE2 91 80					sta (pom),y
    86 4DE4 4C 51 4D					jmp rak1
    87
    88
    89 = 4DE7			rakPoziom	equ *
    90 4DE7 38						sec
    91 4DE8 BD 90 13					lda rakietyY,x
    92 4DEB E5 E4					sbc posY
    93 4DED 9D 98 13					sta rakietyY0,x
    94 4DF0 C9 1D					cmp #29
    95 4DF2 B0 14					bcs @+
    96 							
    97 4DF4 38						sec
    98 4DF5 BD 80 13					lda rakietyX,x
    99 4DF8 E5 E3					sbc posX		;c=1
   100 4DFA A8						tay
   101 4DFB B9 00 1A					lda tabX,y
   102 4DFE 9D 88 13					sta rakietyX0,x
   103 4E01 18						clc
   104 4E02 69 01					adc #1
   105 4E04 C9 22					cmp #34
   106 4E06 90 1B					bcc @+1
   107 4E08 BD A0 13		@			lda rakietyMove,x
   108 4E0B D0 03 4C 51 4D				jeq rak1
   109 4E10 BC 70 13					ldy rakietyStan,x
   110 4E13 A9 FF 99 1F 13				mva #255 bazyRakieta-1,y
   111 4E18 A9 00					lda #0
   112 4E1A 9D 70 13					sta rakietyStan,x
   113 4E1D 9D A0 13					sta rakietyMove,x
   114 4E20 4C 51 4D					jmp rak1
   115
   116 4E23 69 07		@			adc #7
   117 4E25 85 FD					sta pom0f
   118 4E27 BC 98 13					ldy rakietyY0,x
   119 							
   120 4E2A A5 EB					lda ramka
   121 4E2C D0 21					bne @+
   122 							
   123 4E2E 18						clc
   124 4E2F B9 08 17					lda obraz1La+8,y
   125 4E32 65 FD					adc pom0f
   126 4E34 85 80					sta pom
   127 4E36 B9 2D 17					lda obraz1Ha+8,y
   128 4E39 69 00					adc #0
   129 4E3B 85 81					sta pom+1
   130 							
   131 4E3D BD 78 13					lda rakietyTyp,x
   132 4E40 0A						asl @
   133 4E41 69 A7					adc #firstRakietaChar+128
   134 							
   135 4E43 A0 00					ldy #0
   136 4E45 91 80					sta (pom),y
   137 4E47 C8						iny
   138 4E48 69 01					adc #1
   139 4E4A 91 80					sta (pom),y
   140
   141 4E4C 4C 51 4D					jmp rak1
   142 							
   143 4E4F 18			@			clc
   144 4E50 B9 52 17					lda obraz2La+8,y
   145 4E53 65 FD					adc pom0f
   146 4E55 85 80					sta pom
   147 4E57 B9 77 17					lda obraz2Ha+8,y
   148 4E5A 69 00					adc #0
   149 4E5C 85 81					sta pom+1
   150
   151 4E5E BD 78 13					lda rakietyTyp,x
   152 4E61 0A						asl @
   153 4E62 69 A7					adc #firstRakietaChar+128
   154 							
   155 4E64 A0 00					ldy #0
   156 4E66 91 80					sta (pom),y
   157 4E68 C8						iny
   158 4E69 69 01					adc #1
   159 4E6B 91 80					sta (pom),y
   160
   161 4E6D 4C 51 4D					jmp rak1
   162 							
   163 				;poruszaj rakietami
   164 = 4E70			moveRakiety	equ *
   165 4E70 A2 07					ldx #7
   166 4E72 BD A0 13		mra2		lda rakietyMove,x
   167 4E75 D0 04					bne mra1
   168 4E77 CA						dex
   169 4E78 10 F8					bpl mra2
   170 4E7A 60						rts
   171 										
   172 4E7B BD 78 13		mra1		lda rakietyTyp,x
   173 4E7E D0 07					bne @+
   174 4E80 DE 90 13					dec rakietyY,x
   175 4E83 CA						dex
   176 4E84 10 EC					bpl mra2
   177 4E86 60						rts
   178 4E87 C9 01		@			cmp #1
   179 4E89 D0 07					bne @+
   180 4E8B FE 90 13					inc rakietyY,x
   181 4E8E CA						dex
   182 4E8F 10 E1					bpl mra2
   183 4E91 60						rts
   184 4E92 C9 03		@			cmp #3
   185 4E94 B0 0E					bcs @+		
   186 4E96 BD 80 13					lda rakietyX,x
   187 4E99 E9 00					sbc #0	;c=0 czyli odejmij 1
   188 4E9B 29 7F					and #127
   189 4E9D 9D 80 13					sta rakietyX,x
   190 4EA0 CA						dex
   191 4EA1 10 CF					bpl mra2
   192 4EA3 60						rts
   193 4EA4 BD 80 13		@			lda rakietyX,x
   194 4EA7 69 00					adc #0		;c=1 czyli dodaj 1
   195 4EA9 29 7F					and #127
   196 4EAB 9D 80 13					sta rakietyX,x
   197 4EAE CA						dex
   198 4EAF 10 C1					bpl mra2
   199 4EB1 60						rts
   200
   201
   202 							
   203 				;uruchom rakiety przy bazach typu A	pionowe, typ 0 i 1
   204 				odpalRakietyA	.macro	;equ *
   205 				
   206 							ldy #7
   207 							mva #0 rak_flag
   208 				odpraka0	ldx rakietyStan,y
   209 							beq odpraka1
   210 							
   211 							lda rakietyTyp,y
   212 							and #%10
   213 							bne odpraka1
   214 							sta bazyRakieta-1,x			;wyczysc numer rakiety przypisanej do bazy,A=0
   215 							mva #1 rakietyMove,y		;uwolnienie rakiety
   216 							sta rak_flag
   217 				odpraka1	dey
   218 							bpl odpraka0
   219 							lda rak_flag
   220 							beq odpraka2
   221 							
   222 							tya
   223 							pha
   224 							ldy #fx_rakieta
   225 							lda #2
   226 							jsr sfx.add_fx1
   227 							pla
   228 							tay
   229 							
   230 							
   231 							;lda #15*2
   232 							;sta SFX_RAKIETA
   233 				odpraka2	equ *	;lda licznikJadroA
   234 							
   235 							.endm
   236 							
   237 							
   238 							
   239 							
   240 				odpalRakietyB	.macro	;equ *		;poziome typ 2 i 3
   241 				
   242 							ldy #7
   243 							mva #0 rak_flag
   244 				odprakb0	ldx rakietyStan,y
   245 							beq odprakb1
   246 							
   247 							lda rakietyTyp,y
   248 							and #%10
   249 							beq odprakb1
   250 							sta rakietyMove,y	;mva #1 rakietyMove,y		;uwolnienie rakiety
   251 							sta rak_flag
   252 							mva #0 bazyRakieta-1,x		;wyczysc numer rakiety przypisanej do bazy
   253 				odprakb1	dey
   254 							bpl odprakb0
   255 							lda rak_flag
   256 							beq odprakb2
   257 							
   258 							tya
   259 							pha
   260 							ldy #fx_rakieta
   261 							lda #2
   262 							jsr sfx.add_fx1
   263 							pla
   264 							tay			
   265 							
   266 							;lda #15*2
   267 							;sta SFX_RAKIETA
   268 				odprakb2	equ *	;lda licznikJadroB
   269 							
   270 							.endm
   271 							
   272 					
   273 				;rakiety bazy A
   274 				DODAJRAKIETAA	.macro	
   275 							lda licznikJadroA
   276 							cmp #5
   277 							bcc dra1
   278 							cmp #16
   279 							bcs dra1
   280 							
   281 							szukajRakieta		;MACRO
   282 							sta bazyRakieta-1,x		;wpisz numer przypisanej rakiety
   283 							
   284 							txa
   285 							sta rakietyStan,y
   286 							lda bazyX-1,x
   287 							clc
   288 							adc #4
   289 							sta rakietyX,y
   290 							
   291 							lda bazyY0-1,x		;nad czy pod statkiem ?
   292 							clc
   293 							adc #8
   294 							cmp #10+8
   295 							bcc dra2
   296 							
   297 							mva #0 rakietyTyp,y		;w gore
   298 							lda bazyY-1,x
   299 							clc
   300 							adc #2
   301 							sta rakietyY,y
   302 							jmp dra1
   303 							
   304 				dra2		mva #1 rakietyTyp,y		;w dol
   305 							lda bazyY-1,x
   306 							clc
   307 							adc #4
   308 							sta rakietyY,y
   309 										
   310 				dra1		equ *
   311 							.endm
   312
   313 				;poszukaj nieaktywna rakiete
   314 				szukajRakieta	.macro	;equ *
   315 				
   316 							ldy #7
   317 				szrak0		lda rakietyStan,y
   318 							beq szrak1
   319 							dey
   320 							bpl szrak0
   321 				szrak1		tya
   322 							
   323 							.endm
   324 							
   325
   326 				;rakiety bazy B
   327 				DODAJRAKIETAB	.macro
   328 							lda licznikJadroB
   329 							cmp #5
   330 							bcc drb1
   331 							cmp #16
   332 							bcs drb1
   333 							
   334 							szukajRakieta		;MACRO
   335 							sta bazyRakieta-1,x		;wpisz numer przypisanej rakiety
   336 							
   337 							txa
   338 							sta rakietyStan,y
   339 							lda bazyY-1,x
   340 							clc
   341 							adc #4
   342 							sta rakietyY,y
   343 							
   344 							lda bazyX0-1,x		;po lewo czy po prawo od statku?
   345 							clc
   346 							adc #8
   347 							cmp #12+8
   348 							bcc drb2
   349 							
   350 							mva #2 rakietyTyp,y		;w lewo
   351 							lda bazyX-1,x
   352 							clc
   353 							adc #2
   354 							sta rakietyX,y
   355 							jmp drb1
   356 							
   357 				drb2		mva #3 rakietyTyp,y		;w prawo
   358 							lda bazyX-1,x
   359 							clc
   360 							adc #4
   361 							sta rakietyX,y
   362 									
   363 				drb1		equ *			
   364 							.endm
   365 							
   366 							
   367 							
   368 							
   369
   370 							
   581 							
   582 4EB2						icl 'spy.asm'
Source: spy.asm
     1
     2 4EB2 03 21 13 FE		spyTab1	dta b(3,33,19,-2)
     3 4EB6 FE 16 1D 09				dta b(-2,22,29,9)
     4
     5 4EBA 06 0C 00 04				dta b(6,12,0,4)
     6 4EBE 01 FF		spyTab3		dta b(1,-1)	
     7
     8
     9 = 4EC0			przepisz5duszka	equ *
    10 4EC0 A2 00				ldx #0
    11 4EC2 BD B7 17		@		lda enemy,x		;poszukaj pustego duszka
    12 4EC5 F0 03				beq @+
    13 4EC7 E8					inx
    14 4EC8 D0 F8				bne @-
    15 						
    16 4ECA AD 7E 01		@		lda enemyEkran+5			;kopiuj obecnego przeciwnika na pozycję 0
    17 4ECD 9D 79 01				sta enemyEkran,x
    18 4ED0 AD 8E 01				lda enemyWybuch+5
    19 4ED3 9D 89 01				sta enemyWybuch,x
    20 4ED6 A9 01 9D B7 17			mva #1 enemy,x
    21 4EDB 8D 7E 01				sta enemyEkran+5
    22 4EDE A9 00 8D BC 17			mva #0 enemy+5
    23 4EE3 8D 8E 01				sta enemyWybuch+5
    24 4EE6 AD 76 01				lda enemyNegatyw+5
    25 4EE9 9D 71 01				sta enemyNegatyw,x
    26 4EEC AD 96 01				lda enemyOraTab+5
    27 4EEF 9D 91 01				sta enemyOraTab,x
    28 4EF2 AD F2 17				lda enemyShapeH+5
    29 4EF5 9D ED 17				sta enemyShapeH,x
    30 4EF8 AD E6 17				lda enemyFaza+5
    31 4EFB 9D E1 17				sta enemyFaza,x
    32 4EFE AD DA 17				lda enemyDX+5
    33 4F01 9D D5 17				sta enemyDX,x
    34 4F04 AD E0 17				lda enemyDY+5
    35 4F07 9D DB 17				sta enemyDY,x
    36 4F0A AD C2 17				lda enemyX+5
    37 4F0D 9D BD 17				sta enemyX,x
    38 4F10 AD CE 17				lda enemyY+5
    39 4F13 9D C9 17				sta enemyY,x
    40 4F16 AD 3A 19				lda enLicznik+5
    41 4F19 9D 35 19				sta enLicznik,x
    42 4F1C AD 40 19				lda enRotate+5
    43 4F1F 9D 3B 19				sta enRotate,x
    44 						
    45 4F22 60					rts
    46
    47 = 4F23			losuj	equ *
    48 4F23 AD 51 19				lda poziom
    49 4F26 C9 03				cmp #spy_from_level			;spy od x poziomu
    50 4F28 B0 01				bcs *+3
    51 4F2A 60					rts
    52 4F2B CE FF 18		@		dec losuj1				;sprawdzaj co opoz_dlosuj
    53 4F2E F0 01				beq @+
    54 4F30 60					rts
    55 4F31 AD 46 19 8D FF 18	@		mva opoz_dlosuj losuj1
    56 4F37 A5 1C				lda ile_enemy
    57 4F39 C9 04				cmp #4			;jeśli na ekranie jest więcej niż 3 przeciwnikow to wyjdz
    58 4F3B 90 01				bcc @+
    59 4F3D 60					rts
    60 4F3E A5 1D		@		lda jestSpy		;nie może być szpiega
    61 4F40 05 1E				ora nobanner
    62 4F42 0D 8E 01				ora enemyWybuch+5 ;brak wybuchu szpiega
    63 4F45 0D FE 18				ora licznikSpyScore
    64 4F48 05 0F				ora formacja_stan	;brak formacji
    65 4F4A F0 01				beq *+3
    66 4F4C 60					rts
    67 4F4D AE 7F 19				ldx timeLevel
    68 4F50 A5 BD				lda kondycja
    69 4F52 DD F5 49				cmp con1enemy,x
    70 4F55 B0 01				bcs *+3
    71 4F57 60					rts
    72 4F58 DD 04 4A				cmp spyEnd,x
    73 4F5B 90 01				bcc *+3
    74 4F5D 60					rts
    75 						
    76 4F5E AD 0A D2				lda random
    77 4F61 29 1F				and #%00011111
    78 4F63 C9 03				cmp #%011
    79 4F65 F0 04				beq @+
    80 4F67 C9 05				cmp #%101
    81 4F69 D0 09				bne @+1
    82 						
    83 4F6B A9 01 85 1D		@		mva #1 jestSpy		;spy ship sighted
    84 4F6F A9 02				lda #2				
    85 4F71 4C 2F 22				jmp set_sample		
    86 						
    87 4F74 C9 0B		@		cmp #%1011
    88 4F76 F0 05				beq @+
    89 4F78 C9 09				cmp #%1001
    90 4F7A F0 01				beq @+
    91 						
    92 4F7C 60					rts
    93 						
    94 4F7D AD 51 19		@		lda poziom
    95 4F80 C9 04				cmp #formation_from_level			;formacja od 4 poziomu
    96 4F82 B0 01				bcs *+3
    97 4F84 60					rts
    98 4F85 E6 0F		@		inc formacja_stan
    99 4F87 A2 05				ldx #5
   100 4F89 BD B7 17		@		lda enemy,x
   101 4F8C F0 0F				beq @+
   102 4F8E BD 89 01				lda enemyWybuch,x
   103 4F91 D0 0A				bne @+
   104 4F93 A9 00 9D 35 19			mva #0 enLicznik,x	;przyspiesz opuszczenie ekranu przez wrogów
   105 4F98 A9 01 9D 3B 19			mva #1 enRotate,x
   106 4F9D CA			@		dex
   107 4F9E 10 E9				bpl @-1
   108 						
   109 4FA0 AD 0A D2				lda random		;losujemy typ formacji
   110 4FA3 2D 42 19				and formacja_maska		;0,1 lub 3
   111 4FA6 18					clc
   112 4FA7 69 01				adc #1
   113 4FA9 8D 41 19				sta formacja_typ
   114 					
   115 4FAC 20 18 70				jsr pisz_formation
   116 					
   117 4FAF A9 26 8D 50 24			mva #$26 conditionColor1
   118 4FB4 A9 34 8D 48 24			mva #$34 conditionColor
   119 4FB9 A9 03				lda #3
   120 4FBB 4C 2F 22				jmp set_sample		;battle_station sample
   121 						
   122
   123 = 4FBE			spy		equ *
   124 4FBE A5 1D				lda jestSpy
   125 4FC0 D0 01				bne @+
   126 4FC2 60					rts
   127 						
   128 4FC3 C9 01		@		cmp #1
   129 4FC5 F0 04				beq dodajSpy
   130 						
   131 4FC7 C9 02				cmp #2		;zabezpieczenie , inna procedura moze przerwac sampla i dodac odrazu spy
   132 4FC9 D0 63				bne moveSpy
   133 						
   134 = 4FCB			dodajSpy	equ *
   135 4FCB A5 1E				lda nobanner
   136 4FCD F0 01				beq *+3
   137 4FCF 60					rts
   138 						
   139 4FD0 A9 03 85 1D				mva #3 jestSpy
   140 4FD4 AD BC 17				lda enemy+5		;czy czasami nie jest zajety?
   141 4FD7 F0 03				beq @+
   142 						
   143 4FD9 20 C0 4E				jsr przepisz5duszka
   144 						
   145 4FDC A9 01 8D BC 17	@		mva #1 enemy+5
   146 4FE1 AD 0A D2				lda Random
   147 				.if .def UC
   148 4FE4 0B 03				anc #%11
   149 				.else		
   150 						and #%11
   151 						clc
   152 				.endif		
   153 4FE6 AA					tax
   154 4FE7 A5 E3				lda posX
   155 4FE9 7D B2 4E				adc spyTab1,x
   156 				.if .def UC
   157 4FEC 0B 7F				anc #127
   158 				.else		
   159 						and #127
   160 						clc
   161 				.endif		
   162 4FEE 8D C2 17				sta enemyX+5
   163 4FF1 A5 E4				lda posY
   164 4FF3 7D B6 4E				adc spyTab1+4,x
   165 4FF6 8D CE 17				sta enemyY+5
   166 4FF9 BD BA 4E				lda spyTab1+8,x
   167 4FFC 8D E6 17				sta enemyFaza+5
   168 4FFF AD 0A D2				lda random
   169 5002 29 F0				and #%11110000
   170 5004 8D DA 17				sta enemyDX+5
   171 5007 AD 0A D2				lda random
   172 500A 29 F0				and #%11110000
   173 500C 8D E0 17				sta enemyDY+5
   174 500F A9 80 8D 76 01			mva #EKOLOR1 enemyNegatyw+5
   175 5014 A9 00				lda #0
   176 5016 8D 8E 01				sta enemyWybuch+5
   177 5019 A9 EB 8D 96 01			mva #>scolor2 enemyOraTab+5
   178 501E A9 20 8D F2 17			mva #spyShape1 enemyShapeH+5 
   179 5023 A9 0A 8D FC 18			mva #20-10 spylicznik	;opoznienie zmiany kierunku
   180 5028 A9 F0 8D FD 18			mva #240 spylicznik1	;jak dlugo duszek musi byc na ekranie
   181 502D 60					rts
   182
   183 502E AD 8E 01		moveSpy	lda enemyWybuch+5
   184 5031 0D BC 17				ora enemy+5
   185 5034 D0 28				bne @+1
   186 5036 85 1D				sta jestSpy			;po zakończeniu wybuchu, A=0
   187 5038 AD 55 19				lda spyScore
   188 503B 10 07				bpl @+
   189 503D AD 46 19 8D FF 18			mva opoz_dlosuj losuj1
   190 5043 60					rts
   191 5044 A9 14 8D FE 18	@		mva #20 licznikSpyScore		;czas wyświetlania
   192 5049 A9 00 8D 76 01			mva #EKOLOR0 enemyNegatyw+5	;napis bez negatywu
   193 504E A9 00 8D E0 17			mva #0 enemyDY+5			;przesuniecie DX i DY napisu
   194 5053 A9 80 8D DA 17			mva #128 enemyDX+5
   195 5058 A9 EC 8D 96 01			mva #>scolor3 enemyOraTab+5
   196 505D 60					rts
   197 						
   198 505E AD 8E 01		@		lda enemyWybuch+5
   199 5061 F0 01				beq @+
   200 5063 60					rts
   201 						
   202 						
   203 							
   204 5064 AD E6 17		@		lda enemyFaza+5			;przesun duszka
   205 5067 05 58				ora spySpeed		;predkosc szpiega
   206 5069 AC FD 18				ldy spylicznik1
   207 506C C0 E8				cpy #232
   208 506E 90 04				bcc @+
   209 5070 29 1F				and #%00011111
   210 5072 09 E0				ora #224
   211 5074 A8			@		tay
   212
   213 5075 18					clc
   214 5076 AD DA 17				lda enemyDX+5
   215 5079 79 00 CE				adc enemyTabX,y	
   216 507C 8D DA 17				sta enemyDX+5
   217 507F AD C2 17				lda enemyX+5
   218 5082 79 10 CE				adc enemyTabX+16,y
   219 5085 29 7F				and #127
   220 5087 8D C2 17				sta enemyX+5
   221
   222 						
   223 508A 18					clc
   224 508B AD E0 17				lda enemyDY+5
   225 508E 79 00 CF				adc enemyTabY,y
   226 5091 8D E0 17				sta enemyDY+5
   227 5094 AD CE 17				lda enemyY+5
   228 5097 79 10 CF				adc enemyTabY+16,y
   229 509A 8D CE 17				sta enemyY+5		
   230 								
   231 509D A5 EB				lda ramka		;zmniejszaj licznik tylko przy parzystej ramce
   232 509F D0 29				bne @+1
   233 50A1 AD FD 18				lda spylicznik1
   234 50A4 F0 05				beq @+
   235 50A6 CE FD 18				dec spylicznik1
   236 50A9 D0 1F				bne @+1
   237 50AB AD 7E 01		@		lda enemyEkran+5
   238 50AE F0 1A				beq @+
   239 50B0 A9 00 8D BC 17			mva #0 enemy+5		;wyłącz spy
   240 50B5 85 1D				sta jestSpy
   241 50B7 AE 7F 19		msp1	ldx timeLevel	;poziom trudnosci
   242 50BA A5 BD				lda kondycja
   243 50BC DD F0 49				cmp conYellow,x	;jesli con=green to daruj ucieczke szpiega
   244 50BF B0 01				bcs *+3
   245 50C1 60					rts
   246 						
   247 50C2 BD 09 4A				lda conred,x
   248 						;sec
   249 50C5 E9 02				sbc #2
   250 50C7 85 BD				sta kondycja		;przejdź natychmiast do condition red
   251 50C9 60					rts		
   252
   253 						
   254 50CA CE FC 18		@		dec spylicznik
   255 50CD F0 01				beq @+
   256 50CF 60					rts		
   257 										
   258 50D0 A9 08		@		lda #8 
   259 50D2 8D FC 18				sta spylicznik
   260 50D5 AD 7E 01				lda enemyEkran+5
   261 50D8 D0 12				bne @+
   262 						
   263 50DA AD 0A D2				lda random
   264 				.if .def UC
   265 50DD 0B 01				anc #1
   266 				.else		
   267 						and #1
   268 						clc
   269 				.endif		
   270 50DF AA					tax
   271 50E0 AD E6 17				lda enemyFaza+5
   272 50E3 7D BE 4E				adc spyTab3,x
   273 50E6 29 0F				and #15
   274 50E8 8D E6 17				sta enemyFaza+5	
   275 						
   276 50EB 60					rts	
   277
   278 				;korekcja lotu szpiega poza ekranem		
   279 50EC A2 05		@		ldx #5
   280 50EE 4C E2 51				jmp korekcjaLotu
   281 						
   282 						
   283 				;print spy score
   284 = 50F1			printSpyScore	equ *
   285 50F1 AD FE 18				lda licznikSpyScore
   286 50F4 D0 01				bne @+
   287 50F6 60					rts
   288 						
   289 50F7 CE FE 18		@		dec licznikSpyScore
   290 50FA D0 06				bne @+
   291 50FC AD 46 19 8D FF 18			mva opoz_dlosuj losuj1
   292 						
   293 5102 A9 4C 8D 44 2E	@		mva #$4c duszkiPrint._jmp	;jmp
   294 5107 A9 E0 8D 45 2E A9 + 		mwa #duszkiPrint._adres duszkiPrint._jmp+1	;adres skoku
   295 						
   296 5111 AC 55 19				ldy spyScore
   297 5114 A2 00				ldx #0				;rysujemy wynik w buforze
   298 5116 B9 5C 51		@		lda spyCyfra,y
   299 5119 9D 00 E7				sta shpBuf,x
   300 511C BD 9C 51				lda spyZero,x
   301 511F 9D 18 E7				sta shpBuf+24,x
   302 5122 9D 30 E7				sta shpBuf+48,x
   303 5125 C8					iny
   304 5126 E8					inx
   305 5127 E0 09				cpx #9
   306 5129 D0 EB				bne @-
   307 512B A9 00				lda #0
   308 512D 9D 00 E7		@		sta shpBuf,x
   309 5130 9D 18 E7				sta shpBuf+24,x
   310 5133 9D 30 E7				sta shpBuf+48,x
   311 5136 E8					inx
   312 5137 E0 10				cpx #16
   313 5139 D0 F2				bne @-
   314 						
   315 513B A2 05				ldx #5
   316 513D 20 39 2D				jsr duszkiPrint
   317 5140 F0 05				beq @+
   318 5142 A9 00 8D FE 18			mva #0 licznikSpyScore	;score poza ekranem
   319
   320 5147 A9 BD 8D 44 2E	@		mva #$bd	duszkiPrint._jmp	;lda $ffff,x
   321 514C A9 E1 8D 45 2E A9 + 		mwa #enemyFaza duszkiPrint._jmp+1
   322
   323 5156 A9 01 8D 7E 01			mva #1 enemyEkran+5
   324 515B 60					rts
   325 						
   326 						
   327 = 515C			spyCyfra	equ *
   328 515C 0C					dta b(%00001100)	;2
   329 515D 37					dta b(%00110111)
   330 515E DD					dta b(%11011101)
   331 515F 3D					dta b(%00111101)
   332 5160 37					dta b(%00110111)
   333 5161 DC					dta b(%11011100)
   334 5162 DF					dta b(%11011111)
   335 5163 D5					dta b(%11010101)
   336 5164 3F					dta b(%00111111)
   337 5165 00 00 00 00 00 00 + 		:7 dta b(0)
   338 						
   339 516C 0C					dta b(%00001100)	;3
   340 516D 37					dta b(%00110111)
   341 516E DD					dta b(%11011101)
   342 516F 3D					dta b(%00111101)
   343 5170 37					dta b(%00110111)
   344 5171 0D					dta b(%00001101)
   345 5172 DD					dta b(%11011101)
   346 5173 37					dta b(%00110111)
   347 5174 0C					dta b(%00001100)
   348 5175 00 00 00 00 00 00 + 		:7 dta b(0)
   349 						
   350 517C 30					dta b(%00110000)	;4
   351 517D DF					dta b(%11011111)
   352 517E DD					dta b(%11011101)
   353 517F DD					dta b(%11011101)
   354 5180 35					dta b(%00110101)
   355 5181 0D					dta b(%00001101)
   356 5182 0D					dta b(%00001101)
   357 5183 0D					dta b(%00001101)
   358 5184 03					dta b(%00000011)
   359 5185 00 00 00 00 00 00 + 		:7 dta b(0)
   360 						
   361 518C 0C					dta b(%00001100)	;8
   362 518D 37					dta b(%00110111)
   363 518E DD					dta b(%11011101)
   364 518F DD					dta b(%11011101)
   365 5190 37					dta b(%00110111)
   366 5191 DD					dta b(%11011101)
   367 5192 DD					dta b(%11011101)
   368 5193 37					dta b(%00110111)
   369 5194 0C					dta b(%00001100)
   370 5195 00 00 00 00 00 00 + 		:7 dta b(0)
   371
   372 						
   373 						
   374 = 519C			spyZero	equ *
   375 519C 0C					dta b(%00001100)
   376 519D 37					dta b(%00110111)
   377 519E DD					dta b(%11011101)
   378 519F DD					dta b(%11011101)
   379 51A0 DD					dta b(%11011101)
   380 51A1 DD					dta b(%11011101)
   381 51A2 DD					dta b(%11011101)
   382 51A3 37					dta b(%00110111)
   383 51A4 0C					dta b(%00001100)
   384 						
   385 						
   386 						
   387 						
   583 51A5						icl 'enemy.asm'
Source: enemy.asm
     1
     2 					
     3 							
     4 				;Ucieczka przeciwnikow, korekcja ich lotu
     5 = 51A5			Ucieczka	equ *
     6 51A5 A0 00				ldy #0
     7 51A7 BD CF 17				lda enemyY0,x
     8 51AA 30 06				bmi @+		;jesli wartosc ujemna to przyjmij 0
     9 51AC C9 0E				cmp #14
    10 51AE 90 02				bcc @+
    11 51B0 A0 02				ldy #2
    12
    13 51B2 BD C3 17		@		lda enemyX0,x
    14 51B5 30 05				bmi @+
    15 51B7 C9 10				cmp #16
    16 51B9 90 01				bcc @+
    17 51BB C8					iny
    18 51BC B9 30 18		@		lda fazaTab1,y		
    19 								
    20 51BF 38					sec
    21 51C0 FD E1 17				sbc enemyFaza,x
    22
    23 51C3 29 0F				and #%1111
    24 51C5 D0 01				bne @+
    25 51C7 60					rts			;nie zmieniaj fazy , sa równe
    26 						
    27 51C8 C9 08		@		cmp #8
    28 51CA B0 0B				bcs @+
    29 						;clc
    30 51CC BD E1 17				lda enemyFaza,x
    31 51CF 69 01				adc #1
    32 51D1 29 0F				and #%1111
    33 51D3 9D E1 17				sta enemyFaza,x
    34 51D6 60					rts
    35 51D7 BD E1 17		@		lda enemyFaza,x
    36 						;sec
    37 51DA E9 01				sbc #1
    38 51DC 29 0F				and #%1111
    39 51DE 9D E1 17				sta enemyFaza,x
    40 51E1 60					rts				
    41 					
    42 				;korekcja kątu lotu
    43 = 51E2			korekcjaLotu	equ *
    44 51E2 A0 00				ldy #0
    45 51E4 BD CF 17				lda enemyY0,x
    46 51E7 18					clc
    47 51E8 69 01				adc #1
    48 						
    49 51EA 10 02				bpl @+		;jesli wartosc ujemna to przyjmij 0
    50 51EC A9 00				lda #0
    51 51EE 4A			@		lsr
    52 51EF C9 07				cmp #7
    53 51F1 90 0A				bcc @+
    54 51F3 A0 02				ldy #2
    55 51F5 49 FF				eor #255
    56 51F7 69 0D				adc #13		;c=1 +1
    57 51F9 10 02				bpl @+
    58 51FB A9 00				lda #0
    59 51FD 0A			@		asl 
    60 51FE 0A					asl
    61 51FF 0A					asl
    62 5200 85 F7				sta pom0
    63
    64 5202 BD C3 17				lda enemyX0,x
    65 5205 18					clc
    66 5206 69 01				adc #1
    67 5208 10 02				bpl @+
    68 520A A9 00				lda #0
    69 520C 4A			@		lsr
    70 520D C9 08				cmp #8
    71 520F 90 09				bcc @+
    72 5211 C8					iny
    73 5212 49 FF				eor #255		;II lub III cwiartka
    74 5214 69 0F				adc #15		;c=1 +1 zmiana znaku
    75 5216 10 02				bpl @+
    76 5218 A9 00				lda #0		;poza ekranem
    77 521A 05 F7		@		ora pom0
    78 521C 8C 24 52				sty cwiartka+1
    79 521F A8					tay
    80 5220 B9 43 18				lda fazaTab,y
    81 = 5223			cwiartka equ *
    82 5223 A0 FF				ldy #$ff
    83 						
    84 5225 C0 01				cpy #1
    85 5227 F0 04				beq @+
    86 5229 C0 02				cpy #2
    87 522B D0 05				bne @+1
    88 						
    89 522D 49 FF		@		eor #255
    90 522F 38					sec
    91 5230 69 08				adc #8
    92 						
    93 5232 C0 00		@		cpy #0
    94 5234 F0 07				beq @+
    95 5236 C0 02				cpy #2
    96 5238 F0 03				beq @+
    97 						
    98 523A 18					clc
    99 523B 69 08				adc #8
   100 								
   101 523D 38			@		sec
   102 523E FD E1 17				sbc enemyFaza,x
   103
   104 5241 29 0F				and #%1111
   105 5243 D0 01				bne @+
   106 5245 60					rts			;nie zmieniaj fazy , sa równe
   107 						
   108 5246 C9 08		@		cmp #8
   109 5248 B0 0B				bcs @+
   110 						;clc
   111 524A BD E1 17				lda enemyFaza,x
   112 524D 69 01				adc #1
   113 524F 29 0F				and #%1111
   114 5251 9D E1 17				sta enemyFaza,x
   115 5254 60					rts
   116 5255 BD E1 17		@		lda enemyFaza,x
   117 						;sec
   118 5258 E9 01				sbc #1
   119 525A 29 0F				and #%1111
   120 525C 9D E1 17				sta enemyFaza,x
   121 525F 60					rts		
   122
   123 						
   124 = 5260			dodaj_przeciwnika	equ *	
   125 5260 CE 6B 19				dec dlicz1
   126 5263 F0 01				beq @+
   127 5265 60					rts
   128 5266 AD 45 19 8D 6B 19	@		mva opoz_denemy dlicz1
   129 						
   130 526C A5 0F				lda formacja_stan
   131 526E F0 01				beq *+3
   132 5270 60					rts		;jesli wlaczona formacja to nie dodawaj nowych statkow
   133 						
   134 5271 A5 1C				lda ile_enemy		;ilu przeciwnikow jest na ekranie
   135 5273 C5 1B				cmp max_enemy		;czy jest maksymalna ilosc?
   136 5275 90 01				bcc @+
   137 5277 60					rts			;wystarczy;)
   138 					
   139 5278 AD 0A D2		@		lda random		;czy ma sie pojawić?losuj
   140 527B 29 07				and #%111
   141 527D C9 04				cmp #%100
   142 527F D0 01				bne @+
   143 5281 60					rts			;nie
   144 						
   145 5282 A2 04		@		ldx #4		;szukaj nieuzywanego przeciwnika
   146 5284 BD B7 17		@		lda enemy,x
   147 5287 F0 1D				beq @+
   148 5289 CA					dex
   149 528A 10 F8				bpl @-
   150 528C 60					rts		;zabezpieczenie jak beda wszystki zajete (nie powinno sie zdarzyc!)
   151
   152
   153 = 528D			dod_en1	equ *		;miejsce dodania enemy X
   154 528D A5 1C				lda ile_enemy		;czy dodajemy enemy podczas formacji?
   155 528F C9 05				cmp #5
   156 5291 90 01				bcc *+3
   157 5293 60					rts
   158 5294 AD B7 17				lda enemy
   159 5297 F0 01				beq *+3
   160 5299 60					rts
   161 						
   162 529A CE 6B 19				dec dlicz1		;dodajmy opoznienie
   163 529D F0 01				beq *+3
   164 529F 60					rts
   165 52A0 AD 45 19 8D 6B 19			mva opoz_denemy dlicz1		
   166 						
   167 52A6 A9 01		@		lda #1
   168 52A8 9D 79 01				sta enemyEkran,x		;1 na starcie
   169 52AB AD 0A D2				lda random		;wylosuj pozycje startowa
   170 52AE 29 0F				and #%1111
   171 52B0 A8					tay
   172 52B1 18					clc
   173 52B2 B9 00 18				lda enemyTab1,y
   174 52B5 65 E3				adc posX
   175 52B7 29 7F				and #127
   176 52B9 9D BD 17				sta enemyX,x
   177 52BC AD 0A D2				lda random
   178 52BF 29 E0				and #%11100000
   179 52C1 9D D5 17				sta enemyDX,x
   180 52C4 18					clc
   181 52C5 B9 10 18				lda enemyTab1+16,y
   182 52C8 65 E4				adc posY
   183 52CA 9D C9 17				sta enemyY,x
   184 52CD AD 0A D2				lda random
   185 52D0 29 E0				and #%11100000
   186 52D2 9D DB 17				sta enemyDY,x
   187 52D5 A9 00				lda #EKOLOR0
   188 52D7 9D 71 01				sta enemyNegatyw,x
   189 52DA B9 20 18				lda enemyTab1+32,y
   190 52DD 9D E1 17				sta enemyFaza,x
   191 						
   192 52E0 AD 0A D2				lda random				;losuj kolor
   193 52E3 4A					lsr
   194 52E4 B0 08				bcs @+
   195 52E6 A9 E9 9D 91 01			mva #>scolor0 enemyOraTab,x
   196 52EB 4C F3 52				jmp @+1
   197 52EE A9 EA 9D 91 01	@		mva #>scolor1 enemyOraTab,x
   198 = 52F3			@		equ *
   199
   200 52F3 AD 0A D2				lda random
   201 52F6 4A					lsr
   202 52F7 B0 08				bcs @+
   203 52F9 A9 00 9D ED 17			mva #enemy1shape enemyShapeH,x 
   204 52FE 4C 06 53				jmp @+1
   205 5301 A9 10 9D ED 17	@		mva #enemy2shape enemyShapeH,x
   206 							
   207 						
   208 5306 E6 1C		@		inc ile_enemy		;zwieksz liczbe obecnych przeciwnikow
   209 5308 A9 01 9D B7 17			mva #1 enemy,x
   210 530D A9 00 9D 89 01			mva #0 enemyWybuch,x
   211 5312 A9 14 9D 3B 19			mva #20 enRotate,x
   212 5317 A9 78 9D 35 19			mva #115+5 enLicznik,x
   213 						
   214 						
   215 531C 60					rts
   216
   217
   218 				;poruszaj przeciwnikami
   219 = 531D			moveEnemy	equ *
   220 531D A5 1D				lda jestSpy
   221 531F F0 09				beq @+
   222 5321 AD 8E 01				lda enemyWybuch+5
   223 5324 F0 04				beq @+
   224 5326 A2 05				ldx #5
   225 5328 D0 0E				bne @+1		;jmp, jesli spy jest w trakcie wybuchu
   226
   227 532A A5 0F		@		lda formacja_stan
   228 532C C9 03				cmp #3
   229 532E 90 08				bcc @+
   230 5330 C9 05				cmp #5
   231 5332 F0 04				beq @+
   232 5334 A2 00				ldx #0		;obsluguj tylko zerowego enemy
   233 5336 F0 02				beq @+1
   234 						
   235
   236 5338 A2 04		@		ldx #4		;maks 5 przeciwnikow
   237 = 533A			@		equ *
   238 533A BD B7 17				lda enemy,x
   239 533D D0 04				bne @+
   240 533F CA			mven1	dex
   241 5340 10 F8				bpl @-
   242 5342 60					rts
   243 						
   244 = 5343			@		equ *		;animuj przeciwnika
   245 						
   246 5343 BD 79 01				lda enemyEkran,x
   247 5346 F0 16				beq @+
   248 						
   249 						
   250 5348 BC 35 19				ldy enLicznik,x		;jak długo przeciwnik jest na ekranie
   251 534B C0 68				cpy #104
   252 534D B0 0F				bcs @+				;jeśli >11 to nie usuwaj go jeszcze
   253 						
   254 534F A9 00 9D B7 17			mva #0 enemy,x		;poza ekranem
   255 5354 9D 89 01				sta enemyWybuch,x
   256 5357 C6 1C				dec ile_enemy
   257 5359 86 F1				stx lastEnemy		;zaoamietaj ostatnio usunietego przeciwnika
   258 535B 4C 3F 53				jmp mven1
   259 						
   260 						
   261 535E BD 89 01		@		lda enemyWybuch,x
   262 5361 F0 06				beq @+ 			
   263 5363 BD 81 01				lda enemyLastFaza,x		;wybuch nie podlega korekcji lotu
   264 5366 4C A0 53				jmp mvruch1
   265 						
   266 5369 BD 35 19		@		lda enLicznik,x		;czas zycia enemy
   267 536C F0 0C				beq @+
   268 536E C9 68				cmp #104
   269 5370 90 05				bcc enzm1
   270 5372 BD 79 01				lda enemyEkran,x
   271 5375 D0 03				bne @+
   272 = 5377			enzm1	equ *
   273 5377 DE 35 19				dec enLicznik,x
   274 						
   275 537A DE 3B 19		@		dec enRotate,x		;czas do korekcji ruchu
   276 537D D0 1E				bne mvruch
   277 						
   278 537F AD 48 19				lda rotate_speed1		;normalny obrot
   279 5382 BC ED 17				ldy enemyShapeH,x
   280 5385 C0 10				cpy #enemy2shape			;czy drugi typ przeciwnika?
   281 5387 D0 03				bne @+
   282 5389 AD 4A 19				lda rotate_speed2		;2 ksztalt,szybciej sie obraca
   283 538C 9D 3B 19		@		sta enRotate,x
   284
   285 538F BD 35 19				lda enLicznik,x
   286 5392 D0 06				bne @+
   287 5394 20 A5 51				jsr Ucieczka
   288 5397 4C 9D 53				jmp mvruch
   289 539A 20 E2 51		@		jsr korekcjaLotu
   290 						
   291 539D BD E1 17		mvruch	lda enemyFaza,x			;przesun duszka
   292 						//ldy enLicznik,x
   293 						//cpy #104+4			;jesli >240 to podwojna predkosc
   294 						//bcc mvruch1
   295 						//ora #224			
   296 						//jmp @+1		
   297 						
   298 53A0 A4 0F		mvruch1	ldy formacja_stan	
   299 53A2 C0 02				cpy #2		;jesli 1 to formacja czeka
   300 53A4 90 0F				bcc @+				;jeśli brak formacji to nie zmieniaj predkosci
   301 53A6 E0 00				cpx #0
   302 53A8 F0 0B				beq @+				;jesli jest formacja to enemy 0 porusza się z normalna predkoscia
   303 53AA BC 89 01				ldy enemyWybuch,x	; nie przyspieszaj poruszania się wybuchu podczas formacji
   304 53AD D0 06				bne @+
   305 53AF 0D 43 19				ora formacja_speed	;formacja ma swoją predkość
   306 53B2 4C B7 53				jmp @+1
   307 53B5 05 EF		@		ora speedEnemy
   308 53B7 A8			@		tay
   309 53B8 18					clc
   310 53B9 BD D5 17				lda enemyDX,x
   311 53BC 79 00 CE				adc enemyTabX,y
   312 53BF 9D D5 17				sta enemyDX,x
   313 53C2 BD BD 17				lda enemyX,x
   314 53C5 79 10 CE				adc enemyTabX+16,y
   315 53C8 29 7F				and #127
   316 53CA 9D BD 17				sta enemyX,x
   317 						
   318 53CD 18					clc
   319 53CE BD DB 17				lda enemyDY,x
   320 53D1 79 00 CF				adc enemyTabY,y
   321 53D4 9D DB 17				sta enemyDY,x
   322 53D7 BD C9 17				lda enemyY,x
   323 53DA 79 10 CF				adc enemyTabY+16,y
   324 53DD 9D C9 17				sta enemyY,x
   325
   326 53E0 4C 3F 53				jmp mven1		;next
   327 						
   328 						
   329 						
   330 				;Narysuj wszystkich przeciwnikow, lub ewentualne wybuchy
   331 = 53E3			rysujEnemy	equ *
   332 53E3 A2 05				ldx #5		;maksymalna ilosc przeciwnikow	
   333 53E5 BD B7 17		@		lda enemy,x
   334 53E8 F0 08				beq ren1
   335 53EA BD 89 01				lda enemyWybuch,x
   336 53ED D0 07				bne @+
   337 53EF 20 39 2D				jsr duszkiPrint		;rysujemy przeciwnika nr X
   338 53F2 CA			ren1	dex
   339 53F3 10 F0				bpl @-
   340 53F5 60					rts
   341 							
   342 53F6 E0 00		@		cpx #0
   343 53F8 F0 24				beq @+1
   344 53FA C9 08				cmp #8			;poczatek wybuchu
   345 53FC D0 08				bne @+
   346 53FE A0 64 8C FD 18			mvy #100 spylicznik1	;spy zginął, nie będzie kary
   347 5403 EE 6E 19				inc formacja_zbite		;zwieksz liczbe zbitych przeciwnikow z formacji
   348 5406 C9 01		@		cmp #1			;ostatni etap wybuchu
   349 5408 D0 14				bne @+
   350 540A A4 1D				ldy jestSpy			;jesli jest spy to zapisuj tylko pozycje dla enemy=5
   351 540C F0 04				beq *+6
   352 540E E0 05				cpx #5
   353 5410 D0 0C				bne @+
   354 5412 BC BD 17 8C 56 19			mvy enemyX,x spyscoreX
   355 5418 BC C9 17 8C 57 19			mvy enemyY,x spyscoreY
   356 						
   357 541E 38			@		sec			;rysujemy wybuch
   358 541F E9 03				sbc #3
   359 5421 10 02				bpl *+4
   360 5423 A9 00				lda #0
   361 5425 4A					lsr 
   362 5426 9D E1 17				sta enemyFaza,x
   363 5429 20 39 2D				jsr duszkiPrint
   364 542C D0 05				bne @+
   365 542E DE 89 01				dec enemyWybuch,x
   366 5431 D0 BF				bne ren1
   367 5433 A9 00 9D 89 01	@		mva #0 enemyWybuch,x
   368 5438 9D B7 17				sta enemy,x
   369 543B A9 01 9D 79 01			mva #1 enemyEkran,x
   370 5440 86 F1				stx lastEnemy
   371 						
   372 5442 E0 05				cpx #5
   373 5444 D0 04				bne @+
   374 5446 A5 0F				lda formacja_stan
   375 5448 F0 A8				beq ren1		;jesli 5=spy to pomin
   376 544A C6 1C		@		dec ile_enemy
   377 544C 4C F2 53				jmp ren1
   378 						
   379 					
   584 544F						icl 'formation.asm'
Source: formation.asm
     1
     2
     3 				;formation
     4 = 544F			formacja	equ *
     5 544F A5 0F				lda formacja_stan	; >0 formacja jest juz wlaczona
     6 5451 D0 01				bne *+3
     7 5453 60					rts
     8 						
     9 5454 C9 01				cmp #1
    10 5456 D0 0D				jne frm0a
    11 						
    12 5458 A5 1C				lda ile_enemy
    13 545A F0 01				beq @+
    14 545C 60					rts
    15 						
    16 545D A9 00 8D 6E 19	@		mva #0 formacja_zbite
    17 5462 E6 0F				inc formacja_stan
    18 5464 60					rts
    19 						
    20 5465 C9 02		frm0a	cmp #2
    21 5467 F0 03 4C 2E 55			jne frm0
    22 						
    23 546C A9 00				lda #0
    24 546E 20 ED 27				jsr cisza
    25 						
    26 						;mva speedEnemy0 speedEnemy
    27 					;obliczamy pozycje startowa formacji
    28 5471 AD 0A D2				lda RANDOM
    29 5474 29 8F				and #%10001111
    30 5476 09 10				ora #%00010000
    31 5478 18					clc
    32 5479 65 E3				adc posX
    33 547B 18					clc
    34 547C 69 11				adc #17
    35 547E 29 7F				and #127
    36 5480 8D C2 17				sta enemyX+5		;pozycja X formacji,duszek 0 dowodca
    37 						
    38 5483 AD 0A D2				lda RANDOM		;rand(192)
    39 5486 29 8F				and #%10001111
    40 5488 09 20				ora #%00100000
    41 548A 18					clc
    42 548B 65 E4				adc posY
    43 548D 18					clc
    44 548E 69 0E				adc #14
    45 5490 8D CE 17				sta enemyY+5
    46 						
    47 5493 AE 41 19				ldx formacja_typ
    48 5496 E0 01				cpx #1
    49 5498 D0 0B				bne @+
    50 549A 38					sec
    51 549B E5 E4				sbc posY
    52 549D 38					sec
    53 549E E9 0E				sbc #14
    54 54A0 30 03				bmi @+
    55 54A2 CE 41 19				dec formacja_typ		;=4 w dol
    56 								
    57 54A5 A9 00 8D DA 17	@		mva #0 enemyDX+5
    58 54AA 8D D6 17				sta enemyDX+1
    59 54AD 8D D7 17				sta enemyDX+2
    60 54B0 8D D8 17				sta enemyDX+3
    61 54B3 8D D9 17				sta enemyDX+4
    62 54B6 8D E0 17				sta enemyDY+5
    63 54B9 8D DC 17				sta enemyDY+1
    64 54BC 8D DD 17				sta enemyDY+2
    65 54BF 8D DE 17				sta enemyDY+3
    66 54C2 8D DF 17				sta enemyDY+4
    67 54C5 A9 00				lda #EKOLOR0
    68 54C7 8D 76 01				sta enemyNegatyw+5
    69 54CA 8D 72 01				sta enemyNegatyw+1
    70 54CD 8D 73 01				sta enemyNegatyw+2
    71 54D0 8D 74 01				sta enemyNegatyw+3
    72 54D3 8D 75 01				sta enemyNegatyw+4
    73 						
    74 54D6 AD 0A D2				lda random
    75 54D9 29 04				and #bit1			
    76 54DB F0 05				beq @+
    77 54DD A9 00				lda #enemy1shape
    78 54DF 4C E4 54				jmp @+1
    79 54E2 A9 10		@		lda #enemy2shape
    80 54E4 8D F2 17		@		sta enemyShapeH+5
    81 54E7 8D EE 17				sta enemyShapeH+1
    82 54EA 8D EF 17				sta enemyShapeH+2
    83 54ED 8D F0 17				sta enemyShapeH+3
    84 54F0 8D F1 17				sta enemyShapeH+4
    85
    86 54F3 A9 EA 8D 96 01			mva #>scolor1 enemyOraTab+5
    87 54F8 A9 E9 8D 92 01			mva #>scolor0 enemyOraTab+1
    88 54FD 8D 93 01				sta enemyOraTab+2
    89 5500 8D 94 01				sta enemyOraTab+3
    90 5503 8D 95 01				sta enemyOraTab+4
    91 5506 A9 01 8D BC 17			mva #1 enemy+5
    92 550B 8D B8 17 8D B9 17 + 		:4 sta enemy+1+#
    93 						
    94
    95 5517 18					clc
    96 5518 A5 1C				lda ile_enemy
    97 551A 69 05				adc #5
    98 551C 85 1C				sta ile_enemy
    99 551E 20 B9 56				jsr ksztaltFormacji
   100 						
   101 5521 E6 0F				inc formacja_stan		;uciekli juz wszyscy ustaw 3
   102 5523 E6 15				inc formacja_radar		;rysuj na radarze formacje
   103 5525 AD 0A D2				lda random
   104 5528 29 1F				and #%11111
   105 552A 8D 6C 19				sta formacjaX
   106 									
   107 552D 60					rts
   108
   109
   110 						
   111 				; formacja goni ekran z naszym statkiem	
   112 552E C9 03		frm0	cmp #3
   113 5530 F0 03 4C D4 55			jne frm2
   114 						
   115 5535 AD 7A 01				lda enemyEkran+1
   116 5538 2D 7B 01				and enemyEkran+2
   117 553B 2D 7C 01				and enemyEkran+3
   118 553E 2D 7D 01				and enemyEkran+4
   119 5541 2D 7E 01				and enemyEkran+5
   120 5544 D0 0A				bne @+
   121 						
   122 5546 E6 0F				inc formacja_stan
   123 5548 A9 06 8D 6D 19			mva #6 forLicznik
   124 554D 4C 1A 56				jmp frm2a	;przejdz od razu do nastepnej fazy
   125 						
   126 5550 18			@		clc
   127 5551 A2 00				ldx #0
   128 5553 AD 6C 19				lda formacjaX
   129 5556 65 E3				adc posX
   130 5558 29 7F				and #127
   131 555A 38					sec
   132 555B ED C2 17				sbc enemyX+5
   133 555E F0 42				beq frmY	;ta sama pozycja X
   134 5560 10 22				bpl @+1		;enemy po lewo od statku
   135 5562 29 7F				and #127
   136 5564 C9 40				cmp #64
   137 5566 90 0E				bcc @+
   138 5568 AD C2 17				lda enemyX+5
   139 556B E9 01				sbc #1
   140 556D 29 7F				and #127
   141 556F 8D C2 17				sta enemyX+5
   142 5572 A2 02				ldx #2	;lewo
   143 5574 D0 2C				bne frmY	;jmp
   144 5576 AD C2 17		@		lda enemyX+5
   145 5579 69 01				adc #1
   146 557B 29 7F				and #127
   147 557D 8D C2 17				sta enemyX+5
   148 5580 A2 01				ldx #1	;prawo
   149 5582 D0 1E				bne frmY	;jmp
   150 5584 C9 40		@		cmp #64
   151 5586 B0 0E				bcs @+
   152 5588 AD C2 17				lda enemyX+5
   153 558B 69 01				adc #1
   154 558D 29 7F				and #127
   155 558F 8D C2 17				sta enemyX+5
   156 5592 A2 01				ldx #1 	;prawo
   157 5594 D0 0C				bne frmY	;jmp
   158 5596 AD C2 17		@		lda enemyX+5
   159 5599 E9 01				sbc #1
   160 559B 29 7F				and #127
   161 559D 8D C2 17				sta enemyX+5
   162 55A0 A2 02				ldx #2	;lewo
   163 						
   164 = 55A2			frmY	equ *	; zmiana pozycji Y
   165 55A2 18					clc
   166 55A3 A5 E4				lda posY
   167 55A5 69 0E				adc #14
   168 55A7 38					sec
   169 55A8 ED CE 17				sbc enemyY+5
   170 55AB F0 13				beq frm1	;pozycja docelowa
   171 55AD 30 0A				bmi @+
   172 55AF EE CE 17				inc enemyY+5
   173 55B2 8A					txa
   174 55B3 09 04				ora #4		;dol
   175 55B5 AA					tax		
   176 55B6 4C C0 55				jmp frm1
   177 55B9 CE CE 17		@		dec enemyY+5
   178 55BC 8A					txa
   179 55BD 09 08				ora #8		;gora
   180 55BF AA					tax
   181
   182 = 55C0			frm1	equ *	
   183
   184 55C0 BD AE 56				lda frm1tab,x
   185 55C3 8D E6 17				sta enemyFaza+5
   186 						
   187 55C6 20 B9 56				jsr ksztaltFormacji
   188 						
   189 55C9 AD B7 17				lda enemy		;dodatkowy enemy podczas formacji
   190 55CC F0 01				beq @+
   191 55CE 60					rts
   192 						
   193 55CF A2 00		@		ldx #0
   194 55D1 4C 8D 52				jmp dod_en1		;dodaj przeciwnika jeśli można
   195 						
   196
   197 = 55D4			frm2	equ *	;formacja jest na ekranie, ściga gracza
   198 55D4 C9 04				cmp #4
   199 55D6 F0 03 4C 63 56			jne frm3
   200 						
   201 55DB AD 8E 01				lda enemyWybuch+5		;jesli zbity dowodca to nastepna faza
   202 55DE F0 3A				beq frm2a
   203 						
   204 55E0 A9 05				lda #$5			;50 punktów extra za dowodcę
   205 55E2 20 AF 68				jsr dodajPunkty
   206 						
   207 55E5 E6 0F				inc formacja_stan
   208 55E7 A9 80				lda #128
   209 55E9 20 ED 27				jsr cisza
   210
   211 55EC A9 00 85 12				mva #0 sfxlicznik1
   212 55F0 85 15				sta formacja_radar
   213 55F2 20 DE 6F				jsr piszCondition
   214 55F5 AC 59 19				ldy kondycja_stan		;poprzednia kondycja
   215 55F8 20 A8 6E				jsr setCondition
   216 						;mva formacja_speed speedEnemy
   217 55FB A9 00				lda #0		
   218 55FD 8D 36 19				sta enLicznik+1		;można usuwać jeśli poza ekranem
   219 5600 8D 37 19				sta enLicznik+2
   220 5603 8D 38 19				sta enLicznik+3
   221 5606 8D 39 19				sta enLicznik+4
   222 5609 A9 01				lda #1
   223 560B 8D 3C 19				sta enRotate+1		;od razu można obracać
   224 560E 8D 3D 19				sta enRotate+2
   225 5611 8D 3E 19				sta enRotate+3
   226 5614 8D 3F 19				sta enRotate+4
   227 						;sprawdzmy ile statkow z formacji zostalo zestrzelonych		
   228 5617 4C 63 56				jmp frm3
   229 						
   230 561A CE 6D 19		frm2a	dec forLicznik
   231 561D D0 08				bne @+
   232 561F 20 CC 58				jsr korekcjaFormacji
   233 5622 A9 04 8D 6D 19			mva #4 forLicznik
   234 						
   235 5627 AD E6 17		@		lda enemyFaza+5			;przesun duszka
   236 562A 0D 43 19				ora formacja_speed		
   237 562D A8					tay
   238 562E 18					clc
   239 562F AD DA 17				lda enemyDX+5
   240 5632 79 00 CE				adc enemyTabX,y
   241 5635 8D DA 17				sta enemyDX+5
   242 5638 AD C2 17				lda enemyX+5
   243 563B 79 10 CE				adc enemyTabX+16,y
   244 563E 29 7F				and #127
   245 5640 8D C2 17				sta enemyX+5
   246 						
   247 5643 18					clc
   248 5644 AD E0 17				lda enemyDY+5
   249 5647 79 00 CF				adc enemyTabY,y
   250 564A 8D E0 17				sta enemyDY+5
   251 564D AD CE 17				lda enemyY+5
   252 5650 79 10 CF				adc enemyTabY+16,y
   253 5653 8D CE 17				sta enemyY+5
   254
   255 						
   256 5656 AD B7 17				lda enemy
   257 5659 D0 05				bne @+
   258 						
   259 565B A2 00				ldx #0		;jeśli można dodaj przeciwnika
   260 565D 20 8D 52				jsr dod_en1	
   261 						
   262 5660 4C B9 56		@		jmp ksztaltFormacji
   263 						
   264 					
   265 = 5663			frm3	equ *
   266 5663 A5 1C				lda ile_enemy		;czekamy na opuszczenie ekranu przez reszte wrogów
   267 5665 F0 13				beq frm4			;formacja_stan=5
   268 5667 C9 01				cmp #1
   269 5669 D0 05				bne @+				;jesli zostal 1 enemy to tylko enemy nr 0
   270 566B CD B7 17				cmp enemy
   271 566E F0 0A				beq frm4
   272 						
   273 5670 AD B7 17		@		lda enemy
   274 5673 F0 01				beq @+
   275 5675 60					rts
   276 5676 AA			@		tax				;jesli mozna dodaj enemy
   277 5677 4C 8D 52				jmp dod_en1
   278 						
   279 				;posprzątaj po formacji
   280 = 567A			frm4	equ *
   281 567A AD 6E 19				lda formacja_zbite
   282 567D C9 06				cmp #6
   283 567F D0 28				bne @+
   284 						
   285 5681 A9 80				lda #$80
   286 5683 20 AF 68				jsr dodajPunkty
   287 						
   288 5686 A9 19 8D FE 18			mva #25 licznikSpyScore
   289 568B 8D E0 17				sta enemyDY+5
   290 568E A9 30 8D 55 19			mva #3*16 spyscore	;800
   291 5693 AD 56 19 8D C2 17			mva spyScoreX enemyX+5
   292 5699 AD 57 19 8D CE 17			mva spyScoreY enemyY+5
   293 569F A9 80 8D DA 17			mva #128 enemyDX+5
   294 56A4 A9 EC 8D 96 01			mva #>scolor3 enemyOraTab+5
   295 56A9 A9 00 85 0F		@		mva #0 formacja_stan
   296 						
   297 56AD 60					rts
   298 						
   299 56AE 00 04 0C 00 08 06 + frm1tab	dta b(0,4,12,0,8,6,10,0,0,2,14)		;kierunki (max 10)	
   300
   301
   302 = 56B9			ksztaltFormacji	equ *
   303 56B9 AD E6 17				lda enemyFaza+5
   304 56BC 8D E2 17 8D E3 17 + 		:4 sta enemyFaza+1+#
   305 						
   306 						
   307 56C8 CE 6F 19				dec dowodca
   308 56CB D0 11				bne @+1
   309 56CD A9 02 8D 6F 19			mva #2 dowodca
   310 56D2 A9 EA				lda #>scolor1		
   311 56D4 CD 96 01				cmp enemyOraTab+5
   312 56D7 D0 02				bne @+
   313 56D9 A9 E9				lda #>scolor0		
   314 56DB 8D 96 01		@		sta enemyOraTab+5
   315 						
   316 56DE AD 41 19		@		lda formacja_typ
   317 56E1 D0 7B				bne @+1
   318 					
   319 56E3 18					clc					;strzala w gore ^  =0
   320 56E4 AD E0 17				lda enemyDY+5
   321 56E7 69 40				adc #%01000000
   322 56E9 8D DC 17				sta enemyDY+1
   323 56EC 8D DD 17				sta enemyDY+2
   324 56EF AD CE 17				lda enemyY+5
   325 56F2 69 02				adc #2
   326 56F4 8D CA 17				sta enemyY+1
   327 56F7 8D CB 17				sta enemyY+2
   328 						
   329 56FA 18					clc
   330 56FB AD DC 17				lda enemyDY+1
   331 56FE 69 40				adc #%01000000
   332 5700 8D DE 17				sta enemyDY+3
   333 5703 8D DF 17				sta enemyDY+4
   334 5706 AD CA 17				lda enemyY+1
   335 5709 69 02				adc #2
   336 570B 8D CC 17				sta enemyY+3
   337 570E 8D CD 17				sta enemyY+4
   338 						
   339 5711 38			@		sec
   340 5712 AD DA 17				lda enemyDX+5
   341 5715 E9 40				sbc #%01000000
   342 5717 8D D6 17				sta enemyDX+1
   343 571A AD C2 17				lda enemyX+5
   344 571D E9 02				sbc #2
   345 571F 29 7F				and #127
   346 5721 8D BE 17				sta enemyX+1
   347 						
   348 5724 38					sec
   349 5725 AD D6 17				lda enemyDX+1
   350 5728 E9 40				sbc #%01000000
   351 572A 8D D8 17				sta enemyDX+3
   352 572D AD BE 17				lda enemyX+1
   353 5730 E9 02				sbc #2
   354 5732 29 7F				and #127
   355 5734 8D C0 17				sta enemyX+3
   356 						
   357 5737 18					clc
   358 5738 AD DA 17				lda enemyDX+5
   359 573B 69 40				adc #%01000000
   360 573D 8D D7 17				sta enemyDX+2
   361 5740 AD C2 17				lda enemyX+5
   362 5743 69 02				adc #2
   363 5745 29 7F				and #127
   364 5747 8D BF 17				sta enemyX+2
   365 						
   366 574A 18					clc
   367 574B AD D7 17				lda enemyDX+2
   368 574E 69 40				adc #%01000000
   369 5750 8D D9 17				sta enemyDX+4
   370 5753 AD BF 17				lda enemyX+2
   371 5756 69 02				adc #2
   372 5758 29 7F				and #127
   373 575A 8D C1 17				sta enemyX+4
   374 						
   375 575D 60					rts
   376 						
   377 575E C9 01		@		cmp #1		;\/
   378 5760 D0 31				bne @+
   379 						
   380 5762 38					sec					;strzala w dol
   381 5763 AD E0 17				lda enemyDY+5
   382 5766 E9 40				sbc #%01000000
   383 5768 8D DC 17				sta enemyDY+1
   384 576B 8D DD 17				sta enemyDY+2
   385 576E AD CE 17				lda enemyY+5
   386 5771 E9 02				sbc #2
   387 5773 8D CA 17				sta enemyY+1
   388 5776 8D CB 17				sta enemyY+2
   389 						
   390 5779 38					sec
   391 577A AD DC 17				lda enemyDY+1
   392 577D E9 40				sbc #%01000000
   393 577F 8D DE 17				sta enemyDY+3
   394 5782 8D DF 17				sta enemyDY+4
   395 5785 AD CA 17				lda enemyY+1
   396 5788 E9 02				sbc #2
   397 578A 8D CC 17				sta enemyY+3
   398 578D 8D CD 17				sta enemyY+4	
   399
   400 5790 4C 11 57				jmp @-1
   401 						
   402 						
   403
   404 5793 C9 02		@		cmp #2
   405 5795 D0 63				bne @+
   406
   407 5797 AD DA 17				lda enemyDX+5		;linia
   408 579A 8D D6 17 8D D7 17 + 		:4 sta enemyDX+1+#
   409 						
   410 57A6 AD C2 17				lda enemyX+5
   411 57A9 8D BE 17 8D BF 17 + 		:4 sta enemyX+1+#
   412
   413 57B5 38					sec
   414 57B6 AD E0 17				lda enemyDY+5
   415 57B9 E9 40				sbc #%01000000
   416 57BB 8D DD 17				sta enemyDY+2
   417 57BE AD CE 17				lda enemyY+5
   418 57C1 E9 02				sbc #2
   419 57C3 8D CB 17				sta enemyY+2
   420 						
   421 57C6 38					sec
   422 57C7 AD DD 17				lda enemyDY+2
   423 57CA E9 40				sbc #%01000000
   424 57CC 8D DC 17				sta enemyDY+1
   425 57CF AD CB 17				lda enemyY+2
   426 57D2 E9 02				sbc #2
   427 57D4 8D CA 17				sta enemyY+1
   428 						
   429 57D7 18					clc
   430 57D8 AD E0 17				lda enemyDY+5
   431 57DB 69 40				adc #%01000000
   432 57DD 8D DE 17				sta enemyDY+3
   433 57E0 AD CE 17				lda enemyY+5
   434 57E3 69 02				adc #2
   435 57E5 8D CC 17				sta enemyY+3
   436 						
   437 57E8 18					clc
   438 57E9 AD DE 17				lda enemyDY+3
   439 57EC 69 40				adc #%01000000
   440 57EE 8D DF 17				sta enemyDY+4
   441 57F1 AD CC 17				lda enemyY+3
   442 57F4 69 02				adc #2
   443 57F6 8D CD 17				sta enemyY+4
   444 						
   445 57F9 60					rts
   446
   447
   448 						;wybor ksztaltu
   449 57FA C9 03		@		cmp #3			;czy x
   450 57FC D0 61				bne @+
   451 						
   452 57FE 38					sec
   453 57FF AD DA 17				lda enemyDX+5
   454 5802 E9 40				sbc #%01000000
   455 5804 8D D6 17				sta enemyDX+1
   456 5807 8D D8 17				sta enemyDX+3
   457 580A AD C2 17				lda enemyX+5
   458 580D E9 02				sbc #2
   459 580F 29 7F				and #127
   460 5811 8D BE 17				sta enemyX+1
   461 5814 8D C0 17				sta enemyX+3
   462 						
   463 5817 18					clc
   464 5818 AD DA 17				lda enemyDX+5
   465 581B 69 40				adc #%01000000
   466 581D 8D D7 17				sta enemyDX+2
   467 5820 8D D9 17				sta enemyDX+4
   468 5823 AD C2 17				lda enemyX+5
   469 5826 69 02				adc #2
   470 5828 29 7F				and #127
   471 582A 8D BF 17				sta enemyX+2
   472 582D 8D C1 17				sta enemyX+4
   473 						
   474 5830 38					sec
   475 5831 AD E0 17				lda enemyDY+5
   476 5834 E9 40				sbc #%01000000
   477 5836 8D DC 17				sta enemyDY+1
   478 5839 8D DD 17				sta enemyDY+2
   479 583C AD CE 17				lda enemyY+5
   480 583F E9 02				sbc #2
   481 5841 8D CA 17				sta enemyY+1
   482 5844 8D CB 17				sta enemyY+2
   483 						
   484 5847 18					clc
   485 5848 AD E0 17				lda enemyDY+5
   486 584B 69 40				adc #%01000000
   487 584D 8D DE 17				sta enemyDY+3
   488 5850 8D DF 17				sta enemyDY+4
   489 5853 AD CE 17				lda enemyY+5
   490 5856 69 02				adc #2
   491 5858 8D CC 17				sta enemyY+3
   492 585B 8D CD 17				sta enemyY+4
   493 						
   494 585E 60					rts
   495 						
   496 585F AD DA 17		@		lda enemyDX+5		;czy +
   497 5862 8D D6 17				sta enemyDX+1
   498 5865 8D D8 17				sta enemyDX+3
   499 5868 AD C2 17				lda enemyX+5
   500 586B 8D BE 17				sta enemyX+1
   501 586E 8D C0 17				sta enemyX+3
   502 						
   503 5871 38					sec
   504 5872 AD E0 17				lda enemyDY+5
   505 5875 E9 40				sbc #%01000000
   506 5877 8D DC 17				sta enemyDY+1
   507 587A AD CE 17				lda enemyY+5
   508 587D E9 02				sbc #2
   509 587F 8D CA 17				sta enemyY+1
   510 						
   511 5882 18					clc
   512 5883 AD E0 17				lda enemyDY+5
   513 5886 69 40				adc #%01000000
   514 5888 8D DE 17				sta enemyDY+3
   515 588B AD CE 17				lda enemyY+5
   516 588E 69 02				adc #2
   517 5890 8D CC 17				sta enemyY+3
   518 						
   519 5893 AD E0 17				lda enemyDY+5
   520 5896 8D DD 17				sta enemyDY+2
   521 5899 8D DF 17				sta enemyDY+4
   522 589C AD CE 17				lda enemyY+5
   523 589F 8D CB 17				sta enemyY+2
   524 58A2 8D CD 17				sta enemyY+4
   525 						
   526 58A5 18					clc
   527 58A6 AD DA 17				lda enemyDX+5
   528 58A9 69 40				adc #%01000000
   529 58AB 8D D7 17				sta enemyDX+2
   530 58AE AD C2 17				lda enemyX+5
   531 58B1 69 02				adc #2
   532 58B3 29 7F				and #127
   533 58B5 8D BF 17				sta enemyX+2
   534 						
   535 58B8 38					sec
   536 58B9 AD DA 17				lda enemyDX+5
   537 58BC E9 40				sbc #%01000000
   538 58BE 8D D9 17				sta enemyDX+4
   539 58C1 AD C2 17				lda enemyX+5
   540 58C4 E9 02				sbc #2
   541 58C6 29 7F				and #127
   542 58C8 8D C1 17				sta enemyX+4
   543 						
   544 58CB 60					rts
   545 						
   546
   547 						
   548 				;korekcja kątu lotu
   549 = 58CC			korekcjaFormacji	equ *
   550 58CC A0 00				ldy #0
   551 58CE AD D4 17				lda enemyY0+5
   552 58D1 10 02				bpl @+		;jesli wartosc ujemna to przyjmij 0
   553 58D3 A9 00				lda #0
   554 58D5 4A			@		lsr
   555 58D6 C9 07				cmp #7
   556 58D8 90 0A				bcc @+
   557 58DA A0 02				ldy #2
   558 58DC 49 FF				eor #255
   559 58DE 69 0D				adc #13		;c=1 +1
   560 58E0 10 02				bpl @+
   561 58E2 A9 00				lda #0
   562 58E4 0A			@		asl 
   563 58E5 0A					asl
   564 58E6 0A					asl
   565 58E7 85 F7				sta pom0
   566
   567 58E9 AD C8 17				lda enemyX0+5
   568 58EC 10 02				bpl @+
   569 58EE A9 00				lda #0
   570 58F0 4A			@		lsr
   571 58F1 C9 08				cmp #8
   572 58F3 90 09				bcc @+
   573 58F5 C8					iny
   574 58F6 49 FF				eor #255		;II lub III cwiartka
   575 58F8 69 0F				adc #15		;c=1 +1 zmiana znaku
   576 58FA 10 02				bpl @+
   577 58FC A9 00				lda #0
   578 58FE 05 F7		@		ora pom0
   579 5900 8C 08 59				sty cwiartka1+1
   580 5903 A8					tay
   581 5904 B9 44 59				lda formacjaTab,y
   582 = 5907			cwiartka1 equ *
   583 5907 A0 FF				ldy #$ff
   584 						
   585 5909 C0 01				cpy #1
   586 590B F0 04				beq @+
   587 590D C0 02				cpy #2
   588 590F D0 05				bne @+1
   589 						
   590 5911 49 FF		@		eor #255
   591 5913 38					sec
   592 5914 69 08				adc #8
   593 						
   594 5916 C0 00		@		cpy #0
   595 5918 F0 07				beq @+
   596 591A C0 02				cpy #2
   597 591C F0 03				beq @+
   598 						
   599 591E 18					clc
   600 591F 69 08				adc #8
   601 								
   602 5921 38			@		sec
   603 5922 ED E6 17				sbc enemyFaza+5
   604
   605 5925 29 0F				and #%1111
   606 5927 D0 01				bne @+
   607 5929 60					rts			;nie zmieniaj fazy , sa równe
   608 						
   609 592A C9 08		@		cmp #8
   610 592C B0 0B				bcs @+
   611 						;clc
   612 592E AD E6 17				lda enemyFaza+5
   613 5931 69 01				adc #1
   614 5933 29 0F				and #%1111
   615 5935 8D E6 17				sta enemyFaza+5
   616 5938 60					rts
   617 5939 AD E6 17		@		lda enemyFaza+5
   618 						;sec
   619 593C E9 01				sbc #1
   620 593E 29 0F				and #%1111
   621 5940 8D E6 17				sta enemyFaza+5
   622 5943 60					rts		
   623 					
   624 5944 05 05 06 06 06 06 + formacjaTab	dta b(5,5,6,6,6,6,8,9)
   625 594C 06 05 06 07 07 06 + 			dta b(6,5,6,7,7,6,8,9)
   626 5954 05 06 07 04 06 06 + 			dta b(5,6,7,4,6,6,8,9)
   627 595C 06 06 06 07 04 06 + 			dta b(6,6,6,7,4,6,8,9)
   628 5964 07 06 06 07 07 05 + 			dta b(7,6,6,7,7,5,6,9)
   629 596C 04 04 04 04 04 05 + 			dta b(4,4,4,4,4,5,6,8)
   630 5974 03 03 03 03 03 03 + 			dta b(3,3,3,3,3,3,4,6)
   631 						
   585 							
   586 							
   587 597C						icl 'kolizje.asm'
Source: kolizje.asm
     1 				;kolizje strzaly z rakietami
     2 = 597C			kolStrzalyRakiety	equ *
     3 597C A5 5B					lda czyRakiety
     4 597E D0 01					bne *+3
     5 5980 60						rts
     6 							
     7 5981 A2 07					ldx #7
     8 5983 BD A0 13		@			lda rakietyMove,x
     9 5986 D0 04					bne @+
    10 5988 CA			kolsr2		dex
    11 5989 10 F8					bpl @-
    12 598B 60						rts	;jmp kolsr1		;next strzal
    13 							
    14 598C A0 03		@			ldy #3
    15 598E B9 17 00		@			lda strzal,y
    16 5991 F0 09					beq kolsr1
    17 5993 B9 28 19					lda strzalTlo,y
    18 5996 29 7F					and #127
    19 5998 C9 27					cmp #firstRakietaChar		;pomijamy znaki gwiazd,bazy,meteory i bomby
    20 599A B0 06					bcs @+
    21 599C 88			kolsr1		dey
    22 599D 10 EF					bpl @-
    23 599F 4C 88 59					jmp kolsr2
    24 							
    25 59A2 BD 78 13		@			lda rakietyTyp,x
    26 59A5 29 02					and #%10
    27 59A7 F0 21					beq kolsr3		;pion
    28 							
    29 				;poziome rakiety <>	
    30 59A9 BD 98 13					lda rakietyY0,x		
    31 59AC 0A						asl
    32 59AD 0A						asl
    33 59AE 49 FF					eor #255
    34 59B0 38						sec		;+1
    35 59B1 79 1C 19					adc strzalY3,y
    36 59B4 C9 04					cmp #4
    37 59B6 B0 E4					bcs kolsr1		;next strzal
    38 						
    39 59B8 BD 88 13					lda rakietyX0,x	
    40 59BB 0A						asl
    41 59BC 0A						asl
    42 59BD 49 FF					eor #255
    43 59BF 38						sec	;+1
    44 59C0 79 10 19					adc strzalX3,y
    45 59C3 C9 08					cmp #8
    46 59C5 B0 D5					bcs kolsr1		;next strzal	
    47
    48 59C7 4C E8 59					jmp kolsr4
    49 				;pionowe rakiety ^			
    50 59CA BD 88 13		kolsr3		lda rakietyX0,x	
    51 59CD 0A						asl
    52 59CE 0A						asl
    53 59CF 49 FF					eor #255
    54 59D1 38						sec	;+1
    55 59D2 79 10 19					adc strzalX3,y
    56 59D5 C9 03					cmp #3
    57 59D7 B0 C3					bcs kolsr1		;next strzal	
    58 							
    59 59D9 BD 98 13					lda rakietyY0,x		
    60 59DC 0A						asl
    61 59DD 0A						asl
    62 59DE 49 FF					eor #255
    63 59E0 38						sec		;+1
    64 59E1 79 1C 19					adc strzalY3,y
    65 59E4 C9 08					cmp #8
    66 59E6 B0 B4					bcs kolsr1		;next strzal			
    67 							
    68 59E8 A9 00		kolsr4		lda #0
    69 59EA 99 17 00					sta strzal,y		;wylacz strzal
    70 59ED BC 70 13					ldy rakietyStan,x
    71 59F0 9D 70 13					sta rakietyStan,x
    72 59F3 9D A0 13					sta rakietyMove,x
    73
    74 59F6 A9 FF 99 1F 13				mva #255 bazyRakieta-1,y
    75
    76 59FB 20 8E 48					jsr dodajMalyWybuch
    77 59FE A9 07					lda #$7
    78 5A00 20 AF 68					jsr dodajPunkty
    79 							
    80 5A03 4C 88 59					jmp kolsr2		;next rakieta
    81 							
    82 				;kolizje enemy z obiektami
    83 = 5A06			kolObiektyEnemy	equ *
    84 5A06 AC 5C 19					ldy licznikBombyEkran
    85 5A09 D0 01					bne @+
    86 5A0B 60						rts
    87 							
    88 5A0C B9 0C 01		@			lda bombyEkran-1,y
    89 5A0F C9 FF					cmp #255
    90 5A11 D0 04					bne @+
    91 = 5A13			obe2		equ *
    92 5A13 88						dey
    93 5A14 D0 F6					bne @-
    94 5A16 60						rts
    95 							
    96 5A17 A2 05		@			ldx #5
    97 5A19 BD 79 01		@			lda enemyEkran,x
    98 5A1C 1D 89 01					ora enemyWybuch,x
    99 5A1F F0 06					beq @+
   100 5A21 CA			obe3		dex
   101 5A22 10 F5					bpl @-
   102 5A24 4C 13 5A					jmp obe2		
   103 							
   104 5A27 B9 2C 01		@			lda bombX0-1,y		;od 0 do 33 (+1)
   105 5A2A 0A						asl @
   106 5A2B 0A						asl @
   107 5A2C 69 03					adc #2+1	;c=0, pozycja bomby jest powiekszona o 1 , po dzialaniu c=0, dodajemy wiec +1 i sec przy odejmowaniu jest niepotrzebne
   108 							;sec		;zbedne
   109 5A2E FD 72 19					sbc enemyPosX,x
   110 5A31 C9 0D					cmp #13
   111 5A33 B0 EC					bcs obe3
   112 							
   113 							
   114 5A35 B9 4C 01					lda bombY0-1,y	;jak powyzej
   115 5A38 0A						asl @
   116 5A39 0A						asl @
   117 5A3A 69 03					adc #2+1
   118 							
   119 							;sec
   120 5A3C FD 78 19					sbc enemyPosY,x
   121 5A3F C9 0D					cmp #13
   122 5A41 B0 DE					bcs obe3
   123 							
   124 5A43 BD E1 17 9D 81 01				mva enemyFaza,x enemyLastFaza,x
   125 5A49 A9 08 9D 89 01				mva #8 enemyWybuch,x
   126 5A4E A9 80 9D 71 01				mva #EKOLOR1 enemyNegatyw,x
   127 							
   128 5A53 A9 EB 9D 91 01				mva #>scolor2 enemyOraTab,x
   129 5A58 A9 30 9D ED 17				mva #exploshape enemyShapeH,x		
   130 							
   131 							
   132 							
   133 5A5D E0 05		@			cpx #5
   134 5A5F D0 09					bne @+
   135 5A61 A5 1D					lda jestSpy	;czySpy?
   136 5A63 F0 05					beq @+
   137 5A65 A9 FF 8D 55 19				mva #$ff spyScore
   138 										
   139 5A6A			@			;mva #5*2 sfx_enemyHit
   140
   141 5A6A 98						tya
   142 5A6B 48						pha
   143 5A6C A0 0C					ldy #fx_enemy
   144 5A6E A9 04					lda #4
   145 5A70 20 15 71					jsr sfx.add_fx1
   146 5A73 68						pla
   147 5A74 A8						tay
   148
   149 5A75 A9 02					lda #$2					;20 pkt jak enemy wpadnie na obiekt
   150 5A77 20 AF 68					jsr dodajPunkty
   151 							
   152 							
   153 						
   154 5A7A BE 0C 01					ldx bombyEkran-1,y
   155 5A7D BD 7F 11					lda bombRodzaj-1,x
   156 5A80 F0 18					beq @+
   157 5A82 A9 FF 9D 7F 11				mva #255 bombRodzaj-1,x
   158 5A87 99 0C 01					sta bombyEkran-1,y
   159 							
   160 							
   161 5A8A BD FF 11					lda bombX-1,x
   162 5A8D 84 F7					sty pom0
   163 5A8F BC 7F 12					ldy bombY-1,x
   164 5A92 20 35 49					jsr dodajWybuch
   165 5A95 A4 F7					ldy pom0
   166 5A97 4C 13 5A					jmp obe2
   167 							
   168 5A9A A9 FF 9D 7F 11	@			mva #255 bombRodzaj-1,x
   169 5A9F 99 0C 01					sta bombyEkran-1,y
   170 5AA2 BD FF 11					lda bombX-1,x
   171 5AA5 38						sec
   172 5AA6 E9 01					sbc #1
   173 5AA8 84 F7					sty pom0
   174 5AAA BC 7F 12					ldy bombY-1,x
   175 5AAD 88						dey
   176 5AAE 20 78 60					jsr bombExplo
   177 5AB1 A4 F7					ldy pom0
   178 5AB3 4C 13 5A					jmp obe2
   179 							
   180 				;oblicz pozycje xi y enemy
   181 = 5AB6			obliczEnemyXY	equ *
   182 5AB6 A2 05					ldx #5
   183 5AB8 BD 79 01		@			lda enemyEkran,x
   184 5ABB 1D 89 01					ora enemyWybuch,x
   185 5ABE D0 16					bne @+
   186 							
   187 5AC0 BD C3 17					lda enemyX0,x
   188 5AC3 0A						asl
   189 5AC4 0A						asl
   190 5AC5 1D F3 17					ora enemyDX0,x
   191 5AC8 9D 72 19					sta enemyPosx,x
   192 							
   193 5ACB BD CF 17					lda enemyY0,x
   194 5ACE 0A						asl
   195 5ACF 0A						asl
   196 5AD0 1D F9 17					ora enemyDY0,x
   197 5AD3 9D 78 19					sta enemyPosY,x
   198 							
   199 5AD6 CA			@			dex
   200 5AD7 10 DF					bpl @-1
   201 5AD9 60						rts
   202
   203
   204 				;kolizje pociskow z przeciwnikami
   205 = 5ADA			kolPociskiEnemy	equ *
   206 5ADA A6 57					ldx maxPociskow
   207 5ADC B5 0A		@			lda pociski,x
   208 							
   209 5ADE 30 06					bmi kolpe1
   210 5AE0 B5 BE					lda pociskiTlo,x			;szukaj kolizji jesli znak pod pociskiem to znak jakiegos duszka >73
   211 5AE2 C9 4A					cmp #74
   212 5AE4 B0 04					bcs @+
   213 							
   214 5AE6 CA			kolpe1		dex
   215 5AE7 10 F3					bpl @-
   216 5AE9 60						rts
   217
   218 5AEA A0 05		@			ldy #5
   219 5AEC B9 79 01		@			lda enemyEkran,Y
   220 5AEF 19 89 01					ora enemyWybuch,y
   221 5AF2 F0 06					beq @+
   222 5AF4 88			kolpe2		dey
   223 5AF5 10 F5					bpl @-
   224 5AF7 4C E6 5A					jmp kolpe1
   225 							
   226 5AFA BD 86 14		@			lda pociskiDX0,x
   227 5AFD 38						sec	
   228 5AFE F9 72 19					sbc enemyPosX,y
   229 5B01 C9 08					cmp #8	
   230 5B03 B0 EF					bcs kolpe2
   231 							
   232 5B05 BD 92 14					lda pociskiDY0,x
   233 5B08 38						sec	
   234 5B09 F9 78 19					sbc enemyPosY,y
   235 5B0C C9 08					cmp #8
   236 5B0E B0 E4					bcs kolpe2
   237 							
   238 							
   239 5B10 A9 81 95 0A					mva #129 pociski,x
   240 5B14 C6 13					dec liczbaPociskow
   241 							
   242 5B16 B9 E1 17 99 81 01				mva enemyFaza,y enemyLastFaza,y
   243 5B1C A9 08 99 89 01				mva #8 enemyWybuch,y
   244 5B21 A9 80 99 71 01				mva #EKOLOR1 enemyNegatyw,y
   245 5B26 A9 EB 99 91 01				mva #>scolor2 enemyOraTab,y
   246 5B2B A9 30 99 ED 17				mva #exploshape enemyShapeH,y	
   247 							
   248 							
   249 							
   250 5B30 C0 05					cpy #5
   251 5B32 D0 0D					bne @+
   252 5B34 A5 1D					lda jestSpy	;czySpy?
   253 5B36 F0 09					beq @+
   254 5B38 A9 FF 8D 55 19				mva #$ff spyScore
   255 							;mva #2*2 sfx_enemyHit
   256 5B3D A0 0E					ldy #fx_spy
   257 5B3F D0 02					bne @+1		;jmp
   258
   259 							
   260 5B41			@			;mva #5*2 sfx_enemyHit
   261 5B41 A0 0C					ldy #fx_enemy
   262 5B43 A9 02		@			lda #$2
   263 5B45 20 AF 68					jsr dodajPunkty
   264 							
   265 5B48 A9 04					lda #4	;prio
   266 5B4A 20 15 71					jsr sfx.add_fx1
   267 							
   268 5B4D 4C E6 5A					jmp kolpe1
   269
   270
   271
   272 				;kolizje strzalow z przeciwnikami
   273 = 5B50			kolStrzalyEnemy	equ *
   274 5B50 A2 03					ldx #3
   275 5B52 B5 17		@			lda strzal,x
   276 5B54 D0 04					bne @+
   277 5B56 CA			kolse1		dex
   278 5B57 10 F9					bpl @-
   279 5B59 60						rts
   280 							
   281 5B5A A0 05		@			ldy #5
   282 5B5C B9 79 01		@			lda enemyEkran,y
   283 5B5F 19 89 01					ora enemyWybuch,y
   284 5B62 F0 06					beq @+
   285 5B64 88			kolse2		dey
   286 5B65 10 F5					bpl @-
   287 5B67 4C 56 5B					jmp kolse1
   288 							
   289 5B6A BD 10 19		@			lda strzalX3,x
   290 5B6D 38						sec	
   291 5B6E F9 72 19					sbc enemyPosX,y
   292 5B71 C9 08					cmp #8
   293 5B73 B0 EF					bcs kolse2
   294 							
   295 5B75 BD 1C 19					lda strzalY3,x
   296 5B78 38						sec	
   297 5B79 F9 78 19					sbc enemyPosY,y
   298 5B7C C9 08					cmp #8 
   299 5B7E B0 E4					bcs kolse2
   300 							
   301 5B80 A9 00 95 17					mva #0 strzal,x
   302 5B84 B9 E1 17 99 81 01				mva enemyFaza,y enemyLastFaza,y
   303 5B8A A9 08 99 89 01				mva #8 enemyWybuch,y
   304 5B8F A9 80 99 71 01				mva #EKOLOR1 enemyNegatyw,y
   305 5B94 A9 EB 99 91 01				mva #>scolor2	enemyOraTab,y
   306 5B99 A9 30 99 ED 17				mva #exploshape enemyShapeH,y
   307 							
   308 5B9E C0 00					cpy #0
   309 5BA0 F0 0A					beq @+
   310 5BA2 AD 6E 19					lda formacja_zbite
   311 5BA5 C9 04					cmp #4
   312 5BA7 D0 03					bne @+
   313 5BA9 EE 6E 19					inc formacja_zbite		;jesli ostatni z formacji			
   314 							
   315 							
   316 5BAC C0 05		@			cpy #5
   317 5BAE D0 0E					bne @+
   318 5BB0 A5 1D					lda jestSpy	;czySpy?
   319 5BB2 F0 0A					beq @+
   320 5BB4 A9 FF					lda #$ff
   321 5BB6 20 AF 68					jsr dodajPunkty
   322 							;mva #2*2 sfx_enemyHit
   323 5BB9 A0 0E					ldy #fx_spy
   324 5BBB 4C C5 5B					jmp fg0
   325
   326 							
   327 5BBE A9 05		@			lda #$5
   328 5BC0 20 AF 68					jsr dodajPunkty
   329 							;mva #5*2 sfx_enemyHit
   330 5BC3 A0 0C					ldy #fx_enemy
   331 5BC5			fg0			
   332 5BC5 A9 04					lda #4
   333 5BC7 20 15 71					jsr sfx.add_fx1
   334 							
   335 5BCA 4C 56 5B					jmp kolse1
   336 									
   337 							
   338 				;kolizja statku z wrogiem
   339 = 5BCD			kolStatekEnemy	equ *
   340 5BCD A2 05					ldx #5
   341 5BCF BD 79 01		@			lda enemyEkran,x
   342 5BD2 1D 89 01					ora enemyWybuch,x
   343 5BD5 F0 04					beq @+
   344 5BD7 CA			kolen1		dex
   345 5BD8 10 F5					bpl @-
   346 5BDA 60						rts		
   347 							
   348 5BDB BD 72 19		@			lda enemyPosX,x
   349 5BDE 38						sec 	;-1
   350 5BDF E5 E7					sbc movX0
   351 							;sec				;można pominąć, jeśli poprzedni wynik jest ujemny to i tak poza zakresem
   352 5BE1 E9 36					sbc #54	;+2
   353 5BE3 C9 0D					cmp #13
   354 5BE5 B0 F0					bcs kolen1
   355 							
   356 5BE7 BD 78 19					lda enemyPosY,x
   357 5BEA 38						sec
   358 5BEB E5 E8					sbc movY0
   359 							;sec				; jak wyżej
   360 5BED E9 2E					sbc #46	;+1
   361 5BEF C9 0D					cmp #13		
   362 5BF1 B0 E4					bcs kolen1
   363 							
   364 5BF3 BD E1 17 9D 81 01				mva enemyFaza,x enemyLastFaza,x
   365 5BF9 A9 08 9D 89 01				mva #8 enemyWybuch,x
   366 5BFE A9 80 9D 71 01				mva #EKOLOR1 enemyNegatyw,x
   367 5C03 A9 EB 9D 91 01				mva #>scolor2 enemyOraTab,x
   368 5C08 A9 30 9D ED 17				mva #exploshape enemyShapeH,x
   369 							
   370 							;lda #5*2
   371 5C0D A0 0C					ldy #fx_enemy
   372 5C0F E0 05					cpx #5
   373 5C11 D0 06					bne @+
   374 5C13 A6 1D					ldx jestSpy
   375 5C15 F0 02					beq @+
   376 							;lda #2*2
   377 5C17 A0 0E					ldy #fx_spy
   378 							
   379 5C19 A9 04		@			lda #4
   380 5C1B 20 15 71					jsr sfx.add_fx1
   381 										
   382 5C1E A9 3E 8D 70 19				mva #62 fazaWybuch
   383 5C23 A9 01 85 16					mva #1 trafienie
   384 							
   385 5C27 A0 10					ldy #fx_dead
   386 5C29 A9 06					lda #6
   387 5C2B 4C 50 71					jmp sfx.add_fx
   388 							;mva #9*2 sfx_dead
   389 							
   390 							;rts
   391 							
   392 				;kolizje statku z bazami
   393 = 5C2E			kolStatekBazy	equ *
   394 5C2E AE 5B 19					ldx licznikBazyEkran
   395 5C31 D0 01					bne *+3
   396 5C33 60						rts
   397
   398 5C34 BD 00 01		kolst1		lda bazyEkran-1,x
   399 5C37 30 52					bmi kolst2
   400 5C39 A8						tay
   401 5C3A B9 FF 12					lda bazyRodzaj-1,y
   402 5C3D 30 4C					bmi kolst2
   403 							
   404 5C3F D0 25					bne @+		;baza b
   405
   406 					;baza A
   407 5C41 B9 3F 13					lda bazyX0-1,y
   408 							;bmi kolst2
   409 5C44 0A						asl @
   410 5C45 0A						asl @
   411 5C46 38						sec
   412 5C47 E5 E7					sbc movX0
   413 5C49 E9 19					sbc #60-35
   414 5C4B C9 2B					cmp #43
   415 5C4D B0 3C					bcs kolst2
   416 5C4F 8D 9D 5C					sta spra1_
   417 							
   418 5C52 B9 5F 13					lda bazyY0-1,y
   419 							;bmi kolst2
   420 5C55 0A						asl @
   421 5C56 0A						asl @
   422 5C57 38						sec
   423 5C58 E5 E8					sbc movY0
   424 5C5A E9 15					sbc #52-31
   425 5C5C C9 27					cmp #39
   426 5C5E B0 2B					bcs kolst2
   427 5C60 8D AC 5C					sta spra2_
   428 							
   429 							;tutaj dokladne sprawdzenie bazy A
   430 5C63 4C 8F 5C					jmp sprawdzBazaA		;skok bezwarunkowy
   431 							
   432 					;baza B
   433 5C66 B9 3F 13		@			lda bazyX0-1,y
   434 							;bmi kolst2
   435 5C69 0A						asl @
   436 5C6A 0A						asl @
   437 5C6B 38						sec
   438 5C6C E5 E7					sbc movX0
   439 5C6E E9 1D					sbc #60-31
   440 5C70 C9 27					cmp #39
   441 5C72 B0 17					bcs kolst2
   442 5C74 8D F8 5C					sta sprb1_
   443 							
   444 5C77 B9 5F 13					lda bazyY0-1,y
   445 							;bmi kolst2
   446 5C7A 0A						asl @
   447 5C7B 0A						asl @
   448 5C7C 38						sec
   449 5C7D E5 E8					sbc movY0
   450 5C7F E9 11					sbc #52-35
   451 5C81 C9 2B					cmp #43
   452 5C83 B0 06					bcs kolst2
   453 5C85 8D 06 5D					sta sprb2_
   454 							
   455 5C88 4C EA 5C					jmp sprawdzBazaB
   456 							
   457 5C8B			kolst2		;ldx pom0f
   458 5C8B CA						dex
   459 5C8C D0 A6					bne kolst1
   460 5C8E 60						rts
   461
   462 				;sprawdz czy statek jest na bazie A
   463 = 5C8F			sprawdzBazaA	equ *
   464 5C8F 84 F8					sty pom0a		;zapamietaj numer bazy
   465 							
   466 5C91 A6 5E					ldx sJoy
   467 5C93 BD 45 5D					lda kolTab1,x
   468 5C96 AA						tax				;znajdz dane dla danego wygladu statku
   469 							
   470 5C97 A9 03 85 FC					mva #3 pom0e		;licznik petli
   471 							
   472 5C9B 38			sprba2		sec
   473 = 5C9D			spra1_		equ *+1				
   474 5C9C A9 FF					lda #$ff
   475 5C9E FD 50 5D					sbc kolTab2,x	;pozycja X punktu testowego
   476 5CA1 C9 24					cmp #36			;9*4
   477 5CA3 B0 3F					bcs sprba1		;nastepny punkt, poza zakresem lub ujemna
   478 5CA5 0A						asl @
   479 5CA6 29 F8					and #%11111000	;X bylo *4 wiec wystarczy *2 i obciecie najmlodszych bitow
   480 5CA8 85 FA					sta pom0c
   481 							
   482 5CAA 38						sec
   483 = 5CAC			spra2_		equ *+1
   484 5CAB A9 FF					lda #$ff
   485 5CAD FD 68 5D					sbc kolTab2+24,x	;pozycja Y punktu testowego
   486 5CB0 C9 20					cmp #32			;8*4
   487 5CB2 B0 30					bcs sprba1
   488 5CB4 4A						lsr @
   489 5CB5 4A						lsr @
   490 									
   491 5CB6 05 FA					ora pom0c
   492 5CB8 A8						tay
   493 5CB9 B9 E8 61					lda bazaA2,y
   494 5CBC F0 26					beq sprba1	
   495 							
   496 5CBE C9 80		@			cmp #128
   497 5CC0 90 0D					bcc @+
   498 							
   499 5CC2 29 7F					and #127			;czy zbity element dzialka
   500 5CC4 A8						tay
   501 5CC5 B9 61 63					lda tabKol0,y
   502 5CC8 A4 F8					ldy pom0a
   503 5CCA 39 0F 13					and bazyStan-1,y
   504 5CCD F0 15					beq sprba1
   505 							
   506 5CCF A4 F8		@			ldy pom0a
   507 5CD1 20 06 63					jsr usunBazeA			
   508 5CD4 A9 3E 8D 70 19				mva #62 fazaWybuch
   509 5CD9 A9 01 85 16					mva #1 trafienie
   510 							
   511 5CDD A0 10					ldy #fx_dead
   512 5CDF A9 06					lda #6
   513 5CE1 4C 50 71					jmp sfx.add_fx
   514 							
   515 							;mva #9*2 sfx_dead
   516 							;rts
   517 							
   518 5CE4 E8			sprba1		inx
   519 5CE5 C6 FC					dec pom0e
   520 5CE7 D0 B2					bne sprba2
   521 							
   522 5CE9 60						rts
   523 							
   524 = 5CEA			sprawdzBazaB	equ *
   525 5CEA 84 F8					sty pom0a		;zapamietaj numer bazy
   526 							
   527 5CEC A6 5E					ldx sJoy
   528 5CEE BD 45 5D					lda kolTab1,x
   529 5CF1 AA						tax				;znajdz dane dla danego wygladu statku
   530 							
   531 5CF2 A9 03 85 FC					mva #3 pom0e		;licznik petli
   532 							
   533 5CF6 38			sprba4		sec	
   534 = 5CF8			sprb1_		equ *+1			
   535 5CF7 A9 FF					lda #$ff
   536 5CF9 FD 50 5D					sbc kolTab2,x	;pozycja X punktu testowego
   537 5CFC C9 20					cmp #32		;8*4
   538 5CFE B0 3F					bcs sprba3
   539 5D00 4A						lsr @
   540 5D01 4A						lsr @
   541 5D02 85 FA					sta pom0c
   542 							
   543 							
   544 5D04 38						sec
   545 = 5D06			sprb2_		equ *+1
   546 5D05 A9 FF					lda #$ff
   547 5D07 FD 68 5D					sbc kolTab2+24,x	;pozycja Y punktu testowego
   548 5D0A C9 24					cmp #36		;9*4
   549 5D0C B0 31					bcs sprba3
   550 5D0E 0A						asl @
   551 5D0F 29 F8					and #%11111000
   552 							
   553 5D11 05 FA					ora pom0c
   554 5D13 A8						tay
   555 5D14 B9 03 64					lda bazaB2,y
   556 5D17 F0 26					beq sprba3
   557 							
   558 5D19 C9 80		@			cmp #128
   559 5D1B 90 0D					bcc @+
   560 							
   561 5D1D 29 7F					and #127			;czy zbity element dzialka
   562 5D1F A8						tay
   563 5D20 B9 61 63					lda tabKol0,y
   564 5D23 A4 F8					ldy pom0a
   565 5D25 39 0F 13					and bazyStan-1,y
   566 5D28 F0 15					beq sprba3
   567 							
   568 5D2A A4 F8		@			ldy pom0a
   569 5D2C 20 20 65					jsr usunBazeB			
   570 5D2F A9 3E 8D 70 19				mva #62 fazaWybuch
   571 5D34 A9 01 85 16					mva #1 trafienie
   572 							
   573 5D38 A0 10					ldy #fx_dead
   574 5D3A A9 06					lda #6
   575 5D3C 4C 50 71					jmp sfx.add_fx
   576 							
   577 							;mva #9*2 sfx_dead
   578 							;rts
   579 							
   580 5D3F E8			sprba3		inx
   581 5D40 C6 FC					dec pom0e
   582 5D42 D0 B2					bne sprba4
   583
   584 5D44 60						rts
   585
   586
   587 5D45 00 0C 00 00 06 09 + kolTab1		dta b(0,12,0,0,6,9,3,0,18,15,21)
   588 5D50 04 07 00 00 06 01 + kolTab2		dta b(4,7,0,0,6,1,0,4,4,6,1,0,6,0,3,7,6,1,7,3,3,7,6,1)
   589 5D68 07 02 02 07 06 01 + 			dta b(7,2,2,7,6,1,4,7,0,1,6,0,5,5,0,0,6,1,4,7,0,7,1,6)
   590 5D80 2D 32		tabRak1		dta b(45,50)		;granice Y
   591 5D82 3B 36					dta b(59,54)		;granice X
   592 							
   593 							
   594 				;kolizje rakiety ze statkiem
   595 = 5D84			kolRakietyStatek	equ *
   596 5D84 A5 5B					lda czyRakiety
   597 5D86 D0 01					bne *+3
   598 5D88 60						rts
   599
   600 5D89 A2 07					ldx #7
   601 5D8B BD A0 13		@			lda rakietyMove,x
   602 5D8E D0 04					bne @+1
   603 							
   604 5D90 CA			@			dex
   605 5D91 10 F8					bpl @-1
   606 							
   607 5D93 60						rts
   608 							
   609 5D94 BD 78 13		@			lda rakietyTyp,x
   610 5D97 4A						lsr @
   611 5D98 A8						tay
   612 							
   613 5D99 BD 98 13					lda rakietyY0,x
   614 5D9C 0A						asl @
   615 5D9D 0A						asl @
   616 5D9E 38						sec
   617 5D9F E5 E8					sbc movY0
   618 5DA1 D9 80 5D					cmp tabRak1,y
   619 5DA4 90 EA					bcc @-1
   620 5DA6 C9 3C					cmp #60
   621 5DA8 B0 E6					bcs @-1
   622 							
   623 5DAA BD 88 13					lda rakietyX0,x
   624 5DAD 0A						asl @
   625 5DAE 0A						asl @
   626 5DAF 38						sec
   627 5DB0 E5 E7					sbc movX0
   628 5DB2 D9 82 5D					cmp tabRak1+2,y
   629 5DB5 90 D9					bcc @-1
   630 5DB7 C9 44					cmp #68
   631 5DB9 B0 D5					bcs @-1
   632 							
   633 							
   634 5DBB A9 3E 8D 70 19				mva #62 fazaWybuch
   635 5DC0 A9 01 85 16					mva #1 trafienie
   636 							
   637 5DC4 A0 10					ldy #fx_dead
   638 5DC6 A9 06					lda #6
   639 5DC8 4C 50 71					jmp sfx.add_fx
   640 							
   641 							;mva #9*2 sfx_dead
   642 							;rts
   643 							
   644 				;kolizja rakiety z obiektami
   645 = 5DCB			kolRakietyObiekty	equ *
   646 5DCB A5 5B					lda czyRakiety
   647 5DCD D0 01					bne *+3
   648 5DCF 60						rts
   649 							
   650 5DD0 AC 5C 19					ldy licznikBombyEkran		;czy sa jakies bomby na ekranie
   651 5DD3 D0 01					bne *+3
   652 5DD5 60						rts
   653 							
   654 5DD6 A2 07					ldx #7
   655 5DD8 BD A0 13		@			lda rakietyMove,x
   656 5DDB D0 04					bne @+
   657 5DDD CA			kolrak3		dex
   658 5DDE 10 F8					bpl @-
   659 5DE0 60						rts
   660 							
   661 5DE1 AC 5C 19		@			ldy licznikBombyEkran
   662 5DE4 BD 78 13					lda rakietyTyp,x
   663 5DE7 29 02					and #%10
   664 5DE9 D0 33					bne kolrak2b
   665 							
   666 5DEB B9 0C 01		kolrak2		lda bombyEkran-1,y
   667 5DEE 84 F7					sty pom0
   668 5DF0 A8						tay
   669 5DF1 B9 7F 11					lda bombRodzaj-1,y
   670 5DF4 30 20					bmi kolrak1
   671 							
   672 5DF6 85 F8					sta pom0a
   673 5DF8 A4 F7					ldy pom0
   674 							
   675 5DFA B9 2C 01					lda bombX0-1,y
   676 5DFD 38						sec
   677 5DFE FD 88 13					sbc rakietyX0,x
   678 5E01 C9 02					cmp #2
   679 5E03 B0 0B					bcs kolrak1b
   680 							
   681 5E05 B9 4C 01					lda bombY0-1,y
   682 5E08 38						sec
   683 5E09 FD 98 13					sbc rakietyY0,x
   684 5E0C C9 03					cmp #3
   685 5E0E 90 41					bcc @+
   686 							
   687 							
   688 							
   689 5E10 88			kolrak1b	dey
   690 5E11 D0 D8					bne kolrak2
   691 5E13 4C DD 5D					jmp kolrak3
   692 							
   693 = 5E16			kolrak1		equ *
   694 5E16 A4 F7					ldy pom0
   695 5E18 88						dey
   696 5E19 D0 D0					bne kolrak2
   697 5E1B 4C DD 5D					jmp kolrak3			
   698
   699
   700 5E1E B9 0C 01		kolrak2b	lda bombyEkran-1,y
   701 5E21 84 F7					sty pom0
   702 5E23 A8						tay
   703 5E24 B9 7F 11					lda bombRodzaj-1,y
   704 5E27 30 20					bmi kolrak1z
   705 							
   706 5E29 85 F8					sta pom0a
   707 5E2B A4 F7					ldy pom0
   708 							
   709 5E2D B9 2C 01					lda bombX0-1,y
   710 5E30 38						sec
   711 5E31 FD 88 13					sbc rakietyX0,x
   712 5E34 C9 03					cmp #3
   713 5E36 B0 0B					bcs kolrak1c
   714 							
   715 5E38 B9 4C 01					lda bombY0-1,y
   716 5E3B 38						sec
   717 5E3C FD 98 13					sbc rakietyY0,x
   718 5E3F C9 02					cmp #2
   719 5E41 90 0E					bcc @+
   720 							
   721 5E43 88			kolrak1c	dey
   722 5E44 D0 D8					bne kolrak2b
   723 5E46 4C DD 5D					jmp kolrak3
   724 							
   725 = 5E49			kolrak1z	equ *
   726 5E49 A4 F7					ldy pom0
   727 5E4B 88						dey
   728 5E4C D0 9D					bne kolrak2
   729 5E4E 4C DD 5D					jmp kolrak3					
   730 							
   731 5E51 B9 0C 01		@			lda bombyEkran-1,y
   732 5E54 A8						tay
   733 5E55 B9 7F 11					lda bombRodzaj-1,y
   734 5E58 48						pha
   735 5E59 A9 FF 99 7F 11				mva #255 bombRodzaj-1,y
   736 							
   737 5E5E 68						pla
   738 5E5F F0 28					beq @+
   739 5E61 B9 FF 11					lda bombX-1,y
   740 5E64 48						pha
   741 5E65 B9 7F 12					lda bombY-1,y
   742 5E68 A8						tay
   743 5E69 68						pla
   744 5E6A 20 35 49					jsr dodajWybuch
   745 							
   746 5E6D A0 02					ldy #fx_asteroid
   747 5E6F A9 02					lda #2
   748 5E71 20 15 71					jsr sfx.add_fx1
   749 							;mva #0 sfx_asteroid
   750 							
   751 5E74 BC 70 13					ldy rakietyStan,x
   752 5E77 A9 FF 99 1F 13				mva #255 bazyRakieta-1,y
   753 5E7C A4 F7					ldy pom0
   754 5E7E A9 00					lda #0
   755 5E80 9D 70 13					sta rakietyStan,x
   756 5E83 9D A0 13					sta rakietyMove,x
   757 5E86 4C DD 5D					jmp kolrak3
   758 							
   759 5E89 B9 FF 11		@			lda bombX-1,y
   760 5E8C 38						sec
   761 5E8D E9 01					sbc #1
   762 5E8F 85 FE					sta kolpom0
   763 5E91 B9 7F 12					lda bombY-1,y
   764 5E94 A8						tay
   765 5E95 88						dey
   766 5E96 A5 FE					lda kolpom0
   767 5E98 20 78 60					jsr bombExplo
   768 							
   769 5E9B BC 70 13					ldy rakietyStan,x
   770 5E9E A9 FF 99 1F 13				mva #255 bazyRakieta-1,y
   771 5EA3 A4 F7					ldy pom0
   772 5EA5 A9 00					lda #0
   773 5EA7 9D 70 13					sta rakietyStan,x
   774 5EAA 9D A0 13					sta rakietyMove,x
   775 							
   776 5EAD 4C DD 5D					jmp kolrak3 
   777 							
   778 							
   779 5EB0 FF FF FF FF FF FF + tabkolsx	:15 dta b(255)
   780 5EBF 03 07 0B 0F					dta b(60-57,64-57,68-57,72-57)
   781 5EC3 FF FF FF FF FF FF + 			:15 dta b(255)
   782 							
   783 5ED2 FF FF FF FF FF FF + tabkolsy	:13 dta b(255)
   784 5EDF 03 07 0B 0F					dta b(52-49,56-49,60-49,64-49)
   785 5EE3 FF FF FF FF FF FF + 			:13 dta b(255)
   786 							
   787 				;kolizje statku z obiektami (miny,meteory)
   788 = 5EF0			kolStatekObiekty	equ *
   789 5EF0 AE 5C 19					ldx licznikBombyEkran
   790 5EF3 D0 01					bne @+
   791 5EF5 60						rts
   792 							
   793 5EF6 BD 0C 01		@			lda bombyEkran-1,x
   794 5EF9 A8						tay
   795 5EFA B9 7F 11					lda bombRodzaj-1,y
   796 5EFD 10 04					bpl @+1
   797 5EFF CA			@			dex
   798 5F00 D0 F4					bne @-1
   799 							
   800 5F02 60						rts
   801 							
   802 5F03 BC 2C 01		@			ldy bombX0-1,x
   803 5F06 B9 B0 5E					lda tabkolsx,y
   804 5F09 30 F4					bmi @-1
   805 							
   806 5F0B 38						sec
   807 5F0C E5 E7					sbc movX0
   808 5F0E C9 0F					cmp #15
   809 5F10 B0 ED					bcs @-1
   810 							
   811 5F12 BC 4C 01					ldy bombY0-1,x
   812 5F15 B9 D2 5E					lda tabkolsy,y
   813 5F18 30 E5					bmi @-1
   814 							
   815 5F1A 38						sec
   816 5F1B E5 E8					sbc movY0
   817 5F1D C9 0F					cmp #15
   818 5F1F B0 DE					bcs @-1
   819 							
   820 							;wystapila kolizja
   821 5F21 BC 0C 01					ldy bombyEkran-1,x
   822 5F24 B9 7F 11					lda bombRodzaj-1,y
   823 5F27 F0 27					beq @+
   824 5F29 A9 FF 99 7F 11				mva #255 bombRodzaj-1,y
   825 							
   826 5F2E A9 3E 8D 70 19				mva #62 fazaWybuch
   827 5F33 A9 01 85 16					mva #1 trafienie
   828 							
   829 5F37 98						tya
   830 5F38 48						pha
   831 5F39 A0 10					ldy #fx_dead
   832 5F3B A9 06					lda #6
   833 5F3D 20 50 71					jsr sfx.add_fx
   834 5F40 68						pla
   835 5F41 A8						tay
   836 							
   837 							;mva #9*2 sfx_dead
   838 							
   839 5F42 B9 FF 11					lda bombX-1,y
   840 5F45 85 F7					sta pom0
   841 5F47 B9 7F 12					lda bombY-1,y
   842 5F4A A8						tay
   843 5F4B A5 F7					lda pom0
   844 5F4D 4C 35 49					jmp dodajWybuch
   845 							
   846 5F50 A9 FF 99 7F 11	@			mva #255 bombRodzaj-1,y
   847
   848 5F55 A9 3E 8D 70 19				mva #62 fazaWybuch
   849 5F5A A9 01 85 16					mva #1 trafienie
   850 							
   851 5F5E 98						tya
   852 5F5F 48						pha
   853 5F60 A0 10					ldy #fx_dead
   854 5F62 A9 06					lda #6
   855 5F64 20 50 71					jsr sfx.add_fx
   856 5F67 68						pla
   857 5F68 A8						tay
   858 							
   859 							;mva #9*2 sfx_dead
   860
   861 5F69 B9 FF 11					lda bombX-1,y
   862 5F6C 38						sec
   863 5F6D E9 01					sbc #1
   864 5F6F 85 FE					sta kolpom0
   865 5F71 B9 7F 12					lda bombY-1,y
   866 5F74 A8						tay
   867 5F75 88						dey
   868 5F76 A5 FE					lda kolpom0
   869 5F78 4C 78 60					jmp bombExplo
   870 							
   871 				;kolizje statku z wybuchem
   872 = 5F7B			kolStatekWybuch	equ *
   873 5F7B AD 99 01					lda wybuchyStart
   874 5F7E 29 1F					and #%11111
   875 5F80 AA						tax
   876 5F81 EC 9A 01					cpx wybuchyStop
   877 5F84 D0 01					bne *+3
   878 5F86 60						rts		;brak wybuchow
   879 							
   880 5F87 BD C0 13		@			lda wybuchyX0,x
   881 5F8A 0A						asl @
   882 5F8B 0A						asl	@
   883 5F8C E5 E7					sbc movX0		
   884 5F8E C9 35					cmp #53
   885 5F90 90 23					bcc @+
   886 5F92 C9 44					cmp #68
   887 5F94 B0 1F					bcs @+
   888 							
   889 5F96 BD E0 13					lda wybuchyY0,x
   890 5F99 0A						asl @
   891 5F9A 0A						asl @
   892 5F9B E5 E8					sbc movY0
   893 5F9D C9 2C					cmp #45-1		;zmniejszone o 1 brak sec
   894 5F9F 90 14					bcc @+
   895 5FA1 C9 3B					cmp #60-1
   896 5FA3 B0 10					bcs @+
   897 							
   898 5FA5 A9 3E 8D 70 19				mva #62 fazaWybuch
   899 5FAA A9 01 85 16					mva #1 trafienie
   900 							
   901 5FAE A0 10					ldy #fx_dead
   902 5FB0 A9 06					lda #6
   903 5FB2 4C 50 71					jmp sfx.add_fx
   904 							
   905 							;mva #9*2 sfx_dead
   906 							;rts
   907 							
   908 5FB5 E8			@			inx
   909 5FB6 8A						txa
   910 5FB7 29 1F					and #%11111
   911 5FB9 AA						tax
   912 5FBA EC 9A 01					cpx wybuchyStop
   913 5FBD D0 C8					bne @-1
   914
   915 5FBF 60						rts
   916 							
   917 				;kolizje pociskow ze statkiem
   918 = 5FC0			kolPociskiStatek	equ *			
   919 5FC0 A6 57					ldx maxPociskow
   920 5FC2 B5 0A		@			lda pociski,x
   921 5FC4 10 04					bpl @+
   922 5FC6 CA			kolps1		dex
   923 5FC7 10 F9					bpl @-
   924 5FC9 60						rts
   925 							
   926 5FCA BD 86 14		@			lda pociskiDX0,x
   927 5FCD 38						sec
   928 5FCE E5 E7					sbc movX0
   929 5FD0 C9 3C					cmp #60
   930 5FD2 90 F2					bcc kolps1		;za malo
   931 5FD4 C9 44					cmp #68
   932 5FD6 B0 EE					bcs kolps1		;za duzo
   933 							
   934 5FD8 BD 92 14					lda pociskiDY0,x
   935 5FDB 38						sec
   936 5FDC E5 E8					sbc movY0
   937 5FDE C9 34					cmp #52
   938 5FE0 90 E4					bcc kolps1		;za malo
   939 5FE2 C9 3C					cmp #60
   940 5FE4 B0 E0					bcs kolps1		;za duzo
   941 							
   942 5FE6 A9 3E 8D 70 19				mva #62 fazaWybuch
   943 5FEB A9 01 85 16					mva #1 trafienie
   944 							
   945 5FEF A0 10					ldy #fx_dead
   946 5FF1 A9 06					lda #6
   947 5FF3 4C 50 71					jmp sfx.add_fx
   948 							
   949 							;mva #9*2 sfx_dead
   950 							;rts
   951 						
   952 				;kolizje pociskow z obiektami
   953 = 5FF6			kolPociskiObiekty	equ *
   954 5FF6 A6 57					ldx maxPociskow
   955 5FF8 B5 0A		@			lda pociski,x
   956 							
   957 5FFA 30 0A					bmi kolpo1
   958 5FFC B5 BE					lda pociskiTlo,x		;jesli pod pociskiem jest meteor lub bomba to poszukaj kolizji
   959 5FFE C9 1F					cmp #firstBombaChar
   960 6000 90 04					bcc kolpo1
   961 6002 C9 27					cmp #firstMeteorChar+4
   962 6004 90 04					bcc @+
   963 							
   964 6006 CA			kolpo1		dex
   965 6007 10 EF					bpl @-
   966 6009 60						rts
   967
   968 600A AC 5C 19		@			ldy licznikBombyEkran
   969 600D D0 01					bne kolpo3
   970 600F 60						rts
   971 							
   972 6010 84 F7		kolpo3		sty pom0
   973 6012 B9 0C 01					lda bombyEkran-1,y		;jesli <0 to nie ma juz tego obiekt
   974 6015 A8						tay
   975 6016 B9 7F 11					lda bombRodzaj-1,y
   976 6019 30 16					bmi kolpo2
   977 601B BD 74 14					lda pociskiY,x
   978 601E 38						sec
   979 601F F9 7F 12					sbc bombY-1,y
   980 6022 C9 02					cmp #2
   981 6024 B0 0B					bcs kolpo2
   982 6026 BD 68 14					lda pociskiX,x
   983 6029 38						sec
   984 602A F9 FF 11					sbc bombX-1,y
   985 602D C9 02					cmp #2
   986 602F 90 08					bcc @+	
   987 							
   988 6031 A4 F7		kolpo2		ldy pom0
   989 6033 88						dey
   990 6034 D0 DA					bne kolpo3
   991 6036 4C 06 60					jmp kolpo1		;skok bezwarunkowy			
   992 							
   993 6039 B9 7F 11		@			lda bombRodzaj-1,y
   994 603C 48						pha
   995 603D A9 FF 99 7F 11				mva #255 bombRodzaj-1,y
   996 6042 A9 81 95 0A					mva #129 pociski,x
   997 6046 C6 13					dec liczbaPociskow
   998 							
   999 6048 68						pla
  1000 6049 F0 18					beq @+
  1001 604B B9 FF 11					lda bombX-1,y
  1002 604E 48						pha
  1003 604F B9 7F 12					lda bombY-1,y
  1004 6052 48						pha
  1005 							
  1006 6053 A0 02					ldy #fx_asteroid
  1007 6055 A9 02					lda #2
  1008 6057 20 15 71					jsr sfx.add_fx1
  1009 							
  1010 605A 68						pla
  1011 605B A8						tay
  1012 							
  1013 							;mva #0 sfx_asteroid
  1014 605C 68						pla
  1015 605D 20 35 49					jsr dodajWybuch
  1016 6060 4C 06 60					jmp kolpo1
  1017 							
  1018 6063 B9 FF 11		@			lda bombX-1,y
  1019 6066 38						sec
  1020 6067 E9 01					sbc #1
  1021 6069 85 FE					sta kolpom0
  1022 606B B9 7F 12					lda bombY-1,y
  1023 606E A8						tay
  1024 606F 88						dey
  1025 6070 A5 FE					lda kolpom0
  1026 							
  1027 6072 20 78 60					jsr bombExplo
  1028 6075 4C 06 60					jmp kolpo1
  1029 							
  1030
  1031
  1032 				;Animacja wybuchu bomby 5xwybuch
  1033 = 6078			bombExplo	equ *
  1034 6078 86 FE					stx kolpom0
  1035 607A AA						tax
  1036 607B 20 35 49					jsr dodajWybuch
  1037 607E E8						inx
  1038 607F E8						inx
  1039 6080 8A						txa
  1040 6081 20 35 49					jsr dodajWybuch
  1041 6084 C8						iny
  1042 6085 C8						iny
  1043 6086 8A						txa
  1044 6087 20 35 49					jsr dodajWybuch
  1045 608A CA						dex
  1046 608B CA						dex
  1047 608C 8A						txa
  1048 608D 20 35 49					jsr dodajWybuch
  1049 6090 98						tya
  1050 6091 48						pha
  1051 							
  1052 6092 A0 04					ldy #fx_bomba
  1053 6094 A9 04					lda #4
  1054 6096 20 50 71					jsr sfx.add_fx
  1055 							
  1056 6099 68						pla
  1057 609A A8						tay
  1058 							
  1059 							;mva #1*2 sfx_bomba
  1060 609B 88						dey
  1061 609C E8						inx
  1062 609D 8A						txa
  1063 609E 20 35 49					jsr dodajWybuch
  1064 60A1 88						dey			;zachowujemy wartosc Y
  1065 60A2 A6 FE					ldx kolpom0
  1066 60A4 60						rts 
  1067 						
  1068 				;kolizje strzalow statku z obiektami (bomba,meteor)
  1069 = 60A5			kolStrzalyObiekty	equ *	
  1070 60A5 A2 03					ldx #3
  1071 60A7 B5 17		@			lda strzal,x
  1072 60A9 D0 04					bne @+
  1073 60AB CA			kolso1		dex
  1074 60AC 10 F9					bpl @-
  1075 60AE 60						rts
  1076 							
  1077 							
  1078 							
  1079 60AF AC 5C 19		@			ldy licznikBombyEkran
  1080 60B2 D0 01					bne kolso3
  1081 60B4 60						rts
  1082 							
  1083 60B5 84 F7		kolso3		sty pom0
  1084 60B7 B9 0C 01					lda bombyEkran-1,y
  1085 60BA A8						tay
  1086 60BB B9 7F 11					lda bombRodzaj-1,y
  1087 60BE 30 22					bmi kolso2		;nastepny obiekt
  1088 60C0 85 FD					sta pom0f
  1089 60C2 84 F8					sty pom0a
  1090 60C4 A4 F7					ldy pom0
  1091 60C6 B9 4C 01					lda bombY0-1,y	;pozycja Y bomby na ekranie +1
  1092 60C9 38						sec
  1093 60CA FD 18 19					sbc strzalY2,x
  1094 60CD C9 02					cmp #2
  1095 60CF B0 0B					bcs kolso2a		;nastepny obiekt
  1096 60D1 B9 2C 01					lda bombX0-1,y	;pozycja X bomby na ekranie +1
  1097 60D4 38						sec
  1098 60D5 FD 0C 19					sbc strzalX2,x
  1099 60D8 C9 02					cmp #2
  1100 60DA 90 0E					bcc @+
  1101 							
  1102 60DC 88			kolso2a		dey
  1103 60DD D0 D6					bne kolso3
  1104 60DF 4C AB 60					jmp kolso1		;skok bezwarunkowy	
  1105
  1106 60E2 A4 F7		kolso2		ldy pom0
  1107 60E4 88						dey
  1108 60E5 D0 CE					bne kolso3
  1109 60E7 4C AB 60					jmp kolso1		;skok bezwarunkowy				
  1110 							
  1111 60EA A5 FD		@			lda pom0f
  1112 60EC 49 01					eor #1
  1113 60EE 18						clc
  1114 60EF 69 01					adc #1
  1115 60F1 20 AF 68					jsr dodajPunkty
  1116 60F4 A4 F8					ldy pom0a
  1117 60F6 A9 FF 99 7F 11				mva #255 bombRodzaj-1,y
  1118 60FB A9 00 95 17					mva #0 strzal,x
  1119 							
  1120 							
  1121 60FF A5 FD					lda pom0f
  1122 6101 F0 18					beq @+
  1123 							
  1124 6103 B9 FF 11					lda bombX-1,y
  1125 6106 48						pha
  1126 6107 B9 7F 12					lda bombY-1,y
  1127 610A 48						pha
  1128 							
  1129 610B A0 02					ldy #fx_asteroid
  1130 610D A9 02					lda #2
  1131 610F 20 15 71					jsr sfx.add_fx1
  1132 							
  1133 6112 68						pla
  1134 6113 A8						tay
  1135 							
  1136 							;mva #0 sfx_asteroid
  1137 6114 68						pla
  1138 6115 20 35 49					jsr dodajWybuch
  1139 							
  1140 6118 4C AB 60					jmp kolso1		;bezwarunkowy , sprawdz nastepny strzal
  1141 							
  1142 611B B9 FF 11		@			lda bombX-1,y
  1143 611E 38						sec
  1144 611F E9 01					sbc #1
  1145 6121 85 FE					sta kolpom0
  1146 6123 48						pha
  1147 6124 B9 7F 12					lda bombY-1,y
  1148 6127 A8						tay
  1149 6128 88						dey
  1150 6129 68						pla
  1151 							
  1152 612A 20 78 60					jsr bombExplo
  1153 612D 4C AB 60					jmp kolso1
  1154 							
  1155 				;kolizje strzalow z bazami
  1156 = 6130			kolStrzalyBazy	equ *
  1157 6130 AD 5B 19					lda licznikBazyEkran
  1158 6133 D0 01					bne @+
  1159 6135 60						rts
  1160
  1161 6136 A2 03		@			ldx #3
  1162 6138 B5 17		@			lda strzal,x
  1163 613A D0 04					bne @+
  1164 613C CA			kolsb1		dex
  1165 613D 10 F9					bpl @-
  1166 613F 60						rts
  1167
  1168 6140 AC 5B 19		@			ldy licznikBazyEkran
  1169
  1170 6143 84 F7		kolsb3		sty pom0
  1171 6145 B9 00 01					lda bazyEkran-1,y
  1172 6148 A8						tay
  1173 6149 B9 FF 12					lda bazyRodzaj-1,y
  1174 614C F0 0A					beq @+
  1175 614E 10 2C					bpl @+1		;baza b
  1176 							
  1177 6150 A4 F7		kolsb2		ldy pom0
  1178 6152 88						dey
  1179 6153 D0 EE					bne kolsb3
  1180 6155 4C 3C 61					jmp kolsb1		;sok bezwarunkowy
  1181 							
  1182 6158 BD 18 19		@			lda strzalY2,x
  1183 615B 38						sec
  1184 615C F9 5F 13					sbc bazyY0-1,y
  1185 615F C9 08					cmp #8
  1186 6161 B0 ED					bcs kolsb2
  1187 6163 85 F9					sta pom0b
  1188 6165 BD 0C 19					lda strzalX2,x
  1189 6168 38						sec
  1190 6169 F9 3F 13					sbc bazyX0-1,y
  1191 616C C9 09					cmp #9
  1192 616E B0 E0					bcs kolsb2
  1193 6170 84 F8					sty pom0a		;indeks trafionej bazy
  1194 6172 86 FD					stx pom0f
  1195 6174 20 42 62					jsr kolBazaA
  1196 6177 A6 FD					ldx pom0f
  1197 6179 4C 3C 61					jmp kolsb1
  1198
  1199 617C BD 0C 19		@			lda strzalX2,x
  1200 617F 38						sec
  1201 6180 F9 3F 13					sbc bazyX0-1,y
  1202 6183 C9 08					cmp #8
  1203 6185 B0 C9					bcs kolsb2
  1204 6187 85 F9					sta pom0b
  1205 6189 BD 18 19					lda strzalY2,x
  1206 618C 38						sec
  1207 618D F9 5F 13					sbc bazyY0-1,y
  1208 6190 C9 09					cmp #9
  1209 6192 B0 BC					bcs kolsb2
  1210 6194 84 F8					sty pom0a		;indeks trafionej bazy
  1211 6196 86 FD					stx pom0f
  1212 6198 20 5B 64					jsr kolBazaB
  1213 619B A6 FD					ldx pom0f
  1214 619D 4C 3C 61					jmp kolsb1
  1215
  1216
  1217 							
  1218 61A0 00 00 00 85 85 00 + bazaA1		dta b(0,0,0,128+5,128+5,0,0,0)
  1219 61A8 00 00 02 0D 0D 02 + 			dta b(0,0,2,8+5,8+5,2,0,0)
  1220 61B0 80 08 07 07 07 07 + 			dta b(128+0,8+0,7,7,7,7,8+4,128+4)
  1221 61B8 08 08 07 07 07 07 + 			dta b(8+0,8+0,7,7,7,7,8+4,8+4)
  1222 61C0 00 00 00 06 06 00 + 			dta b(0,0,0,6,6,0,0,0)
  1223 61C8 09 09 07 07 07 07 + 			dta b(8+1,8+1,7,7,7,7,8+3,8+3)
  1224 61D0 81 09 07 07 07 07 + 			dta b(128+1,8+1,7,7,7,7,8+3,128+3)
  1225 61D8 00 00 03 0A 0A 03 + 			dta b(0,0,3,8+2,8+2,3,0,0)
  1226 61E0 00 00 00 82 82 00 + 			dta b(0,0,0,128+2,128+2,0,0,0)
  1227 									
  1228 61E8 00 00 00 82 82 00 + bazaA2		dta b(0,0,0,128+2,128+2,0,0,0)
  1229 61F0 00 00 03 0A 0A 03 + 			dta b(0,0,3,8+2,8+2,3,0,0)
  1230 61F8 83 0B 07 07 07 07 + 			dta b(128+3,8+3,7,7,7,7,8+1,128+1)
  1231 6200 0B 0B 07 07 07 07 + 			dta b(8+3,8+3,7,7,7,7,8+1,8+1)
  1232 6208 00 00 00 06 06 00 + 			dta b(0,0,0,6,6,0,0,0)
  1233 6210 0C 0C 07 07 07 07 + 			dta b(8+4,8+4,7,7,7,7,8+0,8+0)
  1234 6218 84 0C 07 07 07 07 + 			dta b(128+4,8+4,7,7,7,7,8+0,128+0)
  1235 6220 00 00 02 0D 0D 02 + 			dta b(0,0,2,8+5,8+5,2,0,0)
  1236 6228 00 00 00 85 85 00 + 			dta b(0,0,0,128+5,128+5,0,0,0)			
  1237
  1238 6230 02 05 07 05 02 00 + dzialkoAX	dta b(2,5,7,5,2,0,2,5)
  1239 6238 00 00 03 06 06 03 + dzialkoAY	dta b(0,0,3,6,6,3,3,3)
  1240 6240 00 01		bazaAbit	dta b(0,1)
  1241 							
  1242 = 6242			kolBazaA	equ *
  1243 6242 0A						asl @
  1244 6243 0A						asl @
  1245 6244 0A						asl @
  1246 6245 65 F9					adc pom0b
  1247 6247 A8						tay
  1248 6248 B9 A0 61					lda bazaA1,y
  1249 624B D0 01					bne @+
  1250 624D 60						rts			;puste pole
  1251 							
  1252 624E C9 07		@			cmp #7
  1253 6250 D0 05					bne @+
  1254 							
  1255 6252 A9 00 95 17					mva #0 strzal,x		;trafiono tylko w baze
  1256 6256 60						rts
  1257 							
  1258 6257 C9 06		@			cmp #6
  1259 6259 B0 16					bcs @+2
  1260 							
  1261 625B BC 24 19					ldy strzalKierunek,x
  1262 625E C0 01					cpy #1
  1263 6260 D0 0A					bne @+		;strzal poziomy i po skosie to zablokuj
  1264 							
  1265 6262 A8						tay
  1266 6263 BD 30 19					lda strzalXbit,x		;gorny lewy rog
  1267 6266 4A						lsr
  1268 6267 D9 3E 62					cmp bazaAbit-2,y
  1269 626A F0 04					beq @+1
  1270 							
  1271 626C A9 00 95 17		@			mva #0 strzal,x
  1272 6270 60			@			rts
  1273 							
  1274 6271 C9 06		@			cmp #6
  1275 6273 D0 13					bne @+
  1276 							
  1277 6275 A9 00 95 17					mva #0 strzal,x
  1278 6279 AD 5F 19					lda czyJadroA
  1279 627C F0 F2					beq @-1
  1280 627E A4 F8					ldy pom0a
  1281 6280 A9 FF 99 FF 12				mva #255 bazyRodzaj-1,y
  1282 6285 4C 06 63					jmp usunBazeA
  1283 							
  1284 6288 85 FA		@			sta pom0c
  1285 628A 29 07					and #%111
  1286 628C A8						tay
  1287 628D 84 FC					sty pom0e		;numer dzialka
  1288 628F B9 61 63					lda tabKol0,y
  1289 6292 85 FB					sta pom0d		;bit dzialka
  1290 6294 A4 F8					ldy pom0a	;indeks bazy
  1291 6296 39 0F 13					and bazyStan-1,y		;czy dzialo jest zestrzelone
  1292 6299 F0 61					beq @+2
  1293 							
  1294 							;trafiono dzialko
  1295 629B A9 00 95 17					mva #0 strzal,x
  1296 629F B9 0F 13					lda bazyStan-1,y
  1297 62A2 45 FB					eor pom0d
  1298 62A4 99 0F 13					sta bazyStan-1,y
  1299 62A7 D0 08					bne @+
  1300 							
  1301 62A9 A9 20					lda #$20
  1302 62AB 20 AF 68					jsr dodajPunkty
  1303 62AE 4C 0B 63					jmp usunBazeA1
  1304 							
  1305 62B1 A6 FC		@			ldx pom0e		;nr dzialka
  1306 62B3 BD 67 63					lda tabKol1,x		;adres ksztaltu po trafieniu
  1307 62B6 8D E3 62					sta _kol1+1
  1308 62B9 BD 6D 63					lda tabKol1+6,x
  1309 62BC 8D E4 62					sta _kol1+2
  1310 							
  1311 62BF BD 7F 63					lda tabKol2,x		;cannonX
  1312 62C2 85 80					sta pom
  1313 62C4 BD 85 63					lda tabKol2+6,x
  1314 62C7 85 81					sta pom+1
  1315 							
  1316 62C9 B9 2F 13					lda bazyX-1,y
  1317 62CC 18						clc
  1318 62CD 7D 30 62					adc dzialkoAX,x
  1319 62D0 48						pha
  1320 62D1 B9 4F 13					lda bazyY-1,y
  1321 62D4 7D 38 62					adc dzialkoAY,x
  1322 62D7 A8						tay
  1323 62D8 68						pla
  1324 62D9 20 35 49					jsr dodajWybuch
  1325 							
  1326 62DC A4 F8					ldy pom0a
  1327 62DE 88						dey
  1328 62DF A2 03					ldx #3
  1329 62E1 18						clc
  1330 = 62E2			@			equ *
  1331 62E2 BD FF FF		_kol1		lda $ffff,x
  1332 62E5 91 80					sta (pom),y
  1333 							;clc
  1334 62E7 A5 80					lda pom
  1335 62E9 69 10					adc #maxBaz
  1336 62EB 85 80					sta pom
  1337 					
  1338 62ED CA						dex
  1339 62EE 10 F2					bpl @-
  1340 							
  1341 62F0 A9 20					lda #$20
  1342 62F2 20 AF 68					jsr dodajPunkty
  1343 							
  1344 62F5 A0 06					ldy #fx_dzialko
  1345 62F7 A9 03					lda #3
  1346 62F9 4C 50 71					jmp sfx.add_fx
  1347 							
  1348 							;mva #7*2 sfx_dzialko
  1349 							
  1350 							;rts
  1351 						
  1352 62FC A5 FA		@			lda pom0c
  1353 62FE 10 01					bpl @+
  1354 6300 60						rts
  1355
  1356 6301 A9 00 95 17		@			mva #0 strzal,x
  1357 6305 60						rts				;narazie nic nie rob
  1358 							
  1359 				;usuwa baze numer w Y i dodaje wybuchy (powiekszonuy o 1)
  1360 = 6306			usunBazeA	equ *
  1361 6306 A9 50					lda #$50
  1362 6308 20 AF 68					jsr dodajPunkty
  1363 							
  1364 630B 20 80 6D		usunBazeA1	jsr eorBazaRadar		;bez bonus
  1365 630E A9 75					lda #$75
  1366 6310 20 AF 68					jsr dodajPunkty
  1367 6313 A9 75					lda #$75
  1368 6315 20 AF 68					jsr dodajPunkty
  1369 							
  1370 6318 A9 FF 99 FF 12				mva #255 bazyRodzaj-1,y
  1371 631D EE 4C 19					inc zbiteBazy
  1372 							
  1373 6320 BE 1F 13					ldx bazyRakieta-1,y
  1374 6323 30 0D					bmi @+
  1375 							
  1376 6325 A9 FF 99 1F 13				mva #255 bazyRakieta-1,y
  1377 632A A9 00 9D 70 13				mva #0 rakietyStan,x
  1378 632F 9D A0 13					sta rakietyMove,x
  1379 							
  1380 6332 B9 2F 13		@			lda bazyX-1,y
  1381 6335 8D 48 63					sta _usb1+1
  1382 6338 B9 4F 13					lda bazyY-1,y
  1383 633B 8D 42 63					sta _usb2+1
  1384 							
  1385 633E A2 07					ldx #7
  1386 6340 18			@			clc
  1387 6341 A9 FF		_usb2		lda #$ff
  1388 6343 7D 38 62					adc dzialkoAY,x
  1389 6346 A8						tay
  1390 6347 A9 FF		_usb1		lda #$ff
  1391 6349 7D 30 62					adc dzialkoAX,x
  1392 634C 20 35 49					jsr dodajWybuch
  1393 634F CA						dex
  1394 6350 10 EE					bpl @-
  1395 									
  1396 6352 20 00 4B					jsr zmniejszKondycja
  1397
  1398 6355 A9 0E 8D 52 19				mva #14 waitWybuch
  1399 635A A0 08					ldy #fx_wybuch
  1400 635C A9 04					lda #4
  1401 635E 4C 50 71					jmp sfx.add_fx
  1402
  1403 							;mva #8*2 sfx_wybuch
  1404 							;mva #14 waitWybuch
  1405 							
  1406 							;rts
  1407 							
  1408 6361 01 02 04 08 10 20	tabKol0		dta b(%1,%10,%100,%1000,%10000,%100000)
  1409 6367 8B 8F 93 97 9B 9F	tabKol1		dta b(<kCannon,<(kCannon+4),<(kCannon+8),<(kCannon+12),<(kCannon+16),<(kCannon+20))
  1410 636D 63 63 63 63 63 63				dta b(>kCannon,>(kCannon+4),>(kCannon+8),>(kCannon+12),>(kCannon+16),>(kCannon+20))
  1411 6373 A3 A7 AB AF B3 B7				dta b(<(kCannon+24),<(kCannon+28),<(kCannon+32),<(kCannon+36),<(kCannon+40),<(kCannon+44))
  1412 6379 63 63 63 63 63 63				dta b(>(kCannon+24),>(kCannon+28),>(kCannon+32),>(kCannon+36),>(kCannon+40),>(kCannon+44))
  1413 637F 40 80 C0 00 40 80	tabKol2		dta b(<(bazyCannon0a),<(bazyCannon1a),<(bazyCannon2a),<(bazyCannon3a),<(bazyCannon4a),<(bazyCannon5a))			
  1414 6385 F9 F9 F9 FA FA FA				dta b(>(bazyCannon0a),>(bazyCannon1a),>(bazyCannon2a),>(bazyCannon3a),>(bazyCannon4a),>(bazyCannon5a))
  1415 							
  1416 638B 1A 18 19 00		kCannon		dta b(b+23,b+21,b+22,0)
  1417 638F 1A 18 00 17					dta b(b+23,b+21,0,b+20)
  1418 6393 00 18 00 17					dta b(0,b+21,0,b+20)
  1419 6397 00 18 19 17					dta b(0,b+21,b+22,b+20)
  1420 639B 1A 00 19 17					dta b(b+23,0,b+22,b+20)
  1421 639F 1A 00 19 00					dta b(b+23,0,b+22,0)
  1422 							
  1423 63A3 1A 18 00 00					dta b(b+23,b+21,0,0)
  1424 63A7 1A 18 00 17					dta b(b+23,b+21,0,b+20)
  1425 63AB 00 18 19 17					dta b(0,b+21,b+22,b+20)
  1426 63AF 00 00 19 17					dta b(0,0,b+22,b+20)
  1427 63B3 1A 00 19 17					dta b(b+23,0,b+22,b+20)
  1428 63B7 1A 18 19 00					dta b(b+23,b+21,b+22,0)
  1429 							
  1430 63BB 00 00 00 80 80 00 + bazaB1		dta b(0,0,0,128+0,128+0,0,0,0)
  1431 63C3 00 00 02 08 08 02 + 			dta b(0,0,2,8+0,8+0,2,0,0)
  1432 63CB 85 0D 07 07 07 07 + 			dta b(128+5,8+5,7,7,7,7,8+1,128+1)
  1433 63D3 0D 0D 07 07 07 07 + 			dta b(8+5,8+5,7,7,7,7,8+1,8+1)
  1434 63DB 00 00 00 06 06 00 + 			dta b(0,0,0,6,6,0,0,0)
  1435 63E3 0C 0C 07 07 07 07 + 			dta b(8+4,8+4,7,7,7,7,8+2,8+2)
  1436 63EB 84 0C 07 07 07 07 + 			dta b(128+4,8+4,7,7,7,7,8+2,128+2)
  1437 63F3 00 00 03 0B 0B 03 + 			dta b(0,0,3,8+3,8+3,3,0,0)
  1438 63FB 00 00 00 83 83 00 + 			dta b(0,0,0,128+3,128+3,0,0,0)
  1439 							
  1440 6403 00 00 00 83 83 00 + bazaB2		dta b(0,0,0,128+3,128+3,0,0,0)
  1441 640B 00 00 03 0B 0B 03 + 			dta b(0,0,3,8+3,8+3,3,0,0)
  1442 6413 82 0A 07 07 07 07 + 			dta b(128+2,8+2,7,7,7,7,8+4,128+4)
  1443 641B 0A 0A 07 07 07 07 + 			dta b(8+2,8+2,7,7,7,7,8+4,8+4)
  1444 6423 00 00 00 06 06 00 + 			dta b(0,0,0,6,6,0,0,0)
  1445 642B 09 09 07 07 07 07 + 			dta b(8+1,8+1,7,7,7,7,8+5,8+5)
  1446 6433 81 09 07 07 07 07 + 			dta b(128+1,8+1,7,7,7,7,8+5,128+5)
  1447 643B 00 00 02 0A 0A 02 + 			dta b(0,0,2,8+2,8+2,2,0,0)
  1448 6443 00 00 00 80 80 00 + 			dta b(0,0,0,128+0,128+0,0,0,0)			
  1449
  1450 644B 03 06 06 03 00 00 + dzialkoBX	dta b(3,6,6,3,0,0,3,3)
  1451 6453 00 02 05 07 05 02 + dzialkoBY	dta b(0,2,5,7,5,2,2,5)
  1452 							
  1453 = 645B			kolBazaB	equ *
  1454 645B 0A						asl @
  1455 645C 0A						asl @
  1456 645D 0A						asl @
  1457 645E 65 F9					adc pom0b
  1458 6460 A8						tay
  1459 6461 B9 BB 63					lda bazaB1,y
  1460 6464 D0 01					bne @+
  1461 6466 60						rts
  1462 							
  1463 6467 C9 07		@			cmp #7
  1464 6469 D0 05					bne @+
  1465 							
  1466 646B A9 00 95 17					mva #0 strzal,x		;trafiono tylko w baze
  1467 646F 60						rts
  1468 							
  1469 6470 C9 06		@			cmp #6
  1470 6472 B0 17					bcs @+2
  1471 							
  1472 6474 BC 24 19					ldy strzalKierunek,x
  1473 6477 F0 03					beq klbb1
  1474 6479 4C 86 64					jmp @+		;blokuj strzal pionowy i po skosie
  1475
  1476 647C A8			klbb1		tay
  1477 647D BD 20 19					lda strzalYbit,x		;gorny lewy rog
  1478 6480 4A						lsr
  1479 6481 D9 3E 62					cmp bazaAbit-2,y
  1480 6484 F0 04					beq @+1
  1481 							
  1482 6486 A9 00 95 17		@			mva #0 strzal,x
  1483 648A 60			@			rts
  1484 							
  1485 648B C9 06		@			cmp #6
  1486 648D D0 13					bne @+
  1487 								
  1488 648F A9 00 95 17					mva #0 strzal,x
  1489 6493 AD 60 19					lda czyJadroB
  1490 6496 F0 F2					beq @-1
  1491 6498 A4 F8					ldy pom0a
  1492 649A A9 FF 99 FF 12				mva #255 bazyRodzaj-1,y
  1493 649F 4C 20 65					jmp usunBazeB
  1494 							
  1495 64A2 85 FA		@			sta pom0c
  1496 64A4 29 07					and #%111
  1497 64A6 A8						tay
  1498 64A7 84 FC					sty pom0e		;numer dzialka
  1499 64A9 B9 61 63					lda tabKol0,y
  1500 64AC 85 FB					sta pom0d		;bit dzialka
  1501 64AE A4 F8					ldy pom0a	;indeks bazy
  1502 64B0 39 0F 13					and bazyStan-1,y		;czy dzialo jest zestrzelone
  1503 64B3 F0 61					beq @+2
  1504 							
  1505 							;trafiono dzialko
  1506 64B5 A9 00 95 17					mva #0 strzal,x
  1507 64B9 B9 0F 13					lda bazyStan-1,y
  1508 64BC 45 FB					eor pom0d
  1509 64BE 99 0F 13					sta bazyStan-1,y
  1510 64C1 D0 08					bne @+
  1511 							
  1512 64C3 A9 20					lda #$20
  1513 64C5 20 AF 68					jsr dodajPunkty
  1514 64C8 4C 25 65					jmp usunBazeB1
  1515 							
  1516 64CB A6 FC		@			ldx pom0e		;nr dzialka
  1517 64CD BD 73 63					lda tabKol1+12,x		;adres ksztaltu po trafieniu
  1518 64D0 8D FD 64					sta _kol3+1
  1519 64D3 BD 79 63					lda tabKol1+18,x
  1520 64D6 8D FE 64					sta _kol3+2
  1521 							
  1522 64D9 BD 7F 63					lda tabKol2,x		;cannonX
  1523 64DC 85 80					sta pom
  1524 64DE BD 85 63					lda tabKol2+6,x
  1525 64E1 85 81					sta pom+1
  1526 							
  1527 64E3 B9 2F 13					lda bazyX-1,y
  1528 64E6 18						clc
  1529 64E7 7D 4B 64					adc dzialkoBX,x
  1530 64EA 48						pha
  1531 64EB B9 4F 13					lda bazyY-1,y
  1532 64EE 7D 53 64					adc dzialkoBY,x
  1533 64F1 A8						tay
  1534 64F2 68						pla
  1535 64F3 20 35 49					jsr dodajWybuch
  1536 							
  1537 					
  1538 64F6 A4 F8					ldy pom0a
  1539 64F8 88						dey
  1540 64F9 A2 03					ldx #3
  1541 64FB 18						clc
  1542 = 64FC			@			equ *
  1543 64FC BD FF FF		_kol3		lda $ffff,x
  1544 64FF 91 80					sta (pom),y
  1545 6501 A5 80					lda pom
  1546 6503 69 10					adc #maxBaz
  1547 6505 85 80					sta pom
  1548 					
  1549 6507 CA						dex
  1550 6508 10 F2					bpl @-
  1551 							
  1552 650A A9 20					lda #$20
  1553 650C 20 AF 68					jsr dodajPunkty
  1554 							
  1555 650F A0 06					ldy #fx_dzialko
  1556 6511 A9 03					lda #3
  1557 6513 4C 50 71					jmp sfx.add_fx
  1558 							;mva #7*2 sfx_dzialko
  1559 							
  1560 							;rts
  1561 						
  1562 6516 A5 FA		@			lda pom0c
  1563 6518 10 01					bpl @+
  1564 651A 60						rts
  1565
  1566 651B A9 00 95 17		@			mva #0 strzal,x	
  1567
  1568 651F 60						rts
  1569 							
  1570 				;usuwa baze numer w Y i dodaje wybuchy (powiekszonuy o 1)
  1571 = 6520			usunBazeB	equ *
  1572 6520 A9 50					lda #$50
  1573 6522 20 AF 68					jsr dodajPunkty
  1574
  1575 6525 20 80 6D		usunBazeB1	jsr eorBazaRadar		;bez bonus
  1576 6528 A9 75					lda #$75
  1577 652A 20 AF 68					jsr dodajPunkty
  1578 652D A9 75					lda #$75
  1579 652F 20 AF 68					jsr dodajPunkty
  1580 						
  1581 6532 A9 FF 99 FF 12				mva #255 bazyRodzaj-1,y
  1582 6537 EE 4C 19					inc zbiteBazy
  1583 							
  1584 653A BE 1F 13					ldx bazyRakieta-1,y
  1585 653D 30 0D					bmi @+
  1586 							
  1587 653F A9 FF 99 1F 13				mva #255 bazyRakieta-1,y
  1588 6544 A9 00 9D 70 13				mva #0 rakietyStan,x
  1589 6549 9D A0 13					sta rakietyMove,x
  1590 							
  1591 654C B9 4F 13		@			lda bazyY-1,y
  1592 654F 8D 5C 65					sta _usb4+1
  1593 6552 B9 2F 13					lda bazyX-1,y
  1594 6555 8D 62 65					sta _usb3+1
  1595 							
  1596 6558 A2 07					ldx #7
  1597 655A 18			@			clc
  1598 655B A9 FF		_usb4		lda #$ff
  1599 655D 7D 53 64					adc dzialkoBY,x
  1600 6560 A8						tay
  1601 6561 A9 FF		_usb3		lda #$ff
  1602 6563 7D 4B 64					adc dzialkoBX,x
  1603 6566 20 35 49					jsr dodajWybuch
  1604 6569 CA						dex
  1605 656A 10 EE					bpl @-
  1606 							
  1607 656C 20 00 4B					jsr zmniejszKondycja
  1608 							
  1609 656F A9 0E 8D 52 19				mva #14 waitWybuch
  1610 6574 A0 08					ldy #fx_wybuch
  1611 6576 A9 04					lda #4
  1612 6578 4C 50 71					jmp sfx.add_fx
  1613 							
  1614 							;mva #8*2 sfx_wybuch
  1615 							;mva #14 waitWybuch
  1616 							;rts
  1617 							
  1618 							
   588 657B						icl 'blevele.asm'
Source: blevele.asm
     1 = 0010			maxBaz	equ 16		;maksymalna liczba baz
     2 = 0080			maxObiektow	equ 128	;maksymalna liczba reszty obiektow, meteory i bomby
     3
     4 = 0020			maxPoziomow	equ 32		
     5
     6
     7 				;poziom trudności
     8 = 0003			spy_from_level			equ 3		;od którego poziomu pojawia się spy
     9 = 0004			formation_from_level	equ 4		;od którego poziomu pojawia się formacja
    10 = 0006			formation_speedUp_level1	equ 6		;od którego poziomu przyspiesza formacja
    11 = 000C			formation_speedUp_level2	equ 12		;max speed formacji
    12 = 0012			formation_speedUp_level3	equ 18
    13 = 0018			formation_speedUp_level4	equ 24
    14
    15 = 0002			enemy_show_speed2		equ 2		;od którego poziomu szybciej pojawiają sie przeciwnicy
    16 = 0009			enemy_show_speed3		equ 9		;od którego poziomu szybciej pojawiają sie przeciwnicy
    17 = 0011			enemy_show_speed4		equ 17		;od którego poziomu szybciej pojawiają sie przeciwnicy
    18 = 0019			enemy_show_speed5		equ 25		;od którego poziomu szybciej pojawiają sie przeciwnicy
    19 = 0023			enemy_show_speed6		equ 35
    20
    21 = 0006			formSpy_show_speed2		equ 6		;od którego poziomu szybciej pojawia się formacja i spy
    22 = 000B			formSpy_show_speed3		equ 11		;od którego poziomu szybciej pojawia sie formacja i spy
    23 = 0025			formSpy_show_speed4		equ 37
    24 = 0019			show_6enemy				equ 25		;od którego poziomu pojawia sie dodatkowy przeciwnik podczas formacji
    25
    26 = 0008			timeLevel1_up			equ 8
    27 = 0010			timeLevel2_up			equ 16		;od którego poziomu zmieniają się czasy condition
    28 = 0027			timeLevel3_up			equ 39
    29 = 003C			timeLevel4_up			equ 60
    30
    31 				//może tylko 2 poziomy szybkosci obrotu?
    32 = 0013			fast_rotate1			equ 19		;od którego leveu przyspiesza rotacja
    33 = 0015			fast_rotate2			equ 21
    34 = 0023			fast_rotate3			equ 35
    35 = 0036			fast_rotate4			equ 54
    36
    37 = 000C			ilePociskow4			equ 12		;od którego poziomu bedą 4 pociski
    38 = 0018			ilePociskow5			equ 24		;od którego poziomu bedzie 5 pocisków
    39 = 0007			cannonAngle1			equ 7		;od którego levelu zwieksza się kąt strzalu dzialek
    40 = 0012			cannonAngle2			equ 18
    41 = 0020			cannonMaxAngle			equ 32		;maksymalny kat
    42
    43 				//może tylko 2 poziomy predkosci?
    44 = 0006			enemy_speedUp_level1	equ 6		;kiedy przeciwnicy przyspieszają
    45 = 0011			enemy_speedUp_level2	equ 17
    46 = 001C			enemy_speedUp_level3	equ 28
    47 = 002A			enemy_speedUp_level4	equ 42		;max speed
    48
    49 = 000F			spy_speedUp1			equ 15
    50 = 001F			spy_speedUp2			equ 31
    51 = 0034			spy_speedUp3			equ 52
    52
    53 657B DB 65		levelAdr	dta a(level1)	;adresy zapisanych leveli
    54 657D E6 65					dta a(level2)
    55 657F F1 65					dta a(level3)
    56 6581 FE 65					dta a(level4)
    57 6583 13 66					dta a(level5)
    58 6585 20 66					dta a(level6)
    59 6587 35 66					dta a(level7)
    60 6589 4A 66					dta a(level8)
    61 658B 5F 66					dta a(level9)
    62 658D 74 66					dta a(level10)
    63 658F 89 66					dta a(level11)
    64 6591 9E 66					dta a(level12)
    65 6593 B3 66					dta a(level13)
    66 6595 C8 66					dta a(level14)
    67 6597 DF 66					dta a(level15)
    68 6599 F2 66					dta a(level16)
    69 659B 03 67					dta a(level17)
    70 659D 16 67					dta a(level18)
    71 659F 2D 67					dta a(level19)
    72 65A1 46 67					dta a(level20)
    73 65A3 5B 67					dta a(level21)
    74 65A5 70 67					dta a(level22) 	
    75 65A7 83 67					dta a(level23)
    76 65A9 9C 67					dta a(level24)
    77 65AB B9 67					dta a(level25)
    78 65AD DE 67					dta a(level26)
    79 65AF FB 67					dta a(level27)
    80 65B1 10 68					dta a(level28)
    81 65B3 33 68					dta a(level29)
    82 65B5 50 68					dta a(level30)
    83 65B7 71 68					dta a(level31)
    84 65B9 92 68					dta a(level32)
    85
    86
    87 65BB FF 1E 28 32 3C 46 + openTab	dta b(255,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170)
    88 65CB 1E 28 32 3C 46 50 + closeTab dta b(30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180)
    89
    90 					
    91 = F940			bazyCannon0a	equ $f940	;:(maxBaz*4) dta b(0)
    92 = F950			bazyCannon0b	equ bazyCannon0a+maxBaz
    93 = F960			bazyCannon0c	equ bazyCannon0b+maxBaz
    94 = F970			bazyCannon0d	equ bazyCannon0c+maxBaz
    95
    96 = F980			bazyCannon1a	equ $f980	;:(maxBaz*4) dta b(0)
    97 = F990			bazyCannon1b	equ bazyCannon1a+maxBaz
    98 = F9A0			bazyCannon1c	equ bazyCannon1b+maxBaz
    99 = F9B0			bazyCannon1d	equ bazyCannon1c+maxBaz
   100
   101 = F9C0			bazyCannon2a	equ $f9c0	;:(maxBaz*4) dta b(0)
   102 = F9D0			bazyCannon2b	equ bazyCannon2a+maxBaz
   103 = F9E0			bazyCannon2c	equ bazyCannon2b+maxBaz
   104 = F9F0			bazyCannon2d	equ bazyCannon2c+maxBaz
   105
   106 = FA00			bazyCannon3a	equ $fa00	;:(maxBaz*4) dta b(0)
   107 = FA10			bazyCannon3b	equ bazyCannon3a+maxBaz
   108 = FA20			bazyCannon3c	equ bazyCannon3b+maxBaz
   109 = FA30			bazyCannon3d	equ bazyCannon3c+maxBaz
   110
   111 = FA40			bazyCannon4a	equ $fa40	;:(maxBaz*4) dta b(0)
   112 = FA50			bazyCannon4b	equ bazyCannon4a+maxBaz
   113 = FA60			bazyCannon4c	equ bazyCannon4b+maxBaz
   114 = FA70			bazyCannon4d	equ bazyCannon4c+maxBaz
   115
   116 = FA80			bazyCannon5a	equ $fa80	;:(maxBaz*4) dta b(0)
   117 = FA90			bazyCannon5b	equ bazyCannon5a+maxBaz
   118 = FAA0			bazyCannon5c	equ bazyCannon5b+maxBaz
   119 = FAB0			bazyCannon5d	equ bazyCannon5c+maxBaz
   120
   121
   122 65DB 30 DC 03 9B 03 20 + level1		ins 'levels/level1.bin'
   123 65E6 3C 63 C1 9B 03 DF + level2		ins 'levels/level2.bin'
   124 65F1 2D 8C 92 9C 04 12 + level3		ins 'levels/level3.bin'
   125 65FE 30 55 65 9C 08 BC + level4		ins 'levels/level4.bin'
   126 6613 27 6F 59 8D 04 29 + level5		ins 'levels/level5.bin'
   127 6620 42 DE 54 9D 08 A7 + level6		ins 'levels/level6.bin'	
   128 6635 22 9B 46 9D 08 1F + level7		ins 'levels/level7.bin'		
   129 664A B1 6F 53 98 08 90 + level8		ins 'levels/level8.bin'
   130 665F C3 C4 63 98 08 10 + level9		ins 'levels/level9.bin'
   131 6674 BD 6F 55 9A 08 1D + level10		ins 'levels/level10.bin'
   132 6689 C4 DD 46 9A 08 50 + level11		ins 'levels/level11.bin'
   133 669E B0 E7 55 99 08 2D + level12		ins 'levels/level12.bin'
   134 66B3 BE 6D 54 99 08 6F + level13		ins 'levels/level13.bin'
   135 66C8 C5 DC 56 A9 09 32 + level14		ins 'levels/level14.bin'
   136 66DF C9 CA 54 9E 07 10 + level15		ins 'levels/level15.bin'
   137 66F2 B6 60 55 9E 06 15 + level16		ins 'levels/level16.bin'
   138 6703 B0 7C 46 A7 07 2E + level17		ins 'levels/level17.bin'
   139 6716 B9 A7 54 98 09 3B + level18		ins 'levels/level18.bin'
   140 672D A5 9B 56 97 0A 53 + level19		ins 'levels/level19.bin'
   141 6746 AD 5F 56 D7 08 3C + level20		ins 'levels/level20.bin'
   142 675B B0 C5 54 96 08 4A + level21		ins 'levels/level21.bin'			
   143 6770 B8 59 42 86 07 3B + level22		ins 'levels/level22.bin'
   144 6783 AD 61 56 90 0A 12 + level23		ins 'levels/level23.bin'
   145 679C CC D5 45 90 0C DE + level24		ins 'levels/level24.bin'			
   146 67B9 BD B0 44 92 10 E5 + level25		ins 'levels/level25.bin'
   147 67DE B5 AF 44 82 0C 2A + level26		ins 'levels/level26.bin'
   148 67FB B1 CE 54 93 08 57 + level27		ins 'levels/level27.bin'			
   149 6810 A9 D2 46 93 0F C0 + level28		ins 'levels/level28.bin'
   150 6833 91 70 46 94 0C 36 + level29		ins 'levels/level29.bin'
   151 6850 B0 74 35 94 0E 94 + level30		ins 'levels/level30.bin'			
   152 6871 B5 B8 35 85 0E 2A + level31		ins 'levels/level31.bin'
   153 6892 B1 5A 36 95 0C 40 + level32		ins 'levels/level32.bin'
   154 					
   155 				;dodaje punkty
   156 = 68AF			dodajPunkty	equ *
   157 68AF C9 FF				cmp #$ff		;trafiony spy punkty od 200 do 400
   158 68B1 D0 19				bne dpun1
   159 68B3 AD 0A D2				lda random
   160 68B6 29 03				and #%11
   161 68B8 8C CB 68				sty dpunY
   162 68BB A8					tay
   163 68BC F0 01				beq @+
   164 68BE 88					dey
   165 68BF 98			@		tya
   166 68C0 0A 0A 0A 0A				:4 asl
   167 68C4 8D 55 19				sta spyscore
   168 68C7 B9 3D 18				lda spyScoreTab,y
   169 = 68CB			dpunY	equ *+1
   170 68CA A0 FF				ldy #$ff
   171
   172 68CC 18			dpun1	clc
   173 68CD F8					sed
   174 68CE 6D 53 19				adc plusScore
   175 68D1 8D 53 19				sta plusScore
   176 68D4 AD 54 19				lda plusScore+1
   177 68D7 69 00				adc #0
   178 68D9 D8					cld
   179 68DA 8D 54 19				sta plusScore+1
   180 68DD 60					rts
   181
   182 = 68DE			initPoziom	equ *
   183 68DE A9 01 85 5E				mva #1 sJoy		;zeruj flage trafienia statku
   184 68E2 A2 0F				ldx #15
   185 68E4 20 16 3F				jsr rstatek
   186 						
   187 68E7 A9 00 8D FE 18			mva #0 licznikSpyScore
   188 68EC 8D 55 19				sta spyScore
   189 						
   190 68EF A9 FF				lda #255
   191 68F1 A2 0E				ldx #14
   192 68F3 95 00		@		sta sfx_effect,x
   193 68F5 CA					dex
   194 68F6 10 FB				bpl @-
   195 								
   196 68F8 A2 10				ldx #16
   197 68FA A9 00				lda #0
   198 68FC 95 0F		@		sta formacja_stan,x
   199 68FE CA					dex
   200 68FF 10 FB				bpl @-
   201 						
   202 6901 A0 05				ldy #5
   203 6903 A9 00		@		lda #0
   204 6905 99 B7 17				sta enemy,y
   205 6908 99 89 01				sta enemyWybuch,y
   206 690B A9 01				lda #1
   207 690D 99 79 01				sta enemyEkran,y
   208 6910 88					dey
   209 6911 10 F0				bpl @-
   210 						
   211 6913 A0 07				ldy #7					;wyczysc rakiety
   212 6915 A9 00				lda #0
   213 6917 99 70 13		@		sta rakietyStan,y
   214 691A 99 A0 13				sta rakietyMove,y
   215 691D 88					dey
   216 691E 10 F7				bpl @-
   217 						
   218 6920 8D 9C 01				sta mwybuchystop
   219 6923 8D 9B 01				sta mwybuchystart
   220 6926 8D 99 01				sta wybuchystart
   221 6929 8D 9A 01				sta wybuchystop
   222 692C 8D 53 19				sta plusScore
   223 692F 8D 54 19				sta plusScore+1
   224 6932 85 1E				sta nobanner
   225 						
   226 6934 A9 0C 85 F0				mva #12 startMapy
   227 6938 A9 07 8D E9 49			mva #opoznienieCondition punkty3
   228 693D A9 01 85 BD				mva #kondycja_start kondycja
   229 6941 A0 00				ldy #0
   230 6943 20 A8 6E				jsr setCondition
   231 6946 20 DE 6F				jsr piszCondition
   232 						
   233 6949 A9 04 8D 65 19			mva #4 opozCoreA
   234 694E 8D 66 19				sta opozCoreB
   235 6951 A9 02 8D 67 19			mva #2 liczCoreA
   236 6956 8D 66 19				sta opozCoreB
   237 6959 8D 6F 19				sta dowodca
   238 						
   239 						
   240 				;poziom trudności
   241 				;kąt strzału działek
   242 695C A2 0C				ldx #$0c
   243 695E AD 51 19				lda poziom
   244 6961 C9 07				cmp #cannonAngle1
   245 6963 90 08				bcc @+
   246 6965 A2 0E				ldx #$0e
   247 6967 C9 12				cmp #cannonAngle2
   248 6969 90 02				bcc @+
   249 696B A2 0F				ldx #$0f
   250 696D 86 2B		@		stx kat1
   251 696F 8A					txa
   252 6970 0A 0A 0A 0A				:4 asl
   253 6974 85 2C				sta kat2
   254 						
   255 6976 AD 51 19				lda poziom				;maksymalny kat
   256 6979 C9 20				cmp #cannonMaxAngle
   257 697B 90 06				bcc @+
   258 697D A9 FF				lda #255
   259 697F 85 2B				sta kat1
   260 6981 85 2C				sta kat2
   261 = 6983			@		equ *		
   262 						
   263 				;predkosc przeciwników
   264 6983 A2 00				ldx #0*32
   265 6985 AD 51 19				lda poziom
   266 6988 C9 06				cmp #enemy_speedUp_level1
   267 698A 90 14				bcc @+
   268 698C A2 20				ldx #1*32
   269 698E C9 11				cmp #enemy_speedUp_level2
   270 6990 90 0E				bcc @+
   271 6992 A2 40				ldx #2*32
   272 6994 C9 1C				cmp #enemy_speedUp_level3
   273 6996 90 08				bcc @+
   274 6998 A2 60				ldx #3*32
   275 699A C9 2A				cmp #enemy_speedUp_level4
   276 699C 90 02				bcc @+
   277 699E A2 80				ldx #4*32
   278 69A0 8E EA 49		@		stx speedEnemy0		;poczatkowa predkośc enemy	
   279
   280 				;predkosc spy
   281 69A3 A2 40				ldx #2*32
   282 69A5 AD 51 19				lda poziom
   283 69A8 C9 0F				cmp #spy_speedUp1
   284 69AA 90 0A				bcc @+
   285 69AC A2 60				ldx #3*32
   286 69AE C9 1F				cmp #spy_speedUp2
   287 69B0 A2 80				ldx #4*32
   288 69B2 C9 34				cmp #spy_speedUp3
   289 69B4 A2 A0				ldx #5*32
   290 69B6 86 58		@		stx spySpeed
   291
   292 				;szybkosć pojawiania sie enemy zaleznie od poziomu
   293 69B8 A2 28				ldx #40				
   294 69BA AD 51 19				lda poziom
   295 69BD C9 02				cmp #enemy_show_speed2
   296 69BF 90 1A				bcc @+
   297 69C1 A2 1E				ldx #30
   298 69C3 C9 09				cmp #enemy_show_speed3
   299 69C5 90 14				bcc @+
   300 69C7 A2 1C				ldx #28
   301 69C9 C9 11				cmp #enemy_show_speed4
   302 69CB 90 0E				bcc @+
   303 69CD A2 1A				ldx #26
   304 69CF C9 19				cmp #enemy_show_speed5
   305 69D1 90 08				bcc @+
   306 69D3 A2 18				ldx #24
   307 69D5 C9 23				cmp #enemy_show_speed6
   308 69D7 90 02				bcc @+
   309 69D9 A2 16				ldx #22
   310 69DB 8E 45 19		@		stx opoz_denemy
   311 69DE 8E FF 4A				stx opoz_denemy1
   312 69E1 8E 6B 19				stx dlicz1
   313 						
   314 69E4 A2 1E				ldx #30			;jak często pojawiają sie spy i formacja
   315 69E6 AD 51 19				lda poziom
   316 69E9 C9 06				cmp #formspy_show_speed2
   317 69EB 90 0E				bcc @+
   318 69ED A2 17				ldx #23
   319 69EF C9 0B				cmp #formspy_show_speed3
   320 69F1 90 08				bcc @+
   321 69F3 A2 11				ldx #17
   322 69F5 C9 25				cmp #formspy_show_speed4
   323 69F7 90 02				bcc @+
   324 69F9 A2 0C				ldx #12
   325 69FB 8E 46 19		@		stx opoz_dlosuj
   326 69FE 8E FF 18				stx losuj1
   327 						
   328 6A01 A2 00				ldx #0			;typu formacji tylko 0, 0 i 1 lub wszystkie
   329 6A03 AD 51 19				lda poziom
   330 6A06 C9 07				cmp #formation_from_level+3
   331 6A08 90 08				bcc @+
   332 6A0A A2 01				ldx #%1
   333 6A0C C9 0B				cmp #formation_from_level+7
   334 6A0E 90 02				bcc @+
   335 6A10 A2 03				ldx #%11
   336 6A12 8E 42 19		@		stx formacja_maska
   337
   338 6A15 A2 40				ldx #2*32	;#64		;prędkośc formacji
   339 6A17 AD 51 19				lda poziom
   340 6A1A C9 06				cmp #formation_speedUp_level1
   341 6A1C 90 14				bcc @+
   342 6A1E A2 60				ldx #3*32
   343 6A20 C9 0C				cmp #formation_speedUp_level2
   344 6A22 90 0E				bcc @+
   345 6A24 A2 80				ldx #4*32		;szybko	
   346 6A26 C9 12				cmp #formation_speedUp_level3
   347 6A28 90 08				bcc @+
   348 6A2A A2 A0				ldx #5*32
   349 6A2C C9 18				cmp #formation_speedUp_level4
   350 6A2E 90 02				bcc @+
   351 6A30 A2 C0				ldx #6*32
   352 6A32 8E 43 19		@		stx formacja_speed
   353
   354 6A35 A2 00				ldx #0			;czy podczas formacji maja pojawic sie dodatkowi przeciwnicy
   355 6A37 AD 51 19				lda poziom
   356 6A3A C9 19				cmp #show_6enemy
   357 6A3C 90 02				bcc @+
   358 6A3E A2 01				ldx #1
   359 6A40 8E 44 19		@		stx czy_6enemy
   360
   361 6A43 A2 00				ldx #0
   362 6A45 AD 51 19				lda poziom
   363 6A48 C9 08				cmp #timeLevel1_up
   364 6A4A 90 10				bcc @+
   365 6A4C E8					inx
   366 6A4D C9 10				cmp #timeLevel2_up
   367 6A4F 90 0B				bcc @+
   368 6A51 E8					inx
   369 6A52 C9 27				cmp #timeLevel3_up
   370 6A54 90 06				bcc @+
   371 6A56 E8					inx
   372 6A57 C9 3C				cmp #timeLevel4_up
   373 6A59 90 01				bcc @+
   374 6A5B E8					inx
   375 6A5C 8E 7F 19		@		stx timeLevel
   376
   377 				;predkość rotacji enemy
   378 6A5F AE 51 19				ldx poziom
   379 6A62 A9 0C 8D 48 19			mva #12 rotate_speed1
   380 6A67 A9 0A 8D 4A 19			mva #10 rotate_speed2
   381 6A6C E0 13				cpx #fast_rotate1
   382 6A6E 90 18				bcc @+
   383 6A70 CE 48 19				dec rotate_speed1
   384 6A73 E0 15				cpx #fast_rotate2
   385 6A75 90 11				bcc @+
   386 6A77 CE 4A 19				dec rotate_speed2
   387 6A7A E0 23				cpx #fast_rotate3
   388 6A7C 90 0A				bcc @+
   389 6A7E CE 48 19				dec rotate_speed1	
   390 6A81 E0 36				cpx #fast_rotate4
   391 6A83 90 03				bcc @+
   392 6A85 CE 4A 19				dec rotate_speed2		
   393 6A88 AD 48 19 8D 49 19	@		mva rotate_speed1 rotate_speed1d
   394 6A8E AD 4A 19 8D 4B 19			mva rotate_speed2 rotate_speed2d
   395 						
   396 				;maksymalna liczba pociskow		
   397 6A94 A2 02				ldx #2
   398 6A96 AD 51 19				lda poziom
   399 6A99 C9 0C				cmp #ilePociskow4
   400 6A9B 90 06				bcc @+
   401 6A9D E8					inx
   402 6A9E C9 18				cmp #ilePociskow5
   403 6AA0 90 01				bcc @+
   404 6AA2 E8					inx
   405 6AA3 86 57		@		stx maxPociskow
   406 6AA5 E8					inx
   407 6AA6 8E 3B 44				stx maxPociskow1
   408 						
   409 				;szybkosc strzelania dzialka
   410 6AA9 A2 14				ldx #20
   411 6AAB AD 51 19				lda poziom
   412 6AAE C9 0C				cmp #12
   413 6AB0 90 08				bcc @+
   414 6AB2 A2 0F				ldx #15
   415 6AB4 C9 0F				cmp #15
   416 6AB6 90 02				bcc @+
   417 6AB8 A2 0D				ldx #13
   418 						
   419 6ABA 8E F3 42		@		stx opoznieniePocisku
   420 						
   421 6ABD 60					rts
   422 						
   423 							
   424 = 6ABE			wczytajLevel	equ *
   425 6ABE A9 00 8D 4C 19				mva #0 zbiteBazy
   426 6AC3 85 F7					sta pom0	;liczba baz
   427 6AC5 AD 51 19					lda poziom
   428 6AC8 38						sec
   429 6AC9 E9 01					sbc #1
   430 6ACB 29 1F					and #31		;zapętlamy levele
   431 							
   432 6ACD 0A						asl @
   433 6ACE AA						tax
   434 6ACF BD 7B 65					lda levelAdr,x
   435 6AD2 85 80					sta pom
   436 6AD4 BD 7C 65					lda levelAdr+1,x
   437 6AD7 85 81					sta pom+1
   438 								
   439 6AD9 A0 00					ldy #0
   440 6ADB B1 80					lda (pom),y		;reset pozycji startowych
   441 6ADD 29 7F					and #%01111111
   442 							
   443 6ADF AE 51 19					ldx poziom		
   444 6AE2 E0 21					cpx #33
   445 6AE4 90 04					bcc obrpoz3
   446 6AE6 49 FF					eor #255			;po zapetleniu obroc pozycje x startowa
   447 6AE8 69 61					adc #97
   448 = 6AEA			obrpoz3		equ *	
   449 							
   450 6AEA 8D 4F 19					sta startX
   451 6AED 85 E3					sta posX
   452 6AEF B1 80					lda (pom),y
   453 6AF1 29 80					and #128
   454 6AF3 AE 51 19					ldx poziom
   455 6AF6 E0 21					cpx #maxPoziomow+1
   456 6AF8 90 02					bcc *+4
   457 6AFA A9 80					lda #128		; zawsze bedą rakiety, jesli zapetlenie
   458 6AFC 85 5B					sta czyRakiety
   459 6AFE C8						iny
   460 6AFF B1 80					lda (pom),y
   461 6B01 8D 50 19					sta startY
   462 6B04 85 E4					sta posY
   463 6B06 C8						iny
   464 6B07 B1 80					lda (pom),y
   465 6B09 4A 4A 4A 4A					:4 lsr
   466 6B0D AA						tax
   467 6B0E BD BB 65					lda openTab,x
   468 6B11 8D 4D 19					sta czasOtwarcia
   469 6B14 B1 80					lda (pom),y
   470 6B16 29 0F					and #%00001111
   471 6B18 AA						tax
   472 6B19 BD CB 65					lda closeTab,x
   473 6B1C 8D 4E 19					sta czasZamkniecia
   474 6B1F C8						iny
   475 6B20 B1 80					lda (pom),y
   476 6B22 29 F0					and #%11110000
   477 6B24 09 0F					ora #$0f
   478 							
   479 6B26 8D 16 D0					sta COLPF0
   480 6B29 B1 80					lda (pom),y
   481 6B2B 0A 0A 0A 0A					:4 asl
   482 6B2F 09 06					ora #$06
   483 6B31 8D 18 D0					sta COLPF2
   484 							
   485 6B34 C8						iny
   486 6B35 B1 80					lda (pom),y
   487 6B37 85 F6					sta bazyIle
   488 							
   489 6B39 AD 51 19					lda poziom				;jeśli zapętlenie poziomów to zwiększ poziom trudności
   490 6B3C C9 21					cmp #33
   491 6B3E 90 17					bcc @+1
   492 6B40 AD 4E 19					lda czasZamkniecia
   493 6B43 69 04					adc #4  ;c=1 -> +1
   494 6B45 8D 4E 19					sta czasZamkniecia
   495 6B48 AD 4D 19					lda czasOtwarcia
   496 6B4B C9 FF					cmp #255
   497 6B4D D0 02					bne @+
   498 6B4F A9 32					lda #50
   499 6B51 38			@			sec
   500 6B52 E9 05					sbc #5
   501 6B54 8D 4D 19					sta czasOtwarcia
   502 = 6B57			@			equ *	
   503 							
   504 6B57 20 DE 68					jsr initPoziom
   505 							
   506 6B5A 20 02 28					jsr mute
   507
   508 6B5D 20 98 32					jsr piszPoziom
   509 6B60 20 A0 3F					jsr initJadra
   510 						
   511 6B63 A9 91					lda #60+85		;wydlużenie dla pierwszego poziomu
   512 6B65 85 F0					sta startMapy
   513 6B67 A9 01 85 53					mva #1 muzyka	;wlacz muzyke startowa
   514 							
   515 6B6B 18						clc
   516 6B6C A5 80					lda pom
   517 6B6E 69 05					adc #5
   518 6B70 85 80					sta pom
   519 6B72 90 02					bcc @+
   520 6B74 E6 81					inc pom+1
   521 							
   522 6B76 A2 00		@			ldx #0
   523 6B78 A0 00		wcl2		ldy #0
   524 6B7A B1 80					lda (pom),y
   525 6B7C 29 80					and #128
   526 6B7E 0A						asl
   527 6B7F 2A						rol
   528 6B80 9D 00 13					sta bazyRodzaj,x		;rodzaj obiektu, 255=koniec
   529 							
   530 6B83 A9 3F					lda #%00111111		;stan bazy
   531 6B85 9D 10 13					sta bazyStan,x
   532 6B88 A9 FF					lda #255
   533 6B8A 9D 20 13					sta bazyRakieta,x		;wyzeruj rakiety
   534 6B8D B1 80					lda (pom),y		;pozycja X
   535 6B8F 29 7F					and #127
   536 							
   537 6B91 48						pha
   538 6B92 AD 51 19					lda poziom 
   539 6B95 C9 21					cmp #33
   540 6B97 90 06					bcc obrpoz1
   541 6B99 68						pla					;obracamy pozycje X bazy
   542 6B9A 49 FF					eor #255
   543 6B9C 69 78					adc #120
   544 6B9E 48						pha
   545 6B9F 68			obrpoz1		pla
   546 							
   547 6BA0 9D 30 13					sta bazyX,x
   548 6BA3 C8						iny
   549 6BA4 B1 80					lda (pom),y		;pozycja Y
   550 6BA6 9D 50 13					sta bazyY,x
   551 6BA9 18						clc
   552 6BAA A5 80					lda pom
   553 6BAC 69 02					adc #2
   554 6BAE 85 80					sta pom
   555 6BB0 90 02					bcc @+
   556 6BB2 E6 81					inc pom+1
   557 							
   558 6BB4 A9 03		@			lda #b
   559 6BB6 9D 40 F9					sta bazyCannon0a,x
   560 6BB9 9D 80 F9					sta bazyCannon1a,x
   561 6BBC 9D C0 F9					sta bazyCannon2a,x
   562 6BBF 9D 00 FA					sta bazyCannon3a,x
   563 6BC2 9D 40 FA					sta bazyCannon4a,x
   564 6BC5 9D 80 FA					sta bazyCannon5a,x
   565 6BC8 A9 05					lda #b+2
   566 6BCA 9D 50 F9					sta bazyCannon0b,x
   567 6BCD 9D 90 F9					sta bazyCannon1b,x
   568 6BD0 9D D0 F9					sta bazyCannon2b,x
   569 6BD3 9D 10 FA					sta bazyCannon3b,x
   570 6BD6 9D 50 FA					sta bazyCannon4b,x
   571 6BD9 9D 90 FA					sta bazyCannon5b,x
   572 6BDC A9 04					lda #b+1
   573 6BDE 9D 60 F9					sta bazyCannon0c,x
   574 6BE1 9D A0 F9					sta bazyCannon1c,x
   575 6BE4 9D E0 F9					sta bazyCannon2c,x
   576 6BE7 9D 20 FA					sta bazyCannon3c,x
   577 6BEA 9D 60 FA					sta bazyCannon4c,x
   578 6BED 9D A0 FA					sta bazyCannon5c,x
   579 6BF0 A9 06					lda #b+3
   580 6BF2 9D 70 F9					sta bazyCannon0d,x
   581 6BF5 9D B0 F9					sta bazyCannon1d,x
   582 6BF8 9D F0 F9					sta bazyCannon2d,x
   583 6BFB 9D 30 FA					sta bazyCannon3d,x
   584 6BFE 9D 70 FA					sta bazyCannon4d,x
   585 6C01 9D B0 FA					sta bazyCannon5d,x
   586 							
   587 6C04 E8						inx
   588 6C05 E4 F6					cpx bazyIle
   589 6C07 B0 03 4C 78 6B				jcc wcl2	
   590 							
   591 							
   592 				//losowe obiekty ;)			
   593 6C0C AE 51 19					ldx poziom			
   594 							;mva #128 bombile
   595 6C0F A9 40					lda #64
   596 6C11 E0 0A					cpx #10
   597 6C13 90 08					bcc @+
   598 6C15 A9 60					lda #96
   599 6C17 E0 14					cpx #20
   600 6C19 90 02					bcc @+
   601 6C1B A9 80					lda #128
   602 6C1D 85 5A		@			sta bombile
   603 							
   604 6C1F A2 00					ldx #0
   605 							
   606 6C21 AD 0A D2		@			lda random
   607 6C24 29 01					and #1
   608 6C26 9D 80 11					sta bombRodzaj,x
   609 							
   610 6C29 AD 0A D2		@			lda random
   611 6C2C 29 7E					and #%01111110	
   612 6C2E 9D 00 12					sta bombX,x
   613 6C31 AD 0A D2					lda random
   614 6C34 29 FE					and #%11111110
   615 6C36 9D 80 12					sta bombY,x
   616
   617 6C39 20 9A 6C					jsr sprawdz_bazy
   618 6C3C D0 EB					bne @-		;pozycja pod bazą, jeszcze raz
   619 6C3E 20 C7 6C					jsr sprawdz_obiekty
   620 6C41 D0 E6					bne @-
   621 6C43 20 F8 6C					jsr sprawdz_start
   622 6C46 D0 E1					bne @-
   623 							
   624 6C48 E8						inx
   625 6C49 E4 5A					cpx bombile
   626 6C4B 90 D4					bcc @-1
   627 							
   628 							
   629 				//segregowanie obiektów			
   630 6C4D A2 00		@			ldx #0
   631 6C4F 86 F7					stx pom0
   632 6C51 E8						inx
   633 							
   634 6C52 BD 7F 12		@			lda bombY-1,x
   635 6C55 DD 80 12					cmp bombY,x
   636 6C58 90 2A					bcc segr_next
   637 6C5A F0 02					beq segr_rowne
   638 6C5C B0 0A					bcs segr_zamien
   639 							//gdy rowne
   640 6C5E			segr_rowne			
   641 6C5E BD FF 11					lda bombX-1,x
   642 6C61 DD 00 12					cmp bombX,x
   643 6C64 90 1E					bcc segr_next
   644 6C66 F0 1C					beq segr_next
   645 							//zamiana
   646 6C68			segr_zamien
   647 6C68 BD FF 11					lda bombX-1,x
   648 6C6B BC 00 12					ldy bombX,x
   649 6C6E 9D 00 12					sta bombX,x
   650 6C71 98						tya
   651 6C72 9D FF 11					sta bombX-1,x
   652 6C75 BD 7F 12					lda bombY-1,x
   653 6C78 BC 80 12					ldy bombY,x
   654 6C7B 9D 80 12					sta bombY,x
   655 6C7E 98						tya
   656 6C7F 9D 7F 12					sta bombY-1,x
   657 6C82 E6 F7					inc pom0
   658 6C84			segr_next	
   659 6C84 E8						inx
   660 6C85 E4 5A					cpx bombIle
   661 6C87 90 C9					bcc @-
   662 6C89 A5 F7					lda pom0
   663 6C8B D0 C0					bne @-1
   664 							
   665 6C8D A4 F6					ldy bazyIle			;wyczysc rakiety w bazach
   666 6C8F A9 FF					lda #255
   667 6C91 99 1F 13		@			sta bazyRakieta-1,y
   668 6C94 88						dey
   669 6C95 D0 FA					bne @-  
   670 							
   671 6C97 4C 23 6D					jmp tabBomby
   672
   673 6C9A			sprawdz_bazy	
   674 6C9A A4 F6					ldy bazyIle
   675 6C9C 38			@			sec
   676 6C9D B9 2F 13					lda bazyX-1,y
   677 6CA0 FD 00 12					sbc bombX,x
   678 6CA3 B0 04					bcs *+6
   679 6CA5 49 FF					eor #255
   680 6CA7 69 01					adc #1
   681 6CA9 C9 09					cmp #9
   682 6CAB B0 14					bcs @+
   683 							
   684 6CAD 38						sec
   685 6CAE B9 4F 13					lda bazyY-1,y
   686 6CB1 FD 80 12					sbc bombY,x
   687 6CB4 B0 04					bcs *+6
   688 6CB6 49 FF					eor #255
   689 6CB8 69 01					adc #1
   690 6CBA C9 09					cmp #9
   691 6CBC B0 03					bcs @+
   692 							
   693 6CBE A9 01					lda #1		;na bazie
   694 6CC0 60						rts
   695 							
   696 6CC1 88			@			dey
   697 6CC2 D0 D8					bne @-1
   698 							
   699 6CC4 A9 00					lda #0		;ok
   700 6CC6 60						rts
   701 							
   702 6CC7			sprawdz_obiekty
   703 6CC7 8A						txa
   704 6CC8 D0 01					bne *+3
   705 6CCA 60						rts
   706 6CCB A8						tay
   707 6CCC 88						dey
   708 							
   709 6CCD BD 80 12		@			lda bombY,x
   710 6CD0 38						sec
   711 6CD1 F9 80 12					sbc bombY,y
   712 6CD4 B0 04					bcs *+6
   713 6CD6 49 FF					eor #255
   714 6CD8 69 01					adc #1
   715 6CDA C9 03					cmp #3
   716 6CDC B0 14					bcs @+
   717 							
   718 6CDE BD 00 12					lda bombX,x
   719 6CE1 38						sec
   720 6CE2 F9 00 12					sbc bombX,y
   721 6CE5 B0 04					bcs *+6
   722 6CE7 49 FF					eor #255
   723 6CE9 69 01					adc #1
   724 6CEB C9 03					cmp #3
   725 6CED B0 03					bcs @+
   726 							
   727 6CEF A9 01					lda #1		;pokrywa się z inną bombą
   728 6CF1 60						rts
   729 							
   730 6CF2 88			@			dey
   731 6CF3 10 D8					bpl @-1
   732 6CF5			spr_ok			
   733 6CF5 A9 00					lda #0		;ok
   734 6CF7 60						rts
   735 							
   736 6CF8			sprawdz_start	
   737 6CF8 18						clc
   738 6CF9 AD 4F 19					lda startx
   739 6CFC 69 0F					adc #15
   740 6CFE 38						sec
   741 6CFF FD 00 12					sbc bombX,x
   742 6D02 B0 04					bcs @+
   743 6D04 49 FF					eor #255
   744 6D06 69 01					adc #1
   745 6D08 C9 08		@			cmp #8
   746 6D0A B0 E9					bcs spr_ok
   747 							
   748 6D0C 18			@			clc
   749 6D0D AD 50 19					lda startY
   750 6D10 69 0E					adc #14
   751 6D12 38						sec
   752 6D13 FD 80 12					sbc bombY,x
   753 6D16 B0 04					bcs @+
   754 6D18 49 FF					eor #255
   755 6D1A 69 01					adc #1
   756 6D1C C9 08		@			cmp #8
   757 6D1E B0 D5					bcs spr_ok
   758 							
   759 6D20 A9 01					lda #1		;za blisko startu
   760 6D22 60						rts
   761 							
   762 							
   763
   764 = 6D23			tabBomby	equ *
   765 6D23 A9 FF					lda #255
   766 6D25 A2 00					ldx #0
   767 6D27 9D 00 15		@			sta tabBomb1,x
   768 6D2A 9D 00 16					sta tabBomb2,x
   769 6D2D CA						dex
   770 6D2E D0 F7					bne @-
   771
   772 6D30 A6 5A					ldx bombIle
   773 6D32 D0 01					bne @+
   774 6D34 60						rts
   775 							
   776 6D35 BD 7F 12		@			lda bombY-1,x
   777 6D38 18						clc
   778 6D39 69 01					adc #1
   779 6D3B A8						tay
   780 6D3C 86 F7					stx pom0			;nr bomby w pom0
   781 							
   782 6D3E E4 5A					cpx bombIle
   783 6D40 D0 02					bne *+4
   784 6D42 84 F9					sty pom0b			;koncowy indeks, ustalany na poczatku
   785 							
   786 6D44 A2 1E					ldx #28+2		;licznik 28+wysokoscBomby	
   787 							
   788 6D46 A5 F7					lda pom0				;wypelniaj pola wartoscia danej bazy
   789 6D48 99 00 15		@			sta tabBomb1,y
   790 6D4B 88						dey
   791 6D4C C4 F9					cpy pom0b
   792 6D4E F0 03					beq @+
   793 6D50 CA						dex
   794 6D51 D0 F5					bne @-
   795 							
   796 6D53 AA			@			tax
   797 6D54 CA						dex
   798 6D55 D0 DE					bne @-2			;next bomba
   799 							
   800 							
   801 				;ostatnia bomba
   802 6D57 A2 01					ldx #1
   803 							
   804 6D59 BD 7F 12		@			lda bombY-1,x		;pozycja startowa Ybomby-28
   805 6D5C 38						sec
   806 6D5D E9 1C					sbc #28
   807 6D5F A8						tay
   808 							
   809 6D60 E0 01					cpx #1
   810 6D62 D0 02					bne *+4
   811 6D64 84 F9					sty pom0b			;koncowy indeks
   812 							
   813 6D66 86 F7					stx pom0			;nr bomby
   814 							
   815 6D68 A2 1E					ldx #28+2				;licznik 28+wysokość bomby
   816 							
   817 6D6A A5 F7					lda pom0
   818 6D6C 99 00 16		@			sta tabBomb2,y
   819 6D6F C8						iny
   820 6D70 C4 F9					cpy pom0b
   821 6D72 F0 03					beq @+			;next
   822 6D74 CA						dex
   823 6D75 D0 F5					bne @-
   824 							
   825 6D77 AA			@			tax
   826 6D78 E8						inx
   827 6D79 E4 5A					cpx bombIle
   828 6D7B 90 DC					bcc @-2
   829 6D7D F0 DA					beq @-2
   830 							
   831 6D7F 60						rts 
   832
   833 							
   834 							
   835 				;pokazuje/ukrywa baze na radarze  , nr bazy w Y
   836 = 6D80			eorBazaradar	equ *
   837 6D80 B9 2F 13					lda bazyX-1,y
   838 6D83 4A						lsr @
   839 6D84 4A						lsr @
   840 6D85 4A						lsr @
   841 6D86 38						sec
   842 6D87 E9 02					sbc #2
   843 6D89 10 02					bpl *+4
   844 6D8B A9 00					lda #0
   845 							
   846 6D8D AA			erb_0		tax
   847 6D8E BD E6 F4					lda radarBazy1,x
   848 6D91 85 86					sta pom3
   849 6D93 BD F2 F4					lda radarBazy2,x
   850 6D96 85 87					sta pom3+1
   851 6D98 B9 4F 13					lda bazyY-1,y
   852 6D9B 20 70 6E					jsr div100	
   853 							;lda tabDiv100,x
   854 6D9E AA						tax
   855 							
   856 6D9F 8E B6 6D					stx erb_1+1
   857 6DA2 E8						inx
   858 6DA3 E8						inx
   859 6DA4 BD 64 1E		@			lda sprites+$600+startWyniki+84,x
   860 6DA7 45 86					eor pom3
   861 6DA9 9D 64 1E					sta sprites+$600+startWyniki+84,x
   862 6DAC BD 64 1B					lda sprites+$300+startWyniki+84,x
   863 6DAF 45 87					eor pom3+1
   864 6DB1 9D 64 1B					sta sprites+$300+startWyniki+84,x
   865 6DB4 CA						dex
   866 6DB5 E0 FF		erb_1		cpx #$ff
   867 6DB7 B0 EB					bcs @-
   868
   869 6DB9 60						rts
   870 							
   871 				;pokazuje bazy na radarze	(wszystkie)		
   872 = 6DBA			pokazBazyRadar	equ	*
   873 6DBA A9 00					lda #0
   874 6DBC A0 64					ldy #100		;czyszczenie baz na radarze
   875 6DBE 99 64 1E		@			sta sprites+$600+startWyniki+84,y
   876 6DC1 99 64 1B					sta sprites+$300+startWyniki+84,y
   877 6DC4 88						dey
   878 6DC5 D0 F7					bne @-
   879 							
   880 6DC7 A4 F6					ldy bazyIle
   881 							
   882 6DC9 20 80 6D		@			jsr eorBazaRadar
   883 							
   884 6DCC 88						dey
   885 6DCD D0 FA					bne @-
   886 							
   887 6DCF 60						rts			
   888
   889
   890
   891 				;rysyje polozenie statku na radarze
   892 = 6DD0			radar	equ *		
   893 6DD0 AD 34 19				lda rads1	
   894 6DD3 30 1F				bmi @+		;<0 nic nie trzeba zmazywac
   895 						
   896 6DD5 A4 5C				ldy rads		;wymaz w poprzedniej pozycji
   897 6DD7 B9 64 1B				lda sprites+$300+startWyniki+84,y
   898 6DDA 29 FC				and #%11111100
   899 6DDC 99 64 1B				sta sprites+$300+startWyniki+84,y
   900 6DDF B9 65 1B				lda sprites+$300+startWyniki+84+1,y
   901 6DE2 29 FC				and #%11111100
   902 6DE4 99 65 1B				sta sprites+$300+startWyniki+84+1,y
   903 						
   904 6DE7 AD 34 19				lda rads1
   905 6DEA F0 08				beq @+		;wszystko juz zmazane
   906 6DEC B9 66 1B				lda sprites+$300+startWyniki+84+2,y		;dodatkowe 2 punkty zmazujemy po formacji
   907 6DEF 29 FC				and #%11111100
   908 6DF1 99 66 1B				sta sprites+$300+startWyniki+84+2,y
   909
   910 = 6DF4			@		equ *		
   911 6DF4 E6 E6				inc mryganieRadarX
   912 6DF6 A5 E6				lda mryganieRadarX
   913 6DF8 29 04				and #%100
   914 6DFA F0 2F				beq @+		;puste lub formacja
   915 						
   916 6DFC A5 E4				lda posY			;narysuj w nowej
   917 6DFE 18					clc
   918 6DFF 69 0D				adc #13
   919 						;tax
   920 6E01 20 70 6E				jsr div100
   921 						;ldy tabDiv100,x
   922 6E04 A8					tay
   923 						
   924 6E05 84 5C				sty rads
   925 6E07 B9 64 1B				lda sprites+$300+startWyniki+84,y
   926 6E0A 09 02				ora #2 
   927 6E0C 99 64 1B				sta sprites+$300+startWyniki+84,y
   928 6E0F B9 65 1B				lda sprites+$300+startWyniki+84+1,y
   929 6E12 09 02				ora #2
   930 6E14 99 65 1B				sta sprites+$300+startWyniki+84+1,y
   931 						
   932 6E17 A5 E3				lda posX  ;pozycja X dzielimy przez 4
   933 6E19 18					clc
   934 6E1A 69 0F				adc #15
   935 				.if .def UC
   936 6E1C 4B 7F				alr #127
   937 				.else		
   938 						and #127
   939 						lsr @
   940 				.endif		
   941 6E1E 4A					lsr @
   942 6E1F 18					clc
   943 6E20 69 B0				adc #pozWyniki-1
   944 6E22 8D 94 24				sta RadarX1
   945 6E25 A9 00 8D 34 19			mva #0 rads1		;do zmazania bedzie statek
   946 						
   947 6E2A 60					rts	
   948 						
   949 = 6E2B			@		equ *
   950 6E2B A4 15				ldy formacja_radar
   951 6E2D D0 08				bne @+
   952 6E2F 8C 94 24				sty RadarX1		;y=0 poza ekranem
   953 6E32 88					dey
   954 6E33 8C 34 19				sty rads1		;y=-1 nic nie będzie do zmazania
   955 6E36 60					rts
   956 						
   957 6E37 A5 E6		@		lda mryganieRadarX
   958 6E39 29 02				and #%10
   959 6E3B D0 01				bne @+
   960 6E3D 60					rts
   961 6E3E AD CE 17		@		lda enemyY+5
   962 6E41 20 70 6E				jsr div100
   963 6E44 A8					tay
   964 						;ldy tabDiv100,x
   965 						
   966 6E45 84 5C				sty rads
   967 6E47 B9 66 1B				lda sprites+$300+startWyniki+84+2,y
   968 6E4A 09 03				ora #3 
   969 6E4C 99 66 1B				sta sprites+$300+startWyniki+84+2,y
   970 6E4F B9 64 1B				lda sprites+$300+startWyniki+84,y
   971 6E52 09 03				ora #3
   972 6E54 99 64 1B				sta sprites+$300+startWyniki+84,y
   973 6E57 B9 65 1B				lda sprites+$300+startWyniki+84+1,y
   974 6E5A 09 03				ora #3 
   975 6E5C 99 65 1B				sta sprites+$300+startWyniki+84+1,y
   976 						
   977 6E5F AD C2 17				lda enemyX+5
   978 6E62 4A					lsr
   979 				.if .def UC
   980 6E63 4B FE				alr #$fe
   981 				.else		
   982 						lsr
   983 						clc
   984 				.endif		
   985 6E65 69 B0				adc #pozWyniki-1
   986 6E67 8D 94 24				sta RadarX1
   987 6E6A A9 01 8D 34 19			mva #1 rads1		;do zmazania formacja
   988 						
   989 6E6F 60					rts
   990
   991 = 6E70			div100	equ *
   992 6E70 0A					asl
   993 6E71 85 80				sta pom
   994 6E73 A9 00				lda #0
   995 6E75 2A					rol
   996 6E76 06 80				asl pom
   997 6E78 2A					rol
   998 6E79 85 81				sta pom+1	;x4
   999 						
  1000 6E7B 85 83				sta pom1+1
  1001 6E7D A5 80				lda pom
  1002 6E7F 0A					asl
  1003 6E80 26 83				rol pom1+1
  1004 6E82 0A					asl
  1005 6E83 26 83				rol pom1+1		;x32
  1006 6E85 0A					asl
  1007 6E86 26 83				rol pom1+1
  1008 6E88 85 82				sta pom1
  1009 						
  1010 6E8A 0A					asl
  1011 6E8B 85 84				sta pom2
  1012 6E8D A5 83				lda pom1+1		;x64
  1013 6E8F 2A					rol
  1014 6E90 85 85				sta pom2+1
  1015 						
  1016 6E92 18					clc
  1017 6E93 A5 80				lda pom
  1018 6E95 65 82				adc pom1
  1019 6E97 85 80				sta pom
  1020 6E99 A5 81				lda pom+1
  1021 6E9B 65 83				adc pom1+1
  1022 6E9D 85 81				sta pom+1
  1023 						
  1024 6E9F A5 80				lda pom
  1025 6EA1 65 84				adc pom2
  1026 6EA3 A5 81				lda pom+1
  1027 6EA5 65 85				adc pom2+1
  1028 6EA7 60					rts 
  1029
  1030 						
  1031 				;condition w y 0=green,1=yellow,2=red
  1032 = 6EA8			setCondition	equ *
  1033 						;stx pom0			;x jest nieużywany
  1034 6EA8 8C 59 19				sty kondycja_stan
  1035 					
  1036 6EAB A5 0F				lda formacja_stan
  1037 6EAD F0 05				beq @+
  1038 6EAF C9 05				cmp #5
  1039 6EB1 F0 01				beq @+
  1040 6EB3 60					rts
  1041 					
  1042 6EB4 B9 40 18		@		lda conditionC,y
  1043 6EB7 8D 48 24				sta conditionColor
  1044 6EBA 8D 50 24				sta conditionColor1
  1045 6EBD 98					tya
  1046 6EBE 0A					asl @
  1047 6EBF 0A					asl @
  1048 6EC0 0A					asl @
  1049 6EC1 A8					tay
  1050 						
  1051 6EC2 A2 03				ldx #3
  1052 6EC4 A9 FF		@		lda #255
  1053 6EC6 9D 4C 1C				sta sprites+$400+startWyniki+60,x
  1054 6EC9 9D 57 1C				sta sprites+$400+startWyniki+60+11,x
  1055 6ECC 9D 4C 1D				sta sprites+$500+startWyniki+60,x
  1056 6ECF 9D 57 1D				sta sprites+$500+startWyniki+60+11,x
  1057 6ED2 9D 4C 1E				sta sprites+$600+startWyniki+60,x
  1058 6ED5 9D 57 1E				sta sprites+$600+startWyniki+60+11,x
  1059 6ED8 A9 3F				lda #63
  1060 6EDA 9D 4C 1B				sta sprites+$300+startWyniki+60,x
  1061 6EDD 9D 57 1B				sta sprites+$300+startWyniki+60+11,x
  1062 6EE0 CA					dex
  1063 6EE1 10 E1				bpl @-
  1064 						
  1065 6EE3 A2 06				ldx #6
  1066 6EE5 9D 50 1B		@		sta sprites+$300+startWyniki+64,x
  1067 6EE8 CA					dex
  1068 6EE9 10 FA				bpl @-
  1069 						
  1070 						
  1071 6EEB A2 00				ldx #0
  1072 6EED B9 58 F3		@		lda condition1,y
  1073 6EF0 9D 50 1C				sta sprites+$400+startWyniki+64,x
  1074 6EF3 B9 70 F3				lda condition2,y
  1075 6EF6 9D 50 1D				sta sprites+$500+startWyniki+64,x
  1076 6EF9 B9 88 F3				lda condition3,y
  1077 6EFC 9D 50 1E				sta sprites+$600+startWyniki+64,x
  1078 6EFF E8					inx
  1079 6F00 C8					iny
  1080 6F01 E0 07				cpx #7
  1081 6F03 D0 E8				bne @-
  1082
  1083 						
  1084 6F05 A9 00 8D 5B 1C			mva #0 sprites+$400+startWyniki+75
  1085 6F0A 8D 5C 1C				sta sprites+$400+startWyniki+76
  1086
  1087 6F0D 60					rts	
  1088 						
  1089 				;Wyswietlamy liczbe zyc
  1090 = 6F0E			printLives	equ *
  1091 6F0E AD 58 19				lda lives
  1092 6F11 C9 04				cmp #4
  1093 6F13 90 02				bcc @+
  1094 6F15 A9 03				lda #3		;maksymalnie wyswietlamy 3 statki
  1095 6F17 85 F7		@		sta pom0
  1096 						
  1097 6F19 A2 02				ldx #2
  1098 6F1B BC 34 18		@		ldy tab5,x
  1099 6F1E BD 37 18				lda tablives,x
  1100 6F21 E4 F7				cpx pom0
  1101 6F23 90 02				bcc @+
  1102 6F25 A9 00				lda #0
  1103 6F27 99 18 25		@		sta poz2lives,y
  1104 6F2A F0 03				beq @+
  1105 6F2C 18					clc
  1106 6F2D 69 02				adc #2
  1107 6F2F 99 27 25		@		sta poz2mlives,y
  1108 6F32 CA					dex
  1109 6F33 10 E6				bpl @-2
  1110 								
  1111 6F35 60					rts
  1112
  1113
  1114 						
  1115 				;czy ukonczono level
  1116 = 6F36			czyNowyLevel	equ *
  1117 6F36 A5 16				lda trafienie
  1118 6F38 F0 01				beq *+3
  1119 6F3A 60					rts
  1120 						
  1121 6F3B AD 4C 19				lda zbiteBazy		;czy zbito juz wszystkie bazy
  1122 6F3E C5 F6				cmp bazyIle
  1123 6F40 F0 01				beq @+ 
  1124 6F42 60					rts
  1125 						
  1126 6F43 A5 1E		@		lda nobanner
  1127 6F45 C9 02				cmp #2
  1128 6F47 90 0A				bcc @+
  1129 						
  1130 6F49 A9 00				lda #0		;wylacz przerwanie
  1131 6F4B 8D 0E D2				sta IRQEN
  1132 6F4E 85 EA				sta sirq
  1133 6F50 8D 06 D2				sta AUDF4
  1134 						
  1135
  1136 6F53 A5 0F		@		lda formacja_stan
  1137 6F55 F0 0F				beq @+
  1138 6F57 A9 00 85 0F				mva #0 formacja_stan
  1139 6F5B 85 15				sta formacja_radar
  1140 6F5D 20 DE 6F				jsr piszCondition
  1141 6F60 AC 59 19				ldy kondycja_stan		;poprzednia kondycja
  1142 6F63 20 A8 6E				jsr setCondition
  1143 						
  1144 6F66 A9 09 85 F0		@		mva #9 startMapy	
  1145 6F6A AD 52 19				lda waitWybuch
  1146 6F6D 30 24				bmi @+1
  1147 6F6F C9 0E				cmp #14
  1148 6F71 D0 1C				bne @+
  1149 						
  1150 6F73 20 A4 42				jsr exploAllEnemy
  1151 6F76 A4 5E				ldy sJoy
  1152 6F78 A9 00 85 5E				mva #0 sJoy
  1153 6F7C 85 11				sta licznikStrzal
  1154 6F7E 20 BA 3D				jsr printShip1
  1155 6F81 AD 48 24				lda conditionColor		;jeśli 0 to jest red condition , trzeba narysować
  1156 6F84 D0 09				bne @+
  1157 6F86 AD 42 18				lda conditionC+2
  1158 6F89 8D 48 24				sta conditionColor
  1159 6F8C 8D 50 24				sta conditionColor1	 
  1160 						
  1161 6F8F CE 52 19		@		dec waitWybuch
  1162 6F92 60					rts
  1163
  1164 6F93 EE 51 19		@		inc poziom			;to nastepny poziom	
  1165
  1166 6F96 A2 42				ldx #<MODUL
  1167 6F98 A0 A9				ldy #>MODUL
  1168 6F9A A9 02				lda #2
  1169 6F9C 20 0F A6				jsr rmt_init
  1170 						
  1171 6F9F A9 00 8D 15 26			mva #0  _vbsnd4
  1172 6FA4 8D 07 71				sta kanal
  1173 6FA7 8D 03 D2				sta audc2
  1174 						
  1175 6FAA AD 51 19				lda poziom		;jeśli poziom = 161 to ustaw 129 , zapetlamy
  1176 6FAD C9 A1				cmp #161
  1177 6FAF 90 05				bcc skpoz2
  1178 6FB1 A9 81				lda #129
  1179 6FB3 8D 51 19				sta poziom
  1180 = 6FB6			skpoz2	equ *
  1181
  1182 6FB6 20 BE 6A				jsr wczytajLevel
  1183 						
  1184 						
  1185 6FB9 A9 02 85 53				mva #2 muzyka
  1186 						
  1187 6FBD A9 3C 85 F0				mva #60 startMapy
  1188 6FC1 A9 36 85 11				mva #54 licznikStrzal	;opoznienie dzwieku silnika
  1189 6FC5 20 BA 6D				jsr pokazBazyRadar
  1190 6FC8 A9 01 85 FF				mva #1 zegar
  1191 6FCC 68					pla			;zdejmij po jsr
  1192 6FCD 68					pla
  1193 6FCE 20 16 28				jsr waitvbl
  1194 6FD1 A5 1F 8D 05 D4			mva movy vscrol
  1195 6FD6 A5 E5 8D 04 D4			mva movx hscrol
  1196
  1197 6FDB 4C 8D 77				jmp poczatek
  1198
  1199 				;pisze napis CONDITION
  1200 = 6FDE			piszCondition	equ *
  1201 6FDE A2 06				ldx #6
  1202 6FE0 BD 88 F4		@		lda nap_condition,x
  1203 6FE3 9D 40 1B				sta sprites+startWyniki+$300+48,x
  1204 6FE6 BD 8F F4				lda nap_condition+7,x
  1205 6FE9 9D 40 1C				sta sprites+startWyniki+$400+48,x
  1206 6FEC BD 96 F4				lda nap_condition+14,x
  1207 6FEF 9D 40 1D				sta sprites+startWyniki+$500+48,x
  1208 6FF2 BD 9D F4				lda nap_condition+21,x
  1209 6FF5 9D 40 1E				sta sprites+startWyniki+$600+48,x
  1210 6FF8 CA					dex
  1211 6FF9 10 E5				bpl @-
  1212 						
  1213 6FFB A9 00				lda #0
  1214 6FFD 8D 3F 1B				sta sprites+startWyniki+$300+47
  1215 7000 8D 3F 1C				sta sprites+startWyniki+$400+47
  1216 7003 8D 3F 1D				sta sprites+startWyniki+$500+47
  1217 7006 8D 3F 1E				sta sprites+startWyniki+$600+47
  1218
  1219 7009 A2 04				ldx #4
  1220 700B 9D 47 1B		@		sta sprites+startWyniki+$300+55,x
  1221 700E 9D 47 1D				sta sprites+startWyniki+$500+55,x
  1222 7011 9D 47 1E				sta sprites+startWyniki+$600+55,x
  1223 7014 CA					dex
  1224 7015 10 F4				bpl @-
  1225 							
  1226 7017 60					rts
  1227 				;formation Attack
  1228 = 7018			pisz_formation	equ *		
  1229 7018 A2 0B				ldx #11
  1230 701A BD 58 F4		@		lda nap_form1,x
  1231 701D 9D 3F 1B				sta sprites+startWyniki+$300+48-1,x
  1232 7020 BD 64 F4				lda nap_form1+12,x
  1233 7023 9D 3F 1C				sta sprites+startWyniki+$400+48-1,x
  1234 7026 BD 70 F4				lda nap_form1+24,x
  1235 7029 9D 3F 1D				sta sprites+startWyniki+$500+48-1,x
  1236 702C BD 7C F4				lda nap_form1+36,x
  1237 702F 9D 3F 1E				sta sprites+startWyniki+$600+48-1,x
  1238 7032 CA					dex
  1239 7033 10 E5				bpl @-
  1240
  1241 						
  1242 7035 AD 41 19				lda formacja_typ
  1243 7038 0A					asl
  1244 7039 0A					asl
  1245 703A 0A					asl
  1246 703B 0A					asl
  1247 703C A8					tay
  1248 703D A9 00				lda #0
  1249 703F 8D 4C 1C				sta sprites+startWyniki+$400+60
  1250 7042 8D 4D 1C				sta sprites+startWyniki+$400+61
  1251 7045 8D 4C 1B				sta sprites+startWyniki+$300+60
  1252 7048 8D 4D 1B				sta sprites+startWyniki+$300+61
  1253 						
  1254 704B A2 06				ldx #6
  1255 704D 9D 55 1B		@		sta sprites+startWyniki+$300+69,x
  1256 7050 CA					dex
  1257 7051 10 FA				bpl @-
  1258
  1259 						
  1260 7053 A2 00				ldx #0
  1261 7055 B9 90 F3		@		lda nap_form2-16,y
  1262 7058 9D 4E 1C				sta sprites+startWyniki+$400+62,x
  1263 705B A9 00				lda #0
  1264 705D 9D 4E 1B				sta sprites+startWyniki+$300+62,x
  1265 7060 9D 4C 1D				sta sprites+startWyniki+$500+60,x
  1266 7063 9D 4C 1E				sta sprites+startWyniki+$600+60,x
  1267 7066 C8					iny
  1268 7067 E8					inx
  1269 7068 E0 10				cpx #16
  1270 706A D0 E9				bne @-
  1271 						
  1272 706C 60					rts
  1273
  1274
  1275 = 706D			POPRAWLIVES1	equ *
  1276 706D A9 00			lda #0
  1277 706F A2 06			ldx #6
  1278 7071 9D 29 08		@	sta obraz1+33+24*48,x
  1279 7074 9D 59 08			sta obraz1+33+25*48,x
  1280 7077 9D 89 08			sta obraz1+33+26*48,x
  1281 707A CA				dex
  1282 707B 10 F4			bpl @-
  1283 707D 60				rts
  1284
  1285
  1286 = 707E			POPRAWLIVES2	equ *
  1287 707E A9 00			lda #0
  1288 7080 A2 06			ldx #6
  1289 7082 9D 21 0F		@	sta obraz2+33+24*48,x
  1290 7085 9D 51 0F			sta obraz2+33+25*48,x
  1291 7088 9D 81 0F			sta obraz2+33+26*48,x
  1292 708B CA				dex
  1293 708C 10 F4			bpl @-
  1294 708E 60				rts
  1295 					   
  1296 = 708F			pisz_zycia	equ *
  1297 708F A2 0F			ldx #15
  1298 7091 BD E0 F3		@	lda statek_zapas,x
  1299 7094 9D D0 1C			sta sprites+startWyniki+$4c0,x
  1300 7097 9D D0 1D			sta sprites+startWyniki+$5c0,x
  1301 709A 9D D0 1E			sta sprites+startWyniki+$6c0,x
  1302 709D CA				dex
  1303 709E 10 F1			bpl @-
  1304 					
  1305 70A0 A2 09			ldx #9
  1306 70A2 BD C0 F4		@	lda statekm_zapas,x
  1307 70A5 9D D6 1B			sta sprites+startWyniki+$3c6,x
  1308 70A8 CA				dex
  1309 70A9 10 F7			bpl @-
  1310 					
  1311 70AB 60				rts
  1312
  1313 = 70AC			czysc_duszki	equ *
  1314 70AC A9 00			lda #0
  1315 70AE AA				tax
  1316 70AF 9D 00 1B		@	sta sprites+$300,x
  1317 70B2 9D 00 1C			sta sprites+$400,x
  1318 70B5 9D 00 1D			sta sprites+$500,x
  1319 70B8 9D 00 1E			sta sprites+$600,x
  1320 70BB 9D 00 FE			sta sprites1+$600,x
  1321 70BE CA				dex
  1322 70BF D0 EE			bne @-
  1323 70C1 60				rts	
  1324
  1325 = 70C2			pisz_panel	equ *
  1326 70C2 A2 06			ldx #6
  1327 70C4 BD A4 F4		@	lda nap_hiscore,x
  1328 70C7 9D 10 1B			sta sprites+startWyniki+$300,x
  1329 70CA BD AB F4			lda nap_hiscore+7,x
  1330 70CD 9D 10 1C			sta sprites+startWyniki+$400,x
  1331 70D0 BD B2 F4			lda nap_hiscore+14,x
  1332 70D3 9D 10 1D			sta sprites+startWyniki+$500,x
  1333 70D6 BD B9 F4			lda nap_hiscore+21,x
  1334 70D9 9D 10 1E			sta sprites+startWyniki+$600,x
  1335 70DC BD F0 F3			lda nap_1up,x
  1336 70DF 9D 22 1C			sta sprites+$421+1,x
  1337 70E2 BD F7 F3			lda nap_1up+7,x
  1338 70E5 9D 22 1D			sta sprites+$521+1,x
  1339 70E8 BD DF F4			lda nap_0,x
  1340 70EB 9D 19 1B			sta sprites+$319,x
  1341 70EE 9D 2A 1B			sta sprites+$32A,x
  1342 70F1 BD CA F4			lda nap_round,x
  1343 70F4 9D E6 1B			sta sprites+$3e9-3,x
  1344 70F7 BD D1 F4			lda nap_round+7,x
  1345 70FA 9D E6 1C			sta sprites+$4e9-3,x
  1346 70FD BD D8 F4			lda nap_round+14,x
  1347 7100 9D E6 1D			sta sprites+$5e9-3,x
  1348 7103 CA				dex
  1349 7104 10 BE			bpl @-
  1350
  1351 7106 60				rts
  1352
  1353 					
  1354 						
   589 7107						icl 'sfx.asm'
Source: sfx.asm
     1 				//efekty dzwiekowe
     2 = 0000			fx_antyair=0*2
     3 = 0002			fx_asteroid=1*2
     4 = 0004			fx_bomba=2*2
     5 = 0006			fx_dzialko=3*2
     6 = 0008			fx_wybuch=4*2
     7 = 000A			fx_strzal=5*2
     8 = 000C			fx_enemy=6*2
     9 = 000E			fx_spy=7*2
    10 = 0010			fx_dead=8*2
    11 = 0012			fx_extra=9*2
    12 = 0014			fx_rakieta=10*2
    13 = 0016			fx_alarm=11*2
    14
    15 7107			kanal			org *+1
    16 7108			petla			org *+1
    17 7109			kanal1			org *+1
    18 710A			petla1			org *+1
    19
    20 710B			kanals			org *+1		;2 bajty , uzywamy tylko 1	
    21 710C			prio			org *+1
    22 710D			kanals1			org *+1
    23 710E			prio1			org *+1
    24 				;audctl0			org *+1
    25
    26 710F			.local sfx
    27
    28 710F			init
    29 710F-A375> A9 00 8D 07 + 		mva #0 kanal
    30 7114 60					rts
    31 						
    32 7115			add_fx1
    33 7115 8C 24 71				sty _af1+1
    34 7118 AC 09 71				ldy kanal1
    35 711B F0 06				beq @+
    36 711D CD 0E 71				cmp prio1
    37 7120 B0 01				bcs @+
    38 7122 60					rts
    39 7123			@		
    40 7123 A0 00		_af1	ldy #0
    41 7125 8D 0E 71				sta prio1
    42 7128 B9 CF 71				lda audf_table,y
    43 712B 8D B3 71				sta _kanal_audf1+1
    44 712E B9 D0 71				lda audf_table+1,y
    45 7131 8D B4 71				sta _kanal_audf1+2
    46 						
    47 7134 B9 E7 71				lda audc_table,y
    48 7137 8D B9 71				sta _kanal_audc1+1
    49 713A B9 E8 71				lda audc_table+1,y
    50 713D 8D BA 71				sta _kanal_audc1+2
    51 						
    52 7140 B9 FF 71				lda len_table,y
    53 7143 8D 09 71				sta kanal1				;dlugosc
    54 7146 8D 0D 71				sta kanals1
    55 7149 B9 00 72				lda len_table+1,y
    56 714C 8D 0A 71				sta petla1			
    57 						
    58 714F 60					rts
    59
    60 7150			add_fx
    61 7150 8C 5F 71				sty _af0+1
    62 7153 AC 07 71				ldy kanal
    63 7156 F0 06				beq @+
    64 7158 CD 0C 71				cmp prio
    65 715B B0 01				bcs @+
    66 715D 60					rts
    67 715E			@		
    68 715E A0 00		_af0	ldy #0
    69 7160 8D 0C 71				sta prio
    70 7163 B9 CF 71				lda audf_table,y
    71 7166 8D 94 71				sta _kanal_audf+1
    72 7169 B9 D0 71				lda audf_table+1,y
    73 716C 8D 95 71				sta _kanal_audf+2
    74 						
    75 716F B9 E7 71				lda audc_table,y
    76 7172 8D 9A 71				sta _kanal_audc+1
    77 7175 B9 E8 71				lda audc_table+1,y
    78 7178 8D 9B 71				sta _kanal_audc+2
    79 						
    80 717B B9 FF 71				lda len_table,y
    81 717E 8D 07 71				sta kanal				;dlugosc
    82 7181 8D 0B 71				sta kanals
    83 7184 B9 00 72				lda len_table+1,y
    84 7187 8D 08 71				sta petla			;petla
    85 					
    86 						;lda ctl_table,y
    87 						;sta audctl0
    88
    89 718A 60					rts
    90 						
    91
    92 718B			play_fx
    93 718B 8C CD 71				sty pfx4+1
    94 718E AC 07 71				ldy kanal
    95 7191 F0 1A				beq pfx3
    96 7193			_kanal_audf		
    97 7193 B9 FF FF				lda $ffff,y
    98 7196 8D 10 26				sta _vbsnd3
    99 7199			_kanal_audc		
   100 7199 B9 FF FF				lda $ffff,y
   101 719C 8D 15 26				sta _vbsnd4
   102 719F 88					dey
   103 71A0 D0 08				bne @+					;jeszcze nie koniec
   104 71A2 AD 08 71				lda petla			;czy zapetlony 0=nie
   105 71A5 F0 03				beq @+
   106 71A7 AC 0B 71				ldy kanals
   107 71AA 8C 07 71		@		sty kanal	
   108
   109 71AD			pfx3	
   110 71AD AC 09 71				ldy kanal1
   111 71B0 F0 1A				beq pfx4
   112 71B2			_kanal_audf1		
   113 71B2 B9 FF FF				lda $ffff,y
   114 71B5 8D 06 26				sta _vbsnd1
   115 71B8			_kanal_audc1		
   116 71B8 B9 FF FF				lda $ffff,y
   117 71BB 8D 0B 26				sta _vbsnd2
   118 71BE 88					dey
   119 71BF D0 08				bne @+					;jeszcze nie koniec
   120 71C1 AD 0A 71				lda petla1			;czy zapetlony 0=nie
   121 71C4 F0 03				beq @+
   122 71C6 AC 0D 71				ldy kanals1
   123 71C9 8C 09 71		@		sty kanal1	
   124
   125 71CC			pfx4	
   126 71CC A0 00				ldy #0
   127 71CE 60					rts
   128
   129
   130 71CF			audf_table
   131 71CF 17 72 3D 72 47 72 + 		dta a(antyair_audf),a(asteroid_audf),a(bomba_audf),a(dzialko_audf),a(wybuch_audf),a(strzal_audf),a(enemy_audf),a(spy_audf)
   132 71DF DB 73 69 74 CD 74 + 		dta a(dead_audf),a(extra_audf),a(rakieta_audf),a(alarm_audf)
   133 						
   134 71E7			audc_table
   135 71E7 25 72 33 72 61 72 + 		dta a(antyair_audc),a(asteroid_audc),a(bomba_audc),a(dzialko_audc),a(wybuch_audc),a(strzal_audc),a(enemy_audc),a(spy_audc)
   136 71F7 22 74 9B 74 FC 74 + 		dta a(dead_audc),a(extra_audc),a(rakieta_audc),a(alarm_audc)
   137 				/*		
   138 				ctl_table
   139 						dta a(1)
   140 						dta a(1+32)
   141 						dta a(1)
   142 						dta a(1)
   143 						dta a(1)
   144 						dta a(1)
   145 						dta a(1)
   146 						dta a(1)  */
   146
   147 						
   148 71FF			len_table
   149 71FF 0D 00				dta b(13),b(0)	;antyair
   150 7201 09 00				dta b(9),b(0)	;asteroida
   151 7203 19 00				dta b(25),b(0)	;bomba
   152 						;dta b(20),b(0)	;dzialko
   153 7205 1D 00				dta 29,0		;dzialko
   154 7207 3E 00				dta b(62),b(0)	;wybuch
   155 7209 13 00				dta b(19),b(0)	;strzal
   156 720B 1B 00				dta b(27),b(0)	;enemy
   157 720D 22 00				dta b(34),b(0)	;spy
   158 720F 46 00				dta 70,0			;dead
   159 7211 31 00				dta 49,0			;extra life
   160 7213 2E 00				dta 46,0			;rakieta
   161 7215 3C 01				dta 60,1			;alarm formation
   162 						
   163
   164 7217 00 F5 E5 D5 C5 B5 + antyair_audf .he 00 F5 E5 D5 C5 B5 A5 95 85 75 65 55 45 2D
   165 7225 00 A1 A1 A1 A2 A2 + antyair_audc .he 00 A1 A1 A1 A2 A2 A2 A2 A3 A3 A3 A4 A4 A4
   166
   167 7233 00 A3 A3 A3 A3 A0 + asteroid_audc .he 00 A3 A3 A3 A3 A0 A3 A3 A3 A3
   168 723D 00 2F 32 35 39 3C + asteroid_audf .he 00 2F 32 35 39 3C 32 35 39 3C
   169
   170 7247 00 00 18 18 18 18 + bomba_audf	.he 00,00,18,18,18,18,18,18,18,18,18,18,18,18,18,18
   171 7257 18 18 18 18 18 18 + 			.he 18,18,18,18,18,18,18,18,18,18
   172 7261 00 00 01 02 03 04 + bomba_audc	.he 00,00,01,02,03,04,05,06,06,06,06,08,08,08,08,08
   173 7271 0A 0A 0A 0A 0A 0C + 			.he 0A,0A,0A,0A,0A,0C,0C,0E,0E,0F
   174
   175
   176 727B 00 00		dzialko_audf	.he 00,00
   177 727D 30 30 30 30 30 30 + 				:28 .he 30
   178 7299 00 00 01 02 03 04 + dzialko_audc	.he 00,00,01,02,03,04,05,06,06,06,06,08,08,08,08,08,09,09,09,09,0A,0A,0A,0B,0B,0B,0B,0D,0D,0E
   179
   180
   181 72B7 00 55 55 55 55 55 + wybuch_audf	.he 00 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55
   182 72F6 00 82 82 82 82 82 + wybuch_audc	.he 00 82 82 82 82 82 82 82 82 82 82 84 84 84 84 84 84 84 84 84 84 86 86 86 86 86 86 86 86 86 88 88 88 88 88 88 88 88 88 88 8A 8A 8A 8A 8A 8A 8A 8A 8C 8C 8C 8E 8E 8E 8F 8F 8F 8F 8F 8F 8F 8F 8F
   183
   184 7335 00 00 0B 0B 0B 0B + strzal_audf	.he 00,00,0b,0b,0b,0b,0b,0b,0b,0b,0b,0b,0b,0b,0b,0b,0b,0b,0b,0b
   185 7349 00 83 83 83 83 83 + strzal_audc	.he 00 83 83 83 83 83 83 84 84 84 84 84 84 84 84 84 84 85 86 87
   186
   187 735D 00 12 12 12 12 12 + enemy_audf	.he 00 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12 25 25 25 25 25 25 25 25 25
   188 7379 00 02 02 02 02 04 + enemy_audc	.he 00 02 02 02 02 04 02 04 04 04 04 06 04 06 06 08 06 08 08 08 0A 0A 0C 0C 0C 0C 0C 0E
   189
   190 7395 00 31 30 2F 2E 2D + spy_audf	.he 00 31 30 2F 2E 2D 2C 2B 2A 29 28 27 26 25 24 23 22 21 20 1F 1E 1D 1C 1B 1A 19 18 17 16 15 14 13 12 11 10
   191 73B8 00 C1 C1 C2 C2 C1 + spy_audc	.he 00 C1 C1 C2 C2 C1 C1 C1 C1 C1 C1 C2 C2 C4 C4 C1 C1 C1 C1 C2 C2 C3 C3 C6 C7 C2 C2 C2 C2 C3 C3 C4 C4 C6 C7
   192
   193 73DB 00 C5 C4 C3 C2 C1 + dead_audf	.he 00 C5 C4 C3 C2 C1 C0 BF BE BD BC BB BA B9 B8 B7 B6 B5 B4 B3 B2 B1 B0 AF AE AD AC AB AA A9 A8 A7 A6 A5 A4 A3 A2 A1 A0 9F 9E 9D 9C 9B 9A 99 98 97 96 95 94 93 92 91 90 8F 8E 8D 8C 8B 8A 89 88 87 86 7F 84 83 82 7B 10
   194 7422 00 C1 C1 C1 C1 C1 + dead_audc	.he 00 C1 C1 C1 C1 C1 C1 C1 C1 C2 C2 C2 C2 C2 C2 C2 C2 C3 C3 C3 C3 C3 C3 C3 C3 C4 C4 C4 C4 C4 C4 C4 C4 C5 C5 C5 C5 C5 C5 C5 C5 C6 C6 C6 C6 C6 C6 C6 C6 C7 C7 C7 C7 C7 C7 C7 C7 C8 C8 C8 C9 C9 CA CA CB AB CC CC CC 8B C8
   195
   196 7469 00 6F 8F AF CF EF + extra_audf	.he 00 6F 8F AF CF EF 0F 2F 4F 6F 8F AF CF EF 0F 2F 4F 6F 8F AF CF EF 0F 2F 4F 6F 8F AF CF EF 0F 2F 4F 6F 8F AF CF EF 0F 2F 4F 6F 8F AF CF EF 0F 2F 4F 6F
   197 749B 00 C1 C1 C1 C1 C1 + extra_audc	.he 00 C1 C1 C1 C1 C1 C1 C2 C2 C2 C2 C2 C2 C3 C3 C3 C3 C3 C3 C4 C4 C4 C4 C4 C4 C5 C5 C5 C5 C5 C5 C5 C5 C5 C5 C5 C5 C5 C5 C5 C5 C6 C6 C6 C6 C7 C7 C8 C8 C8
   198
   199 74CD 00 71 71 72 72 73 + rakieta_audf	.he 00 71 71 72 72 73 73 75 75 76 76 77 77 78 78 79 79 6A 6A 6B 6B 6C 6C 6D 6D 6E 6E 6F 6F 70 70 71 71 72 72 73 73 75 75 76 76 77 77 78 78 79 79
   200 74FC 00 A3 A3 A3 A3 A3 + rakieta_audc	.he 00 A3 A3 A3 A3 A3 A3 A3 A3 A3 A4 A3 A4 A4 A4 A4 A4 A4 A4 A5 A4 A5 A5 A4 A5 A6 A4 A5 A6 A5 A6 A6 A5 A6 A7 A5 A6 A7 A5 A6 A8 A6 A7 A8 A6 A7 A8
   201
   202 752B 00 3C 3C 3C 2A 35 + alarm_audf	.he 00 3C 3C 3C 2A 35 35 2F 25 2F 2A 2A 21 2D 2D 2D 25 2F 2F 32 28 32 35 35 2A 39 39 39 2F 3C 3C 3C 2F 3C 35 35 2A 2F 2F 2F 21 2A 2A 2D 23 2D 2F 2F 25 32 32 32 2A 35 35 39 2D 39 3C 3C 2F
   203 7568 00			alarm_audc	.he 00 
   204 7569 A5 A5 A6 A8 A5 A5 + 			:15 .he A5 A5 A6 A8
   205
   206 				.endl
   207 						
   590 							
   591 							;GLOWNY PROGRAM
   592
   593 = 75A5			czarp1	equ *
   594 75A5 B5 B5 B5 B5				:4 dta b(%10110101)
   595 75A9 FF FF				:2 dta b(255)
   596 75AB A5					dta b(%10100101)
   597 75AC FF					dta b(255)
   598 75AD B5 B5				:2 dta b(%10110101)
   599 						
   600 = 75AF			livesRed	equ *
   601 75AF A2 09					ldx #9
   602 75B1 BD A5 75		@			lda czarp1,x
   603 75B4 9D D6 1F					sta sprites+startWyniki+$7c6,x
   604 75B7 CA						dex
   605 75B8 10 F7					bpl @-
   606 75BA 60						rts
   607 							
   608 = 75BB			livesRedOff	equ *
   609 75BB A2 09					ldx #9
   610 75BD A9 FF					lda #255
   611 75BF 9D D6 1F		@			sta sprites+startWyniki+$7c6,x
   612 75C2 CA						dex
   613 75C3 10 FA					bpl @-
   614 75C5 60						rts
   615 						
   616 = 75C6			czarnyPanel	equ	*
   617 75C6 A9 FF					lda #255  
   618 75C8 A2 00					ldx #0
   619 75CA 9D 00 1F		@			sta sprites+$700,x  ;wypelniamy 4 duszka
   620 75CD CA						dex
   621 75CE D0 FA					bne @-
   622 							
   623 75D0 A2 F2					ldx #242
   624 75D2 9D 00 FF		@			sta sprites1+$700,x
   625 75D5 CA						dex
   626 75D6 E0 0B					cpx #11
   627 75D8 D0 F8					bne @-
   628 							
   629 75DA A9 00					lda #0
   630 75DC 9D FE FE		@			sta sprites1+$700-2,x
   631 75DF 9D E6 FF					sta sprites1+$700+230,x
   632 75E2 E8						inx
   633 75E3 E8						inx
   634 75E4 E0 11					cpx #17
   635 75E6 D0 F4					bne @-
   636 75E8 8D F7 FF					sta sprites1+$700+247
   637 							
   638 							;sta sprites1+$700+12
   639 							;sta sprites1+$700+242
   640 75EB A9 7E					lda #126
   641 75ED 8D 0A FF					sta sprites1+$700+10
   642 75F0 8D F4 FF					sta sprites1+$700+244
   643 75F3 A9 3C					lda #60
   644 75F5 8D 08 FF					sta sprites1+$700+8
   645 75F8 8D F6 FF					sta sprites1+$700+246
   646 							
   647 							;lda #0
   648 							;sta sprites1+$700+13
   649 							;sta sprites1+$700+11
   650 							;sta sprites1+$700+9
   651 							;sta sprites1+$700+241
   652 							;sta sprites1+$700+243
   653 							;sta sprites1+$700+245
   654 							;sta sprites1+$700+247			
   655 							
   656 75FB 60						rts
   657 							
   658 = 75FC			spriteOn	equ *
   659 75FC 20 AC 70					jsr czysc_duszki
   660 75FF 20 DE 6F					jsr piszCondition
   661 7602 20 8F 70					jsr pisz_zycia
   662 7605 20 C2 70					jsr pisz_panel
   663 							
   664 7608 20 C6 75					jsr czarnyPanel
   665 							
   666 760B A9 03					lda #3
   667 760D 8D 1D D0					sta PMCTL   ;wlaczenie spritow
   668 7610 A9 18					lda #>sprites
   669 7612 8D 07 D4					sta PMBASE ;adres obrazu duszkow
   670 7615 A9 01					lda #1
   671 							
   672 7617 8D 1B D0					sta GTIACTL	
   673 							
   674 761A A9 03					lda #3
   675 761C 8D 0B D0					sta SIZEP+3
   676 761F A9 00					lda #0
   677 7621 8D 15 D0					sta COLPM+3
   678 7624 8D 08 D0					sta SIZEP
   679 							
   680 7627 A2 04					ldx #4
   681 7629 9D 0D D0		@			sta GRAFP0,x
   682 762C CA						dex
   683 762D D0 FA					bne @-
   684 							
   685 762F 85 BB					sta enemyColor-1
   686 							
   687 7631 60						rts
   688
   689
   690 7632 01 00 03 00		tabora		dta b(%01,%00,%11,%00)		;ora1
   691 7636 02 00 03 00					dta b(%10,%00,%11,%00)		;ora2
   692 763A 03 01 02 00					dta b(%11,%01,%10,%00)		;ora3
   693 							
   694 							
   695 = 1500			tabBomb1	equ $1500	
   696 = 1600			tabBomb2	equ $1600		;FREE
   697
   698 = 1180			bombRodzaj	equ $1180
   699 = 1200			bombX		equ $1200
   700 = 1280			bombY		equ $1280
   701
   702
   703 				;oraTab3		equ $1a00
   704
   705 = 1800			sprites 	equ $1800		;+$300 = od $1B00 do $2000-1 efektywnie
   706 = F800			sprites1	equ $f800		;duszki podczas sampla
   707 					
   708 = 1700			obraz1La	equ $1700
   709 = 1725			obraz1Ha	equ obraz1La+37
   710 = 174A			obraz2La	equ obraz1Ha+37
   711 = 176F			obraz2Ha	equ obraz2La+37
   712 = 1794			dlist		equ obraz2Ha+37 ;35 bajtów, zajete 183 bajty na tej stronie
   713
   714 = 17B7			enemy		equ dlist+35
   715 = 17BD			enemyX		equ enemy+6
   716 = 17C3			enemyX0		equ enemy+12
   717 = 17C9			enemyY		equ enemy+18
   718 = 17CF			enemyY0		equ enemy+24
   719 = 17D5			enemyDX		equ enemy+30
   720 = 17DB			enemyDY		equ enemy+36
   721 = 17E1			enemyFaza	equ enemy+42
   722 = 17E7			enemyBank	equ enemy+48
   723 = 17ED			enemyShapeH	equ enemy+54
   724 = 17F3			enemyDX0	equ enemy+60
   725 = 17F9			enemyDY0	equ enemy+66
   726
   727
   728 763E			changePanelColor
   729 763E 8E 4B 76				stx cpc
   730 7641 A5 25				lda kolorPanel			;zmieniaj odcien panelu
   731 7643 29 F0				and #%11110000
   732 7645 85 F7				sta pom0
   733 7647 A5 25				lda kolorPanel
   734 7649 38					sec
   735 = 764B			cpc		equ *+1		
   736 764A E9 04				sbc #4
   737 764C 29 0F				and #%1111
   738 764E 05 F7				ora pom0
   739 7650 85 25				sta kolorPanel
   740 7652 8D 14 D0				sta COLPM+2
   741 7655 60					rts
   742
   743 7656			title_s0	
   744 7656 20 FC 75				jsr spriteOn
   745 7659 A9 01 8D 51 19			mva #1 poziom		
   746 765E 20 98 32				jsr piszPoziom
   747 7661			title_s1		
   748 7661 20 CE 32				jsr piszHscore1
   749 						
   750 7664 20 16 28		Title_s	jsr waitvbl
   751 7667 A9 00 8D 00 D4			mva #0 DMACTL
   752 766C 20 B3 27				jsr init_fx
   753 766F 20 BB 75				jsr livesRedOff
   754 						
   755 7672 A9 00 85 12				mva #0 sfxlicznik1
   756 7676 85 ED				sta pauza
   757 7678 85 0F				sta formacja_stan
   758 767A 85 15				sta formacja_radar
   759 767C 20 DE 6F				jsr piszCondition
   760 767F AC 59 19				ldy kondycja_stan		;poprzednia kondycja
   761 7682 20 A8 6E				jsr setCondition
   762 7685 A9 00 85 EE				mva #0 stan_gry
   763 						
   764 7689 A2 42				ldx #<MODUL					;low byte of RMT module to X reg
   765 768B A0 A9				ldy #>MODUL					;hi byte of RMT module to Y reg
   766 768D A9 06				lda #$06						;starting song line 0-255 to A reg 	
   767 768F 20 00 A6				jsr RASTERMUSICTRACKER
   768 						
   769 7692 A9 01 85 EE				mva #1 stan_gry
   770
   771 7696 20 05 B7				jsr Title
   772 = 7699			title1	equ *	
   773
   774 7699 A9 00 8D 00 D4			mva #0 DMACTL
   775 769E 85 20				sta score
   776 76A0 85 21				sta score+1
   777 76A2 85 22				sta score+2
   778
   779 76A4 A9 94 8D 02 D4 A9 + 		mwa #dlist	DLPTR
   780 76AE A9 18 8D 07 D4			mva #>SPRITES PMBASE
   781 						
   782 76B3 A9 00 85 EE				mva #0 stan_gry
   783
   784 						
   785 76B7 20 B3 27				jsr init_fx		
   786 						
   787 76BA 20 C6 75				jsr czarnyPanel
   788 76BD 20 8F 70				jsr pisz_zycia
   789
   790 						
   791 76C0 A9 88 8D 96 17 A9 + 		mwa #obraz1 dlist+2
   792 76CA 20 00 21				jsr czyscObraz1
   793 						
   794 76CD AD 00 D3				lda JOY
   795 76D0 4A					lsr
   796 76D1 90 05				bcc @+
   797 76D3 A9 01 8D 51 19			mva #1 poziom	
   798 						
   799 76D8 20 BE 6A		@		jsr wczytajLevel
   800 						
   801 76DB 20 BA 6D				jsr pokazBazyRadar
   802 						
   803 76DE A0 00				ldy #0
   804 76E0 20 A8 6E				jsr setCondition
   805 76E3 20 4C 32				jsr czyscScore
   806 76E6 20 C4 31				jsr piszScore1
   807 							
   808 76E9 A9 03 8D 58 19			mva #3	lives
   809 76EE 20 0E 6F				jsr printLives
   810 76F1 A9 01 85 27				mva #1 scoreZmiana	;nie ma nowych punktów
   811 									
   812 76F5 20 AF 75				jsr livesRed
   813
   814 						
   815 76F8 A9 01 85 FF				mva #1 zegar
   816 						
   817 76FC A9 28 8D 17 D0			mva #KOLOR1 COLPF1
   818 7701 A9 34 8D 19 D0			mva #KOLOR3 COLPF3
   819 						
   820 7706 A9 00 8D 47 19			mva #0 flagHscore
   821 						
   822 						
   823 770B A9 C0 8D 0E D4			mva #%11000000 NMIEN
   824 						
   825 7710 A9 02 85 EE				mva #2 stan_gry
   826 						;mva #$80 RMTGLOBALVOLUMEFADE
   827
   828 						
   829 7714 4C 8D 77				jmp poczatek		;nie pokazuj ekranu przed narysowaniem
   830
   831 					
   832 7717 00			frame	dta 0
   833 7718 00			ruch	dta 0
   834 7719 00			ruchy	dta 0
   835 771A 00			gwx		dta 0
   836 771B 00			gwy		dta 0
   837
   838 				;glowna petla		
   839 = 771C			loop	equ *
   840 				;
   841 				;Czekamy na ramke 2
   842 				;		
   843
   844 771C A9 87 8D 96 17 A9 + 		mwa #obraz1-1 dlist+2
   845 7726 A9 D8 8D 09 D4			mva #>znaki1 CHBASE
   846 772B A5 E5 8D 04 D4			mva movX HSCROL 
   847 						;sta movx1
   848 7730 A5 1F 8D 05 D4			mva movY VSCROL
   849 						;sta movy1	
   850 						
   851 						
   852 7735 A9 00 85 FF				mva #0 zegar
   853 						
   854 7739 A9 3A 8D 00 D4			mva #58 DMACTL
   855 						
   856
   857 				//obsługa sampli
   858 773E A5 1E				lda nobanner
   859 7740 F0 4B				jeq poczatek
   860 7742 C9 01				cmp #1
   861 7744 D0 2F				bne @+
   862
   863 7746 A9 40 8D 0E D4			mva #%01000000 NMIEN
   864 						
   865 774B 78					sei
   866 774C A9 5C 8D FE FF A9 + 		mwa #pok_s1 $fffe
   867 7756 A9 21 8D 1B D0			mva #1+32 gtiactl
   868 						
   869 775B A9 0F				lda #15
   870 775D 8D 06 D2				sta AUDF4
   871 7760 A0 00 8C 0E D2			mvy #0 IRQEN
   872 7765 58					cli
   873 						
   874 7766 20 84 4B				jsr schowaj_duszki
   875 						
   876 7769 E6 1E				inc nobanner
   877 						
   878 776B A9 04 85 EA				mva #4 sirq
   879 776F 8D 0E D2				sta IRQEN
   880 7772 4C 8D 77				jmp poczatek
   881 						
   882 7775 A2 04		@		ldx #4
   883 7777 20 3E 76				jsr changePanelColor
   884
   885 777A A5 EA				lda sirq
   886 777C D0 0F				bne poczatek		;jeszcze sie nie skonczyl		
   887 						
   888 777E 20 26 4D				jsr pokaz_duszki
   889 						
   890 7781 A9 00 8D 06 D2			mva #0 AUDF4
   891 7786 85 1E				sta nobanner
   892 						;mva #>SPRITES PMBASE
   893 						
   894 7788 A9 C0 8D 0E D4			mva #%11000000 NMIEN
   895
   896 						
   897 						
   898 = 778D			poczatek	equ *
   899 778D 20 BF 27				jsr playFX
   900 						
   901 7790 A9 BA 85 88 A9 18 + 		mwa #obraz2L screenL
   902 7798 A9 D7 85 8A A9 18 + 		mwa #obraz2H screenH
   903 						
   904 77A0 20 B2 3C				jsr printShip
   905 77A3 20 29 3F				jsr copyShip
   906 						
   907 77A6 20 D0 6D				jsr radar
   908
   909 77A9 20 62 21				jsr czyscObraz2
   910 						
   911 77AC 20 18 4A				jsr timeEvents
   912 						
   913 				;rysujemy na obrazie 2
   914 77AF A9 01 85 EB				mva #1 ramka
   915 77B3 85 EC				sta vblFlaga
   916 77B5 A9 04 85 59				mva #4 ramka4		;ramka*4	
   917 						
   918 77B9 A9 02				lda #2
   919 77BB A4 5E				ldy sJoy
   920 77BD BE 36 7A				ldx skos,y
   921 77C0 F0 11				beq @+
   922 77C2 EE 17 77				inc frame
   923 77C5 AE 17 77				ldx frame
   924 77C8 E0 06				cpx #6
   925 77CA 90 07				bcc @+
   926 77CC A9 00 8D 17 77			mva #0 frame
   927 77D1 A9 01				lda #1
   928 77D3			@				
   929 77D3 20 40 3F				jsr moveShip			;przesun i narysuj statek			
   930 							
   931 77D6 20 1A 3A				jsr gwiazdyRysuj2
   932 77D9 20 F7 3F				jsr animacjaJadraA
   933 77DC 20 8F 41				jsr animacjaJadraB
   934 							
   935 77DF 20 44 41				jsr coreWaveA
   936 77E2 20 59 42				jsr coreWaveB
   937 						
   938 77E5 A5 16				lda trafienie
   939 77E7 05 F0				ora startMapy
   940 77E9 D0 0A				bne @+
   941 77EB A5 5B				lda czyRakiety
   942 77ED F0 06				beq @+
   943 77EF 20 70 4E				jsr moveRakiety		;rakiety
   944 77F2 20 4A 4D				jsr rakiety
   945 = 77F5			@		equ *
   946 						
   947 77F5 20 A0 33				jsr printEkran	
   948
   949 77F8 20 51 49				jsr rysujWybuchy		;animuj wybuchy
   950 77FB 20 B5 48				jsr rysujmWybuchy
   951 											
   952 77FE A5 16				lda trafienie
   953 7800 05 F0				ora startMapy
   954 7802 D0 12				bne @+
   955 						
   956 7804 20 7B 5F				jsr kolStatekWybuch	
   957 7807 20 26 47				jsr movePociski1	
   958 						
   959 						
   960 780A 20 F0 5E				jsr kolStatekObiekty
   961 780D 20 2E 5C				jsr kolStatekBazy
   962 						
   963 						
   964 7810 20 84 5D				jsr kolRakietyStatek		
   965 7813 20 CB 5D				jsr kolRakietyObiekty
   966
   967 = 7816			@		equ *
   968 						
   969 7816 20 BE 4F				jsr spy
   970 7819 20 4F 54				jsr formacja
   971 						
   972 						
   973 781C A5 16				lda trafienie
   974 781E 05 F0				ora startMapy
   975 7820 D0 03				bne @+
   976 7822 20 F1 50				jsr printSpyScore
   977 						
   978 = 7825			@		equ *		
   979 7825 20 1D 53				jsr moveEnemy
   980 						
   981 7828 A5 16				lda trafienie		
   982 782A 05 F0				ora startMapy
   983 782C D0 03				bne @+
   984 782E 20 60 52				jsr dodaj_przeciwnika
   985
   986 = 7831			@		equ *		
   987 7831 20 E3 53				jsr rysujEnemy
   988
   989 7834 A5 16				lda trafienie		
   990 7836 05 F0				ora startMapy
   991 7838 D0 15				bne @+
   992 						
   993 783A 20 B6 5A				jsr obliczEnemyXY
   994 783D 20 CD 5B				jsr kolStatekEnemy
   995 						
   996 7840 20 97 47				jsr printPociski
   997 7843 20 DA 5A				jsr kolPociskiEnemy
   998 7846 20 06 5A				jsr kolObiektyEnemy
   999 						
  1000 						
  1001 7849 20 C0 5F				jsr kolPociskiStatek
  1002 784C 20 F6 5F				jsr kolPociskiObiekty
  1003 						
  1004 = 784F			@		equ *	
  1005 					
  1006 784F 20 7E 70				jsr poprawlives2
  1007 						
  1008 7852 A9 00				lda #0
  1009 7854 C5 FF		@		cmp zegar
  1010 7856 F0 FC				beq @-
  1011 						
  1012 7858 A5 16				lda trafienie
  1013 785A 05 F0				ora startMapy
  1014 785C D0 27				bne @+	
  1015 						
  1016 						
  1017 785E 20 1C 29				jsr moveStrzal
  1018 						
  1019 7861 20 1D 28				jsr pushFire			;czy wcisnieto fire?
  1020
  1021 7864 20 0D 2A				jsr obliczStrzalXY2		;kolizje strzlow statku
  1022 7867 20 B3 2A				jsr printStrzal
  1023 				  
  1024 						
  1025 786A 20 50 5B				jsr kolStrzalyEnemy
  1026 786D 20 7C 59				jsr kolStrzalyRakiety
  1027 7870 20 A5 60				jsr kolStrzalyObiekty
  1028 7873 20 30 61				jsr kolStrzalyBazy
  1029 								
  1030 7876 20 1C 29				jsr moveStrzal
  1031 								
  1032 7879 20 0D 2A				jsr obliczStrzalXY2
  1033 						
  1034 						
  1035 						;jsr locateStrzal2
  1036 787C 20 50 5B				jsr kolStrzalyEnemy
  1037 787F 20 A5 60				jsr kolStrzalyObiekty		;do poprawki
  1038 7882 20 30 61				jsr kolStrzalyBazy
  1039 						
  1040 									
  1041 7885 20 76 31		@		jsr sumaPunkty		;sumuj punkty
  1042 						
  1043 7888 20 BF 27				jsr playFX
  1044
  1045 788B 20 8E 25				jsr sounds			;dodaj wszystkie efekty
  1046 788E 20 36 6F				jsr czyNowyLevel	;sprawdz czy ukonczono poziom
  1047 						
  1048 				;
  1049 				;Czekamy na ramke		1
  1050 				;		
  1051 7891 A5 FF		@		lda zegar
  1052 7893 C5 FF		@		cmp zegar
  1053 7895 F0 FC				beq @-	
  1054 									
  1055 = 7897			loop2	equ *	
  1056 							
  1057 7897 AD 1F D0				lda consol
  1058 789A 29 02				and #2
  1059 789C CD 35 7A				cmp consol1
  1060 789F F0 18				beq con0
  1061 78A1 8D 35 7A				sta consol1
  1062 78A4 C9 00				cmp #0
  1063 78A6 D0 11				bne con0
  1064 78A8 AD 34 7A				lda czy_music
  1065 78AB 49 18				eor #$18
  1066 78AD 8D 34 7A				sta czy_music
  1067 78B0 09 02				ora #2
  1068 78B2 A2 42				ldx #<MODUL
  1069 78B4 A0 A9				ldy >MODUL
  1070 78B6 20 0F A6				jsr rmt_init
  1071 						
  1072 78B9			con0		
  1073 								
  1074 78B9 A9 7F 8D 96 17 A9 + 		mwa #obraz2-1 dlist+2
  1075 78C3 A9 DC 8D 09 D4			mva #>znaki2 CHBASE
  1076 78C8 A5 E5 8D 04 D4			mva movX HSCROL
  1077 						;sta movx1		
  1078 78CD A5 1F 8D 05 D4			mva movY VSCROL
  1079 						;sta movy1
  1080 						
  1081 								
  1082 78D2 A9 00 85 FF				mva #0 zegar
  1083 78D6 A9 3A 8D 00 D4			mva #58 DMACTL		
  1084 						
  1085 								
  1086 78DB A5 0F				lda formacja_stan
  1087 78DD F0 0C				beq @+
  1088 78DF C9 05				cmp #5
  1089 78E1 F0 08				beq @+
  1090 						
  1091 78E3 AD 48 24				lda conditionColor
  1092 78E6 49 34				eor #$34
  1093 78E8 8D 48 24				sta conditionColor
  1094 = 78EB			@		equ *
  1095 					
  1096 78EB			poczatek2	
  1097 78EB 20 BF 27				jsr playFX
  1098 						
  1099 78EE A9 80 85 88 A9 18 + 		mwa #obraz1L screenL
  1100 78F6 A9 9D 85 8A A9 18 + 		mwa #obraz1H screenH
  1101 						
  1102 78FE 20 B2 3C				jsr printShip
  1103 7901 20 29 3F				jsr copyShip	
  1104 						
  1105 						
  1106 7904 20 D0 6D				jsr radar
  1107
  1108 7907 20 00 21				jsr czyscObraz1	
  1109
  1110 				;rysujemy na obrazie1
  1111 790A A9 00 85 EB				mva #0 ramka
  1112 790E 85 59				sta ramka4
  1113 7910 A9 01 85 EC				mva #1 vblFlaga
  1114 						
  1115 7914 A9 02				lda #2
  1116 7916 A4 5E				ldy sJoy
  1117 7918 BE 36 7A				ldx skos,y
  1118 791B F0 01				beq *+3
  1119 791D 4A					lsr
  1120 791E 20 40 3F				jsr moveShip			;przesun i narysuj statek
  1121
  1122 7921 20 3F 3A				jsr gwiazdyRysuj1
  1123 7924 20 F7 3F				jsr animacjaJadraA
  1124 7927 20 8F 41				jsr animacjaJadraB
  1125 							
  1126 792A 20 44 41				jsr coreWaveA
  1127 792D 20 59 42				jsr coreWaveB
  1128
  1129 						
  1130 7930 A5 16				lda trafienie
  1131 7932 05 F0				ora startMapy
  1132 7934 D0 0A				bne @+
  1133 7936 05 5B				ora czyRakiety
  1134 7938 F0 06				beq @+
  1135 793A 20 70 4E				jsr moveRakiety		;rakiety
  1136 793D 20 4A 4D				jsr rakiety
  1137 = 7940			@		equ *
  1138 						
  1139 7940 20 A0 33				jsr printEkran
  1140 						
  1141 7943 20 51 49				jsr rysujWybuchy
  1142 7946 20 B5 48				jsr rysujmWybuchy
  1143 						
  1144 						
  1145 7949 A5 16				lda trafienie		
  1146 794B 05 F0				ora startMapy
  1147 794D D0 18				bne @+
  1148 						
  1149 						
  1150 794F 20 7B 5F				jsr kolStatekWybuch
  1151 7952 20 26 47				jsr movePociski1
  1152 7955 20 28 44				jsr antyair1
  1153 						
  1154 7958 20 F0 5E				jsr kolStatekObiekty
  1155 795B 20 2E 5C				jsr kolStatekBazy
  1156 795E 20 84 5D				jsr kolRakietyStatek
  1157
  1158 						
  1159 7961 20 CB 5D				jsr kolRakietyObiekty
  1160 								
  1161 7964 20 23 4F				jsr losuj		;losuj spy,formacja
  1162 						
  1163 = 7967			@		equ *		
  1164 7967 20 BE 4F				jsr spy
  1165 796A 20 4F 54				jsr formacja
  1166 						
  1167 796D A5 16				lda trafienie
  1168 796F 05 F0				ora startMapy
  1169 7971 D0 03				bne @+
  1170 						
  1171 7973 20 F1 50				jsr printSpyScore
  1172 = 7976			@		equ *
  1173 7976 20 1D 53				jsr moveEnemy
  1174 7979 20 E3 53				jsr rysujEnemy
  1175 						
  1176 797C A5 16				lda trafienie		
  1177 797E 05 F0				ora startMapy
  1178 7980 D0 15				bne @+
  1179 						
  1180 7982 20 B6 5A				jsr obliczEnemyXY
  1181 7985 20 CD 5B				jsr kolStatekEnemy	
  1182 7988 20 06 5A				jsr kolObiektyEnemy	
  1183
  1184 798B 20 97 47				jsr printPociski
  1185 798E 20 DA 5A				jsr kolPociskiEnemy	
  1186 7991 20 C0 5F				jsr kolPociskiStatek
  1187 7994 20 F6 5F				jsr kolPociskiObiekty		;kolizje Pociskow z Bomami i meteorami
  1188 						
  1189 						
  1190 = 7997			@		equ *		
  1191 								
  1192 7997 20 6D 70				jsr poprawlives1
  1193 						
  1194 799A A9 00				lda #0
  1195 799C C5 FF		@		cmp zegar
  1196 799E F0 FC				beq @-
  1197 						
  1198 79A0 A5 16				lda trafienie
  1199 79A2 05 F0				ora startMapy
  1200 79A4 D0 27				bne @+
  1201 						
  1202 						
  1203 								
  1204 79A6 20 1C 29				jsr moveStrzal
  1205 						
  1206 79A9 20 1D 28				jsr pushFire
  1207 79AC 20 0D 2A				jsr obliczStrzalXY2
  1208 79AF 20 B3 2A				jsr printStrzal
  1209 						
  1210 79B2 20 50 5B				jsr kolStrzalyEnemy
  1211 79B5 20 7C 59				jsr kolStrzalyRakiety
  1212 79B8 20 A5 60				jsr kolStrzalyObiekty
  1213 79BB 20 30 61				jsr kolStrzalyBazy
  1214
  1215 79BE 20 1C 29				jsr moveStrzal
  1216 						
  1217 79C1 20 0D 2A				jsr obliczStrzalXY2		
  1218 						
  1219 						;jsr locateStrzal1
  1220 79C4 20 50 5B				jsr kolStrzalyEnemy
  1221 79C7 20 A5 60				jsr kolStrzalyObiekty		;do poprawki
  1222 79CA 20 30 61				jsr kolStrzalyBazy
  1223
  1224 							
  1225 79CD A5 1E		@		lda nobanner		;nie zatrzymuj w czasie sampla
  1226 79CF F0 03				beq @+
  1227 79D1 4C 25 7A				jmp loop1		
  1228
  1229 79D4 AD 1F D0		@		lda CONSOL
  1230 79D7 29 01				and #START
  1231 79D9 D0 40				bne @+3
  1232 79DB A9 01 85 ED				mva #1 pauza
  1233 79DF A9 00 8D 01 D2			mva #0 AUDC1
  1234 79E4 8D 03 D2				sta AUDC2
  1235 79E7 8D 05 D2				sta AUDC3
  1236 79EA AD 1F D0		@		lda CONSOL
  1237 79ED 29 05				and #START+OPTION
  1238 79EF C9 05				cmp #START+OPTION
  1239 79F1 D0 F7				bne @-
  1240 						
  1241 79F3 AD 1F D0		@		lda CONSOL
  1242 79F6 85 F7				sta pom0
  1243 79F8 29 05				and #OPTION+START
  1244 79FA C9 05				cmp #OPTION+START
  1245 79FC F0 F5				beq @-
  1246 						
  1247 79FE A5 F7				lda pom0
  1248 7A00 29 01				and #START
  1249 7A02 F0 0A				beq @+		;wznów gre
  1250 7A04 A9 32 85 F0				mva #50 startMapy
  1251 						
  1252 7A08 20 B9 26				jsr zmaz_radar
  1253 						
  1254 7A0B 4C 61 76				jmp title_s1		;resetuj + nie zaliczaj hscore , wypisz stare
  1255 					
  1256 7A0E AD 1F D0		@		lda CONSOL
  1257 7A11 29 01				and #START
  1258 7A13 C9 01				cmp #START
  1259 7A15 D0 F7				bne @-
  1260 7A17 A9 00 85 ED				mva #0 pauza
  1261 = 7A1B			@		equ *	
  1262 						
  1263 7A1B A5 27				lda scoreZmiana
  1264 7A1D D0 06				bne @+
  1265 7A1F 20 C4 31				jsr piszScore1		;wyswietlaj zmienione hscore tylko jesli nie ma sampla
  1266 7A22 20 5A 32				jsr czyHscore
  1267 = 7A25			@		equ *		
  1268
  1269 = 7A25			loop1	equ *
  1270 7A25 20 BF 27				jsr playFX
  1271 7A28 20 8E 25				jsr sounds		;dodaj efekty
  1272 						
  1273 7A2B A5 FF		@		lda zegar
  1274 7A2D C5 FF		@		cmp zegar
  1275 7A2F F0 FC				beq @-	
  1276
  1277
  1278 7A31 4C 1C 77				jmp loop
  1279
  1280 7A34 18			czy_music	dta $18
  1281 7A35 02			consol1	dta 2
  1282
  1283 7A36 00 00 00 00 00 01 + skos	dta 0,0,0,0,0,1,1,0,0,1,1		
  1284 						
  1285 = 7A41			graj_sampla	equ *
  1286 7A41 A9 00				lda #0
  1287 7A43 20 2F 22				jsr set_sample
  1288 						
  1289 7A46 20 16 28				jsr waitvbl
  1290 7A49 20 B3 27				jsr init_fx
  1291
  1292 						;sei
  1293 						;mva #0 irqen
  1294 7A4C A9 40 8D 0E D4			mva #%01000000 NMIEN
  1295 7A51 A9 F8 8D 07 D4			mva #>SPRITES1 PMBASE
  1296 						
  1297 7A56 A9 3A				lda #$3a
  1298 7A58 8D 12 D0				sta COLPM
  1299 7A5B A9 8A				lda #$8a
  1300 7A5D 8D 13 D0				sta COLPM+1
  1301 7A60 A9 B0				lda #pozWyniki-1
  1302 7A62 8D 00 D0				sta HPOSP
  1303 7A65 A9 C8				lda #pozWyniki-1+24
  1304 7A67 8D 01 D0				sta HPOSP+1
  1305 						
  1306 7A6A A9 02 8D 15 D0			mva #$02 COLPM+3
  1307 						
  1308 7A6F A9 00 8D 02 D0			mva #0 HPOSP+2
  1309 7A74 8D 04 D0				sta HPOSM
  1310 7A77 8D 05 D0				sta HPOSM+1
  1311 7A7A 8D 06 D0				sta HPOSM+2
  1312 7A7D 85 1E				sta nobanner
  1313 					
  1314 						;lda #0
  1315 7A7F A2 0E				ldx #14
  1316 7A81 9D 77 FC		@		sta sprites1+$476+1,x		;wyczysc statek
  1317 7A84 9D 76 FD				sta sprites1+$576,x
  1318 7A87 CA					dex
  1319 7A88 CA					dex
  1320 7A89 10 F6				bpl @-
  1321 						
  1322 						
  1323 				;przygotuj napis
  1324 7A8B A0 00				ldy #0
  1325 7A8D A2 00				ldx #0
  1326 						
  1327 7A8F 86 F7		@		stx pom0
  1328 7A91 BD 8B 7B				lda t_blastoff,x
  1329 7A94 0A 0A 0A				:3 asl
  1330 7A97 AA					tax
  1331 						
  1332 						
  1333 7A98 BD 00 F8		@		lda znakiBosc-8,x
  1334 7A9B 99 30 FC				sta sprites1+$430,y
  1335 7A9E 99 31 FD				sta sprites1+$531,y
  1336 7AA1 C8					iny
  1337 7AA2 C8					iny
  1338 7AA3 E8					inx
  1339 7AA4 8A					txa
  1340 7AA5 29 07				and #7
  1341 7AA7 D0 EF				bne @-
  1342 						
  1343 7AA9 A6 F7				ldx pom0
  1344 7AAB E8					inx
  1345 7AAC E0 09				cpx #9
  1346 7AAE 90 DF				bcc @-1
  1347
  1348 7AB0 A9 5C 8D FE FF A9 + 		mwa #pok_s1 $fffe		;nowy wektor przerwania
  1349 						
  1350 7ABA A9 0F 8D 06 D2			mva #15 AUDF4		;jak czesto wywolujemy przerwanie, 64khz/16 = 4khz
  1351 						
  1352 7ABF A9 00 8D 0E D2			mva #0 IRQEN
  1353 7AC4 A9 04 85 EA				mva #4 sirq
  1354 7AC8 8D 0E D2				sta IRQEN
  1355 						;cli
  1356 						
  1357 7ACB A0 0C				ldy #12
  1358 7ACD 20 3A 7B		@		jsr mryg_bomb
  1359 7AD0 20 16 28				jsr waitvbl
  1360 						
  1361 7AD3 98					tya
  1362 7AD4 49 FF				eor #255
  1363 7AD6 18					clc
  1364 7AD7 69 BD				adc #pozWyniki+12
  1365 7AD9 8D 00 D0				sta HPOSP
  1366 7ADC 98					tya
  1367 7ADD 18					clc
  1368 7ADE 69 BC				adc #pozWyniki+11
  1369 7AE0 8D 01 D0				sta HPOSP+1
  1370 						
  1371 						
  1372 7AE3 88					dey
  1373 7AE4 10 E7				bpl @-
  1374 					
  1375 						
  1376 7AE6 A9 2E 85 FF				mva #$24+10 zegar
  1377 7AEA A8					tay
  1378 7AEB 0A					asl
  1379 						
  1380 						
  1381 7AEC C4 FF		@		cpy zegar
  1382 7AEE F0 07				beq @+
  1383 7AF0 20 3A 7B				jsr mryg_bomb
  1384 7AF3 A4 FF				ldy zegar
  1385 7AF5 98					tya
  1386 7AF6 0A					asl
  1387 						
  1388 7AF7 8D 12 D0		@		sta COLPM
  1389 7AFA 8D 13 D0				sta COLPM+1
  1390 7AFD 18					clc
  1391 7AFE 69 05				adc #5
  1392 						
  1393 7B00 A6 EA		@		ldx sirq
  1394 7B02 D0 E8				bne @-2
  1395 						
  1396 7B04 20 16 28				jsr waitvbl
  1397 						
  1398 7B07 A9 C0 8D 0E D4			mva #%11000000 NMIEN
  1399 7B0C A9 18 8D 07 D4			mva #>SPRITES PMBASE
  1400 						
  1401 7B11 A9 00 8D 15 D0			mva #0 COLPM+3
  1402 7B16 A2 0F				ldx #15
  1403 7B18 20 16 3F				jsr rstatek
  1404 						
  1405 7B1B A9 00				lda #0
  1406 7B1D A0 90				ldy #$90		;A=0
  1407 7B1F 99 2E FC		@		sta sprites1+$430-2,y		;wymaz napis
  1408 7B22 99 2F FD				sta sprites1+$531-2,y
  1409 7B25 88					dey
  1410 7B26 88					dey
  1411 7B27 D0 F6				bne @-
  1412 						
  1413 7B29 85 FF				sta zegar		;A=0
  1414 						
  1415 						;mva #$80 RMTGLOBALVOLUMEFADE
  1416 7B2B AD 34 7A				lda czy_music
  1417 7B2E F0 09				beq @+
  1418 7B30 A2 42				ldx #<MODUL
  1419 7B32 A0 A9				ldy #>MODUL
  1420 7B34 A9 1A				lda #$1a
  1421 7B36 20 0F A6				jsr rmt_init
  1422 7B39			@		
  1423 						
  1424 7B39 60					rts 	
  1425 						
  1426 7B3A			mryg_bomb
  1427 7B3A 48					pha
  1428 7B3B A5 FF				lda zegar
  1429 7B3D 29 01				and #1
  1430 7B3F F0 13				beq mr_b1
  1431 7B41 A2 1F				ldx #31
  1432 7B43 BD F8 D8		@		lda znaki1+firstBombaChar*8,x
  1433 7B46 48					pha
  1434 7B47 BD F8 DC				lda znaki2+firstBombaChar*8,x
  1435 7B4A 9D F8 D8				sta znaki1+firstBombaChar*8,x
  1436 7B4D 68					pla
  1437 7B4E 9D F8 DC				sta znaki2+firstBombaChar*8,x
  1438 7B51 CA					dex
  1439 7B52 10 EF				bpl @-
  1440 = 7B54			mr_b1	equ *
  1441 7B54 68					pla
  1442 7B55 60					rts
  1443 						
  1444 				;rysuje gwiazdy
  1445 = 7B56			stars	equ *
  1446 7B56 8D 81 7B				sta _gwKolor ;w A kolor gwiazdy
  1447 7B59 8C 87 7B				sty _gwLast  ;w Y ostatniagwiazda-1, w X nr pierwszej gwiazdy
  1448 7B5C B5 41		@		lda znakY,x
  1449 7B5E 18					clc
  1450 = 7B60			znakY1	equ *+1
  1451 7B5F 69 00				adc #0
  1452 7B61 C9 1D				cmp #29
  1453 7B63 90 02				bcc @+
  1454 7B65 E9 1D				sbc #29
  1455 7B67 A8			@		tay
  1456 7B68 18					clc
  1457 7B69 B5 2F				lda znakX,x
  1458 = 7B6C			znakX1	equ *+1
  1459 7B6B 69 00				adc #0
  1460 7B6D C9 21				cmp #33
  1461 7B6F 90 03				bcc @+
  1462 7B71 E9 21				sbc #33
  1463 7B73 18					clc
  1464 				;screenL	equ *+1
  1465 7B74 71 88		@		adc (screenL),y	;$ffff,y
  1466 7B76 8D 83 7B				sta _gwpos+1
  1467 				;screenH	equ *+1
  1468 7B79 B1 8A				lda (screenH),y	;$ffff,y
  1469 7B7B 69 00				adc #0
  1470 7B7D 8D 84 7B				sta _gwpos+2
  1471 = 7B81			_gwKolor	equ *+1
  1472 7B80 A9 00				lda #0
  1473 = 7B82			_gwpos	equ *		
  1474 7B82 8D FF FF				sta $ffff
  1475 7B85 CA					dex
  1476 = 7B87			_gwLast	equ *+1		;czy już wszystkie gwiazdy
  1477 7B86 E0 00				cpx #0
  1478 7B88 D0 D2				bne @-2
  1479 7B8A 60					rts		
  1480 						
  1481 7B8B 42 4C 41 53 54 00 + t_blastoff dta C'BLAST',b(0),C'OFF'		
  1482 						
  1483 = 7B94			blastoff_wav	equ *
  1484 7B94 01 33 38 EE 83 33 + 	ins 'samples/blastoff0.wav'
  1485
  1486 = 827E			alive_wav		equ *
  1487 827E 8D FD 73 68 AB 84 + 	ins 'samples/alive0.wav'
  1488
  1489
  1490 = 8683			spy_wav			equ *
  1491 8683 4D FA 41 46 BE C8 + 	ins 'samples/spy0.wav'
  1492
  1493 					
  1494 = 8DE9			formation_wav	equ *
  1495 8DE9 83 35 55 BF C8 51 + 	ins 'samples/formation0.wav'
  1496
  1497
  1498 = 9574			conred_wav	equ *
  1499 9574 01 87 46 56 DA CA + 	ins 'samples/conred0.wav'
  1500 					
  1501 = 9D61			gameover_wav	equ *
  1502 9D61 77 76 77 78 8B CD + 	ins 'samples/gameover0.wav'
  1503
  1504 							
  1505 							
  1506 						
  1507 = 0000			STEREOMODE	equ 0
  1508 = B678			rmt_goto	equ $B700-(4*$22)		; 21 i 22 bajt pliku b.rmt;$B700-4*liczba_linii		;koniec utworu+1-(4*liczba_linii)
  1509 				;rmt_goto=$b628
  1510 A376						icl "rmtplayr.asm"
Source: rmtplayr.asm
     1 				;*
     2 				;* Raster Music Tracker, RMT Atari routine version 1.20090108
     3 				;* (c) Radek Sterba, Raster/C.P.U., 2002 - 2009
     4 				;* http://raster.atari.org
     5 				;*
     6 				;* Warnings:
     7 				;*
     8 				;* 1. RMT player routine needs 19 itself reserved bytes in zero page (no accessed
     9 				;*    from any other routines) as well as cca 1KB of memory before the "PLAYER"
    10 				;*    address for frequency tables and functionary variables. It's:
    11 				;*	  a) from PLAYER-$03c0 to PLAYER for stereo RMTplayer
    12 				;*    b) from PLAYER-$0320 to PLAYER for mono RMTplayer
    13 				;*
    14 				;* 2. RMT player routine MUST (!!!) be compiled from the begin of the memory page.
    15 				;*    i.e. "PLAYER" address can be $..00 only!
    16 				;*
    17 				;* 3. Because of RMTplayer provides a lot of effects, it spent a lot of CPU time.
    18 				;*
    19 				;* STEREOMODE	equ 0..3			;0 => compile RMTplayer for 4 tracks mono
    20 				;*									;1 => compile RMTplayer for 8 tracks stereo
    21 				;*									;2 => compile RMTplayer for 4 tracks stereo L1 R2 R3 L4
    22 				;*									;3 => compile RMTplayer for 4 tracks stereo L1 L2 R3 R4
    23 				;*
    24 					IFT STEREOMODE==1
    25 				TRACKS		equ 8
    26 					ELS
    27 = 0004			TRACKS		equ 4
    28 					EIF
    29 				;*
    30 = A600			PLAYER		equ $A600
    31 				;*
    32 				;* RMT FEATures definitions file
    33 				;* For optimizations of RMT player routine to concrete RMT modul only!
    34 A376				icl "rmt_feat.asm"
Source: rmt_feat.asm
     1 				;* --------BEGIN--------
     2 				;* C:\Users\Janusz\Desktop\bosconian64pal\b12a.rmt
     3 = 0000			FEAT_SFX		equ 0
     4 = 0000			FEAT_GLOBALVOLUMEFADE	equ 0		;RMTGLOBALVOLUMEFADE variable
     5 = 0000			FEAT_NOSTARTINGSONGLINE	equ 0
     6 = 0001			FEAT_INSTRSPEED		equ 1
     7 = 0000			FEAT_CONSTANTSPEED		equ 0		;(36 times)
     8 = 0001			FEAT_COMMAND1		equ 1		;(24 times)
     9 = 0000			FEAT_COMMAND2		equ 0		;(0 times)
    10 = 0000			FEAT_COMMAND3		equ 0		;(0 times)
    11 = 0000			FEAT_COMMAND4		equ 0		;(0 times)
    12 = 0000			FEAT_COMMAND5		equ 0		;(0 times)
    13 = 0000			FEAT_COMMAND6		equ 0		;(0 times)
    14 = 0000			FEAT_COMMAND7SETNOTE		equ 0		;(0 times)
    15 = 0000			FEAT_COMMAND7VOLUMEONLY		equ 0		;(0 times)
    16 = 0000			FEAT_PORTAMENTO		equ 0		;(0 times)
    17 = 0000			FEAT_FILTER		equ 0		;(0 times)
    18 = 0000			FEAT_FILTERG0L		equ 0		;(0 times)
    19 = 0000			FEAT_FILTERG1L		equ 0		;(0 times)
    20 = 0000			FEAT_FILTERG0R		equ 0		;(0 times)
    21 = 0000			FEAT_FILTERG1R		equ 0		;(0 times)
    22 = 0000			FEAT_BASS16		equ 0		;(0 times)
    23 = 0000			FEAT_BASS16G1L		equ 0		;(0 times)
    24 = 0000			FEAT_BASS16G3L		equ 0		;(0 times)
    25 = 0000			FEAT_BASS16G1R		equ 0		;(0 times)
    26 = 0000			FEAT_BASS16G3R		equ 0		;(0 times)
    27 = 0000			FEAT_VOLUMEONLYG0L		equ 0		;(0 times)
    28 = 0000			FEAT_VOLUMEONLYG2L		equ 0		;(0 times)
    29 = 0000			FEAT_VOLUMEONLYG3L		equ 0		;(0 times)
    30 = 0000			FEAT_VOLUMEONLYG0R		equ 0		;(0 times)
    31 = 0000			FEAT_VOLUMEONLYG2R		equ 0		;(0 times)
    32 = 0000			FEAT_VOLUMEONLYG3R		equ 0		;(0 times)
    33 = 0000			FEAT_TABLETYPE		equ 0		;(0 times)
    34 = 0000			FEAT_TABLEMODE		equ 0		;(0 times)
    35 = 0000			FEAT_TABLEGO		equ 0		;(0 times)
    36 = 0001			FEAT_AUDCTLMANUALSET		equ 1		;(1 times)
    37 = 0000			FEAT_VOLUMEMIN		equ 0		;(0 times)
    38 = 0001			FEAT_EFFECTVIBRATO		equ 1		;(4 times)
    39 = 0001			FEAT_EFFECTFSHIFT		equ 1		;(6 times)
    40 				;* --------END--------
    35 				;*
    36 				;* RMT ZeroPage addresses
    37 A376				org 106
    38 006A			p_tis
    39 006A			p_instrstable	org *+2
    40 006C			p_trackslbstable	org *+2
    41 006E			p_trackshbstable	org *+2
    42 0070			p_song			org *+2
    43 0072			ns				org *+2
    44 0074			nr				org *+2
    45 0076			nt				org *+2
    46 0078			reg1			org *+1
    47 0079			reg2			org *+1
    48 007A			reg3			org *+1
    49 007B			tmp				org *+1
    50 					IFT FEAT_COMMAND2
    51 				frqaddcmd2		org *+1
    52 					EIF
    53 					IFT TRACKS>4
    54 					org PLAYER-$400+$40
    55 					ELS
    56 007C				org PLAYER-$400+$e0
    57 					EIF
    58 A2E0			track_variables
    59 A2E0			trackn_db	org *+TRACKS
    60 A2E4			trackn_hb	org *+TRACKS
    61 A2E8			trackn_idx	org *+TRACKS
    62 A2EC			trackn_pause	org *+TRACKS
    63 A2F0			trackn_note	org *+TRACKS
    64 A2F4			trackn_volume	org *+TRACKS
    65 A2F8			trackn_distor 	org *+TRACKS
    66 A2FC			trackn_shiftfrq	org *+TRACKS
    67 					IFT FEAT_PORTAMENTO
    68 				trackn_portafrqc org *+TRACKS
    69 				trackn_portafrqa org *+TRACKS
    70 				trackn_portaspeed org *+TRACKS
    71 				trackn_portaspeeda org *+TRACKS
    72 				trackn_portadepth org *+TRACKS
    73 					EIF
    74 A300			trackn_instrx2	org *+TRACKS
    75 A304			trackn_instrdb	org *+TRACKS
    76 A308			trackn_instrhb	org *+TRACKS
    77 A30C			trackn_instridx	org *+TRACKS
    78 A310			trackn_instrlen	org *+TRACKS
    79 A314			trackn_instrlop	org *+TRACKS
    80 A318			trackn_instrreachend	org *+TRACKS
    81 A31C			trackn_volumeslidedepth org *+TRACKS
    82 A320			trackn_volumeslidevalue org *+TRACKS
    83 					IFT FEAT_VOLUMEMIN
    84 				trackn_volumemin		org *+TRACKS
    85 					EIF
    86 = 0001			FEAT_EFFECTS equ FEAT_EFFECTVIBRATO||FEAT_EFFECTFSHIFT
    87 					IFT FEAT_EFFECTS
    88 A324			trackn_effdelay			org *+TRACKS
    89 					EIF
    90 					IFT FEAT_EFFECTVIBRATO
    91 A328			trackn_effvibratoa		org *+TRACKS
    92 					EIF
    93 					IFT FEAT_EFFECTFSHIFT
    94 A32C			trackn_effshift		org *+TRACKS
    95 					EIF
    96 A330			trackn_tabletypespeed org *+TRACKS
    97 					IFT FEAT_TABLEMODE
    98 				trackn_tablemode	org *+TRACKS
    99 					EIF
   100 A334			trackn_tablenote	org *+TRACKS
   101 A338			trackn_tablea		org *+TRACKS
   102 A33C			trackn_tableend		org *+TRACKS
   103 					IFT FEAT_TABLEGO
   104 				trackn_tablelop		org *+TRACKS
   105 					EIF
   106 A340			trackn_tablespeeda	org *+TRACKS
   107 					IFT FEAT_FILTER||FEAT_BASS16
   108 				trackn_command		org *+TRACKS
   109 					EIF
   110 					IFT FEAT_BASS16
   111 				trackn_outnote		org *+TRACKS
   112 					EIF
   113 					IFT FEAT_FILTER
   114 				trackn_filter		org *+TRACKS
   115 					EIF
   116 A344			trackn_audf	org *+TRACKS
   117 A348			trackn_audc	org *+TRACKS
   118 					IFT FEAT_AUDCTLMANUALSET
   119 A34C			trackn_audctl	org *+TRACKS
   120 					EIF
   121 A350			v_aspeed		org *+1
   122 A351			track_endvariables
   123 A351					org PLAYER-$100-$140-$40+2
   124 = 000C			INSTRPAR	equ 12
   125 A382			tabbeganddistor
   126 A382-A3BF> 80 00		 dta frqtabpure-frqtab,$00
   127 A384 80 20		 dta frqtabpure-frqtab,$20
   128 A386 80 40		 dta frqtabpure-frqtab,$40
   129 A388 00 C0		 dta frqtabbass1-frqtab,$c0
   130 A38A 80 80		 dta frqtabpure-frqtab,$80
   131 A38C 80 A0		 dta frqtabpure-frqtab,$a0
   132 A38E 00 C0		 dta frqtabbass1-frqtab,$c0
   133 A390 40 C0		 dta frqtabbass2-frqtab,$c0
   134 						IFT FEAT_EFFECTVIBRATO
   135 A392 00 01 05 0B		vibtabbeg dta 0,vib1-vib0,vib2-vib0,vib3-vib0
   136 A396 00			vib0	dta 0
   137 A397 01 FF FF 01		vib1	dta 1,-1,-1,1
   138 A39B 01 00 FF FF 00 01	vib2	dta 1,0,-1,-1,0,1
   139 A3A1 01 01 00 FF FF FF + vib3	dta 1,1,0,-1,-1,-1,-1,0,1,1
   140 A3AB			vibtabnext
   141 A3AB 00					dta vib0-vib0+0
   142 A3AC 02 03 04 01				dta vib1-vib0+1,vib1-vib0+2,vib1-vib0+3,vib1-vib0+0
   143 A3B0 06 07 08 09 0A 05			dta vib2-vib0+1,vib2-vib0+2,vib2-vib0+3,vib2-vib0+4,vib2-vib0+5,vib2-vib0+0
   144 A3B6 0C 0D 0E 0F 10 11 + 		dta vib3-vib0+1,vib3-vib0+2,vib3-vib0+3,vib3-vib0+4,vib3-vib0+5,vib3-vib0+6,vib3-vib0+7,vib3-vib0+8,vib3-vib0+9,vib3-vib0+0
   145 						EIF
   146 A3C0					org PLAYER-$100-$140
   147 					IFT FEAT_BASS16
   148 				frqtabbasslo
   149 					dta $F2,$33,$96,$E2,$38,$8C,$00,$6A,$E8,$6A,$EF,$80,$08,$AE,$46,$E6
   150 					dta $95,$41,$F6,$B0,$6E,$30,$F6,$BB,$84,$52,$22,$F4,$C8,$A0,$7A,$55
   151 					dta $34,$14,$F5,$D8,$BD,$A4,$8D,$77,$60,$4E,$38,$27,$15,$06,$F7,$E8
   152 					dta $DB,$CF,$C3,$B8,$AC,$A2,$9A,$90,$88,$7F,$78,$70,$6A,$64,$5E,$00
   153 					EIF
   154 A3C0					org PLAYER-$100-$100
   155 A400			frqtab
   156 					ERT [<frqtab]!=0	;* frqtab must begin at the memory page bound! (i.e. $..00 address)
   157 A400			frqtabbass1
   158 A400-A4BF> BF B6 AA A1 + 	dta $BF,$B6,$AA,$A1,$98,$8F,$89,$80,$F2,$E6,$DA,$CE,$BF,$B6,$AA,$A1
   159 A410 98 8F 89 80 7A 71 + 	dta $98,$8F,$89,$80,$7A,$71,$6B,$65,$5F,$5C,$56,$50,$4D,$47,$44,$3E
   160 A420 3C 38 35 32 2F 2D + 	dta $3C,$38,$35,$32,$2F,$2D,$2A,$28,$25,$23,$21,$1F,$1D,$1C,$1A,$18
   161 A430 17 16 14 13 12 11 + 	dta $17,$16,$14,$13,$12,$11,$10,$0F,$0E,$0D,$0C,$0B,$0A,$09,$08,$07
   162 A440			frqtabbass2
   163 A440 FF F1 E4 D8 CA C0 + 	dta $FF,$F1,$E4,$D8,$CA,$C0,$B5,$AB,$A2,$99,$8E,$87,$7F,$79,$73,$70
   164 A450 66 61 5A 55 52 4B + 	dta $66,$61,$5A,$55,$52,$4B,$48,$43,$3F,$3C,$39,$37,$33,$30,$2D,$2A
   165 A460 28 25 24 21 1F 1E + 	dta $28,$25,$24,$21,$1F,$1E,$1C,$1B,$19,$17,$16,$15,$13,$12,$11,$10
   166 A470 0F 0E 0D 0C 0B 0A + 	dta $0F,$0E,$0D,$0C,$0B,$0A,$09,$08,$07,$06,$05,$04,$03,$02,$01,$00
   167 A480			frqtabpure
   168 A480 F3 E6 D9 CC C1 B5 + 	dta $F3,$E6,$D9,$CC,$C1,$B5,$AD,$A2,$99,$90,$88,$80,$79,$72,$6C,$66
   169 A490 60 5B 55 51 4C 48 + 	dta $60,$5B,$55,$51,$4C,$48,$44,$40,$3C,$39,$35,$32,$2F,$2D,$2A,$28
   170 A4A0 25 23 21 1F 1D 1C + 	dta $25,$23,$21,$1F,$1D,$1C,$1A,$18,$17,$16,$14,$13,$12,$11,$10,$0F
   171 A4B0 0E 0D 0C 0B 0A 09 + 	dta $0E,$0D,$0C,$0B,$0A,$09,$08,$07,$06,$05,$04,$03,$02,$01,$00,$00
   172 					IFT FEAT_BASS16
   173 				frqtabbasshi
   174 					dta $0D,$0D,$0C,$0B,$0B,$0A,$0A,$09,$08,$08,$07,$07,$07,$06,$06,$05
   175 					dta $05,$05,$04,$04,$04,$04,$03,$03,$03,$03,$03,$02,$02,$02,$02,$02
   176 					dta $02,$02,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$00,$00
   177 					dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   178 					EIF
   179 A4C0					org PLAYER-$0100
   180 A500			volumetab
   181 A500-A932> 00 00 00 00 + 	dta $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
   182 A510 00 00 00 00 00 00 + 	dta $00,$00,$00,$00,$00,$00,$00,$00,$01,$01,$01,$01,$01,$01,$01,$01
   183 A520 00 00 00 00 01 01 + 	dta $00,$00,$00,$00,$01,$01,$01,$01,$01,$01,$01,$01,$02,$02,$02,$02
   184 A530 00 00 00 01 01 01 + 	dta $00,$00,$00,$01,$01,$01,$01,$01,$02,$02,$02,$02,$02,$03,$03,$03
   185 A540 00 00 01 01 01 01 + 	dta $00,$00,$01,$01,$01,$01,$02,$02,$02,$02,$03,$03,$03,$03,$04,$04
   186 A550 00 00 01 01 01 02 + 	dta $00,$00,$01,$01,$01,$02,$02,$02,$03,$03,$03,$04,$04,$04,$05,$05
   187 A560 00 00 01 01 02 02 + 	dta $00,$00,$01,$01,$02,$02,$02,$03,$03,$04,$04,$04,$05,$05,$06,$06
   188 A570 00 00 01 01 02 02 + 	dta $00,$00,$01,$01,$02,$02,$03,$03,$04,$04,$05,$05,$06,$06,$07,$07
   189 A580 00 01 01 02 02 03 + 	dta $00,$01,$01,$02,$02,$03,$03,$04,$04,$05,$05,$06,$06,$07,$07,$08
   190 A590 00 01 01 02 02 03 + 	dta $00,$01,$01,$02,$02,$03,$04,$04,$05,$05,$06,$07,$07,$08,$08,$09
   191 A5A0 00 01 01 02 03 03 + 	dta $00,$01,$01,$02,$03,$03,$04,$05,$05,$06,$07,$07,$08,$09,$09,$0A
   192 A5B0 00 01 01 02 03 04 + 	dta $00,$01,$01,$02,$03,$04,$04,$05,$06,$07,$07,$08,$09,$0A,$0A,$0B
   193 A5C0 00 01 02 02 03 04 + 	dta $00,$01,$02,$02,$03,$04,$05,$06,$06,$07,$08,$09,$0A,$0A,$0B,$0C
   194 A5D0 00 01 02 03 03 04 + 	dta $00,$01,$02,$03,$03,$04,$05,$06,$07,$08,$09,$0A,$0A,$0B,$0C,$0D
   195 A5E0 00 01 02 03 04 05 + 	dta $00,$01,$02,$03,$04,$05,$06,$07,$07,$08,$09,$0A,$0B,$0C,$0D,$0E
   196 A5F0 00 01 02 03 04 05 + 	dta $00,$01,$02,$03,$04,$05,$06,$07,$08,$09,$0A,$0B,$0C,$0D,$0E,$0F
   197 A600				org PLAYER
   198 				;*
   199 				;* Set of RMT main vectors:
   200 				;*
   201 A600			RASTERMUSICTRACKER
   202 A600 4C 0F A6			jmp rmt_init
   203 A603 4C CD A7			jmp rmt_play
   204 A606 4C E7 A7			jmp rmt_p3
   205 A609 4C 4F A6			jmp rmt_silence
   206 A60C 4C FD A8			jmp SetPokey
   207 					IFT FEAT_SFX
   208 					jmp rmt_sfx			;* A=note(0,..,60),X=channel(0,..,3 or 0,..,7),Y=instrument*2(0,2,4,..,126)
   209 					EIF
   210 A60F			rmt_init
   211 A60F 86 72			stx ns
   212 A611 84 73			sty ns+1
   213 					IFT FEAT_NOSTARTINGSONGLINE==0
   214 A613 48				pha
   215 					EIF
   216 					IFT track_endvariables-track_variables>255
   217 					ldy #0
   218 					tya
   219 				ri0	sta track_variables,y
   220 					sta track_endvariables-$100,y
   221 					iny
   222 					bne ri0
   223 					ELS
   224 A614 A0 71			ldy #track_endvariables-track_variables
   225 A616 A9 00			lda #0
   226 A618 99 DF A2		ri0	sta track_variables-1,y
   227 A61B 88				dey
   228 A61C D0 FA			bne ri0
   229 					EIF
   230 A61E A0 04			ldy #4
   231 A620 B1 72			lda (ns),y
   232 A622 8D DB A7			sta v_maxtracklen
   233 A625 C8				iny
   234 					IFT FEAT_CONSTANTSPEED==0
   235 A626 B1 72			lda (ns),y
   236 A628 8D B5 A6			sta v_speed
   237 					EIF
   238 					IFT FEAT_INSTRSPEED==0
   239 					iny
   240 					lda (ns),y
   241 					sta v_instrspeed
   242 					sta v_ainstrspeed
   243 					ELI FEAT_INSTRSPEED>1
   244 					lda #FEAT_INSTRSPEED
   245 					sta v_ainstrspeed
   246 					EIF
   247 A62B A0 08			ldy #8
   248 A62D B1 72		ri1	lda (ns),y
   249 A62F 99 62 00			sta p_tis-8,y
   250 A632 C8				iny
   251 A633 C0 10			cpy #8+8
   252 A635 D0 F6			bne ri1
   253 					IFT FEAT_NOSTARTINGSONGLINE==0
   254 A637 68				pla
   255 A638 48				pha
   256 					IFT TRACKS>4
   257 					asl @
   258 					asl @
   259 					asl @
   260 					clc
   261 					adc p_song
   262 					sta p_song
   263 					pla
   264 					php
   265 					and #$e0
   266 					asl @
   267 					rol @
   268 					rol @
   269 					rol @
   270 					ELS
   271 A639 0A				asl @
   272 A63A 0A				asl @
   273 A63B 18				clc
   274 A63C 65 70			adc p_song
   275 A63E 85 70			sta p_song
   276 A640 68				pla
   277 A641 08				php
   278 A642 29 C0			and #$c0
   279 A644 0A				asl @
   280 A645 2A				rol @
   281 A646 2A				rol @
   282 					EIF
   283 A647 28				plp
   284 A648 65 71			adc p_song+1
   285 A64A 85 71			sta p_song+1
   286 					EIF
   287 A64C 20 64 A6			jsr GetSongLineTrackLineInitOfNewSetInstrumentsOnlyRmtp3
   288 A64F			rmt_silence
   289 					IFT STEREOMODE>0
   290 					lda #0
   291 					sta $d208
   292 					sta $d218
   293 					ldy #3
   294 					sty $d20f
   295 					sty $d21f
   296 					ldy #8
   297 				si1	sta $d200,y
   298 					sta $d210,y
   299 					dey
   300 					bpl si1
   301 					ELS
   302 A64F A9 00			lda #0
   303 A651 8D 08 D2			sta $d208
   304 A654 A0 03			ldy #3
   305 A656 8C 0F D2			sty $d20f
   306 A659 A0 08			ldy #8
   307 A65B 99 00 D2		si1	sta $d200,y
   308 A65E 88				dey
   309 A65F 10 FA			bpl si1
   310 					EIF
   311 					IFT FEAT_INSTRSPEED==0
   312 					lda v_instrspeed
   313 					ELS
   314 A661 A9 01			lda #FEAT_INSTRSPEED
   315 					EIF
   316 A663 60				rts
   317 A664			GetSongLineTrackLineInitOfNewSetInstrumentsOnlyRmtp3
   318 A664			GetSongLine
   319 A664 A2 00			ldx #0
   320 A666 8E D9 A7			stx v_abeat
   321 A669			nn0
   322 A669 8A			nn1	txa
   323 A66A A8				tay
   324 A66B B1 70			lda (p_song),y
   325 A66D C9 FE			cmp #$fe
   326 A66F B0 2D			bcs nn2
   327 A671 A8				tay
   328 A672 B1 6C			lda (p_trackslbstable),y
   329 A674 9D E0 A2			sta trackn_db,x
   330 A677 B1 6E			lda (p_trackshbstable),y
   331 A679 9D E4 A2		nn1a sta trackn_hb,x
   332 A67C A9 00			lda #0
   333 A67E 9D E8 A2			sta trackn_idx,x
   334 A681 A9 01			lda #1
   335 A683 9D EC A2		nn1a2 sta trackn_pause,x
   336 A686 A9 80			lda #$80
   337 A688 9D 00 A3			sta trackn_instrx2,x
   338 A68B E8				inx
   339 A68C E0 04		xtracks01	cpx #TRACKS
   340 A68E D0 D9			bne nn1
   341 A690 A5 70			lda p_song
   342 A692 18				clc
   343 A693 69 04		xtracks02	adc #TRACKS
   344 A695 85 70			sta p_song
   345 A697 90 1B			bcc GetTrackLine
   346 A699 E6 71			inc p_song+1
   347 A69B			nn1b
   348 A69B 4C B4 A6			jmp GetTrackLine
   349 A69E			nn2
   350 A69E F0 04			beq nn3
   351 A6A0			nn2a
   352 A6A0 A9 00			lda #0
   353 A6A2 F0 DF			beq nn1a2
   354 A6A4			nn3
   355 A6A4 A0 02			ldy #2
   356 A6A6 B1 70			lda (p_song),y
   357 A6A8 AA				tax
   358 A6A9 C8				iny
   359 A6AA B1 70			lda (p_song),y
   360 A6AC 85 71			sta p_song+1
   361 A6AE 86 70			stx p_song
   362 A6B0 A2 00			ldx #0
   363 A6B2 F0 B5			beq nn0
   364 A6B4			GetTrackLine
   365 A6B4			oo0
   366 A6B4			oo0a
   367 					IFT FEAT_CONSTANTSPEED==0
   368 A6B4 A9 FF			lda #$ff
   369 = A6B5			v_speed equ *-1
   370 A6B6 8D 08 A7			sta v_bspeed
   371 					EIF
   372 A6B9 A2 FF			ldx #-1
   373 A6BB			oo1
   374 A6BB E8				inx
   375 A6BC DE EC A2			dec trackn_pause,x
   376 A6BF D0 42			bne oo1x
   377 A6C1			oo1b
   378 A6C1 BD E0 A2			lda trackn_db,x
   379 A6C4 85 72			sta ns
   380 A6C6 BD E4 A2			lda trackn_hb,x
   381 A6C9 85 73			sta ns+1
   382 A6CB			oo1i
   383 A6CB BC E8 A2			ldy trackn_idx,x
   384 A6CE FE E8 A2			inc trackn_idx,x
   385 A6D1 B1 72			lda (ns),y
   386 A6D3 85 78			sta reg1
   387 A6D5 29 3F			and #$3f
   388 A6D7 C9 3D			cmp #61
   389 A6D9 F0 0E			beq oo1a
   390 A6DB B0 35			bcs oo2
   391 A6DD 9D F0 A2			sta trackn_note,x
   392 					IFT FEAT_BASS16
   393 					sta trackn_outnote,x
   394 					EIF
   395 A6E0 C8				iny
   396 A6E1 B1 72			lda (ns),y
   397 A6E3 4A				lsr @
   398 A6E4 29 7E			and #$3f*2
   399 A6E6 9D 00 A3			sta trackn_instrx2,x
   400 A6E9			oo1a
   401 A6E9 A9 01			lda #1
   402 A6EB 9D EC A2			sta trackn_pause,x
   403 A6EE BC E8 A2			ldy trackn_idx,x
   404 A6F1 FE E8 A2			inc trackn_idx,x
   405 A6F4 B1 72			lda (ns),y
   406 A6F6 4A				lsr @
   407 A6F7 66 78			ror reg1
   408 A6F9 4A				lsr @
   409 A6FA 66 78			ror reg1
   410 A6FC A5 78			lda reg1
   411 					IFT FEAT_GLOBALVOLUMEFADE
   412 					sec
   413 					sbc #$00
   414 				RMTGLOBALVOLUMEFADE equ *-1
   415 					bcs voig
   416 					lda #0
   417 				voig
   418 					EIF
   419 A6FE 29 F0			and #$f0
   420 A700 9D F4 A2			sta trackn_volume,x
   421 A703			oo1x
   422 A703 E0 03		xtracks03sub1	cpx #TRACKS-1
   423 A705 D0 B4			bne oo1
   424 					IFT FEAT_CONSTANTSPEED==0
   425 A707 A9 FF			lda #$ff
   426 = A708			v_bspeed equ *-1
   427 A709 8D B5 A6			sta v_speed
   428 					ELS
   429 					lda #FEAT_CONSTANTSPEED
   430 					EIF
   431 A70C 8D 50 A3			sta v_aspeed
   432 A70F 4C 57 A7			jmp InitOfNewSetInstrumentsOnly
   433 A712			oo2
   434 A712 C9 3F			cmp #63
   435 A714 F0 1B			beq oo63
   436 A716 A5 78			lda reg1
   437 A718 29 C0			and #$c0
   438 A71A F0 09			beq oo62_b
   439 A71C 0A				asl @
   440 A71D 2A				rol @
   441 A71E 2A				rol @
   442 A71F 9D EC A2			sta trackn_pause,x
   443 A722 4C 03 A7			jmp oo1x
   444 A725			oo62_b
   445 A725 C8				iny
   446 A726 B1 72			lda (ns),y
   447 A728 9D EC A2			sta trackn_pause,x
   448 A72B FE E8 A2			inc trackn_idx,x
   449 A72E 4C 03 A7			jmp oo1x
   450 A731			oo63
   451 A731 A5 78			lda reg1
   452 					IFT FEAT_CONSTANTSPEED==0
   453 A733 30 0C			bmi oo63_1X
   454 A735 C8				iny
   455 A736 B1 72			lda (ns),y
   456 A738 8D 08 A7			sta v_bspeed
   457 A73B FE E8 A2			inc trackn_idx,x
   458 A73E 4C CB A6			jmp oo1i
   459 A741			oo63_1X
   460 					EIF
   461 A741 C9 FF			cmp #255
   462 A743 F0 09			beq oo63_11
   463 A745 C8				iny
   464 A746 B1 72			lda (ns),y
   465 A748 9D E8 A2			sta trackn_idx,x
   466 A74B 4C CB A6			jmp oo1i
   467 A74E			oo63_11
   468 A74E 4C 64 A6			jmp GetSongLine
   469 A751 4C E7 A7		p2xrmtp3	jmp rmt_p3
   470 A754 CA			p2x0 dex
   471 A755 30 FA			 bmi p2xrmtp3
   472 A757			InitOfNewSetInstrumentsOnly
   473 A757 BC 00 A3		p2x1 ldy trackn_instrx2,x
   474 A75A 30 F8			bmi p2x0
   475 					IFT FEAT_SFX
   476 					jsr SetUpInstrumentY2
   477 					jmp p2x0
   478 				rmt_sfx
   479 					sta trackn_note,x
   480 					IFT FEAT_BASS16
   481 					sta trackn_outnote,x
   482 					EIF
   483 					lda #$f0				;* sfx note volume*16
   484 				RMTSFXVOLUME equ *-1		;* label for sfx note volume parameter overwriting
   485 					sta trackn_volume,x
   486 					EIF
   487 A75C			SetUpInstrumentY2
   488 A75C B1 6A			lda (p_instrstable),y
   489 A75E 9D 04 A3			sta trackn_instrdb,x
   490 A761 85 76			sta nt
   491 A763 C8				iny
   492 A764 B1 6A			lda (p_instrstable),y
   493 A766 9D 08 A3			sta trackn_instrhb,x
   494 A769 85 77			sta nt+1
   495 					IFT FEAT_FILTER
   496 					lda #1
   497 					sta trackn_filter,x
   498 					EIF
   499 					IFT FEAT_TABLEGO
   500 					IFT FEAT_FILTER
   501 					tay
   502 					ELS
   503 					ldy #1
   504 					EIF
   505 					lda (nt),y
   506 					sta trackn_tablelop,x
   507 					iny
   508 					ELS
   509 A76B A0 02			ldy #2
   510 					EIF
   511 A76D B1 76			lda (nt),y
   512 A76F 9D 10 A3			sta trackn_instrlen,x
   513 A772 C8				iny
   514 A773 B1 76			lda (nt),y
   515 A775 9D 14 A3			sta trackn_instrlop,x
   516 A778 C8				iny
   517 A779 B1 76			lda (nt),y
   518 A77B 9D 30 A3			sta trackn_tabletypespeed,x
   519 					IFT FEAT_TABLETYPE||FEAT_TABLEMODE
   520 					and #$3f
   521 					EIF
   522 A77E 9D 40 A3			sta trackn_tablespeeda,x
   523 					IFT FEAT_TABLEMODE
   524 					lda (nt),y
   525 					and #$40
   526 					sta trackn_tablemode,x
   527 					EIF
   528 					IFT FEAT_AUDCTLMANUALSET
   529 A781 C8				iny
   530 A782 B1 76			lda (nt),y
   531 A784 9D 4C A3			sta trackn_audctl,x
   532 A787 C8				iny
   533 					ELS
   534 					ldy #6
   535 					EIF
   536 A788 B1 76			lda (nt),y
   537 A78A 9D 1C A3			sta trackn_volumeslidedepth,x
   538 					IFT FEAT_VOLUMEMIN
   539 					iny
   540 					lda (nt),y
   541 					sta trackn_volumemin,x
   542 					IFT FEAT_EFFECTS
   543 					iny
   544 					EIF
   545 					ELS
   546 					IFT FEAT_EFFECTS
   547 A78D A0 08			ldy #8
   548 					EIF
   549 					EIF
   550 					IFT FEAT_EFFECTS
   551 A78F B1 76			lda (nt),y
   552 A791 9D 24 A3			sta trackn_effdelay,x
   553 					IFT FEAT_EFFECTVIBRATO
   554 A794 C8				iny
   555 A795 B1 76			lda (nt),y
   556 A797 A8				tay
   557 A798 B9 92 A3			lda vibtabbeg,y
   558 A79B 9D 28 A3			sta trackn_effvibratoa,x
   559 					EIF
   560 					IFT FEAT_EFFECTFSHIFT
   561 A79E A0 0A			ldy #10
   562 A7A0 B1 76			lda (nt),y
   563 A7A2 9D 2C A3			sta trackn_effshift,x
   564 					EIF
   565 					EIF
   566 A7A5 A9 80			lda #128
   567 A7A7 9D 20 A3			sta trackn_volumeslidevalue,x
   568 A7AA 9D 00 A3			sta trackn_instrx2,x
   569 A7AD 0A				asl @
   570 A7AE 9D 18 A3			sta trackn_instrreachend,x
   571 A7B1 9D FC A2			sta trackn_shiftfrq,x
   572 A7B4 A8				tay
   573 A7B5 B1 76			lda (nt),y
   574 A7B7 9D 3C A3			sta trackn_tableend,x
   575 A7BA 69 00			adc #0
   576 A7BC 9D 0C A3			sta trackn_instridx,x
   577 A7BF A9 0C			lda #INSTRPAR
   578 A7C1 9D 38 A3			sta trackn_tablea,x
   579 A7C4 A8				tay
   580 A7C5 B1 76			lda (nt),y
   581 A7C7 9D 34 A3			sta trackn_tablenote,x
   582 A7CA			xata_rtshere
   583 					IFT FEAT_SFX
   584 					rts
   585 					ELS
   586 A7CA 4C 54 A7			jmp p2x0
   587 					EIF
   588 A7CD			rmt_play
   589 A7CD			rmt_p0
   590 A7CD 20 FD A8			jsr SetPokey
   591 A7D0			rmt_p1
   592 					IFT FEAT_INSTRSPEED==0||FEAT_INSTRSPEED>1
   593 					dec v_ainstrspeed
   594 					bne rmt_p3
   595 					EIF
   596 					IFT FEAT_INSTRSPEED==0
   597 					lda #$ff
   598 				v_instrspeed	equ *-1
   599 					sta v_ainstrspeed
   600 					ELI FEAT_INSTRSPEED>1
   601 					lda #FEAT_INSTRSPEED
   602 					sta v_ainstrspeed
   603 					EIF
   604 A7D0			rmt_p2
   605 A7D0 CE 50 A3			dec v_aspeed
   606 A7D3 D0 12			bne rmt_p3
   607 A7D5 EE D9 A7			inc v_abeat
   608 A7D8 A9 FF			lda #$ff
   609 = A7D9			v_abeat equ *-1
   610 A7DA C9 FF			cmp #$ff
   611 = A7DB			v_maxtracklen equ *-1
   612 A7DC F0 03			beq p2o3
   613 A7DE 4C B4 A6			jmp GetTrackLine
   614 A7E1			p2o3
   615 A7E1 4C 64 A6			jmp GetSongLineTrackLineInitOfNewSetInstrumentsOnlyRmtp3
   616 A7E4 4C E1 A8		go_ppnext	jmp ppnext
   617 A7E7			rmt_p3
   618 A7E7 A9 A4			lda #>frqtab
   619 A7E9 85 75			sta nr+1
   620 A7EB A2 03		xtracks05sub1	ldx #TRACKS-1
   621 A7ED			pp1
   622 A7ED BD 08 A3			lda trackn_instrhb,x
   623 A7F0 F0 F2			beq go_ppnext
   624 A7F2 85 73			sta ns+1
   625 A7F4 BD 04 A3			lda trackn_instrdb,x
   626 A7F7 85 72			sta ns
   627 A7F9 BC 0C A3			ldy trackn_instridx,x
   628 A7FC B1 72			lda (ns),y
   629 A7FE 85 78			sta reg1
   630 A800 C8				iny
   631 A801 B1 72			lda (ns),y
   632 A803 85 79			sta reg2
   633 A805 C8				iny
   634 A806 B1 72			lda (ns),y
   635 A808 85 7A			sta reg3
   636 A80A C8				iny
   637 A80B 98				tya
   638 A80C DD 10 A3			cmp trackn_instrlen,x
   639 A80F 90 0A			bcc pp2
   640 A811 F0 08			beq pp2
   641 A813 A9 80			lda #$80
   642 A815 9D 18 A3			sta trackn_instrreachend,x
   643 A818			pp1b
   644 A818 BD 14 A3			lda trackn_instrlop,x
   645 A81B 9D 0C A3		pp2	sta trackn_instridx,x
   646 A81E A5 78			lda reg1
   647 					IFT TRACKS>4
   648 					cpx #4
   649 					bcc pp2s
   650 					lsr @
   651 					lsr @
   652 					lsr @
   653 					lsr @
   654 				pp2s
   655 					EIF
   656 A820 29 0F			and #$0f
   657 A822 1D F4 A2			ora trackn_volume,x
   658 A825 A8				tay
   659 A826 B9 00 A5			lda volumetab,y
   660 A829 85 7B			sta tmp
   661 A82B A5 79			lda reg2
   662 A82D 29 0E			and #$0e
   663 A82F A8				tay
   664 A830 B9 82 A3			lda tabbeganddistor,y
   665 A833 85 74			sta nr
   666 A835 A5 7B			lda tmp
   667 A837 19 83 A3			ora tabbeganddistor+1,y
   668 A83A 9D 48 A3			sta trackn_audc,x
   669 A83D			InstrumentsEffects
   670 					IFT FEAT_EFFECTS
   671 A83D BD 24 A3			lda trackn_effdelay,x
   672 A840 F0 21			beq ei2
   673 A842 C9 01			cmp #1
   674 A844 D0 1A			bne ei1
   675 A846 BD FC A2			lda trackn_shiftfrq,x
   676 					IFT FEAT_EFFECTFSHIFT
   677 A849 18				clc
   678 A84A 7D 2C A3			adc trackn_effshift,x
   679 					EIF
   680 					IFT FEAT_EFFECTVIBRATO
   681 A84D 18				clc
   682 A84E BC 28 A3			ldy trackn_effvibratoa,x
   683 A851 79 96 A3			adc vib0,y
   684 					EIF
   685 A854 9D FC A2			sta trackn_shiftfrq,x
   686 					IFT FEAT_EFFECTVIBRATO
   687 A857 B9 AB A3			lda vibtabnext,y
   688 A85A 9D 28 A3			sta trackn_effvibratoa,x
   689 					EIF
   690 A85D 4C 63 A8			jmp ei2
   691 A860			ei1
   692 A860 DE 24 A3			dec trackn_effdelay,x
   693 A863			ei2
   694 					EIF
   695 A863 BC 3C A3			ldy trackn_tableend,x
   696 A866 C0 0D			cpy #INSTRPAR+1
   697 A868 90 30			bcc ei3
   698 A86A BD 40 A3			lda trackn_tablespeeda,x
   699 A86D 10 25			bpl ei2f
   700 A86F			ei2c
   701 A86F 98				tya
   702 A870 DD 38 A3			cmp trackn_tablea,x
   703 A873 D0 07			bne ei2c2
   704 					IFT FEAT_TABLEGO
   705 					lda trackn_tablelop,x
   706 					ELS
   707 A875 A9 0C			lda #INSTRPAR
   708 					EIF
   709 A877 9D 38 A3			sta trackn_tablea,x
   710 A87A D0 03			bne ei2a
   711 A87C			ei2c2
   712 A87C FE 38 A3			inc trackn_tablea,x
   713 A87F			ei2a
   714 A87F BD 04 A3			lda trackn_instrdb,x
   715 A882 85 76			sta nt
   716 A884 BD 08 A3			lda trackn_instrhb,x
   717 A887 85 77			sta nt+1
   718 A889 BC 38 A3			ldy trackn_tablea,x
   719 A88C B1 76			lda (nt),y
   720 					IFT FEAT_TABLEMODE
   721 					ldy trackn_tablemode,x
   722 					beq ei2e
   723 					clc
   724 					adc trackn_tablenote,x
   725 				ei2e
   726 					EIF
   727 A88E 9D 34 A3			sta trackn_tablenote,x
   728 A891 BD 30 A3			lda trackn_tabletypespeed,x
   729 					IFT FEAT_TABLETYPE||FEAT_TABLEMODE
   730 					and #$3f
   731 					EIF
   732 A894			ei2f
   733 A894 38				sec
   734 A895 E9 01			sbc #1
   735 A897 9D 40 A3			sta trackn_tablespeeda,x
   736 A89A			ei3
   737 A89A BD 18 A3			lda trackn_instrreachend,x
   738 A89D 10 18			bpl ei4
   739 A89F BD F4 A2			lda trackn_volume,x
   740 A8A2 F0 13			beq ei4
   741 					IFT FEAT_VOLUMEMIN
   742 					cmp trackn_volumemin,x
   743 					beq ei4
   744 					bcc ei4
   745 					EIF
   746 A8A4 A8				tay
   747 A8A5 BD 20 A3			lda trackn_volumeslidevalue,x
   748 A8A8 18				clc
   749 A8A9 7D 1C A3			adc trackn_volumeslidedepth,x
   750 A8AC 9D 20 A3			sta trackn_volumeslidevalue,x
   751 A8AF 90 06			bcc ei4
   752 A8B1 98				tya
   753 A8B2 E9 10			sbc #16
   754 A8B4 9D F4 A2			sta trackn_volume,x
   755 A8B7			ei4
   756 					IFT FEAT_COMMAND2
   757 					lda #0
   758 					sta frqaddcmd2
   759 					EIF
   760 					IFT FEAT_COMMAND1||FEAT_COMMAND2||FEAT_COMMAND3||FEAT_COMMAND4||FEAT_COMMAND5||FEAT_COMMAND6||FEAT_COMMAND7SETNOTE||FEAT_COMMAND7VOLUMEONLY
   761 A8B7 A5 79			lda reg2
   762 					IFT FEAT_FILTER||FEAT_BASS16
   763 					sta trackn_command,x
   764 					EIF
   765 A8B9 29 70			and #$70
   766 					IFT 1==[FEAT_COMMAND1+FEAT_COMMAND2+FEAT_COMMAND3+FEAT_COMMAND4+FEAT_COMMAND5+FEAT_COMMAND6+[FEAT_COMMAND7SETNOTE||FEAT_COMMAND7VOLUMEONLY]]
   767 A8BB F0 05			beq cmd0
   768 					ELS
   769 					lsr @
   770 					lsr @
   771 					sta jmx+1
   772 				jmx	bcc *
   773 					jmp cmd0
   774 					nop
   775 					jmp cmd1
   776 					IFT FEAT_COMMAND2||FEAT_COMMAND3||FEAT_COMMAND4||FEAT_COMMAND5||FEAT_COMMAND6||FEAT_COMMAND7SETNOTE||FEAT_COMMAND7VOLUMEONLY
   777 					nop
   778 					jmp cmd2
   779 					EIF
   780 					IFT FEAT_COMMAND3||FEAT_COMMAND4||FEAT_COMMAND5||FEAT_COMMAND6||FEAT_COMMAND7SETNOTE||FEAT_COMMAND7VOLUMEONLY
   781 					nop
   782 					jmp cmd3
   783 					EIF
   784 					IFT FEAT_COMMAND4||FEAT_COMMAND5||FEAT_COMMAND6||FEAT_COMMAND7SETNOTE||FEAT_COMMAND7VOLUMEONLY
   785 					nop
   786 					jmp cmd4
   787 					EIF
   788 					IFT FEAT_COMMAND5||FEAT_COMMAND6||FEAT_COMMAND7SETNOTE||FEAT_COMMAND7VOLUMEONLY
   789 					nop
   790 					jmp cmd5
   791 					EIF
   792 					IFT FEAT_COMMAND6||FEAT_COMMAND7SETNOTE||FEAT_COMMAND7VOLUMEONLY
   793 					nop
   794 					jmp cmd6
   795 					EIF
   796 					IFT FEAT_COMMAND7SETNOTE||FEAT_COMMAND7VOLUMEONLY
   797 					nop
   798 					jmp cmd7
   799 					EIF
   800 					EIF
   801 					ELS
   802 					IFT FEAT_FILTER||FEAT_BASS16
   803 					lda reg2
   804 					sta trackn_command,x
   805 					EIF
   806 					EIF
   807 A8BD			cmd1
   808 					IFT FEAT_COMMAND1
   809 A8BD A5 7A			lda reg3
   810 A8BF 4C DE A8			jmp cmd0c
   811 					EIF
   812 A8C2			cmd2
   813 					IFT FEAT_COMMAND2
   814 					lda reg3
   815 					sta frqaddcmd2
   816 					lda trackn_note,x
   817 					jmp cmd0a
   818 					EIF
   819 A8C2			cmd3
   820 					IFT FEAT_COMMAND3
   821 					lda trackn_note,x
   822 					clc
   823 					adc reg3
   824 					sta trackn_note,x
   825 					jmp cmd0a
   826 					EIF
   827 A8C2			cmd4
   828 					IFT FEAT_COMMAND4
   829 					lda trackn_shiftfrq,x
   830 					clc
   831 					adc reg3
   832 					sta trackn_shiftfrq,x
   833 					lda trackn_note,x
   834 					jmp cmd0a
   835 					EIF
   836 A8C2			cmd5
   837 					IFT FEAT_COMMAND5&&FEAT_PORTAMENTO
   838 					IFT FEAT_TABLETYPE
   839 					lda trackn_tabletypespeed,x
   840 					bpl cmd5a1
   841 					ldy trackn_note,x
   842 					lda (nr),y
   843 					clc
   844 					adc trackn_tablenote,x
   845 					jmp cmd5ax
   846 					EIF
   847 				cmd5a1
   848 					lda trackn_note,x
   849 					clc
   850 					adc trackn_tablenote,x
   851 					cmp #61
   852 					bcc cmd5a2
   853 					lda #63
   854 				cmd5a2
   855 					tay
   856 					lda (nr),y
   857 				cmd5ax
   858 					sta trackn_portafrqc,x
   859 					ldy reg3
   860 					bne cmd5a
   861 					sta trackn_portafrqa,x
   862 				cmd5a
   863 					tya
   864 					lsr @
   865 					lsr @
   866 					lsr @
   867 					lsr @
   868 					sta trackn_portaspeed,x
   869 					sta trackn_portaspeeda,x
   870 					lda reg3
   871 					and #$0f
   872 					sta trackn_portadepth,x
   873 					lda trackn_note,x
   874 					jmp cmd0a
   875 					ELI FEAT_COMMAND5
   876 					lda trackn_note,x
   877 					jmp cmd0a
   878 					EIF
   879 A8C2			cmd6
   880 					IFT FEAT_COMMAND6&&FEAT_FILTER
   881 					lda reg3
   882 					clc
   883 					adc trackn_filter,x
   884 					sta trackn_filter,x
   885 					lda trackn_note,x
   886 					jmp cmd0a
   887 					ELI FEAT_COMMAND6
   888 					lda trackn_note,x
   889 					jmp cmd0a
   890 					EIF
   891 A8C2			cmd7
   892 					IFT FEAT_COMMAND7SETNOTE||FEAT_COMMAND7VOLUMEONLY
   893 					IFT FEAT_COMMAND7SETNOTE
   894 					lda reg3
   895 					IFT FEAT_COMMAND7VOLUMEONLY
   896 					cmp #$80
   897 					beq cmd7a
   898 					EIF
   899 					sta trackn_note,x
   900 					jmp cmd0a
   901 					EIF
   902 					IFT FEAT_COMMAND7VOLUMEONLY
   903 				cmd7a
   904 					lda trackn_audc,x
   905 					ora #$f0
   906 					sta trackn_audc,x
   907 					lda trackn_note,x
   908 					jmp cmd0a
   909 					EIF
   910 					EIF
   911 A8C2			cmd0
   912 A8C2 BD F0 A2			lda trackn_note,x
   913 A8C5 18				clc
   914 A8C6 65 7A			adc reg3
   915 A8C8			cmd0a
   916 					IFT FEAT_TABLETYPE
   917 					ldy trackn_tabletypespeed,x
   918 					bmi cmd0b
   919 					EIF
   920 A8C8 18				clc
   921 A8C9 7D 34 A3			adc trackn_tablenote,x
   922 A8CC C9 3D			cmp #61
   923 A8CE 90 07			bcc cmd0a1
   924 A8D0 A9 00			lda #0
   925 A8D2 9D 48 A3			sta trackn_audc,x
   926 A8D5 A9 3F			lda #63
   927 A8D7			cmd0a1
   928 					IFT FEAT_BASS16
   929 					sta trackn_outnote,x
   930 					EIF
   931 A8D7 A8				tay
   932 A8D8 B1 74			lda (nr),y
   933 A8DA 18				clc
   934 A8DB 7D FC A2			adc trackn_shiftfrq,x
   935 					IFT FEAT_COMMAND2
   936 					clc
   937 					adc frqaddcmd2
   938 					EIF
   939 					IFT FEAT_TABLETYPE
   940 					jmp cmd0c
   941 				cmd0b
   942 					cmp #61
   943 					bcc cmd0b1
   944 					lda #0
   945 					sta trackn_audc,x
   946 					lda #63
   947 				cmd0b1
   948 					tay
   949 					lda trackn_shiftfrq,x
   950 					clc
   951 					adc trackn_tablenote,x
   952 					clc
   953 					adc (nr),y
   954 					IFT FEAT_COMMAND2
   955 					clc
   956 					adc frqaddcmd2
   957 					EIF
   958 					EIF
   959 A8DE			cmd0c
   960 A8DE 9D 44 A3			sta trackn_audf,x
   961 A8E1			pp9
   962 					IFT FEAT_PORTAMENTO
   963 					lda trackn_portaspeeda,x
   964 					beq pp10
   965 					dec trackn_portaspeeda,x
   966 					bne pp10
   967 					lda trackn_portaspeed,x
   968 					sta trackn_portaspeeda,x
   969 					lda trackn_portafrqa,x
   970 					cmp trackn_portafrqc,x
   971 					beq pp10
   972 					bcs pps1
   973 					adc trackn_portadepth,x
   974 					bcs pps8
   975 					cmp trackn_portafrqc,x
   976 					bcs pps8
   977 					jmp pps9
   978 				pps1
   979 					sbc trackn_portadepth,x
   980 					bcc pps8
   981 					cmp trackn_portafrqc,x
   982 					bcs pps9
   983 				pps8
   984 					lda trackn_portafrqc,x
   985 				pps9
   986 					sta trackn_portafrqa,x
   987 				pp10
   988 					lda reg2
   989 					and #$01
   990 					beq pp11
   991 					lda trackn_portafrqa,x
   992 					clc
   993 					adc trackn_shiftfrq,x
   994 					sta trackn_audf,x
   995 				pp11
   996 					EIF
   997 A8E1			ppnext
   998 A8E1 CA				dex
   999 A8E2 30 03			bmi rmt_p4
  1000 A8E4 4C ED A7			jmp pp1
  1001 A8E7			rmt_p4
  1002 					IFT FEAT_AUDCTLMANUALSET
  1003 A8E7 AD 4C A3			lda trackn_audctl+0
  1004 A8EA 0D 4D A3			ora trackn_audctl+1
  1005 A8ED 0D 4E A3			ora trackn_audctl+2
  1006 A8F0 0D 4F A3			ora trackn_audctl+3
  1007 A8F3 AA				tax
  1008 					ELS
  1009 					ldx #0
  1010 					EIF
  1011 A8F4			qq1
  1012 A8F4 8E FE A8			stx v_audctl
  1013 					IFT FEAT_FILTER
  1014 					IFT FEAT_FILTERG0L
  1015 					lda trackn_command+0
  1016 					bpl qq2
  1017 					lda trackn_audc+0
  1018 					and #$0f
  1019 					beq qq2
  1020 					lda trackn_audf+0
  1021 					clc
  1022 					adc trackn_filter+0
  1023 					sta trackn_audf+2
  1024 					IFT FEAT_COMMAND7VOLUMEONLY&&FEAT_VOLUMEONLYG2L
  1025 					lda trackn_audc+2
  1026 					and #$10
  1027 					bne qq1a
  1028 					EIF
  1029 					lda #0
  1030 					sta trackn_audc+2
  1031 				qq1a
  1032 					txa
  1033 					ora #4
  1034 					tax
  1035 					EIF
  1036 				qq2
  1037 					IFT FEAT_FILTERG1L
  1038 					lda trackn_command+1
  1039 					bpl qq3
  1040 					lda trackn_audc+1
  1041 					and #$0f
  1042 					beq qq3
  1043 					lda trackn_audf+1
  1044 					clc
  1045 					adc trackn_filter+1
  1046 					sta trackn_audf+3
  1047 					IFT FEAT_COMMAND7VOLUMEONLY&&FEAT_VOLUMEONLYG3L
  1048 					lda trackn_audc+3
  1049 					and #$10
  1050 					bne qq2a
  1051 					EIF
  1052 					lda #0
  1053 					sta trackn_audc+3
  1054 				qq2a
  1055 					txa
  1056 					ora #2
  1057 					tax
  1058 					EIF
  1059 				qq3
  1060 					IFT FEAT_FILTERG0L||FEAT_FILTERG1L
  1061 					cpx v_audctl
  1062 					bne qq5
  1063 					EIF
  1064 					EIF
  1065 					IFT FEAT_BASS16
  1066 					IFT FEAT_BASS16G1L
  1067 					lda trackn_command+1
  1068 					and #$0e
  1069 					cmp #6
  1070 					bne qq4
  1071 					lda trackn_audc+1
  1072 					and #$0f
  1073 					beq qq4
  1074 					ldy trackn_outnote+1
  1075 					lda frqtabbasslo,y
  1076 					sta trackn_audf+0
  1077 					lda frqtabbasshi,y
  1078 					sta trackn_audf+1
  1079 					IFT FEAT_COMMAND7VOLUMEONLY&&FEAT_VOLUMEONLYG0L
  1080 					lda trackn_audc+0
  1081 					and #$10
  1082 					bne qq3a
  1083 					EIF
  1084 					lda #0
  1085 					sta trackn_audc+0
  1086 				qq3a
  1087 					txa
  1088 					ora #$50
  1089 					tax
  1090 					EIF
  1091 				qq4
  1092 					IFT FEAT_BASS16G3L
  1093 					lda trackn_command+3
  1094 					and #$0e
  1095 					cmp #6
  1096 					bne qq5
  1097 					lda trackn_audc+3
  1098 					and #$0f
  1099 					beq qq5
  1100 					ldy trackn_outnote+3
  1101 					lda frqtabbasslo,y
  1102 					sta trackn_audf+2
  1103 					lda frqtabbasshi,y
  1104 					sta trackn_audf+3
  1105 					IFT FEAT_COMMAND7VOLUMEONLY&&FEAT_VOLUMEONLYG2L
  1106 					lda trackn_audc+2
  1107 					and #$10
  1108 					bne qq4a
  1109 					EIF
  1110 					lda #0
  1111 					sta trackn_audc+2
  1112 				qq4a
  1113 					txa
  1114 					ora #$28
  1115 					tax
  1116 					EIF
  1117 					EIF
  1118 A8F7			qq5
  1119 A8F7 8E FE A8			stx v_audctl
  1120 					IFT TRACKS>4
  1121 					IFT FEAT_AUDCTLMANUALSET
  1122 					lda trackn_audctl+4
  1123 					ora trackn_audctl+5
  1124 					ora trackn_audctl+6
  1125 					ora trackn_audctl+7
  1126 					tax
  1127 					ELS
  1128 					ldx #0
  1129 					EIF
  1130 					stx v_audctl2
  1131 					IFT FEAT_FILTER
  1132 					IFT FEAT_FILTERG0R
  1133 					lda trackn_command+0+4
  1134 					bpl qs2
  1135 					lda trackn_audc+0+4
  1136 					and #$0f
  1137 					beq qs2
  1138 					lda trackn_audf+0+4
  1139 					clc
  1140 					adc trackn_filter+0+4
  1141 					sta trackn_audf+2+4
  1142 					IFT FEAT_COMMAND7VOLUMEONLY&&FEAT_VOLUMEONLYG2R
  1143 					lda trackn_audc+2+4
  1144 					and #$10
  1145 					bne qs1a
  1146 					EIF
  1147 					lda #0
  1148 					sta trackn_audc+2+4
  1149 				qs1a
  1150 					txa
  1151 					ora #4
  1152 					tax
  1153 					EIF
  1154 				qs2
  1155 					IFT FEAT_FILTERG1R
  1156 					lda trackn_command+1+4
  1157 					bpl qs3
  1158 					lda trackn_audc+1+4
  1159 					and #$0f
  1160 					beq qs3
  1161 					lda trackn_audf+1+4
  1162 					clc
  1163 					adc trackn_filter+1+4
  1164 					sta trackn_audf+3+4
  1165 					IFT FEAT_COMMAND7VOLUMEONLY&&FEAT_VOLUMEONLYG3R
  1166 					lda trackn_audc+3+4
  1167 					and #$10
  1168 					bne qs2a
  1169 					EIF
  1170 					lda #0
  1171 					sta trackn_audc+3+4
  1172 				qs2a
  1173 					txa
  1174 					ora #2
  1175 					tax
  1176 					EIF
  1177 				qs3
  1178 					IFT FEAT_FILTERG0R||FEAT_FILTERG1R
  1179 					cpx v_audctl2
  1180 					bne qs5
  1181 					EIF
  1182 					EIF
  1183 					IFT FEAT_BASS16
  1184 					IFT FEAT_BASS16G1R
  1185 					lda trackn_command+1+4
  1186 					and #$0e
  1187 					cmp #6
  1188 					bne qs4
  1189 					lda trackn_audc+1+4
  1190 					and #$0f
  1191 					beq qs4
  1192 					ldy trackn_outnote+1+4
  1193 					lda frqtabbasslo,y
  1194 					sta trackn_audf+0+4
  1195 					lda frqtabbasshi,y
  1196 					sta trackn_audf+1+4
  1197 					IFT FEAT_COMMAND7VOLUMEONLY&&FEAT_VOLUMEONLYG0R
  1198 					lda trackn_audc+0+4
  1199 					and #$10
  1200 					bne qs3a
  1201 					EIF
  1202 					lda #0
  1203 					sta trackn_audc+0+4
  1204 				qs3a
  1205 					txa
  1206 					ora #$50
  1207 					tax
  1208 					EIF
  1209 				qs4
  1210 					IFT FEAT_BASS16G3R
  1211 					lda trackn_command+3+4
  1212 					and #$0e
  1213 					cmp #6
  1214 					bne qs5
  1215 					lda trackn_audc+3+4
  1216 					and #$0f
  1217 					beq qs5
  1218 					ldy trackn_outnote+3+4
  1219 					lda frqtabbasslo,y
  1220 					sta trackn_audf+2+4
  1221 					lda frqtabbasshi,y
  1222 					sta trackn_audf+3+4
  1223 					IFT FEAT_COMMAND7VOLUMEONLY&&FEAT_VOLUMEONLYG2R
  1224 					lda trackn_audc+2+4
  1225 					and #$10
  1226 					bne qs4a
  1227 					EIF
  1228 					lda #0
  1229 					sta trackn_audc+2+4
  1230 				qs4a
  1231 					txa
  1232 					ora #$28
  1233 					tax
  1234 					EIF
  1235 					EIF
  1236 				qs5
  1237 					stx v_audctl2
  1238 					EIF
  1239 A8FA			rmt_p5
  1240 					IFT FEAT_INSTRSPEED==0||FEAT_INSTRSPEED>1
  1241 					lda #$ff
  1242 				v_ainstrspeed equ *-1
  1243 					ELS
  1244 A8FA A9 01			lda #1
  1245 					EIF
  1246 A8FC 60				rts
  1247 A8FD			SetPokey
  1248 					IFT STEREOMODE==1		;* L1 L2 L3 L4 R1 R2 R3 R4
  1249 					ldy #$ff
  1250 				v_audctl2 equ *-1
  1251 					lda trackn_audf+0+4
  1252 					ldx trackn_audf+0
  1253 				xstastx01	sta $d210
  1254 					stx $d200
  1255 					lda trackn_audc+0+4
  1256 					ldx trackn_audc+0
  1257 				xstastx02	sta $d211
  1258 					stx $d201
  1259 					lda trackn_audf+1+4
  1260 					ldx trackn_audf+1
  1261 				xstastx03	sta $d212
  1262 					stx $d202
  1263 					lda trackn_audc+1+4
  1264 					ldx trackn_audc+1
  1265 				xstastx04	sta $d213
  1266 					stx $d203
  1267 					lda trackn_audf+2+4
  1268 					ldx trackn_audf+2
  1269 				xstastx05	sta $d214
  1270 					stx $d204
  1271 					lda trackn_audc+2+4
  1272 					ldx trackn_audc+2
  1273 				xstastx06	sta $d215
  1274 					stx $d205
  1275 					lda trackn_audf+3+4
  1276 					ldx trackn_audf+3
  1277 				xstastx07	sta $d216
  1278 					stx $d206
  1279 					lda trackn_audc+3+4
  1280 					ldx trackn_audc+3
  1281 				xstastx08	sta $d217
  1282 					stx $d207
  1283 					lda #$ff
  1284 				v_audctl equ *-1
  1285 				xstysta01	sty $d218
  1286 					sta $d208
  1287 					ELI STEREOMODE==0		;* L1 L2 L3 L4
  1288 A8FD A0 FF			ldy #$ff
  1289 = A8FE			v_audctl equ *-1
  1290 A8FF AD 44 A3			lda trackn_audf+0
  1291 A902 AE 48 A3			ldx trackn_audc+0
  1292 A905 8D 00 D2			sta $d200
  1293 A908 8E 01 D2			stx $d201
  1294 A90B AD 45 A3			lda trackn_audf+1
  1295 A90E AE 49 A3			ldx trackn_audc+1
  1296 A911 8D 02 D2			sta $d200+2
  1297 A914 8E 03 D2			stx $d201+2
  1298 A917 AD 46 A3			lda trackn_audf+2
  1299 A91A AE 4A A3			ldx trackn_audc+2
  1300 A91D 8D 04 D2			sta $d200+4
  1301 A920 8E 05 D2			stx $d201+4
  1302 A923 AD 47 A3			lda trackn_audf+3
  1303 A926 AE 4B A3			ldx trackn_audc+3
  1304 A929 8D 06 D2			sta $d200+6
  1305 A92C 8E 07 D2			stx $d201+6	
  1306 A92F 8C 08 D2			sty $d208
  1307 					ELI STEREOMODE==2		;* L1 R2 R3 L4
  1308 					ldy #$ff
  1309 				v_audctl equ *-1
  1310 					lda trackn_audf+0
  1311 					ldx trackn_audc+0
  1312 					sta $d200
  1313 					stx $d201
  1314 					sta $d210
  1315 					lda trackn_audf+1
  1316 					ldx trackn_audc+1
  1317 					sta $d210+2
  1318 					stx $d211+2
  1319 					lda trackn_audf+2
  1320 					ldx trackn_audc+2
  1321 					sta $d210+4
  1322 					stx $d211+4
  1323 					sta $d200+4
  1324 					lda trackn_audf+3
  1325 					ldx trackn_audc+3
  1326 					sta $d200+6
  1327 					stx $d201+6
  1328 					sta $d210+6
  1329 					sty $d218
  1330 					sty $d208
  1331 					ELI STEREOMODE==3		;* L1 L2 R3 R4
  1332 					ldy #$ff
  1333 				v_audctl equ *-1
  1334 					lda trackn_audf+0
  1335 					ldx trackn_audc+0
  1336 					sta $d200
  1337 					stx $d201
  1338 					lda trackn_audf+1
  1339 					ldx trackn_audc+1
  1340 					sta $d200+2
  1341 					stx $d201+2
  1342 					lda trackn_audf+2
  1343 					ldx trackn_audc+2
  1344 					sta $d210+4
  1345 					stx $d211+4
  1346 					sta $d200+4
  1347 					lda trackn_audf+3
  1348 					ldx trackn_audc+3
  1349 					sta $d210+6
  1350 					stx $d211+6
  1351 					sta $d200+6
  1352 					sty $d218
  1353 					sty $d208
  1354 					EIF
  1355 A932 60				rts
  1356 A933			RMTPLAYEREND
  1511
  1512 = A942			MODUL=$a942	; $A6F4	;$A690	;$A6F4	
  1513 							opt h-
  1514 A933 FF FF 42 A9 FF B6 + 			ins "b12a.rmt"
  1515 							opt h+ 
  1516 							
  1517 								
  1518
  1519 02E0-02E1> 00 1E				run run
  1520 						
